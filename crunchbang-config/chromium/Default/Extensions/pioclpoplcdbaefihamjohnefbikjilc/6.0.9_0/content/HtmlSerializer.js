"undefined"==typeof SAFARI&&(SAFARI=!1);if("undefined"==typeof Browser){Browser={sendToExtension:function(C){window.parent.postMessage(C,"*")}};var msgMap={},msgHandler=function(C){var A=C.data;if(A&&A.name&&msgMap[A.name])msgMap[A.name](C.data)};window.addEventListener("message",msgHandler,!1);Browser.addMessageHandlers=function(C){for(var A in C)msgMap[A]=C[A]}}
function HtmlSerializer(){function C(b,a){a=a.toLowerCase();if(a.match(/^on/i)||a.match(/^data-/i)||-1<ja.indexOf(a))return!1;switch(b){case "a":return-1<e.indexOf(a)||-1<Y.indexOf(a)||-1<"charset coords href hreflang name rel rev shape target type".split(" ").indexOf(a)?!0:!1;case "abbr":return-1<e.indexOf(a)?!0:!1;case "acronym":return-1<e.indexOf(a)?!0:!1;case "address":return-1<e.indexOf(a)?!0:!1;case "area":return-1<e.indexOf(a)||-1<Y.indexOf(a)||-1<"alt coords href nohref shape target".split(" ").indexOf(a)?
!0:!1;case "b":return-1<e.indexOf(a)?!0:!1;case "bdo":return-1<S.indexOf(a)||-1<["dir","lang"].indexOf(a)?!0:!1;case "big":return-1<e.indexOf(a)?!0:!1;case "blockquote":return-1<e.indexOf(a)||-1<["cite"].indexOf(a)?!0:!1;case "br":return-1<S.indexOf(a)||-1<["clear"].indexOf(a)?!0:!1;case "caption":return-1<e.indexOf(a)||-1<["align"].indexOf(a)?!0:!1;case "center":return-1<e.indexOf(a)?!0:!1;case "cite":return-1<e.indexOf(a)?!0:!1;case "code":return-1<e.indexOf(a)?!0:!1;case "col":return-1<e.indexOf(a)||
-1<D.indexOf(a)||-1<["span","valign","width"].indexOf(a)?!0:!1;case "colgroup":return-1<e.indexOf(a)||-1<D.indexOf(a)||-1<["valign"].indexOf(a)?!0:!1;case "dd":return-1<e.indexOf(a)?!0:!1;case "del":return-1<e.indexOf(a)||-1<["cite","datetime"].indexOf(a)?!0:!1;case "dfn":return-1<e.indexOf(a)?!0:!1;case "div":return-1<["evernote_attachment_url","evernote_attachment_name","evernote_attachment_mime"].indexOf(a)||-1<e.indexOf(a)||-1<["align"].indexOf(a)?!0:!1;case "dl":return-1<e.indexOf(a)||-1<["compact"].indexOf(a)?
!0:!1;case "dt":return-1<e.indexOf(a)?!0:!1;case "em":return-1<e.indexOf(a)?!0:!1;case "font":return-1<S.indexOf(a)||-1<Z.indexOf(a)||-1<["color","face","size"].indexOf(a)?!0:!1;case "h1":return-1<e.indexOf(a)||-1<["align"].indexOf(a)?!0:!1;case "h2":return-1<e.indexOf(a)||-1<["align"].indexOf(a)?!0:!1;case "h3":return-1<e.indexOf(a)||-1<["align"].indexOf(a)?!0:!1;case "h4":return-1<e.indexOf(a)||-1<["align"].indexOf(a)?!0:!1;case "h5":return-1<e.indexOf(a)||-1<["align"].indexOf(a)?!0:!1;case "h6":return-1<
e.indexOf(a)||-1<["align"].indexOf(a)?!0:!1;case "hr":return-1<e.indexOf(a)||-1<["align","noshade","size","width"].indexOf(a)?!0:!1;case "i":return-1<e.indexOf(a)?!0:!1;case "img":return-1<e.indexOf(a)||-1<"align alt border height hspace ismap longdesc name src usemap vspace width".split(" ").indexOf(a)?!0:!1;case "ins":return-1<e.indexOf(a)||-1<["cite","datetime"].indexOf(a)?!0:!1;case "kbd":return-1<e.indexOf(a)?!0:!1;case "li":return-1<e.indexOf(a)||-1<["type","value"].indexOf(a)?!0:!1;case "map":return-1<
Z.indexOf(a)||-1<["name","title"].indexOf(a)?!0:!1;case "ol":return-1<e.indexOf(a)||-1<["compact","start","type"].indexOf(a)?!0:!1;case "p":return-1<e.indexOf(a)||-1<["align"].indexOf(a)?!0:!1;case "pre":return-1<e.indexOf(a)||-1<["width"].indexOf(a)?!0:!1;case "q":return-1<e.indexOf(a)||-1<["cite"].indexOf(a)?!0:!1;case "s":return-1<e.indexOf(a)?!0:!1;case "samp":return-1<e.indexOf(a)?!0:!1;case "small":return-1<e.indexOf(a)?!0:!1;case "span":return-1<e.indexOf(a)?!0:!1;case "strike":return-1<e.indexOf(a)?
!0:!1;case "strong":return-1<e.indexOf(a)?!0:!1;case "sub":return-1<e.indexOf(a)?!0:!1;case "sup":return-1<e.indexOf(a)?!0:!1;case "table":return-1<e.indexOf(a)||-1<"align bgcolor border cellpadding cellspacing summary width".split(" ").indexOf(a)?!0:!1;case "tbody":return-1<e.indexOf(a)||-1<D.indexOf(a)||-1<["valign"].indexOf(a)?!0:!1;case "td":return-1<e.indexOf(a)||-1<D.indexOf(a)||-1<"abbr bgcolor colspan height nowrap rowspan valign width".split(" ").indexOf(a)?!0:!1;case "tfoot":return-1<e.indexOf(a)||
-1<D.indexOf(a)||-1<["valign"].indexOf(a)?!0:!1;case "th":return-1<e.indexOf(a)||-1<D.indexOf(a)||-1<"abbr bgcolor colspan height nowrap rowspan valign width".split(" ").indexOf(a)?!0:!1;case "thead":return-1<e.indexOf(a)||-1<D.indexOf(a)||-1<["valign"].indexOf(a)?!0:!1;case "tr":return-1<e.indexOf(a)||-1<D.indexOf(a)||-1<["bgcolor","valign"].indexOf(a)?!0:!1;case "tt":return-1<e.indexOf(a)?!0:!1;case "u":return-1<e.indexOf(a)?!0:!1;case "ul":return-1<e.indexOf(a)||-1<["compact","type"].indexOf(a)?
!0:!1;case "var":return-1<e.indexOf(a)?!0:!1}}function A(b){b=b.toUpperCase();return-1==ka.indexOf(b)}function J(b){var a=b.nodeName,a=a.toUpperCase();return"INPUT"==a&&b.type&&"image"==b.type.toLowerCase()?"img":"BODY"==a||"HTML"==a||"FORM"==a?"div":"LABEL"==a?"span":"FIELDSET"==a?"div":"LEGEND"==a?"span":"IFRAME"==a||"EMBED"==a?"div":"CANVAS"==a?"img":-1<la.indexOf(a)?"div":A(a)?-1==ma.indexOf(a)?"span":a.toLowerCase():a.toLowerCase()}function $(b){if(aa(b))if(G.length>=T)log.warn("Hit style cap of "+
T+" styles. Stopping.");else if(!b.cssRules&&b.href)z.push({href:b.href,owner:b.ownerNode}),H++,G.push(b.href),K.push(b.href),Browser.sendToExtension({name:"main_getTextResource",href:b.href});else{var a=b.cssRules,c=null;if(b.ownerNode&&b.ownerNode.dataset&&b.ownerNode.dataset.evernoteOriginatingUrl){var d=/(.+)\//.exec(b.ownerNode.dataset.evernoteOriginatingUrl);d&&(c=d[1])}for(d=0;d<a.length;d++)if(a[d].type==CSSRule.IMPORT_RULE){var g=a[d].styleSheet.href;/^https?:\/\//.test(a[d].href)||/^\/\//.test(a[d].href)||
c&&(g="/"===a[d].href[0]?c+a[d].href:c+"/"+a[d].href);-1==G.indexOf(g)&&(z.push({href:g,owner:b.ownerNode}),H++,G.push(g),K.push(g),Browser.sendToExtension({name:"main_getTextResource",href:g}))}else a[d].type==CSSRule.MEDIA_RULE&&aa(a[d])&&z.push(a[d]);z.push(b)}}function ba(b,a,c){c=c.trim();b=c.match(/^http/i)?c:c.match(/^\//)?b.replace(/^(.*?:\/\/[^\/]+).*$/,"$1")+c:b.replace(/^(.*\/)/,"$1")+c;return"url('"+b+"')"}function na(b,a){function c(){for(var a=[g],b=0;b<arguments.length;b++)a.push(arguments[b]);
return ba.apply(this,a)}var d=s.document.location.href.replace(/[^\/]+$/,""),g=a.replace(/[^\/]+$/,"");if(d==g)return b;b&&(b=b.replace(/url\(["']?(.*?)["']?\)/g,c));return b}function oa(){E||(E=setInterval(function(){if(G.length>=T)E&&(clearInterval(E),E=0),U(F);else{var b=0;a:for(;b<L.length;b++)for(var a=L[b][0],c=L[b][1],d=0;d<s.document.styleSheets.length;d++){var g=s.document.styleSheets[d];if(g.ownerNode===a){z[c]=g;$(s.document.styleSheets[d]);L.splice(b,1);H--;break a}}0==H&&(E&&(clearInterval(E),
E=0),U(F))}},100))}function aa(b){if(b.media&&b.media.length){for(var a=0;a<b.media.length;a++){var c=b.media[a].toLowerCase();if(c.match(/\bscreen\b/i)||c.match(/\ball\b/i))return!0}return!1}return!0}function U(b){setTimeout(function(){O=[];for(var a=0;a<z.length;a++){var c=z[a];if(c.cssRules)for(var d=0;d<c.cssRules.length;d++){var g=c.cssRules[d];g.selectorText&&g.selectorText.match(/(:?:before)|(:?:after)/)&&O.push(g)}}ca=new Date;l=[];l.push({element:b,string:"",i:0,after:null});y()},300)}function V(b){var a=
document.createElement("div");a.textContent=b;return a.innerHTML}function y(){da++;if(0==da%500)setTimeout(y,25);else{var b=l[l.length-1];b||P("");if(0==b.i){if(!A(J(b.element))){l.pop();y();return}var a;a:{a=b.element;if(a.parentNode&&a!=F){var c=a.parentNode.nodeName,c=c.toLowerCase();if("dl"==c&&(a=J(a),"dd"!=a&&"dt"!=a)){a=!1;break a}}a=!0}if(!a){log.warn('discarding invalid DL child "'+b.element.nodeName+'"');l.pop();y();return}if(u&&b.element!=u.commonAncestorContainer&&!u.intersectsNode(b.element)){l.pop();
y();return}if(u&&b.element===u.endContainer&&0===u.endOffset){l.pop();y();return}if(-1<"evernoteClipperResult evernoteAuthTools evernoteFilingTools evernoteGlobalTools evernoteUserTools evernoteShareTools evernoteEmailSharing evernoteOptionsPage evernoteClearlyArticle".split(" ").indexOf(b.element.id)){l.pop();y();return}"string"==typeof b.element.id&&"movie_player"==b.element.id&&"application/x-shockwave-flash"==b.element.getAttribute("type")&&s.document.location.href.match(/v=(.*?)(&|$)/)?(a=s.document.location.href.match(/v=(.*?)(&|$)/)[1],
a="<a href='"+s.document.location.href+"'><img src='http://img.youtube.com/vi/"+a+"/0.jpg'></img></a>"):a="";if(a){b.string+=a;l.pop();l.length?(l[l.length-1].string=b.string,y()):P(b.string);return}var d;a:{var g=b.element;if("iframe"==g.nodeName.toLowerCase()&&(a="",g.dataset&&g.dataset.en_id&&Q&&Q[g.dataset.en_id])){a=Q[g.dataset.en_id];c=W(g);g.width&&(c.map.width={value:g.width+"px"});g.height&&(c.map.height={value:g.height+"px"});c.map.position&&"static"!==c.map.position.value||(c.map.position=
{value:"relative"});g="";for(d in c.map)g+=d+":"+c.map[d].value+";";g=g?' style="'+M(g)+'"':"";d="<div"+g+">"+a+"</div>";break a}d=null}if(d){b.string+=d;l.pop();l.length?(l[l.length-1].string=b.string,y()):P(b.string);return}d={};if(I){d=b.element;try{if("application/x-shockwave-flash"===d.getAttribute("type")&&d.getAttribute("flashvars")){var e=/iurlsd=(.+?)(&|$)/.exec(d.getAttribute("flashvars"));e||(e=/iurl=(.+?)(&|$)/.exec(d.getAttribute("flashvars")));e&&(d.style.backgroundImage="url("+decodeURIComponent(e[1])+
")",d.style.backgroundPosition="50%",d.style.backgroundRepeat="no-repeat");if(e=/video_id=(.+?)(&|$)/.exec(d.getAttribute("flashvars"))){var k=document.createElement("a");k.href="https://www.youtube.com/watch?v="+e[1];k.target="_blank";k.style.display="block";k.style.width="100%";k.style.height="100%";d.appendChild(k)}}}catch(q){log.warn("problem with adding pic to embedded youtube video")}d=W(b.element);d.after&&(b.after=d.after)}if(d.map&&d.map.display&&"none"==d.map.display.value){l.pop();y();
return}e=J(b.element);b.string+="<"+e;k=b.element;"img"==k.nodeName.toLowerCase()&&(k.attributes.width||k.setAttribute("width",k.width),k.attributes.height||k.setAttribute("height",k.height));if("CANVAS"==b.element.nodeName)try{b.string+=' src="'+b.element.toDataURL()+'"'}catch(n){}if(b.element.attributes&&b.element.attributes.length)for(b.i=0;b.i<b.element.attributes.length;b.i++)if(C(e,b.element.attributes[b.i].name)){k=b;a=k.string;var g=b.element,c=b.element.attributes[b.i],p=null;"href"==c.name.toLowerCase()?
((g=g.href)&&g.match(/^javascript/i)&&(g="#"),p=M(g)):"src"==c.name.toLowerCase()&&(g=g.src,""==c.value.trim()&&(g=""),g&&g.match(/^javascript/i)&&(g="#"),p=M(g));p||(p=M(c.value.replace(/\u000A/g,"")));k.string=a+(" "+(c.name+'="'+p+'"'))}I&&"map"!=e&&(b.string+=d.style);b.string+=">";I&&d.before&&(b.string+=d.before);b.i=0}for(;b.i<b.element.childNodes.length;){if(b.element.childNodes[b.i].nodeType==Node.TEXT_NODE)e=u&&b.element.childNodes[b.i]===u.startContainer?V(b.element.childNodes[b.i].textContent.substr(u.startOffset)):
u&&b.element.childNodes[b.i]===u.endContainer?V(b.element.childNodes[b.i].textContent.substr(0,u.endOffset)):u&&!u.intersectsNode(b.element.childNodes[b.i])?"":V(b.element.childNodes[b.i].textContent),b.string+=e;else if(b.element.childNodes[b.i].nodeType==Node.ELEMENT_NODE){l.push({element:b.element.childNodes[b.i],string:b.string,i:0,after:null});b.i++;y();return}b.i++}I&&b.after&&(b.string+=b.after);b.string+="</"+J(b.element)+">";l.pop();l.length?(l[l.length-1].string=b.string,y()):P(b.string)}}
function ea(b){var a={};b=b.split(/;(?!.[^\(]+?\))\s*/);for(var c=0;c<b.length;c++)if(b[c]=b[c].trim(),b[c]){var d=b[c].indexOf(":"),g=b[c].substr(0,d).trim(),d=b[c].substr(d+1).trim();g&&d&&(/url\(.+?(data:.+?;.+?,.+?)\)/.test(d)&&(d="url("+/url\(.+?(data:.+?;.+?,.+?)\)/.exec(d)[1]+")"),/url\(\/\/(.+?)\)/.test(d)&&(d="url(http://"+/url\(\/\/(.+?)\)/.exec(d)[1]+")"),a[g.toLowerCase()]=d)}if(a["background-position"]&&a["background-repeat"]&&"0px 50%"==a["background-position"].trim()&&"initial initial"==
a["background-repeat"].trim()){for(var e in a)e.match(/background/)&&delete a[e];a.background="0"}return a}function fa(b){var a={};if(b.style.cssText){b.style.savedCssObj||(b.style.savedCssObj=ea(b.style.cssText));b=b.style.savedCssObj;b["counter-reset"]&&(a["counter-reset"]=b["counter-reset"]);b["counter-increment"]&&(a["counter-increment"]=b["counter-increment"]);for(var c in b)a[c]=b[c]}return a}function pa(b){b.hasAttribute("background")&&(b.style.backgroundImage="url("+b.getAttribute("background")+
")");b.hasAttribute("bgcolor")&&(b.style.backgroundColor=b.getAttribute("bgcolor"));if(b.hasAttribute("height")){var a=b.getAttribute("height");-1<a.indexOf("%")||-1<a.indexOf("px")?b.style.height=a:b.style.height=parseInt(a)+"px"}b.hasAttribute("text")&&(b.style.color=b.getAttribute("text"));b.hasAttribute("width")&&(a=b.getAttribute("width"),-1<a.indexOf("%")||-1<a.indexOf("px")?b.style.width=a:b.style.width=parseInt(a)+"px")}function qa(b){for(var a=[],c=0;c<z.length;c++){var d=z[c];if(d.cssRules)for(var g=
b,e=a,k=0;k<d.cssRules.length;k++){var q=d.cssRules[k],n=g,p=e;try{var f=!1;n.matchesSelector?f=n.matchesSelector(q.selectorText):n.mozMatchesSelector?f=n.mozMatchesSelector(q.selectorText):n.webkitMatchesSelector&&(f=n.webkitMatchesSelector(q.selectorText));f&&p.push(q)}catch(h){}}}return a}function ra(b){var a={ids:{regex:/#[A-Z]+/ig,count:0},classes:{regex:/\.[A-Z]+/ig,count:0},attrs:{regex:/\[.*?\]/g,count:0},pseudos:{regex:/:+[A-Z]+/ig,count:0},pseudoEls:{regex:/:+(first-line|first-letter|before|after)/ig,
count:0},types:{regex:/(^|\s)[A-Z]+/ig,count:0}},c;for(c in a)for(var d=a[c].regex;d.exec(b);)a[c].count++;a.pseudoClasses={};a.pseudoClasses.count=a.pseudos.count-a.pseudoEls.count;return 65536*a.ids.count+256*(a.classes.count+a.attrs.count+a.pseudoClasses.count)+(a.types.count+a.pseudoEls.count)}function sa(b){for(var a=[],c=0,d=0,e="",d=0;d<b.length;d++)e?b[d]==e&&(e=""):"'"==b[d]||'"'==b[d]?e=b[d]:","==b[d]&&(a.push(b.substring(c,d).trim()),c=d+1);a.push(b.substr(c).trim());return a}function ta(b,
a){var c=b.nodeName.toLowerCase();"table"!=c&&"caption"!=c||"CSS1Compat"!=s.document.compatMode||(a["font-size"]={value:"inherit",score:0},a["font-weight"]={value:"inherit",score:0},a["font-style"]={value:"inherit",score:0},a["font-variant"]={value:"inherit",score:0})}function ua(b,a){"padding"==b?(delete a["padding-top"],delete a["padding-bottom"],delete a["padding-left"],delete a["padding-right"]):"margin"==b&&(delete a.margintop,delete a["margin-bottom"],delete a["margin-left"],delete a["margin-right"])}
function W(b,a){pa(b);B=s.document.querySelector("base");!SAFARI&&B&&B.parentNode.removeChild(B);var c="",d=null,e={},l={};b.attributes&&b.attributes.style&&(d=ea(b.attributes.style.value));var k={};ta(b,k);var q;if((q=!s.getMatchedCSSRules||SAFARI&&B?qa(b):s.getMatchedCSSRules(b))&&q.length)for(var n=0;n<q.length;n++){var p=0,f=!1;q[n].selectorText.match(/:visited/i)&&(f=!0);for(var h=sa(q[n].selectorText),v=0;v<h.length;v++){var w;try{w=b.webkitMatchesSelector(h[v])}catch(u){log.warn("Couldn't match against selector "+
h[v]+" in: "+q[n].selectorText),log.exception(u)}if(w){var f=!1,t=ra(h[v]);t>=p&&(p=t)}}if(!f){var t=fa(q[n]),m;for(m in t)if(f=m.replace(/^-/,"").replace(/-[a-z]/g,function(a){return a[1].toUpperCase()}),q[n].style[f]){if("counterIncrement"==f){if(f=t[m].split(/\s+/),0<f.length){for(h=0;h<f.length;)x[f[h]]||(x[f[h]]=0),/^\d+$/.test(f[h+1])?(x[f[h]]+=parseInt(f[h+1]),h+=2):x[f[h++]]++;continue}}else if("counterReset"==f&&(f=t[m].split(/\s+/),0<f.length)){for(h=0;h<f.length;)/^\d+$/.test(f[h+1])?(x[f[h]]=
parseInt(f[h+1]),h+=2):x[f[h++]]=0;continue}f=0;k[m]&&(f=k[m].score);h=p;t[m].match(/!important\s*$/i)&&(h+=16777216,t[m]=t[m].replace(/\s*!important\s*$/i,""));h>=f&&(ua(m,k),k[m]={value:t[m],score:h})}}}for(n=0;n<O.length;n++){w=O[n];var y;if(b.webkitMatchesSelector)try{y=b.webkitMatchesSelector(w.selectorText.replace(/(:?:before)|(:?:after)/g,""))}catch(A){}if(y){p=q=!1;w.selectorText.match(/:?:before/)&&(q=!0);w.selectorText.match(/:?:after/)&&(p=!0);for(m in k)q&&ga[m.toLowerCase()]&&(e[m]=k[m].value),
p&&ga[m.toLowerCase()]&&(l[m]=k[m].value);w=fa(w);for(m in w)q&&(e[m]=w[m]),p&&(l[m]=w[m])}}q=[e,l];for(p=0;p<q.length;p++){w=q[p];var r=t="",z=0;for(v in w){if("content"==v)r=w[v],r=r.trim(),r=r.replace(/\s+!important$/,""),"none"==r&&(r='""'),r.match(/^'/)?r=r.replace(/^'(.*?)'.*/,"$1"):r.match(/^"/)&&(r=r.replace(/^"(.*?)".*/,"$1")),r.match(/^url\((.*)\)/)?r="<img src='"+r.match(/^url\((.*)\)/)[1]+"'></img>":r.match(/^\s*counter\(.*?\)/)?(f=r.match(/^\s*counter\((.*?)\)/)[1].split(",")[0],x[f]&&
(r=x[f])):r.match(/^\s*attr\((.*?)\)/)?(f=r.match(/^\s*attr\((.*?)\)/)[1],r=b.getAttribute(f)?b.getAttribute(f):""):r.match(/^\s*-webkit-image-set\(.+\)/)&&(t+="background:"+r+";",r="");else if("counter-increment"==v)for(f=w[v].split(/\s+/),h=0;h<f.length;)x[f[h]]||(x[f[h]]=0),/^\d+$/.test(f[h+1])?(x[f[h]]+=parseInt(f[h+1]),h+=2):x[f[h++]]++;else if("counter-reset"==v)for(f=w[v].split(/\s+/),h=0;h<f.length;)/^\d+$/.test(f[h+1])?(x[f[h]]=parseInt(f[h+1]),h+=2):x[f[h++]]=0;else t+=v+":"+w[v]+";";z++}z&&
(t='<span style="'+t+'">'+GlobalUtils.escapeXML(""+r)+"</span>",0==p?e=t:l=t)}"string"!=typeof e&&(e=null);"string"!=typeof l&&(l=null);b==F&&(a=ha);if(a)for(n=0;n<a.length;n++)k[a[n]]&&delete k[a[n]];va(b,k);wa(k);if(d)for(m in v=/url\(['"]?(.*?)['"]?\)/i,d)v.test(d[m])&&(q=v.exec(d[m])[1],p=s.document.location.href,B&&B.href&&(p=B.href),p=ba(p,y,q),d[m]=d[m].replace('url("'+q+'")',p).replace("url('"+q+"')",p).replace("url("+q+")",p)),k[m]={value:d[m]};for(n in k)c+=n+":"+k[n].value+";";c=c?' style="'+
M(c)+'"':"";!SAFARI&&B&&s.document.head.insertBefore(B,s.document.head.firstChild);B=null;return{style:c,before:e,after:l,map:k}}function va(b,a){if(a.height&&a.height.value.match(/%$/)){var c=a.height.value;try{"fixed"!=s.getComputedStyle(b).position&&(s.getComputedStyle(b.parentNode).height||(c="auto"))}catch(d){}a.height.value=c}}function wa(b){for(var a="-webkit-user-select -moz-user-select -ms-user-select user-select -webkit-user-modify -moz-user-modify -ms-user-modify user-modify".split(" "),
c=0;c<a;c++)b[a[c]]&&delete b[a[c]]}function P(b){X=!1;ia=new Date;var a="",c="";if(I){for(var c=a="",d=F.parentNode;d&&d.parentNode;){var e=W(d,ha).style,l=J(d);A(l)&&(a="<"+l+e+">"+a,c=c+"</"+l+">");d=d.parentNode}a='<div style="font-size: 16px">'+a;c+="</div>"}b=a+b+c;for(c=0;c<N.length;c++)N[c].parentNode.removeChild(N[c]);N=[];a=Math.round((ia.valueOf()-ca.valueOf())/100)/10+"s";for(c=0;c<R.length;c++)try{R[c](b,a)}catch(k){log.warn("Couldn't run 'serialize' callback: "+k.stack||k.trace)}R=[]}
function M(b){if(!b)return"";var a=document.createElement("div");a.textContent=b;b=a.innerHTML;return b.replace(/"/g,"'")}var K=[],x={},H=0,z=[],F,u,I,R=[],N=[],da=0,l=[],X=!1,O=[],Q,s,B=null,T=100,G=[],ca,ia,ma="A ABBR ACRONYM ADDRESS AREA B BDO BIG BLOCKQUOTE BR CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIV DL DT EM FONT H1 H2 H3 H4 H5 H6 HIGHLIGHT HR I IMG INS KBD LI MAP OL P PRE Q S SAMP SMALL SPAN STRIKE STRONG SUB SUP TABLE TBODY TD TFOOT TH THEAD TR TT U UL VAR".split(" "),la="ARTICLE ASIDE DETAILS FOOTER FIGURE FIGCAPTION HEADER HGROUP NAV SECTION SUMMARY".split(" "),
ka="APPLET BASE BASEFONT BGSOUND BLINK BODY BUTTON DIR EMBED FIELDSET FORM FRAME FRAMESET HEAD HTML IFRAME ILAYER INPUT ISINDEX LABEL LAYER LEGEND LINK MARQUEE MENU META NOEMBED NOFRAMES NOSCRIPT OBJECT OPTGROUP OPTION PARAM PLAINTEXT SCRIPT SELECT STYLE TEXTAREA TITLE XML".split(" "),ja="id class accesskey data dynsrc tabindex style".split(" "),S=["style","title"],Z=["lang","xml:lang","dir"],Y=["accesskey","tabindex"],e=["style","title","lang","xml:lang","dir"],D=["align","char","charoff"],ha="border border-bottom border-bottom-color border-bottom-style border-bottom-width border-collapse border-color border-left border-left-color border-left-style border-left-width border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-style border-top-width border-width bottom clear display float height layout-flow layout-grid layout-grid-char layout-grid-char-spacing layout-grid-line layout-grid-mode layout-grid-type left margin margin-bottom margin-left margin-right margin-top max-height max-width min-height min-width padding padding-bottom padding-left padding-right padding-top position right size table-layout top visibility width z-index".split(" ");
Browser.addMessageHandlers({content_textResource:function(b,a,c){a=K.indexOf(b.href);if(-1==a){if(K.length)return}else K.splice(a,1);for(a=0;a<z.length;a++)if(c=z[a],c.href===b.href){var d=na(b.responseText,c.href);b=s.document.createElement("style");b.type="text/css";b.textContent=d;b.dataset.evernoteOriginatingUrl=c.href;for(var d=[],e=0;e<s.document.styleSheets.length;e++)d.push(s.document.styleSheets[e]);c.owner?c.owner.parentNode.insertBefore(b,c.owner):s.document.head.appendChild(b);N.push(b);
L.push([b,a]);oa();break}}});var L=[],E=0,ga={"border-collapse":!0,"border-spacing":!0,"caption-side":!0,color:!0,cursor:!0,direction:!0,"empty-cells":!0,"font-family":!0,"font-size":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,font:!0,"letter-spacing":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,"list-style":!0,orphans:!0,quotes:!0,"text-align":!0,"text-indent":!0,"text-transform":!0,visibility:!0,"white-space":!0,widows:!0,"word-spacing":!0};this.serialize=
function(b,a,c,d,e,l){(s=l)||(s=window);d&&R.push(d);if(X)log.warn("Called serialize while blocked. Added callback but won't change base element.");else{X=!0;F=b;u=a;I=c;Q=e;H=0;G=[];x={};for(b=0;b<s.document.styleSheets.length;b++)$(s.document.styleSheets[b]);0==H&&U(F)}};Object.preventExtensions(this)}Object.preventExtensions(HtmlSerializer);
