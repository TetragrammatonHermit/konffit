var serializeFrame;
(function(){function e(){return document.querySelectorAll("iframe:not(#evernoteAuthTools):not(#evernoteFilingTools):not(#evernoteGlobalTools):not(#evernoteUserTools):not(#evernoteShareTools):not(#evernoteEmailSharing):not(#evernoteOptionsPage)")}function h(a){window.parent.postMessage({name:"EN_serialized",data:a,id:document.body.dataset.en_id},"*")}var f={},g={};window.addEventListener("message",function(a){if(a.data&&a.data.name&&"EN_serialized"==a.data.name){if(window!=window.parent){f[a.data.id]=a.data.data;
var b=0,d;for(d in f)b++;d=0;for(var c in g)d++;b==d&&"undefined"!==typeof document.body.dataset.en_id&&(new HtmlSerializer).serialize(document.documentElement,null,!0,h,f)}}else if(a.data&&a.data.name&&"EN_youAre"==a.data.name)document.body.dataset.en_id&&document.body.dataset.en_id==a.data.id||(document.body.dataset.en_id=a.data.id,a.source.postMessage({name:"EN_iAm",id:a.data.id},"*"));else if(a.data&&a.data.name&&"EN_iAm"==a.data.name)g[a.data.id]=a.source;else if(a.data&&a.data.name&&"EN_frameReady"==
a.data.name)for(b=e(),c=0;c<b.length;c++){if(b[c].dataset.en_id){if(d=b[c].dataset.en_id,g[d])continue}else d=Math.floor(1E8*Math.random()).toString(),b[c].dataset.en_id=d;b[c].contentWindow.postMessage({name:"EN_youAre",id:d},"*")}if(a.data&&a.data.name&&"content_textResource"==a.data.name)for(b=e(),c=0;c<b.length;c++)b[c].contentWindow.postMessage(a.data,"*")},!1);window!=window.parent&&window.parent.postMessage({name:"EN_frameReady"},"*");serializeFrame=function(){"undefined"!==typeof document.body.dataset.en_id&&
0==e().length&&(new HtmlSerializer).serialize(document.documentElement,null,!0,h)}})();
