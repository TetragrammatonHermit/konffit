if(window===window.parent){var flags=["gmailTooltip"],tooltip,bootstrapInfo,pageDoneLoading=!1,visible="undefined"===typeof document.hidden?!0:!document.hidden,inited=!1,removeGmailTooltip=function(){tooltip&&tooltip.parentElement&&(tooltip.parentElement.removeChild(tooltip),tooltip=null)},init=function(){!inited&&pageDoneLoading&&visible&&(inited=!0,Browser.sendToExtension({name:"main_isAuthenticated",type:"tooltip",bootstrapInfo:{name:null}}))},isGmailThread=function(){return/^https:\/\/mail\.google\.com\/mail\//.test(document.location.href)&&
0<document.querySelectorAll("span > div > span > [src='images/cleardot.gif']").length?!0:!1},msgHandlerIsAuthenticated=function(a,b,c){if(a.auth){for(b=0;b<flags.length;b++)Browser.sendToExtension({name:"getPersistentFlag",key:flags[b]+a.auth.userId,set:!0,setValue:!0});a.bootstrapInfo&&(bootstrapInfo=a.bootstrapInfo)}},msgHandlerReceivePersistentFlag=function(a,b,c){/^gmailTooltip/.test(a.key)&&!0!=a.value&&isGmailThread()&&showTooltip("gmailTooltip")},showTooltip=function(a){tooltip=document.createElement("iframe");
tooltip.style.height="141px";tooltip.style.width="316px";tooltip.style.border="none";tooltip.style.position="fixed";tooltip.style.top="30px";tooltip.style.right="30px";tooltip.style.borderRadius="5px";tooltip.style.border="2px solid rgba(34, 40, 44, 0.38)";tooltip.style.zIndex="2147483647";tooltip.src=Browser.extension.getURL("content/pdf_tooltip/pdf_tooltip.html#"+a);document.documentElement.appendChild(tooltip)};window.addEventListener("message",function(a){"closePdfTooltip"==a.data.name&&removeGmailTooltip()});
Browser.addMessageHandlers({receivePersistentFlag:msgHandlerReceivePersistentFlag,tooltip_isAuthenticated:msgHandlerIsAuthenticated});document.addEventListener("visibilitychange",function(){visible=!document.hidden||visible;init()})};
