// Markup version:1.0.2.250 - 2013-12-10 - This was manually edited by Johnathan Hebert to add a fix for UTF8 text on stamp labels
function stackBlurCanvasRGBA(t,e,n,i){if(!(isNaN(i)||1>i)){i|=0;var o,r,s,a,l,c,h,u,p,d,f,g,m,y,v,x,w,b,A,T,C,E,S,k,D=i+i+1,L=e-1,B=n-1,M=i+1,R=M*(M+1)/2,P=new BlurStack,I=P;for(s=1;D>s;s++)if(I=I.next=new BlurStack,s==M)var O=I;I.next=P;var F=null,N=null;h=c=0;var z=mul_table[i],U=shg_table[i];for(r=0;n>r;r++){for(x=w=b=A=u=p=d=f=0,g=M*(T=t[c]),m=M*(C=t[c+1]),y=M*(E=t[c+2]),v=M*(S=t[c+3]),u+=R*T,p+=R*C,d+=R*E,f+=R*S,I=P,s=0;M>s;s++)I.r=T,I.g=C,I.b=E,I.a=S,I=I.next;for(s=1;M>s;s++)a=c+((s>L?L:s)<<2),u+=(I.r=T=t[a])*(k=M-s),p+=(I.g=C=t[a+1])*k,d+=(I.b=E=t[a+2])*k,f+=(I.a=S=t[a+3])*k,x+=T,w+=C,b+=E,A+=S,I=I.next;for(F=P,N=O,o=0;e>o;o++)t[c+3]=S=f*z>>U,0!=S?(S=255/S,t[c]=(u*z>>U)*S,t[c+1]=(p*z>>U)*S,t[c+2]=(d*z>>U)*S):t[c]=t[c+1]=t[c+2]=0,u-=g,p-=m,d-=y,f-=v,g-=F.r,m-=F.g,y-=F.b,v-=F.a,a=h+((a=o+i+1)<L?a:L)<<2,x+=F.r=t[a],w+=F.g=t[a+1],b+=F.b=t[a+2],A+=F.a=t[a+3],u+=x,p+=w,d+=b,f+=A,F=F.next,g+=T=N.r,m+=C=N.g,y+=E=N.b,v+=S=N.a,x-=T,w-=C,b-=E,A-=S,N=N.next,c+=4;h+=e}for(o=0;e>o;o++){for(w=b=A=x=p=d=f=u=0,c=o<<2,g=M*(T=t[c]),m=M*(C=t[c+1]),y=M*(E=t[c+2]),v=M*(S=t[c+3]),u+=R*T,p+=R*C,d+=R*E,f+=R*S,I=P,s=0;M>s;s++)I.r=T,I.g=C,I.b=E,I.a=S,I=I.next;for(l=e,s=1;i>=s;s++)c=l+o<<2,u+=(I.r=T=t[c])*(k=M-s),p+=(I.g=C=t[c+1])*k,d+=(I.b=E=t[c+2])*k,f+=(I.a=S=t[c+3])*k,x+=T,w+=C,b+=E,A+=S,I=I.next,B>s&&(l+=e);for(c=o,F=P,N=O,r=0;n>r;r++)a=c<<2,t[a+3]=S=f*z>>U,S>0?(S=255/S,t[a]=(u*z>>U)*S,t[a+1]=(p*z>>U)*S,t[a+2]=(d*z>>U)*S):t[a]=t[a+1]=t[a+2]=0,u-=g,p-=m,d-=y,f-=v,g-=F.r,m-=F.g,y-=F.b,v-=F.a,a=o+((a=r+M)<B?a:B)*e<<2,u+=x+=F.r=t[a],p+=w+=F.g=t[a+1],d+=b+=F.b=t[a+2],f+=A+=F.a=t[a+3],F=F.next,g+=T=N.r,m+=C=N.g,y+=E=N.b,v+=S=N.a,x-=T,w-=C,b-=E,A-=S,N=N.next,c+=e}return t}}function stackBlurCanvasRGB(t,e,n,i){if(!(isNaN(i)||1>i)){i|=0;var o,r,s,a,l,c,h,u,p,d,f,g,m,y,v,x,w,b,A,T,C=i+i+1,E=e-1,S=n-1,k=i+1,D=k*(k+1)/2,L=new BlurStack,B=L;for(s=1;C>s;s++)if(B=B.next=new BlurStack,s==k)var M=B;B.next=L;var R=null,P=null;h=c=0;var I=mul_table[i],O=shg_table[i];for(r=0;n>r;r++){for(y=v=x=u=p=d=0,f=k*(w=t[c]),g=k*(b=t[c+1]),m=k*(A=t[c+2]),u+=D*w,p+=D*b,d+=D*A,B=L,s=0;k>s;s++)B.r=w,B.g=b,B.b=A,B=B.next;for(s=1;k>s;s++)a=c+((s>E?E:s)<<2),u+=(B.r=w=t[a])*(T=k-s),p+=(B.g=b=t[a+1])*T,d+=(B.b=A=t[a+2])*T,y+=w,v+=b,x+=A,B=B.next;for(R=L,P=M,o=0;e>o;o++)t[c]=u*I>>O,t[c+1]=p*I>>O,t[c+2]=d*I>>O,u-=f,p-=g,d-=m,f-=R.r,g-=R.g,m-=R.b,a=h+((a=o+i+1)<E?a:E)<<2,y+=R.r=t[a],v+=R.g=t[a+1],x+=R.b=t[a+2],u+=y,p+=v,d+=x,R=R.next,f+=w=P.r,g+=b=P.g,m+=A=P.b,y-=w,v-=b,x-=A,P=P.next,c+=4;h+=e}for(o=0;e>o;o++){for(v=x=y=p=d=u=0,c=o<<2,f=k*(w=t[c]),g=k*(b=t[c+1]),m=k*(A=t[c+2]),u+=D*w,p+=D*b,d+=D*A,B=L,s=0;k>s;s++)B.r=w,B.g=b,B.b=A,B=B.next;for(l=e,s=1;i>=s;s++)c=l+o<<2,u+=(B.r=w=t[c])*(T=k-s),p+=(B.g=b=t[c+1])*T,d+=(B.b=A=t[c+2])*T,y+=w,v+=b,x+=A,B=B.next,S>s&&(l+=e);for(c=o,R=L,P=M,r=0;n>r;r++)a=c<<2,t[a]=u*I>>O,t[a+1]=p*I>>O,t[a+2]=d*I>>O,u-=f,p-=g,d-=m,f-=R.r,g-=R.g,m-=R.b,a=o+((a=r+k)<S?a:S)*e<<2,u+=y+=R.r=t[a],p+=v+=R.g=t[a+1],d+=x+=R.b=t[a+2],R=R.next,f+=w=P.r,g+=b=P.g,m+=A=P.b,y-=w,v-=b,x-=A,P=P.next,c+=e}return t}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function PointerEvent(t,e){var n={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,buttons:void 0,which:0,relatedTarget:null,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1};for(var i in e)i in n&&(n[i]=e[i]);var o,r=n.which?n.button:-1;o=n.pressure?n.pressure:void 0!==n.buttons?n.buttons?.5:0:r>-1?.5:0;var s;return document.implementation.hasFeature("MouseEvent","4.0")?s=new MouseEvent(t,e):(s=document.createEvent("MouseEvent"),s.initMouseEvent(t,n.bubbles,n.cancelable,n.view,n.detail,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,r,n.relatedTarget)),Object.defineProperties(s,{pointerId:{value:n.pointerId,enumerable:!0},width:{value:n.width,enumerable:!0},height:{value:n.height,enumerable:!0},pressure:{value:o,enumerable:!0},tiltX:{value:n.tiltX,enumerable:!0},tiltY:{value:n.tiltY,enumerable:!0},pointerType:{value:n.pointerType,enumerable:!0},hwTimestamp:{value:n.hwTimestamp,enumerable:!0},isPrimary:{value:n.isPrimary,enumerable:!0}}),s}!function(){var t=Array.prototype.slice;"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame,window.setImmediate=window.setImmediate||window.msSetImmediate||function(t){return setTimeout(t,0)},window.URL=window.URL||window.webkitURL,window.indexedDB=window.indexedDB||window.msIndexedDB||window.webkitIndexedDB||window.mozIndexedDB,window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.directoryEntry=window.directoryEntry||window.webkitDirEntry),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=t.call(arguments,1),i=this,o=function(){},r=function(){return i.apply(o&&o.prototype&&this instanceof o&&e?this:e,n.concat(t.call(arguments)))};return o.prototype=this.prototype,r.prototype=new o,r})}(),function(t){function e(e){var n=e||window.event,i=[].slice.call(arguments,1),o=0,r=0,s=0;return e=t.event.fix(n),e.type="mousewheel",n.wheelDelta&&(o=n.wheelDelta/120),n.detail&&(o=-n.detail/3),s=o,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(s=0,r=-1*o),void 0!==n.wheelDeltaY&&(s=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(r=-1*n.wheelDeltaX/120),i.unshift(e,o,r,s),(t.event.dispatch||t.event.handle).apply(this,i)}var n=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var i=n.length;i;)t.event.fixHooks[n[--i]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=n.length;t;)this.addEventListener(n[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=n.length;t;)this.removeEventListener(n[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),Array.prototype.push||(Array.prototype.push=function(){for(var t=0,e=arguments.length;e>t;t++)this[this.length]=arguments[t];return this.length}),Array.prototype.shift||(Array.prototype.shift=function(){if(this.length>0){for(var t=this[0],e=0,n=this.length-1;n>e;e++)this[e]=this[e+1];return this.length=this.length-1,t}}),Array.prototype.splice||(Array.prototype.splice=function(t,e){var n=this.slice(t+e),i=this.slice(t,t+e);this.length=t;for(var o=[],r=0,s=arguments.length;s>r;r++)o[r]=arguments[r];var a=o.length>2?n=o.slice(2).concat(n):n;for(r=0,s=a.length;s>r;r++)this.push(a[r]);return i});var log4javascript=function(){function isUndefined(t){return"undefined"==typeof t}function EventSupport(){}function Log4JavaScript(){}function toStr(t){return t&&t.toString?t.toString():String(t)}function getExceptionMessage(t){return t.message?t.message:t.description?t.description:toStr(t)}function getUrlFileName(t){var e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return t.substr(e+1)}function getExceptionStringRep(t){if(t){var e="Exception: "+getExceptionMessage(t);try{t.lineNumber&&(e+=" on line number "+t.lineNumber),t.fileName&&(e+=" in file "+getUrlFileName(t.fileName))}catch(n){logLog.warn("Unable to obtain file and line information for error")}return showStackTraces&&t.stack&&(e+=newLine+"Stack trace:"+newLine+t.stack),e}return null}function bool(t){return Boolean(t)}function trim(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function splitIntoLines(t){var e=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.split("\n")}function array_remove(t,e){for(var n=-1,i=0,o=t.length;o>i;i++)if(t[i]===e){n=i;break}return n>=0?(t.splice(n,1),!0):!1}function array_contains(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return!0;return!1}function extractBooleanFromParam(t,e){return isUndefined(t)?e:bool(t)}function extractStringFromParam(t,e){return isUndefined(t)?e:String(t)}function extractIntFromParam(t,e){if(isUndefined(t))return e;try{var n=parseInt(t,10);return isNaN(n)?e:n}catch(i){return logLog.warn("Invalid int param "+t,i),e}}function extractFunctionFromParam(t,e){return"function"==typeof t?t:e}function isError(t){return t instanceof Error}function getListenersPropertyName(t){return"__log4javascript_listeners__"+t}function addEvent(t,e,n,i,o){if(o=o?o:window,t.addEventListener)t.addEventListener(e,n,i);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var r=getListenersPropertyName(e);t[r]||(t[r]=[],t["on"+e]=function(t){t=getEvent(t,o);for(var n,i=getListenersPropertyName(e),r=this[i].concat([]);n=r.shift();)n.call(this,t)}),t[r].push(n)}}function removeEvent(t,e,n,i){if(t.removeEventListener)t.removeEventListener(e,n,i);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var o=getListenersPropertyName(e);t[o]&&array_remove(t[o],n)}}function getEvent(t,e){return e=e?e:window,t?t:e.event}function stopEventPropagation(t){t.stopPropagation?t.stopPropagation():"undefined"!=typeof t.cancelBubble&&(t.cancelBubble=!0),t.returnValue=!1}function handleError(t,e){logLog.error(t,e),log4javascript.dispatchEvent("error",{message:t,exception:e})}function Timer(t,e){this.name=t,this.level=isUndefined(e)?Level.INFO:e,this.start=new Date}function Logger(t){this.name=t,this.parent=null,this.children=[];var e=[],n=null,i=this.name===rootLoggerName,o=this.name===nullLoggerName,r=null,s=!1;this.addChild=function(t){this.children.push(t),t.parent=this,t.invalidateAppenderCache()};var a=!0;this.getAdditivity=function(){return a},this.setAdditivity=function(t){var e=a!=t;a=t,e&&this.invalidateAppenderCache()},this.addAppender=function(t){o?handleError("Logger.addAppender: you may not add an appender to the null logger"):t instanceof log4javascript.Appender?array_contains(e,t)||(e.push(t),t.setAddedToLogger(this),this.invalidateAppenderCache()):handleError("Logger.addAppender: appender supplied ('"+toStr(t)+"') is not a subclass of Appender")},this.removeAppender=function(t){array_remove(e,t),t.setRemovedFromLogger(this),this.invalidateAppenderCache()},this.removeAllAppenders=function(){var t=e.length;if(t>0){for(var n=0;t>n;n++)e[n].setRemovedFromLogger(this);e.length=0,this.invalidateAppenderCache()}},this.getEffectiveAppenders=function(){if(null===r||s){var t=i||!this.getAdditivity()?[]:this.parent.getEffectiveAppenders();r=t.concat(e),s=!1}return r},this.invalidateAppenderCache=function(){s=!0;for(var t=0,e=this.children.length;e>t;t++)this.children[t].invalidateAppenderCache()},this.log=function(t,e){if(enabled&&t.isGreaterOrEqual(this.getEffectiveLevel())){var n,i=e.length-1,o=e[i];e.length>1&&isError(o)&&(n=o,i--);for(var r=[],s=0;i>=s;s++)r[s]=e[s];var a=new LoggingEvent(this,new Date,t,r,n);this.callAppenders(a)}},this.callAppenders=function(t){for(var e=this.getEffectiveAppenders(),n=0,i=e.length;i>n;n++)e[n].doAppend(t)},this.setLevel=function(t){i&&null===t?handleError("Logger.setLevel: you cannot set the level of the root logger to null"):t instanceof Level?n=t:handleError("Logger.setLevel: level supplied to logger "+this.name+" is not an instance of log4javascript.Level")},this.getLevel=function(){return n},this.getEffectiveLevel=function(){for(var t=this;null!==t;t=t.parent){var e=t.getLevel();if(null!==e)return e}},this.group=function(t,e){if(enabled)for(var n=this.getEffectiveAppenders(),i=0,o=n.length;o>i;i++)n[i].group(t,e)},this.groupEnd=function(){if(enabled)for(var t=this.getEffectiveAppenders(),e=0,n=t.length;n>e;e++)t[e].groupEnd()};var l={};this.time=function(t,e){enabled&&(isUndefined(t)?handleError("Logger.time: a name for the timer must be supplied"):!e||e instanceof Level?l[t]=new Timer(t,e):handleError("Logger.time: level supplied to timer "+t+" is not an instance of log4javascript.Level"))},this.timeEnd=function(t){if(enabled)if(isUndefined(t))handleError("Logger.timeEnd: a name for the timer must be supplied");else if(l[t]){var e=l[t],n=e.getElapsedTime();this.log(e.level,["Timer "+toStr(t)+" completed in "+n+"ms"]),delete l[t]}else logLog.warn("Logger.timeEnd: no timer found with name "+t)},this.assert=function(t){if(enabled&&!t){for(var e=[],n=1,i=arguments.length;i>n;n++)e.push(arguments[n]);e=e.length>0?e:["Assertion Failure"],e.push(newLine),e.push(t),this.log(Level.ERROR,e)}},this.toString=function(){return"Logger["+this.name+"]"}}function SimpleLayout(){this.customFields=[]}function NullLayout(){this.customFields=[]}function XmlLayout(t){this.combineMessages=extractBooleanFromParam(t,!0),this.customFields=[]}function escapeNewLines(t){return t.replace(/\r\n|\r|\n/g,"\\r\\n")}function JsonLayout(t,e){this.readable=extractBooleanFromParam(t,!1),this.combineMessages=extractBooleanFromParam(e,!0),this.batchHeader=this.readable?"["+newLine:"[",this.batchFooter=this.readable?"]"+newLine:"]",this.batchSeparator=this.readable?","+newLine:",",this.setKeys(),this.colon=this.readable?": ":":",this.tab=this.readable?"	":"",this.lineBreak=this.readable?newLine:"",this.customFields=[]}function HttpPostDataLayout(){this.setKeys(),this.customFields=[],this.returnsPostData=!0}function formatObjectExpansion(t,e,n){function i(t,e,n){function r(t){for(var e=splitIntoLines(t),i=1,o=e.length;o>i;i++)e[i]=n+e[i];return e.join(newLine)}var s,a,l,c,h,u,p;if(n||(n=""),null===t)return"null";if("undefined"==typeof t)return"undefined";if("string"==typeof t)return r(t);if("object"==typeof t&&array_contains(o,t)){try{u=toStr(t)}catch(d){u="Error formatting property. Details: "+getExceptionStringRep(d)}return u+" [already expanded]"}if(t instanceof Array&&e>0){for(o.push(t),u="["+newLine,l=e-1,c=n+"  ",h=[],s=0,a=t.length;a>s;s++)try{p=i(t[s],l,c),h.push(c+p)}catch(d){h.push(c+"Error formatting array member. Details: "+getExceptionStringRep(d))}return u+=h.join(","+newLine)+newLine+n+"]"}if("[object Date]"==Object.prototype.toString.call(t))return t.toString();if("object"==typeof t&&e>0){o.push(t),u="{"+newLine,l=e-1,c=n+"  ",h=[];for(s in t)try{p=i(t[s],l,c),h.push(c+s+": "+p)}catch(d){h.push(c+s+": Error formatting property. Details: "+getExceptionStringRep(d))}return u+=h.join(","+newLine)+newLine+n+"}"}return r(toStr(t))}var o=[];return i(t,e,n)}function PatternLayout(t){this.pattern=t?t:PatternLayout.DEFAULT_CONVERSION_PATTERN,this.customFields=[]}function AlertAppender(){}function BrowserConsoleAppender(){}function isHttpRequestSuccessful(t){return isUndefined(t.status)||0===t.status||t.status>=200&&t.status<300||1223==t.status}function AjaxAppender(t){function e(t){return E?(handleError("AjaxAppender: configuration option '"+t+"' may not be set after the appender has been initialized"),!1):!0}function n(){if(h&&enabled){C=!0;var t;if(p)A.length>0?(t=A.shift(),a(o(t),n)):(C=!1,u&&r());else{for(;t=A.shift();)a(o(t));C=!1,u&&r()}}}function i(){var t=!1;if(h&&enabled){for(var e,i=c.getLayout().allowBatching()?d:1,o=[];e=b.shift();)o.push(e),b.length>=i&&(A.push(o),o=[]);o.length>0&&A.push(o),t=A.length>0,p=!1,u=!1,n()}return t}function o(t){for(var e,n=[],i="";e=t.shift();){var o=c.getLayout().format(e);c.getLayout().ignoresThrowable()&&(o+=e.getThrowableStrRep()),n.push(o)}return i=1==t.length?n.join(""):c.getLayout().batchHeader+n.join(c.getLayout().batchSeparator)+c.getLayout().batchFooter,x==c.defaults.contentType&&(i=c.getLayout().returnsPostData?i:urlEncode(y)+"="+urlEncode(i),i.length>0&&(i+="&"),i+="layout="+urlEncode(c.getLayout().toString())),i}function r(){window.setTimeout(n,f)}function s(){var t="AjaxAppender: could not create XMLHttpRequest object. AjaxAppender disabled";handleError(t),h=!1,m&&m(t)}function a(e,n){try{var i=getXmlHttp(s);if(h){i.overrideMimeType&&i.overrideMimeType(c.getLayout().getContentType()),i.onreadystatechange=function(){if(4==i.readyState){if(isHttpRequestSuccessful(i))g&&g(i),n&&n(i);else{var e="AjaxAppender.append: XMLHttpRequest request to URL "+t+" returned status code "+i.status;handleError(e),m&&m(e)}i.onreadystatechange=emptyFunction,i=null}},i.open("POST",t,!0);try{for(var o,r=0;o=T[r++];)i.setRequestHeader(o.name,o.value);i.setRequestHeader("Content-Type",x)}catch(a){var l="AjaxAppender.append: your browser's XMLHttpRequest implementation does not support setRequestHeader, therefore cannot post data. AjaxAppender disabled";return handleError(l),h=!1,m&&m(l),void 0}i.send(e)}}catch(u){var p="AjaxAppender.append: error sending log message to "+t;handleError(p,u),h=!1,m&&m(p+". Details: "+getExceptionStringRep(u))}}function l(){if(E=!0,v){var t=window.onbeforeunload;window.onbeforeunload=function(){return t&&t(),i()?"Sending log messages":void 0}}u&&r()}var c=this,h=!0;t||(handleError("AjaxAppender: URL must be specified in constructor"),h=!1);var u=this.defaults.timed,p=this.defaults.waitForResponse,d=this.defaults.batchSize,f=this.defaults.timerInterval,g=this.defaults.requestSuccessCallback,m=this.defaults.failCallback,y=this.defaults.postVarName,v=this.defaults.sendAllOnUnload,x=this.defaults.contentType,w=null,b=[],A=[],T=[],C=!1,E=!1;this.getSessionId=function(){return w},this.setSessionId=function(t){w=extractStringFromParam(t,null),this.layout.setCustomField("sessionid",w)},this.setLayout=function(t){e("layout")&&(this.layout=t,null!==w&&this.setSessionId(w))},this.isTimed=function(){return u},this.setTimed=function(t){e("timed")&&(u=bool(t))},this.getTimerInterval=function(){return f},this.setTimerInterval=function(t){e("timerInterval")&&(f=extractIntFromParam(t,f))},this.isWaitForResponse=function(){return p},this.setWaitForResponse=function(t){e("waitForResponse")&&(p=bool(t))},this.getBatchSize=function(){return d},this.setBatchSize=function(t){e("batchSize")&&(d=extractIntFromParam(t,d))},this.isSendAllOnUnload=function(){return v},this.setSendAllOnUnload=function(t){e("sendAllOnUnload")&&(v=extractBooleanFromParam(t,v))},this.setRequestSuccessCallback=function(t){g=extractFunctionFromParam(t,g)},this.setFailCallback=function(t){m=extractFunctionFromParam(t,m)},this.getPostVarName=function(){return y},this.setPostVarName=function(t){e("postVarName")&&(y=extractStringFromParam(t,y))},this.getHeaders=function(){return T},this.addHeader=function(t,e){"content-type"==t.toLowerCase()?x=e:T.push({name:t,value:e})},this.sendAll=n,this.sendAllRemaining=i,this.append=function(t){if(h){E||l(),b.push(t);var e=this.getLayout().allowBatching()?d:1;if(b.length>=e){for(var i,o=[];i=b.shift();)o.push(i);A.push(o),u||p&&(!p||C)||n()}}}}function setCookie(t,e,n,i){var o;if(i=i?"; path="+i:"",n){var r=new Date;r.setTime(r.getTime()+1e3*60*60*24*n),o="; expires="+r.toGMTString()}else o="";document.cookie=escape(t)+"="+escape(e)+o+i}function getCookie(t){for(var e=escape(t)+"=",n=document.cookie.split(";"),i=0,o=n.length;o>i;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return unescape(r.substring(e.length,r.length))}return null}function getBaseUrl(){for(var t=document.getElementsByTagName("script"),e=0,n=t.length;n>e;++e)if(-1!=t[e].src.indexOf("log4javascript")){var i=t[e].src.lastIndexOf("/");return-1==i?"":t[e].src.substr(0,i+1)}return null}function isLoaded(t){try{return bool(t.loaded)}catch(e){return!1}}function padWithSpaces(t,e){if(t.length<e){for(var n=[],i=Math.max(0,e-t.length),o=0;i>o;o++)n[o]=" ";t+=n.join("")}return t}EventSupport.prototype={eventTypes:[],eventListeners:{},setEventTypes:function(t){if(t instanceof Array){this.eventTypes=t,this.eventListeners={};for(var e=0,n=this.eventTypes.length;n>e;e++)this.eventListeners[this.eventTypes[e]]=[]}else handleError("log4javascript.EventSupport ["+this+"]: setEventTypes: eventTypes parameter must be an Array")},addEventListener:function(t,e){"function"==typeof e?(array_contains(this.eventTypes,t)||handleError("log4javascript.EventSupport ["+this+"]: addEventListener: no event called '"+t+"'"),this.eventListeners[t].push(e)):handleError("log4javascript.EventSupport ["+this+"]: addEventListener: listener must be a function")},removeEventListener:function(t,e){"function"==typeof e?(array_contains(this.eventTypes,t)||handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: no event called '"+t+"'"),array_remove(this.eventListeners[t],e)):handleError("log4javascript.EventSupport ["+this+"]: removeEventListener: listener must be a function")},dispatchEvent:function(t,e){if(array_contains(this.eventTypes,t))for(var n=this.eventListeners[t],i=0,o=n.length;o>i;i++)n[i](this,t,e);else handleError("log4javascript.EventSupport ["+this+"]: dispatchEvent: no event called '"+t+"'")}};var applicationStartDate=new Date,uniqueId="log4javascript_"+applicationStartDate.getTime()+"_"+Math.floor(1e8*Math.random()),emptyFunction=function(){},newLine="\r\n",pageLoaded=!1;Log4JavaScript.prototype=new EventSupport,log4javascript=new Log4JavaScript,log4javascript.version="1.4.6",log4javascript.edition="log4javascript";var urlEncode="undefined"!=typeof window.encodeURIComponent?function(t){return encodeURIComponent(t)}:function(t){return escape(t).replace(/\+/g,"%2B").replace(/"/g,"%22").replace(/'/g,"%27").replace(/\//g,"%2F").replace(/=/g,"%3D")},urlDecode="undefined"!=typeof window.decodeURIComponent?function(t){return decodeURIComponent(t)}:function(t){return unescape(t).replace(/%2B/g,"+").replace(/%22/g,'"').replace(/%27/g,"'").replace(/%2F/g,"/").replace(/%3D/g,"=")};Function.prototype.apply||(Function.prototype.apply=function(obj,args){var methodName="__apply__";"undefined"!=typeof obj[methodName]&&(methodName+=String(Math.random()).substr(2)),obj[methodName]=this;for(var argsStrings=[],i=0,len=args.length;len>i;i++)argsStrings[i]="args["+i+"]";var script="obj."+methodName+"("+argsStrings.join(",")+")",returnValue=eval(script);return delete obj[methodName],returnValue}),Function.prototype.call||(Function.prototype.call=function(t){for(var e=[],n=1,i=arguments.length;i>n;n++)e[n-1]=arguments[n];return this.apply(t,e)});var logLog={quietMode:!1,debugMessages:[],setQuietMode:function(t){this.quietMode=bool(t)},numberOfErrors:0,alertAllErrors:!1,setAlertAllErrors:function(t){this.alertAllErrors=t},debug:function(t){this.debugMessages.push(t)},displayDebug:function(){alert(this.debugMessages.join(newLine))},warn:function(){},error:function(t,e){if((1==++this.numberOfErrors||this.alertAllErrors)&&!this.quietMode){var n="log4javascript error: "+t;e&&(n+=newLine+newLine+"Original error: "+getExceptionStringRep(e)),alert(n)}}};log4javascript.logLog=logLog,log4javascript.setEventTypes(["load","error"]),log4javascript.handleError=handleError;var enabled=!("undefined"!=typeof log4javascript_disabled&&log4javascript_disabled);log4javascript.setEnabled=function(t){enabled=bool(t)},log4javascript.isEnabled=function(){return enabled};var useTimeStampsInMilliseconds=!0;log4javascript.setTimeStampsInMilliseconds=function(t){useTimeStampsInMilliseconds=bool(t)},log4javascript.isTimeStampsInMilliseconds=function(){return useTimeStampsInMilliseconds},log4javascript.evalInScope=function(expr){return eval(expr)};var showStackTraces=!1;log4javascript.setShowStackTraces=function(t){showStackTraces=bool(t)};var Level=function(t,e){this.level=t,this.name=e};Level.prototype={toString:function(){return this.name},equals:function(t){return this.level==t.level},isGreaterOrEqual:function(t){return this.level>=t.level}},Level.ALL=new Level(Number.MIN_VALUE,"ALL"),Level.TRACE=new Level(1e4,"TRACE"),Level.DEBUG=new Level(2e4,"DEBUG"),Level.INFO=new Level(3e4,"INFO"),Level.WARN=new Level(4e4,"WARN"),Level.ERROR=new Level(5e4,"ERROR"),Level.FATAL=new Level(6e4,"FATAL"),Level.OFF=new Level(Number.MAX_VALUE,"OFF"),log4javascript.Level=Level,Timer.prototype.getElapsedTime=function(){return(new Date).getTime()-this.start.getTime()};var anonymousLoggerName="[anonymous]",defaultLoggerName="[default]",nullLoggerName="[null]",rootLoggerName="root";Logger.prototype={trace:function(){this.log(Level.TRACE,arguments)},debug:function(){this.log(Level.DEBUG,arguments)},info:function(){this.log(Level.INFO,arguments)},warn:function(){this.log(Level.WARN,arguments)},error:function(){this.log(Level.ERROR,arguments)},fatal:function(){this.log(Level.FATAL,arguments)},isEnabledFor:function(t){return t.isGreaterOrEqual(this.getEffectiveLevel())},isTraceEnabled:function(){return this.isEnabledFor(Level.TRACE)},isDebugEnabled:function(){return this.isEnabledFor(Level.DEBUG)},isInfoEnabled:function(){return this.isEnabledFor(Level.INFO)},isWarnEnabled:function(){return this.isEnabledFor(Level.WARN)},isErrorEnabled:function(){return this.isEnabledFor(Level.ERROR)},isFatalEnabled:function(){return this.isEnabledFor(Level.FATAL)}},Logger.prototype.trace.isEntryPoint=!0,Logger.prototype.debug.isEntryPoint=!0,Logger.prototype.info.isEntryPoint=!0,Logger.prototype.warn.isEntryPoint=!0,Logger.prototype.error.isEntryPoint=!0,Logger.prototype.fatal.isEntryPoint=!0;var loggers={},loggerNames=[],ROOT_LOGGER_DEFAULT_LEVEL=Level.DEBUG,rootLogger=new Logger(rootLoggerName);rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL),log4javascript.getRootLogger=function(){return rootLogger},log4javascript.getLogger=function(t){if("string"!=typeof t&&(t=anonymousLoggerName,logLog.warn("log4javascript.getLogger: non-string logger name "+toStr(t)+" supplied, returning anonymous logger")),t==rootLoggerName&&handleError("log4javascript.getLogger: root logger may not be obtained by name"),!loggers[t]){var e=new Logger(t);loggers[t]=e,loggerNames.push(t);var n,i=t.lastIndexOf(".");if(i>-1){var o=t.substring(0,i);n=log4javascript.getLogger(o)}else n=rootLogger;n.addChild(e)}return loggers[t]};var defaultLogger=null;log4javascript.getDefaultLogger=function(){if(!defaultLogger){defaultLogger=log4javascript.getLogger(defaultLoggerName);var t=new log4javascript.PopUpAppender;defaultLogger.addAppender(t)}return defaultLogger};var nullLogger=null;log4javascript.getNullLogger=function(){return nullLogger||(nullLogger=new Logger(nullLoggerName),nullLogger.setLevel(Level.OFF)),nullLogger},log4javascript.resetConfiguration=function(){rootLogger.setLevel(ROOT_LOGGER_DEFAULT_LEVEL),loggers={}};var LoggingEvent=function(t,e,n,i,o){this.logger=t,this.timeStamp=e,this.timeStampInMilliseconds=e.getTime(),this.timeStampInSeconds=Math.floor(this.timeStampInMilliseconds/1e3),this.milliseconds=this.timeStamp.getMilliseconds(),this.level=n,this.messages=i,this.exception=o};LoggingEvent.prototype={getThrowableStrRep:function(){return this.exception?getExceptionStringRep(this.exception):""},getCombinedMessages:function(){return 1==this.messages.length?this.messages[0]:this.messages.join(newLine)},toString:function(){return"LoggingEvent["+this.level+"]"}},log4javascript.LoggingEvent=LoggingEvent;var Layout=function(){};Layout.prototype={defaults:{loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url"},loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",exceptionKey:"exception",urlKey:"url",batchHeader:"",batchFooter:"",batchSeparator:"",returnsPostData:!1,overrideTimeStampsSetting:!1,useTimeStampsInMilliseconds:null,format:function(){handleError("Layout.format: layout supplied has no format() method")},ignoresThrowable:function(){handleError("Layout.ignoresThrowable: layout supplied has no ignoresThrowable() method")},getContentType:function(){return"text/plain"},allowBatching:function(){return!0},setTimeStampsInMilliseconds:function(t){this.overrideTimeStampsSetting=!0,this.useTimeStampsInMilliseconds=bool(t)},isTimeStampsInMilliseconds:function(){return this.overrideTimeStampsSetting?this.useTimeStampsInMilliseconds:useTimeStampsInMilliseconds},getTimeStampValue:function(t){return this.isTimeStampsInMilliseconds()?t.timeStampInMilliseconds:t.timeStampInSeconds},getDataValues:function(t,e){var n=[[this.loggerKey,t.logger.name],[this.timeStampKey,this.getTimeStampValue(t)],[this.levelKey,t.level.name],[this.urlKey,window.location.href],[this.messageKey,e?t.getCombinedMessages():t.messages]];if(this.isTimeStampsInMilliseconds()||n.push([this.millisecondsKey,t.milliseconds]),t.exception&&n.push([this.exceptionKey,getExceptionStringRep(t.exception)]),this.hasCustomFields())for(var i=0,o=this.customFields.length;o>i;i++){var r=this.customFields[i].value;"function"==typeof r&&(r=r(this,t)),n.push([this.customFields[i].name,r])}return n},setKeys:function(t,e,n,i,o,r,s){this.loggerKey=extractStringFromParam(t,this.defaults.loggerKey),this.timeStampKey=extractStringFromParam(e,this.defaults.timeStampKey),this.levelKey=extractStringFromParam(n,this.defaults.levelKey),this.messageKey=extractStringFromParam(i,this.defaults.messageKey),this.exceptionKey=extractStringFromParam(o,this.defaults.exceptionKey),this.urlKey=extractStringFromParam(r,this.defaults.urlKey),this.millisecondsKey=extractStringFromParam(s,this.defaults.millisecondsKey)},setCustomField:function(t,e){for(var n=!1,i=0,o=this.customFields.length;o>i;i++)this.customFields[i].name===t&&(this.customFields[i].value=e,n=!0);n||this.customFields.push({name:t,value:e})},hasCustomFields:function(){return this.customFields.length>0},toString:function(){handleError("Layout.toString: all layouts must override this method")}},log4javascript.Layout=Layout;var Appender=function(){};Appender.prototype=new EventSupport,Appender.prototype.layout=new PatternLayout,Appender.prototype.threshold=Level.ALL,Appender.prototype.loggers=[],Appender.prototype.doAppend=function(t){enabled&&t.level.level>=this.threshold.level&&this.append(t)},Appender.prototype.append=function(){},Appender.prototype.setLayout=function(t){t instanceof Layout?this.layout=t:handleError("Appender.setLayout: layout supplied to "+this.toString()+" is not a subclass of Layout")},Appender.prototype.getLayout=function(){return this.layout},Appender.prototype.setThreshold=function(t){t instanceof Level?this.threshold=t:handleError("Appender.setThreshold: threshold supplied to "+this.toString()+" is not a subclass of Level")},Appender.prototype.getThreshold=function(){return this.threshold},Appender.prototype.setAddedToLogger=function(t){this.loggers.push(t)},Appender.prototype.setRemovedFromLogger=function(t){array_remove(this.loggers,t)},Appender.prototype.group=emptyFunction,Appender.prototype.groupEnd=emptyFunction,Appender.prototype.toString=function(){handleError("Appender.toString: all appenders must override this method")},log4javascript.Appender=Appender,SimpleLayout.prototype=new Layout,SimpleLayout.prototype.format=function(t){return t.level.name+" - "+t.getCombinedMessages()},SimpleLayout.prototype.ignoresThrowable=function(){return!0},SimpleLayout.prototype.toString=function(){return"SimpleLayout"},log4javascript.SimpleLayout=SimpleLayout,NullLayout.prototype=new Layout,NullLayout.prototype.format=function(t){return t.messages},NullLayout.prototype.ignoresThrowable=function(){return!0},NullLayout.prototype.toString=function(){return"NullLayout"},log4javascript.NullLayout=NullLayout,XmlLayout.prototype=new Layout,XmlLayout.prototype.isCombinedMessages=function(){return this.combineMessages},XmlLayout.prototype.getContentType=function(){return"text/xml"},XmlLayout.prototype.escapeCdata=function(t){return t.replace(/\]\]>/,"]]>]]&gt;<![CDATA[")},XmlLayout.prototype.format=function(t){function e(t){return t="string"==typeof t?t:toStr(t),"<log4javascript:message><![CDATA["+o.escapeCdata(t)+"]]></log4javascript:message>"}var n,i,o=this,r='<log4javascript:event logger="'+t.logger.name+'" timestamp="'+this.getTimeStampValue(t)+'"';if(this.isTimeStampsInMilliseconds()||(r+=' milliseconds="'+t.milliseconds+'"'),r+=' level="'+t.level.name+'">'+newLine,this.combineMessages)r+=e(t.getCombinedMessages());else{for(r+="<log4javascript:messages>"+newLine,n=0,i=t.messages.length;i>n;n++)r+=e(t.messages[n])+newLine;r+="</log4javascript:messages>"+newLine}if(this.hasCustomFields())for(n=0,i=this.customFields.length;i>n;n++)r+='<log4javascript:customfield name="'+this.customFields[n].name+'"><![CDATA['+this.customFields[n].value.toString()+"]]></log4javascript:customfield>"+newLine;
return t.exception&&(r+="<log4javascript:exception><![CDATA["+getExceptionStringRep(t.exception)+"]]></log4javascript:exception>"+newLine),r+="</log4javascript:event>"+newLine+newLine},XmlLayout.prototype.ignoresThrowable=function(){return!1},XmlLayout.prototype.toString=function(){return"XmlLayout"},log4javascript.XmlLayout=XmlLayout,JsonLayout.prototype=new Layout,JsonLayout.prototype.isReadable=function(){return this.readable},JsonLayout.prototype.isCombinedMessages=function(){return this.combineMessages},JsonLayout.prototype.format=function(t){function e(t,n,i){var r,s=typeof t;if(t instanceof Date)r=String(t.getTime());else if(i&&t instanceof Array){r="["+o.lineBreak;for(var a=0,l=t.length;l>a;a++){var c=n+o.tab;r+=c+e(t[a],c,!1),a<t.length-1&&(r+=","),r+=o.lineBreak}r+=n+"]"}else r="number"!==s&&"boolean"!==s?'"'+escapeNewLines(toStr(t).replace(/\"/g,'\\"'))+'"':t;return r}var n,i,o=this,r=this.getDataValues(t,this.combineMessages),s="{"+this.lineBreak;for(n=0,i=r.length-1;i>=n;n++)s+=this.tab+'"'+r[n][0]+'"'+this.colon+e(r[n][1],this.tab,!0),i>n&&(s+=","),s+=this.lineBreak;return s+="}"+this.lineBreak},JsonLayout.prototype.ignoresThrowable=function(){return!1},JsonLayout.prototype.toString=function(){return"JsonLayout"},JsonLayout.prototype.getContentType=function(){return"application/json"},log4javascript.JsonLayout=JsonLayout,HttpPostDataLayout.prototype=new Layout,HttpPostDataLayout.prototype.allowBatching=function(){return!1},HttpPostDataLayout.prototype.format=function(t){for(var e=this.getDataValues(t),n=[],i=0,o=e.length;o>i;i++){var r=e[i][1]instanceof Date?String(e[i][1].getTime()):e[i][1];n.push(urlEncode(e[i][0])+"="+urlEncode(r))}return n.join("&")},HttpPostDataLayout.prototype.ignoresThrowable=function(){return!1},HttpPostDataLayout.prototype.toString=function(){return"HttpPostDataLayout"},log4javascript.HttpPostDataLayout=HttpPostDataLayout;var SimpleDateFormat;!function(){var t=/('[^']*')|(G+|y+|M+|w+|W+|D+|d+|F+|E+|a+|H+|k+|K+|h+|m+|s+|S+|Z+)|([a-zA-Z]+)|([^a-zA-Z']+)/,e=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=0,o=1,r=2,s=3,a=4,l=5,c={G:i,y:s,M:a,w:r,W:r,D:r,d:r,F:r,E:o,a:i,H:r,k:r,K:r,h:r,m:r,s:r,S:r,Z:l},h=864e5,u=7*h,p=1,d=function(t,e,n){var i=new Date(t,e,n,0,0,0);return i.setMilliseconds(0),i};Date.prototype.getDifference=function(t){return this.getTime()-t.getTime()},Date.prototype.isBefore=function(t){return this.getTime()<t.getTime()},Date.prototype.getUTCTime=function(){return Date.UTC(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())},Date.prototype.getTimeSince=function(t){return this.getUTCTime()-t.getUTCTime()},Date.prototype.getPreviousSunday=function(){var t=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12,0,0),e=new Date(t.getTime()-this.getDay()*h);return d(e.getFullYear(),e.getMonth(),e.getDate())},Date.prototype.getWeekInYear=function(t){isUndefined(this.minimalDaysInFirstWeek)&&(t=p);var e=this.getPreviousSunday(),n=d(this.getFullYear(),0,1),i=e.isBefore(n)?0:1+Math.floor(e.getTimeSince(n)/u),o=7-n.getDay(),r=i;return t>o&&r--,r},Date.prototype.getWeekInMonth=function(t){isUndefined(this.minimalDaysInFirstWeek)&&(t=p);var e=this.getPreviousSunday(),n=d(this.getFullYear(),this.getMonth(),1),i=e.isBefore(n)?0:1+Math.floor(e.getTimeSince(n)/u),o=7-n.getDay(),r=i;return o>=t&&r++,r},Date.prototype.getDayInYear=function(){var t=d(this.getFullYear(),0,1);return 1+Math.floor(this.getTimeSince(t)/h)},SimpleDateFormat=function(t){this.formatString=t},SimpleDateFormat.prototype.setMinimalDaysInFirstWeek=function(t){this.minimalDaysInFirstWeek=t},SimpleDateFormat.prototype.getMinimalDaysInFirstWeek=function(){return isUndefined(this.minimalDaysInFirstWeek)?p:this.minimalDaysInFirstWeek};var f=function(t,e){for(;t.length<e;)t="0"+t;return t},g=function(t,e,n){return e>=4?t:t.substr(0,Math.max(n,e))},m=function(t,e){var n=""+t;return f(n,e)};SimpleDateFormat.prototype.format=function(h){for(var u,p="",d=this.formatString;u=t.exec(d);){var y=u[1],v=u[2],x=u[3],w=u[4];if(y)p+="''"==y?"'":y.substring(1,y.length-1);else if(x);else if(w)p+=w;else if(v){var b=v.charAt(0),A=v.length,T="";switch(b){case"G":T="AD";break;case"y":T=h.getFullYear();break;case"M":T=h.getMonth();break;case"w":T=h.getWeekInYear(this.getMinimalDaysInFirstWeek());break;case"W":T=h.getWeekInMonth(this.getMinimalDaysInFirstWeek());break;case"D":T=h.getDayInYear();break;case"d":T=h.getDate();break;case"F":T=1+Math.floor((h.getDate()-1)/7);break;case"E":T=n[h.getDay()];break;case"a":T=h.getHours()>=12?"PM":"AM";break;case"H":T=h.getHours();break;case"k":T=h.getHours()||24;break;case"K":T=h.getHours()%12;break;case"h":T=h.getHours()%12||12;break;case"m":T=h.getMinutes();break;case"s":T=h.getSeconds();break;case"S":T=h.getMilliseconds();break;case"Z":T=h.getTimezoneOffset()}switch(c[b]){case i:p+=g(T,A,2);break;case o:p+=g(T,A,3);break;case r:p+=m(T,A);break;case s:if(3>=A){var C=""+T;p+=C.substr(2,2)}else p+=m(T,A);break;case a:p+=A>=3?g(e[T],A,A):m(T+1,A);break;case l:var E=T>0,S=E?"-":"+",k=Math.abs(T),D=""+Math.floor(k/60);D=f(D,2);var L=""+k%60;L=f(L,2),p+=S+D+L}}d=d.substr(u.index+u[0].length)}return p}}(),log4javascript.SimpleDateFormat=SimpleDateFormat,PatternLayout.TTCC_CONVERSION_PATTERN="%r %p %c - %m%n",PatternLayout.DEFAULT_CONVERSION_PATTERN="%m%n",PatternLayout.ISO8601_DATEFORMAT="yyyy-MM-dd HH:mm:ss,SSS",PatternLayout.DATETIME_DATEFORMAT="dd MMM yyyy HH:mm:ss,SSS",PatternLayout.ABSOLUTETIME_DATEFORMAT="HH:mm:ss,SSS",PatternLayout.prototype=new Layout,PatternLayout.prototype.format=function(t){for(var e,n=/%(-?[0-9]+)?(\.?[0-9]+)?([acdfmMnpr%])(\{([^\}]+)\})?|([^%]+)/,i="",o=this.pattern;e=n.exec(o);){var r=e[0],s=e[1],a=e[2],l=e[3],c=e[5],h=e[6];if(h)i+=""+h;else{var u="";switch(l){case"a":case"m":var p=0;c&&(p=parseInt(c,10),isNaN(p)&&(handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character '"+l+"' - should be a number"),p=0));for(var d="a"===l?t.messages[0]:t.messages,f=0,g=d.length;g>f;f++)f>0&&" "!==u.charAt(u.length-1)&&(u+=" "),u+=0===p?d[f]:formatObjectExpansion(d[f],p);break;case"c":var m=t.logger.name;if(c){var y=parseInt(c,10),v=t.logger.name.split(".");u=y>=v.length?m:v.slice(v.length-y).join(".")}else u=m;break;case"d":var x=PatternLayout.ISO8601_DATEFORMAT;c&&(x=c,"ISO8601"==x?x=PatternLayout.ISO8601_DATEFORMAT:"ABSOLUTE"==x?x=PatternLayout.ABSOLUTETIME_DATEFORMAT:"DATE"==x&&(x=PatternLayout.DATETIME_DATEFORMAT)),u=new SimpleDateFormat(x).format(t.timeStamp);break;case"f":if(this.hasCustomFields()){var w=0;c&&(w=parseInt(c,10),isNaN(w)?handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character 'f' - should be a number"):0===w?handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character 'f' - must be greater than zero"):w>this.customFields.length?handleError("PatternLayout.format: invalid specifier '"+c+"' for conversion character 'f' - there aren't that many custom fields"):w-=1);var b=this.customFields[w].value;"function"==typeof b&&(b=b(this,t)),u=b}break;case"n":u=newLine;break;case"p":u=t.level.name;break;case"r":u=""+t.timeStamp.getDifference(applicationStartDate);break;case"%":u="%";break;default:u=r}var A;if(a){A=parseInt(a.substr(1),10);var T=u.length;T>A&&(u=u.substring(T-A,T))}if(s)if("-"==s.charAt(0))for(A=parseInt(s.substr(1),10);u.length<A;)u+=" ";else for(A=parseInt(s,10);u.length<A;)u=" "+u;i+=u}o=o.substr(e.index+e[0].length)}return i},PatternLayout.prototype.ignoresThrowable=function(){return!0},PatternLayout.prototype.toString=function(){return"PatternLayout"},log4javascript.PatternLayout=PatternLayout,AlertAppender.prototype=new Appender,AlertAppender.prototype.layout=new SimpleLayout,AlertAppender.prototype.append=function(t){var e=this.getLayout().format(t);this.getLayout().ignoresThrowable()&&(e+=t.getThrowableStrRep()),alert(e)},AlertAppender.prototype.toString=function(){return"AlertAppender"},log4javascript.AlertAppender=AlertAppender,BrowserConsoleAppender.prototype=new log4javascript.Appender,BrowserConsoleAppender.prototype.layout=new NullLayout,BrowserConsoleAppender.prototype.threshold=Level.DEBUG,BrowserConsoleAppender.prototype.append=function(t){var e=this,n=function(){var n=e.getLayout(),i=n.format(t);return n.ignoresThrowable()&&t.exception&&(i+=t.getThrowableStrRep()),i};if("undefined"!=typeof opera&&opera.postError)opera.postError(n());else if(window.console&&window.console.log){var i=n();window.console.debug&&Level.DEBUG.isGreaterOrEqual(t.level)?window.console.debug(i):window.console.info&&Level.INFO.equals(t.level)?window.console.info(i):window.console.warn&&Level.WARN.equals(t.level)?window.console.warn(i):window.console.error&&t.level.isGreaterOrEqual(Level.ERROR)?window.console.error(i):window.console.log(i)}},BrowserConsoleAppender.prototype.group=function(t){window.console&&window.console.group&&window.console.group(t)},BrowserConsoleAppender.prototype.groupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},BrowserConsoleAppender.prototype.toString=function(){return"BrowserConsoleAppender"},log4javascript.BrowserConsoleAppender=BrowserConsoleAppender;var xmlHttpFactories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],getXmlHttp=function(t){for(var e,n=null,i=0,o=xmlHttpFactories.length;o>i;i++){e=xmlHttpFactories[i];try{return n=e(),getXmlHttp=e,n}catch(r){}}t?t():handleError("getXmlHttp: unable to obtain XMLHttpRequest object")};AjaxAppender.prototype=new Appender,AjaxAppender.prototype.defaults={waitForResponse:!1,timed:!1,timerInterval:1e3,batchSize:1,sendAllOnUnload:!1,requestSuccessCallback:null,failCallback:null,postVarName:"data",contentType:"application/x-www-form-urlencoded"},AjaxAppender.prototype.layout=new HttpPostDataLayout,AjaxAppender.prototype.toString=function(){return"AjaxAppender"},log4javascript.AjaxAppender=AjaxAppender;var ConsoleAppender;if(function(){function t(t,e,n,i,o){this.create(!1,null,t,e,n,i,o,this.defaults.focusPopUp)}function e(t,e,n,i,o,r){this.create(!0,t,e,n,i,o,r,!1)}var n=function(){return['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">','<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">',"	<head>","		<title>log4javascript</title>",'		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',"		<!-- Make IE8 behave like IE7, having gone to all the trouble of making IE work -->",'		<meta http-equiv="X-UA-Compatible" content="IE=7" />','		<script type="text/javascript">var isIe = false, isIePre7 = false;</script>','		<!--[if IE]><script type="text/javascript">isIe = true</script><![endif]-->','		<!--[if lt IE 7]><script type="text/javascript">isIePre7 = true</script><![endif]-->','		<script type="text/javascript">',"			//<![CDATA[","			var loggingEnabled = true;","			var logQueuedEventsTimer = null;","			var logEntries = [];","			var logEntriesAndSeparators = [];","			var logItems = [];","			var renderDelay = 100;","			var unrenderedLogItemsExist = false;","			var rootGroup, currentGroup = null;","			var loaded = false;","			var currentLogItem = null;","			var logMainContainer;","","			function copyProperties(obj, props) {","				for (var i in props) {","					obj[i] = props[i];","				}","			}","","			/*----------------------------------------------------------------*/","","			function LogItem() {","			}","","			LogItem.prototype = {","				mainContainer: null,","				wrappedContainer: null,","				unwrappedContainer: null,","				group: null,","","				appendToLog: function() {","					for (var i = 0, len = this.elementContainers.length; i < len; i++) {","						this.elementContainers[i].appendToLog();","					}","					this.group.update();","				},","","				doRemove: function(doUpdate, removeFromGroup) {","					if (this.rendered) {","						for (var i = 0, len = this.elementContainers.length; i < len; i++) {","							this.elementContainers[i].remove();","						}","						this.unwrappedElementContainer = null;","						this.wrappedElementContainer = null;","						this.mainElementContainer = null;","					}","					if (this.group && removeFromGroup) {","						this.group.removeChild(this, doUpdate);","					}","					if (this === currentLogItem) {","						currentLogItem = null;","					}","				},","","				remove: function(doUpdate, removeFromGroup) {","					this.doRemove(doUpdate, removeFromGroup);","				},","","				render: function() {},","","				accept: function(visitor) {","					visitor.visit(this);","				},","","				getUnwrappedDomContainer: function() {","					return this.group.unwrappedElementContainer.contentDiv;","				},","","				getWrappedDomContainer: function() {","					return this.group.wrappedElementContainer.contentDiv;","				},","","				getMainDomContainer: function() {","					return this.group.mainElementContainer.contentDiv;","				}","			};","","			LogItem.serializedItemKeys = {LOG_ENTRY: 0, GROUP_START: 1, GROUP_END: 2};","","			/*----------------------------------------------------------------*/","","			function LogItemContainerElement() {","			}","","			LogItemContainerElement.prototype = {","				appendToLog: function() {","					var insertBeforeFirst = (newestAtTop && this.containerDomNode.hasChildNodes());","					if (insertBeforeFirst) {","						this.containerDomNode.insertBefore(this.mainDiv, this.containerDomNode.firstChild);","					} else {","						this.containerDomNode.appendChild(this.mainDiv);","					}","				}","			};","","			/*----------------------------------------------------------------*/","","			function SeparatorElementContainer(containerDomNode) {","				this.containerDomNode = containerDomNode;",'				this.mainDiv = document.createElement("div");','				this.mainDiv.className = "separator";','				this.mainDiv.innerHTML = "&nbsp;";',"			}","","			SeparatorElementContainer.prototype = new LogItemContainerElement();","","			SeparatorElementContainer.prototype.remove = function() {","				this.mainDiv.parentNode.removeChild(this.mainDiv);","				this.mainDiv = null;","			};","","			/*----------------------------------------------------------------*/","","			function Separator() {","				this.rendered = false;","			}","","			Separator.prototype = new LogItem();","","			copyProperties(Separator.prototype, {","				render: function() {","					var containerDomNode = this.group.contentDiv;","					if (isIe) {","						this.unwrappedElementContainer = new SeparatorElementContainer(this.getUnwrappedDomContainer());","						this.wrappedElementContainer = new SeparatorElementContainer(this.getWrappedDomContainer());","						this.elementContainers = [this.unwrappedElementContainer, this.wrappedElementContainer];","					} else {","						this.mainElementContainer = new SeparatorElementContainer(this.getMainDomContainer());","						this.elementContainers = [this.mainElementContainer];","					}","					this.content = this.formattedMessage;","					this.rendered = true;","				}","			});","","			/*----------------------------------------------------------------*/","","			function GroupElementContainer(group, containerDomNode, isRoot, isWrapped) {","				this.group = group;","				this.containerDomNode = containerDomNode;","				this.isRoot = isRoot;","				this.isWrapped = isWrapped;","				this.expandable = false;","","				if (this.isRoot) {","					if (isIe) {",'						this.contentDiv = logMainContainer.appendChild(document.createElement("div"));','						this.contentDiv.id = this.isWrapped ? "log_wrapped" : "log_unwrapped";',"					} else {","						this.contentDiv = logMainContainer;","					}","				} else {","					var groupElementContainer = this;","					",'					this.mainDiv = document.createElement("div");','					this.mainDiv.className = "group";',"",'					this.headingDiv = this.mainDiv.appendChild(document.createElement("div"));','					this.headingDiv.className = "groupheading";',"",'					this.expander = this.headingDiv.appendChild(document.createElement("span"));','					this.expander.className = "expander unselectable greyedout";',"					this.expander.unselectable = true;",'					var expanderText = this.group.expanded ? "-" : "+";',"					this.expanderTextNode = this.expander.appendChild(document.createTextNode(expanderText));","					",'					this.headingDiv.appendChild(document.createTextNode(" " + this.group.name));',"",'					this.contentDiv = this.mainDiv.appendChild(document.createElement("div"));','					var contentCssClass = this.group.expanded ? "expanded" : "collapsed";','					this.contentDiv.className = "groupcontent " + contentCssClass;',"","					this.expander.onclick = function() {","						if (groupElementContainer.group.expandable) {","							groupElementContainer.group.toggleExpanded();","						}","					};","				}","			}","","			GroupElementContainer.prototype = new LogItemContainerElement();","","			copyProperties(GroupElementContainer.prototype, {","				toggleExpanded: function() {","					if (!this.isRoot) {","						var oldCssClass, newCssClass, expanderText;","						if (this.group.expanded) {",'							newCssClass = "expanded";','							oldCssClass = "collapsed";','							expanderText = "-";',"						} else {",'							newCssClass = "collapsed";','							oldCssClass = "expanded";','							expanderText = "+";',"						}","						replaceClass(this.contentDiv, newCssClass, oldCssClass);","						this.expanderTextNode.nodeValue = expanderText;","					}","				},","","				remove: function() {","					if (!this.isRoot) {","						this.headingDiv = null;","						this.expander.onclick = null;","						this.expander = null;","						this.expanderTextNode = null;","						this.contentDiv = null;","						this.containerDomNode = null;","						this.mainDiv.parentNode.removeChild(this.mainDiv);","						this.mainDiv = null;","					}","				},","","				reverseChildren: function() {","					// Invert the order of the log entries","					var node = null;","","					// Remove all the log container nodes","					var childDomNodes = [];","					while ((node = this.contentDiv.firstChild)) {","						this.contentDiv.removeChild(node);","						childDomNodes.push(node);","					}","","					// Put them all back in reverse order","					while ((node = childDomNodes.pop())) {","						this.contentDiv.appendChild(node);","					}","				},","","				update: function() {","					if (!this.isRoot) {","						if (this.group.expandable) {",'							removeClass(this.expander, "greyedout");',"						} else {",'							addClass(this.expander, "greyedout");',"						}","					}","				},","","				clear: function() {","					if (this.isRoot) {",'						this.contentDiv.innerHTML = "";',"					}","				}","			});","","			/*----------------------------------------------------------------*/","","			function Group(name, isRoot, initiallyExpanded) {","				this.name = name;","				this.group = null;","				this.isRoot = isRoot;","				this.initiallyExpanded = initiallyExpanded;","				this.elementContainers = [];","				this.children = [];","				this.expanded = initiallyExpanded;","				this.rendered = false;","				this.expandable = false;","			}","","			Group.prototype = new LogItem();","","			copyProperties(Group.prototype, {","				addChild: function(logItem) {","					this.children.push(logItem);","					logItem.group = this;","				},","","				render: function() {","					if (isIe) {","						var unwrappedDomContainer, wrappedDomContainer;","						if (this.isRoot) {","							unwrappedDomContainer = logMainContainer;","							wrappedDomContainer = logMainContainer;","						} else {","							unwrappedDomContainer = this.getUnwrappedDomContainer();","							wrappedDomContainer = this.getWrappedDomContainer();","						}","						this.unwrappedElementContainer = new GroupElementContainer(this, unwrappedDomContainer, this.isRoot, false);","						this.wrappedElementContainer = new GroupElementContainer(this, wrappedDomContainer, this.isRoot, true);","						this.elementContainers = [this.unwrappedElementContainer, this.wrappedElementContainer];","					} else {","						var mainDomContainer = this.isRoot ? logMainContainer : this.getMainDomContainer();","						this.mainElementContainer = new GroupElementContainer(this, mainDomContainer, this.isRoot, false);","						this.elementContainers = [this.mainElementContainer];","					}","					this.rendered = true;","				},","","				toggleExpanded: function() {","					this.expanded = !this.expanded;","					for (var i = 0, len = this.elementContainers.length; i < len; i++) {","						this.elementContainers[i].toggleExpanded();","					}","				},","","				expand: function() {","					if (!this.expanded) {","						this.toggleExpanded();","					}","				},","","				accept: function(visitor) {","					visitor.visitGroup(this);","				},","","				reverseChildren: function() {","					if (this.rendered) {","						for (var i = 0, len = this.elementContainers.length; i < len; i++) {","							this.elementContainers[i].reverseChildren();","						}","					}","				},","","				update: function() {","					var previouslyExpandable = this.expandable;","					this.expandable = (this.children.length !== 0);","					if (this.expandable !== previouslyExpandable) {","						for (var i = 0, len = this.elementContainers.length; i < len; i++) {","							this.elementContainers[i].update();","						}","					}","				},","","				flatten: function() {","					var visitor = new GroupFlattener();","					this.accept(visitor);","					return visitor.logEntriesAndSeparators;","				},","","				removeChild: function(child, doUpdate) {","					array_remove(this.children, child);","					child.group = null;","					if (doUpdate) {","						this.update();","					}","				},","","				remove: function(doUpdate, removeFromGroup) {","					for (var i = 0, len = this.children.length; i < len; i++) {","						this.children[i].remove(false, false);","					}","					this.children = [];","					this.update();","					if (this === currentGroup) {","						currentGroup = this.group;","					}","					this.doRemove(doUpdate, removeFromGroup);","				},","","				serialize: function(items) {","					items.push([LogItem.serializedItemKeys.GROUP_START, this.name]);","					for (var i = 0, len = this.children.length; i < len; i++) {","						this.children[i].serialize(items);","					}","					if (this !== currentGroup) {","						items.push([LogItem.serializedItemKeys.GROUP_END]);","					}","				},","","				clear: function() {","					for (var i = 0, len = this.elementContainers.length; i < len; i++) {","						this.elementContainers[i].clear();","					}","				}","			});","","			/*----------------------------------------------------------------*/","","			function LogEntryElementContainer() {","			}","","			LogEntryElementContainer.prototype = new LogItemContainerElement();","","			copyProperties(LogEntryElementContainer.prototype, {","				remove: function() {","					this.doRemove();","				},","","				doRemove: function() {","					this.mainDiv.parentNode.removeChild(this.mainDiv);","					this.mainDiv = null;","					this.contentElement = null;","					this.containerDomNode = null;","				},","","				setContent: function(content, wrappedContent) {","					if (content === this.formattedMessage) {",'						this.contentElement.innerHTML = "";',"						this.contentElement.appendChild(document.createTextNode(this.formattedMessage));","					} else {","						this.contentElement.innerHTML = content;","					}","				},","","				setSearchMatch: function(isMatch) {",'					var oldCssClass = isMatch ? "searchnonmatch" : "searchmatch";','					var newCssClass = isMatch ? "searchmatch" : "searchnonmatch";',"					replaceClass(this.mainDiv, newCssClass, oldCssClass);","				},","","				clearSearch: function() {",'					removeClass(this.mainDiv, "searchmatch");','					removeClass(this.mainDiv, "searchnonmatch");',"				}","			});","","			/*----------------------------------------------------------------*/","","			function LogEntryWrappedElementContainer(logEntry, containerDomNode) {","				this.logEntry = logEntry;","				this.containerDomNode = containerDomNode;",'				this.mainDiv = document.createElement("div");',"				this.mainDiv.appendChild(document.createTextNode(this.logEntry.formattedMessage));",'				this.mainDiv.className = "logentry wrapped " + this.logEntry.level;',"				this.contentElement = this.mainDiv;","			}","","			LogEntryWrappedElementContainer.prototype = new LogEntryElementContainer();","","			LogEntryWrappedElementContainer.prototype.setContent = function(content, wrappedContent) {","				if (content === this.formattedMessage) {",'					this.contentElement.innerHTML = "";',"					this.contentElement.appendChild(document.createTextNode(this.formattedMessage));","				} else {","					this.contentElement.innerHTML = wrappedContent;","				}","			};","","			/*----------------------------------------------------------------*/","","			function LogEntryUnwrappedElementContainer(logEntry, containerDomNode) {","				this.logEntry = logEntry;","				this.containerDomNode = containerDomNode;",'				this.mainDiv = document.createElement("div");','				this.mainDiv.className = "logentry unwrapped " + this.logEntry.level;','				this.pre = this.mainDiv.appendChild(document.createElement("pre"));',"				this.pre.appendChild(document.createTextNode(this.logEntry.formattedMessage));",'				this.pre.className = "unwrapped";',"				this.contentElement = this.pre;","			}","","			LogEntryUnwrappedElementContainer.prototype = new LogEntryElementContainer();","","			LogEntryUnwrappedElementContainer.prototype.remove = function() {","				this.doRemove();","				this.pre = null;","			};","","			/*----------------------------------------------------------------*/","","			function LogEntryMainElementContainer(logEntry, containerDomNode) {","				this.logEntry = logEntry;","				this.containerDomNode = containerDomNode;",'				this.mainDiv = document.createElement("div");','				this.mainDiv.className = "logentry nonielogentry " + this.logEntry.level;','				this.contentElement = this.mainDiv.appendChild(document.createElement("span"));',"				this.contentElement.appendChild(document.createTextNode(this.logEntry.formattedMessage));","			}","","			LogEntryMainElementContainer.prototype = new LogEntryElementContainer();","","			/*----------------------------------------------------------------*/","","			function LogEntry(level, formattedMessage) {","				this.level = level;","				this.formattedMessage = formattedMessage;","				this.rendered = false;","			}","","			LogEntry.prototype = new LogItem();","","			copyProperties(LogEntry.prototype, {","				render: function() {","					var logEntry = this;","					var containerDomNode = this.group.contentDiv;","","					// Support for the CSS attribute white-space in IE for Windows is","					// non-existent pre version 6 and slightly odd in 6, so instead","					// use two different HTML elements","					if (isIe) {",'						this.formattedMessage = this.formattedMessage.replace(/\\r\\n/g, "\\r"); // Workaround for IE\'s treatment of white space',"						this.unwrappedElementContainer = new LogEntryUnwrappedElementContainer(this, this.getUnwrappedDomContainer());","						this.wrappedElementContainer = new LogEntryWrappedElementContainer(this, this.getWrappedDomContainer());","						this.elementContainers = [this.unwrappedElementContainer, this.wrappedElementContainer];","					} else {","						this.mainElementContainer = new LogEntryMainElementContainer(this, this.getMainDomContainer());","						this.elementContainers = [this.mainElementContainer];","					}","					this.content = this.formattedMessage;","					this.rendered = true;","				},","","				setContent: function(content, wrappedContent) {","					if (content != this.content) {","						if (isIe && (content !== this.formattedMessage)) {",'							content = content.replace(/\\r\\n/g, "\\r"); // Workaround for IE\'s treatment of white space',"						}","						for (var i = 0, len = this.elementContainers.length; i < len; i++) {","							this.elementContainers[i].setContent(content, wrappedContent);","						}","						this.content = content;","					}","				},","","				getSearchMatches: function() {","					var matches = [];","					var i, len;","					if (isIe) {",'						var unwrappedEls = getElementsByClass(this.unwrappedElementContainer.mainDiv, "searchterm", "span");','						var wrappedEls = getElementsByClass(this.wrappedElementContainer.mainDiv, "searchterm", "span");',"						for (i = 0, len = unwrappedEls.length; i < len; i++) {","							matches[i] = new Match(this.level, null, unwrappedEls[i], wrappedEls[i]);","						}","					} else {",'						var els = getElementsByClass(this.mainElementContainer.mainDiv, "searchterm", "span");',"						for (i = 0, len = els.length; i < len; i++) {","							matches[i] = new Match(this.level, els[i]);","						}","					}","					return matches;","				},","","				setSearchMatch: function(isMatch) {","					for (var i = 0, len = this.elementContainers.length; i < len; i++) {","						this.elementContainers[i].setSearchMatch(isMatch);","					}","				},","","				clearSearch: function() {","					for (var i = 0, len = this.elementContainers.length; i < len; i++) {","						this.elementContainers[i].clearSearch();","					}","				},","","				accept: function(visitor) {","					visitor.visitLogEntry(this);","				},","","				serialize: function(items) {","					items.push([LogItem.serializedItemKeys.LOG_ENTRY, this.level, this.formattedMessage]);","				}","			});","","			/*----------------------------------------------------------------*/","","			function LogItemVisitor() {","			}","","			LogItemVisitor.prototype = {","				visit: function(logItem) {","				},","","				visitParent: function(logItem) {","					if (logItem.group) {","						logItem.group.accept(this);","					}","				},","","				visitChildren: function(logItem) {","					for (var i = 0, len = logItem.children.length; i < len; i++) {","						logItem.children[i].accept(this);","					}","				},","","				visitLogEntry: function(logEntry) {","					this.visit(logEntry);","				},","","				visitSeparator: function(separator) {","					this.visit(separator);","				},","","				visitGroup: function(group) {","					this.visit(group);","				}","			};","","			/*----------------------------------------------------------------*/","","			function GroupFlattener() {","				this.logEntriesAndSeparators = [];","			}","","			GroupFlattener.prototype = new LogItemVisitor();","","			GroupFlattener.prototype.visitGroup = function(group) {","				this.visitChildren(group);","			};","","			GroupFlattener.prototype.visitLogEntry = function(logEntry) {","				this.logEntriesAndSeparators.push(logEntry);","			};","","			GroupFlattener.prototype.visitSeparator = function(separator) {","				this.logEntriesAndSeparators.push(separator);","			};","","			/*----------------------------------------------------------------*/","","			window.onload = function() {","				// Sort out document.domain","				if (location.search) {",'					var queryBits = unescape(location.search).substr(1).split("&"), nameValueBits;',"					for (var i = 0, len = queryBits.length; i < len; i++) {",'						nameValueBits = queryBits[i].split("=");','						if (nameValueBits[0] == "log4javascript_domain") {',"							document.domain = nameValueBits[1];","							break;","						}","					}","				}","","				// Create DOM objects",'				logMainContainer = $("log");',"				if (isIePre7) {",'					addClass(logMainContainer, "oldIe");',"				}","",'				rootGroup = new Group("root", true);',"				rootGroup.render();","				currentGroup = rootGroup;","				","				setCommandInputWidth();","				setLogContainerHeight();","				toggleLoggingEnabled();","				toggleSearchEnabled();","				toggleSearchFilter();","				toggleSearchHighlight();","				applyFilters();","				checkAllLevels();","				toggleWrap();","				toggleNewestAtTop();","				toggleScrollToLatest();","				renderQueuedLogItems();","				loaded = true;",'				$("command").value = "";','				$("command").autocomplete = "off";','				$("command").onkeydown = function(evt) {',"					evt = getEvent(evt);","					if (evt.keyCode == 10 || evt.keyCode == 13) { // Return/Enter","						evalCommandLine();","						stopPropagation(evt);","					} else if (evt.keyCode == 27) { // Escape",'						this.value = "";',"						this.focus();","					} else if (evt.keyCode == 38 && commandHistory.length > 0) { // Up","						currentCommandIndex = Math.max(0, currentCommandIndex - 1);","						this.value = commandHistory[currentCommandIndex];","						moveCaretToEnd(this);","					} else if (evt.keyCode == 40 && commandHistory.length > 0) { // Down","						currentCommandIndex = Math.min(commandHistory.length - 1, currentCommandIndex + 1);","						this.value = commandHistory[currentCommandIndex];","						moveCaretToEnd(this);","					}","				};","","				// Prevent the keypress moving the caret in Firefox",'				$("command").onkeypress = function(evt) {',"					evt = getEvent(evt);","					if (evt.keyCode == 38 && commandHistory.length > 0 && evt.preventDefault) { // Up","						evt.preventDefault();","					}","				};","","				// Prevent the keyup event blurring the input in Opera",'				$("command").onkeyup = function(evt) {',"					evt = getEvent(evt);","					if (evt.keyCode == 27 && evt.preventDefault) { // Up","						evt.preventDefault();","						this.focus();","					}","				};","","				// Add document keyboard shortcuts","				document.onkeydown = function keyEventHandler(evt) {","					evt = getEvent(evt);","					switch (evt.keyCode) {","						case 69: // Ctrl + shift + E: re-execute last command","							if (evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {","								evalLastCommand();","								cancelKeyEvent(evt);","								return false;","							}","							break;","						case 75: // Ctrl + shift + K: focus search","							if (evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {","								focusSearch();","								cancelKeyEvent(evt);","								return false;","							}","							break;","						case 40: // Ctrl + shift + down arrow: focus command line","						case 76: // Ctrl + shift + L: focus command line","							if (evt.shiftKey && (evt.ctrlKey || evt.metaKey)) {","								focusCommandLine();","								cancelKeyEvent(evt);","								return false;","							}","							break;","					}","				};","","				// Workaround to make sure log div starts at the correct size","				setTimeout(setLogContainerHeight, 20);","","				setShowCommandLine(showCommandLine);","				doSearch();","			};","","			window.onunload = function() {","				if (mainWindowExists()) {","					appender.unload();","				}","				appender = null;","			};","","			/*----------------------------------------------------------------*/","","			function toggleLoggingEnabled() {",'				setLoggingEnabled($("enableLogging").checked);',"			}","","			function setLoggingEnabled(enable) {","				loggingEnabled = enable;","			}","","			var appender = null;","","			function setAppender(appenderParam) {","				appender = appenderParam;","			}","","			function setShowCloseButton(showCloseButton) {",'				$("closeButton").style.display = showCloseButton ? "inline" : "none";',"			}","","			function setShowHideButton(showHideButton) {",'				$("hideButton").style.display = showHideButton ? "inline" : "none";',"			}","","			var newestAtTop = false;","","			/*----------------------------------------------------------------*/","","			function LogItemContentReverser() {","			}","			","			LogItemContentReverser.prototype = new LogItemVisitor();","			","			LogItemContentReverser.prototype.visitGroup = function(group) {","				group.reverseChildren();","				this.visitChildren(group);","			};","","			/*----------------------------------------------------------------*/","","			function setNewestAtTop(isNewestAtTop) {","				var oldNewestAtTop = newestAtTop;","				var i, iLen, j, jLen;","				newestAtTop = Boolean(isNewestAtTop);","				if (oldNewestAtTop != newestAtTop) {","					var visitor = new LogItemContentReverser();","					rootGroup.accept(visitor);","","					// Reassemble the matches array","					if (currentSearch) {","						var currentMatch = currentSearch.matches[currentMatchIndex];","						var matchIndex = 0;","						var matches = [];","						var actOnLogEntry = function(logEntry) {","							var logEntryMatches = logEntry.getSearchMatches();","							for (j = 0, jLen = logEntryMatches.length; j < jLen; j++) {","								matches[matchIndex] = logEntryMatches[j];","								if (currentMatch && logEntryMatches[j].equals(currentMatch)) {","									currentMatchIndex = matchIndex;","								}","								matchIndex++;","							}","						};","						if (newestAtTop) {","							for (i = logEntries.length - 1; i >= 0; i--) {","								actOnLogEntry(logEntries[i]);","							}","						} else {","							for (i = 0, iLen = logEntries.length; i < iLen; i++) {","								actOnLogEntry(logEntries[i]);","							}","						}","						currentSearch.matches = matches;","						if (currentMatch) {","							currentMatch.setCurrent();","						}","					} else if (scrollToLatest) {","						doScrollToLatest();","					}","				}",'				$("newestAtTop").checked = isNewestAtTop;',"			}","","			function toggleNewestAtTop() {",'				var isNewestAtTop = $("newestAtTop").checked;',"				setNewestAtTop(isNewestAtTop);","			}","","			var scrollToLatest = true;","","			function setScrollToLatest(isScrollToLatest) {","				scrollToLatest = isScrollToLatest;","				if (scrollToLatest) {","					doScrollToLatest();","				}",'				$("scrollToLatest").checked = isScrollToLatest;',"			}","","			function toggleScrollToLatest() {",'				var isScrollToLatest = $("scrollToLatest").checked;',"				setScrollToLatest(isScrollToLatest);","			}","","			function doScrollToLatest() {","				var l = logMainContainer;",'				if (typeof l.scrollTop != "undefined") {',"					if (newestAtTop) {","						l.scrollTop = 0;","					} else {","						var latestLogEntry = l.lastChild;","						if (latestLogEntry) {","							l.scrollTop = l.scrollHeight;","						}","					}","				}","			}","","			var closeIfOpenerCloses = true;","","			function setCloseIfOpenerCloses(isCloseIfOpenerCloses) {","				closeIfOpenerCloses = isCloseIfOpenerCloses;","			}","","			var maxMessages = null;","","			function setMaxMessages(max) {","				maxMessages = max;","				pruneLogEntries();","			}","","			var showCommandLine = false;","","			function setShowCommandLine(isShowCommandLine) {","				showCommandLine = isShowCommandLine;","				if (loaded) {",'					$("commandLine").style.display = showCommandLine ? "block" : "none";',"					setCommandInputWidth();","					setLogContainerHeight();","				}","			}","","			function focusCommandLine() {","				if (loaded) {",'					$("command").focus();',"				}","			}","","			function focusSearch() {","				if (loaded) {",'					$("searchBox").focus();',"				}","			}","","			function getLogItems() {","				var items = [];","				for (var i = 0, len = logItems.length; i < len; i++) {","					logItems[i].serialize(items);","				}","				return items;","			}","","			function setLogItems(items) {","				var loggingReallyEnabled = loggingEnabled;","				// Temporarily turn logging on","				loggingEnabled = true;","				for (var i = 0, len = items.length; i < len; i++) {","					switch (items[i][0]) {","						case LogItem.serializedItemKeys.LOG_ENTRY:","							log(items[i][1], items[i][2]);","							break;","						case LogItem.serializedItemKeys.GROUP_START:","							group(items[i][1]);","							break;","						case LogItem.serializedItemKeys.GROUP_END:","							groupEnd();","							break;","					}","				}","				loggingEnabled = loggingReallyEnabled;","			}","","			function log(logLevel, formattedMessage) {","				if (loggingEnabled) {","					var logEntry = new LogEntry(logLevel, formattedMessage);","					logEntries.push(logEntry);","					logEntriesAndSeparators.push(logEntry);","					logItems.push(logEntry);","					currentGroup.addChild(logEntry);","					if (loaded) {","						if (logQueuedEventsTimer !== null) {","							clearTimeout(logQueuedEventsTimer);","						}","						logQueuedEventsTimer = setTimeout(renderQueuedLogItems, renderDelay);","						unrenderedLogItemsExist = true;","					}","				}","			}","","			function renderQueuedLogItems() {","				logQueuedEventsTimer = null;","				var pruned = pruneLogEntries();","","				// Render any unrendered log entries and apply the current search to them","				var initiallyHasMatches = currentSearch ? currentSearch.hasMatches() : false;","				for (var i = 0, len = logItems.length; i < len; i++) {","					if (!logItems[i].rendered) {","						logItems[i].render();","						logItems[i].appendToLog();","						if (currentSearch && (logItems[i] instanceof LogEntry)) {","							currentSearch.applyTo(logItems[i]);","						}","					}","				}","				if (currentSearch) {","					if (pruned) {","						if (currentSearch.hasVisibleMatches()) {","							if (currentMatchIndex === null) {","								setCurrentMatchIndex(0);","							}","							displayMatches();","						} else {","							displayNoMatches();","						}","					} else if (!initiallyHasMatches && currentSearch.hasVisibleMatches()) {","						setCurrentMatchIndex(0);","						displayMatches();","					}","				}","				if (scrollToLatest) {","					doScrollToLatest();","				}","				unrenderedLogItemsExist = false;","			}","","			function pruneLogEntries() {","				if ((maxMessages !== null) && (logEntriesAndSeparators.length > maxMessages)) {","					var numberToDelete = logEntriesAndSeparators.length - maxMessages;","					var prunedLogEntries = logEntriesAndSeparators.slice(0, numberToDelete);","					if (currentSearch) {","						currentSearch.removeMatches(prunedLogEntries);","					}","					var group;","					for (var i = 0; i < numberToDelete; i++) {","						group = logEntriesAndSeparators[i].group;","						array_remove(logItems, logEntriesAndSeparators[i]);","						array_remove(logEntries, logEntriesAndSeparators[i]);","						logEntriesAndSeparators[i].remove(true, true);","						if (group.children.length === 0 && group !== currentGroup && group !== rootGroup) {","							array_remove(logItems, group);","							group.remove(true, true);","						}","					}","					logEntriesAndSeparators = array_removeFromStart(logEntriesAndSeparators, numberToDelete);","					return true;","				}","				return false;","			}","","			function group(name, startExpanded) {","				if (loggingEnabled) {",'					initiallyExpanded = (typeof startExpanded === "undefined") ? true : Boolean(startExpanded);',"					var newGroup = new Group(name, false, initiallyExpanded);","					currentGroup.addChild(newGroup);","					currentGroup = newGroup;","					logItems.push(newGroup);","					if (loaded) {","						if (logQueuedEventsTimer !== null) {","							clearTimeout(logQueuedEventsTimer);","						}","						logQueuedEventsTimer = setTimeout(renderQueuedLogItems, renderDelay);","						unrenderedLogItemsExist = true;","					}","				}","			}","","			function groupEnd() {","				currentGroup = (currentGroup === rootGroup) ? rootGroup : currentGroup.group;","			}","","			function mainPageReloaded() {","				currentGroup = rootGroup;","				var separator = new Separator();","				logEntriesAndSeparators.push(separator);","				logItems.push(separator);","				currentGroup.addChild(separator);","			}","","			function closeWindow() {","				if (appender && mainWindowExists()) {","					appender.close(true);","				} else {","					window.close();","				}","			}","","			function hide() {","				if (appender && mainWindowExists()) {","					appender.hide();","				}","			}","","			var mainWindow = window;",'			var windowId = "log4javascriptConsoleWindow_" + new Date().getTime() + "_" + ("" + Math.random()).substr(2);',"","			function setMainWindow(win) {","				mainWindow = win;","				mainWindow[windowId] = window;","				// If this is a pop-up, poll the opener to see if it's closed","				if (opener && closeIfOpenerCloses) {","					pollOpener();","				}","			}","","			function pollOpener() {","				if (closeIfOpenerCloses) {","					if (mainWindowExists()) {","						setTimeout(pollOpener, 500);","					} else {","						closeWindow();","					}","				}","			}","","			function mainWindowExists() {","				try {","					return (mainWindow && !mainWindow.closed &&","						mainWindow[windowId] == window);","				} catch (ex) {}","				return false;","			}","",'			var logLevels = ["TRACE", "DEBUG", "INFO", "WARN", "ERROR", "FATAL"];',"","			function getCheckBox(logLevel) {",'				return $("switch_" + logLevel);',"			}","","			function getIeWrappedLogContainer() {",'				return $("log_wrapped");',"			}","","			function getIeUnwrappedLogContainer() {",'				return $("log_unwrapped");',"			}","","			function applyFilters() {","				for (var i = 0; i < logLevels.length; i++) {","					if (getCheckBox(logLevels[i]).checked) {","						addClass(logMainContainer, logLevels[i]);","					} else {","						removeClass(logMainContainer, logLevels[i]);","					}","				}","				updateSearchFromFilters();","			}","","			function toggleAllLevels() {",'				var turnOn = $("switch_ALL").checked;',"				for (var i = 0; i < logLevels.length; i++) {","					getCheckBox(logLevels[i]).checked = turnOn;","					if (turnOn) {","						addClass(logMainContainer, logLevels[i]);","					} else {","						removeClass(logMainContainer, logLevels[i]);","					}","				}","			}","","			function checkAllLevels() {","				for (var i = 0; i < logLevels.length; i++) {","					if (!getCheckBox(logLevels[i]).checked) {",'						getCheckBox("ALL").checked = false;',"						return;","					}","				}",'				getCheckBox("ALL").checked = true;',"			}","","			function clearLog() {","				rootGroup.clear();","				currentGroup = rootGroup;","				logEntries = [];","				logItems = [];","				logEntriesAndSeparators = [];"," 				doSearch();","			}","","			function toggleWrap() {",'				var enable = $("wrap").checked;',"				if (enable) {",'					addClass(logMainContainer, "wrap");',"				} else {",'					removeClass(logMainContainer, "wrap");',"				}","				refreshCurrentMatch();","			}","","			/* ------------------------------------------------------------------- */","","			// Search","","			var searchTimer = null;","","			function scheduleSearch() {","				try {","					clearTimeout(searchTimer);","				} catch (ex) {","					// Do nothing","				}","				searchTimer = setTimeout(doSearch, 500);","			}","","			function Search(searchTerm, isRegex, searchRegex, isCaseSensitive) {","				this.searchTerm = searchTerm;","				this.isRegex = isRegex;","				this.searchRegex = searchRegex;","				this.isCaseSensitive = isCaseSensitive;","				this.matches = [];","			}","","			Search.prototype = {","				hasMatches: function() {","					return this.matches.length > 0;","				},","","				hasVisibleMatches: function() {","					if (this.hasMatches()) {","						for (var i = 0; i < this.matches.length; i++) {","							if (this.matches[i].isVisible()) {","								return true;","							}","						}","					}","					return false;","				},","","				match: function(logEntry) {","					var entryText = String(logEntry.formattedMessage);","					var matchesSearch = false;","					if (this.isRegex) {","						matchesSearch = this.searchRegex.test(entryText);","					} else if (this.isCaseSensitive) {","						matchesSearch = (entryText.indexOf(this.searchTerm) > -1);","					} else {","						matchesSearch = (entryText.toLowerCase().indexOf(this.searchTerm.toLowerCase()) > -1);","					}","					return matchesSearch;","				},","","				getNextVisibleMatchIndex: function() {","					for (var i = currentMatchIndex + 1; i < this.matches.length; i++) {","						if (this.matches[i].isVisible()) {","							return i;","						}","					}","					// Start again from the first match","					for (i = 0; i <= currentMatchIndex; i++) {","						if (this.matches[i].isVisible()) {","							return i;","						}","					}","					return -1;","				},","","				getPreviousVisibleMatchIndex: function() {","					for (var i = currentMatchIndex - 1; i >= 0; i--) {","						if (this.matches[i].isVisible()) {","							return i;","						}","					}","					// Start again from the last match","					for (var i = this.matches.length - 1; i >= currentMatchIndex; i--) {","						if (this.matches[i].isVisible()) {","							return i;","						}","					}","					return -1;","				},","","				applyTo: function(logEntry) {","					var doesMatch = this.match(logEntry);","					if (doesMatch) {","						logEntry.group.expand();","						logEntry.setSearchMatch(true);","						var logEntryContent;","						var wrappedLogEntryContent;",'						var searchTermReplacementStartTag = "<span class=\\"searchterm\\">";','						var searchTermReplacementEndTag = "<" + "/span>";','						var preTagName = isIe ? "pre" : "span";','						var preStartTag = "<" + preTagName + " class=\\"pre\\">";','						var preEndTag = "<" + "/" + preTagName + ">";',"						var startIndex = 0;","						var searchIndex, matchedText, textBeforeMatch;","						if (this.isRegex) {",'							var flags = this.isCaseSensitive ? "g" : "gi";','							var capturingRegex = new RegExp("(" + this.searchRegex.source + ")", flags);',"","							// Replace the search term with temporary tokens for the start and end tags",'							var rnd = ("" + Math.random()).substr(2);','							var startToken = "%%s" + rnd + "%%";','							var endToken = "%%e" + rnd + "%%";','							logEntryContent = logEntry.formattedMessage.replace(capturingRegex, startToken + "$1" + endToken);',"","							// Escape the HTML to get rid of angle brackets","							logEntryContent = escapeHtml(logEntryContent);","","							// Substitute the proper HTML back in for the search match","							var result;","							var searchString = logEntryContent;",'							logEntryContent = "";','							wrappedLogEntryContent = "";',"							while ((searchIndex = searchString.indexOf(startToken, startIndex)) > -1) {","								var endTokenIndex = searchString.indexOf(endToken, searchIndex);","								matchedText = searchString.substring(searchIndex + startToken.length, endTokenIndex);","								textBeforeMatch = searchString.substring(startIndex, searchIndex);","								logEntryContent += preStartTag + textBeforeMatch + preEndTag;","								logEntryContent += searchTermReplacementStartTag + preStartTag + matchedText +","									preEndTag + searchTermReplacementEndTag;","								if (isIe) {","									wrappedLogEntryContent += textBeforeMatch + searchTermReplacementStartTag +","										matchedText + searchTermReplacementEndTag;","								}","								startIndex = endTokenIndex + endToken.length;","							}","							logEntryContent += preStartTag + searchString.substr(startIndex) + preEndTag;","							if (isIe) {","								wrappedLogEntryContent += searchString.substr(startIndex);","							}","						} else {",'							logEntryContent = "";','							wrappedLogEntryContent = "";',"							var searchTermReplacementLength = searchTermReplacementStartTag.length +","								this.searchTerm.length + searchTermReplacementEndTag.length;","							var searchTermLength = this.searchTerm.length;","							var searchTermLowerCase = this.searchTerm.toLowerCase();","							var logTextLowerCase = logEntry.formattedMessage.toLowerCase();","							while ((searchIndex = logTextLowerCase.indexOf(searchTermLowerCase, startIndex)) > -1) {","								matchedText = escapeHtml(logEntry.formattedMessage.substr(searchIndex, this.searchTerm.length));","								textBeforeMatch = escapeHtml(logEntry.formattedMessage.substring(startIndex, searchIndex));","								var searchTermReplacement = searchTermReplacementStartTag +","									preStartTag + matchedText + preEndTag + searchTermReplacementEndTag;","								logEntryContent += preStartTag + textBeforeMatch + preEndTag + searchTermReplacement;","								if (isIe) {","									wrappedLogEntryContent += textBeforeMatch + searchTermReplacementStartTag +","										matchedText + searchTermReplacementEndTag;","								}","								startIndex = searchIndex + searchTermLength;","							}","							var textAfterLastMatch = escapeHtml(logEntry.formattedMessage.substr(startIndex));","							logEntryContent += preStartTag + textAfterLastMatch + preEndTag;","							if (isIe) {","								wrappedLogEntryContent += textAfterLastMatch;","							}","						}","						logEntry.setContent(logEntryContent, wrappedLogEntryContent);","						var logEntryMatches = logEntry.getSearchMatches();","						this.matches = this.matches.concat(logEntryMatches);","					} else {","						logEntry.setSearchMatch(false);","						logEntry.setContent(logEntry.formattedMessage, logEntry.formattedMessage);","					}","					return doesMatch;","				},","","				removeMatches: function(logEntries) {","					var matchesToRemoveCount = 0;","					var currentMatchRemoved = false;","					var matchesToRemove = [];","					var i, iLen, j, jLen;","","					// Establish the list of matches to be removed","					for (i = 0, iLen = this.matches.length; i < iLen; i++) {","						for (j = 0, jLen = logEntries.length; j < jLen; j++) {","							if (this.matches[i].belongsTo(logEntries[j])) {","								matchesToRemove.push(this.matches[i]);","								if (i === currentMatchIndex) {","									currentMatchRemoved = true;","								}","							}","						}","					}","","					// Set the new current match index if the current match has been deleted","					// This will be the first match that appears after the first log entry being","					// deleted, if one exists; otherwise, it's the first match overall","					var newMatch = currentMatchRemoved ? null : this.matches[currentMatchIndex];","					if (currentMatchRemoved) {","						for (i = currentMatchIndex, iLen = this.matches.length; i < iLen; i++) {","							if (this.matches[i].isVisible() && !array_contains(matchesToRemove, this.matches[i])) {","								newMatch = this.matches[i];","								break;","							}","						}","					}","","					// Remove the matches","					for (i = 0, iLen = matchesToRemove.length; i < iLen; i++) {","						array_remove(this.matches, matchesToRemove[i]);","						matchesToRemove[i].remove();","					}","","					// Set the new match, if one exists","					if (this.hasVisibleMatches()) {","						if (newMatch === null) {","							setCurrentMatchIndex(0);","						} else {","							// Get the index of the new match","							var newMatchIndex = 0;","							for (i = 0, iLen = this.matches.length; i < iLen; i++) {","								if (newMatch === this.matches[i]) {","									newMatchIndex = i;","									break;","								}","							}","							setCurrentMatchIndex(newMatchIndex);","						}","					} else {","						currentMatchIndex = null;","						displayNoMatches();","					}","				}","			};","","			function getPageOffsetTop(el, container) {","				var currentEl = el;","				var y = 0;","				while (currentEl && currentEl != container) {","					y += currentEl.offsetTop;","					currentEl = currentEl.offsetParent;","				}","				return y;","			}","","			function scrollIntoView(el) {","				var logContainer = logMainContainer;","				// Check if the whole width of the element is visible and centre if not",'				if (!$("wrap").checked) {',"					var logContainerLeft = logContainer.scrollLeft;","					var logContainerRight = logContainerLeft  + logContainer.offsetWidth;","					var elLeft = el.offsetLeft;","					var elRight = elLeft + el.offsetWidth;","					if (elLeft < logContainerLeft || elRight > logContainerRight) {","						logContainer.scrollLeft = elLeft - (logContainer.offsetWidth - el.offsetWidth) / 2;","					}","				}","				// Check if the whole height of the element is visible and centre if not","				var logContainerTop = logContainer.scrollTop;","				var logContainerBottom = logContainerTop  + logContainer.offsetHeight;","				var elTop = getPageOffsetTop(el) - getToolBarsHeight();","				var elBottom = elTop + el.offsetHeight;","				if (elTop < logContainerTop || elBottom > logContainerBottom) {","					logContainer.scrollTop = elTop - (logContainer.offsetHeight - el.offsetHeight) / 2;","				}","			}","","			function Match(logEntryLevel, spanInMainDiv, spanInUnwrappedPre, spanInWrappedDiv) {","				this.logEntryLevel = logEntryLevel;","				this.spanInMainDiv = spanInMainDiv;","				if (isIe) {","					this.spanInUnwrappedPre = spanInUnwrappedPre;","					this.spanInWrappedDiv = spanInWrappedDiv;","				}","				this.mainSpan = isIe ? spanInUnwrappedPre : spanInMainDiv;","			}","","			Match.prototype = {","				equals: function(match) {","					return this.mainSpan === match.mainSpan;","				},","","				setCurrent: function() {","					if (isIe) {",'						addClass(this.spanInUnwrappedPre, "currentmatch");','						addClass(this.spanInWrappedDiv, "currentmatch");',"						// Scroll the visible one into view",'						var elementToScroll = $("wrap").checked ? this.spanInWrappedDiv : this.spanInUnwrappedPre;',"						scrollIntoView(elementToScroll);","					} else {",'						addClass(this.spanInMainDiv, "currentmatch");',"						scrollIntoView(this.spanInMainDiv);","					}","				},","","				belongsTo: function(logEntry) {","					if (isIe) {","						return isDescendant(this.spanInUnwrappedPre, logEntry.unwrappedPre);","					} else {","						return isDescendant(this.spanInMainDiv, logEntry.mainDiv);","					}","				},","","				setNotCurrent: function() {","					if (isIe) {",'						removeClass(this.spanInUnwrappedPre, "currentmatch");','						removeClass(this.spanInWrappedDiv, "currentmatch");',"					} else {",'						removeClass(this.spanInMainDiv, "currentmatch");',"					}","				},","","				isOrphan: function() {","					return isOrphan(this.mainSpan);","				},","","				isVisible: function() {","					return getCheckBox(this.logEntryLevel).checked;","				},","","				remove: function() {","					if (isIe) {","						this.spanInUnwrappedPre = null;","						this.spanInWrappedDiv = null;","					} else {","						this.spanInMainDiv = null;","					}","				}","			};","","			var currentSearch = null;","			var currentMatchIndex = null;","","			function doSearch() {",'				var searchBox = $("searchBox");',"				var searchTerm = searchBox.value;",'				var isRegex = $("searchRegex").checked;','				var isCaseSensitive = $("searchCaseSensitive").checked;',"				var i;","",'				if (searchTerm === "") {','					$("searchReset").disabled = true;','					$("searchNav").style.display = "none";','					removeClass(document.body, "searching");','					removeClass(searchBox, "hasmatches");','					removeClass(searchBox, "nomatches");',"					for (i = 0; i < logEntries.length; i++) {","						logEntries[i].clearSearch();","						logEntries[i].setContent(logEntries[i].formattedMessage, logEntries[i].formattedMessage);","					}","					currentSearch = null;","					setLogContainerHeight();","				} else {",'					$("searchReset").disabled = false;','					$("searchNav").style.display = "block";',"					var searchRegex;","					var regexValid;","					if (isRegex) {","						try {",'							searchRegex = isCaseSensitive ? new RegExp(searchTerm, "g") : new RegExp(searchTerm, "gi");',"							regexValid = true;",'							replaceClass(searchBox, "validregex", "invalidregex");','							searchBox.title = "Valid regex";',"						} catch (ex) {","							regexValid = false;",'							replaceClass(searchBox, "invalidregex", "validregex");','							searchBox.title = "Invalid regex: " + (ex.message ? ex.message : (ex.description ? ex.description : "unknown error"));',"							return;","						}","					} else {",'						searchBox.title = "";','						removeClass(searchBox, "validregex");','						removeClass(searchBox, "invalidregex");',"					}",'					addClass(document.body, "searching");',"					currentSearch = new Search(searchTerm, isRegex, searchRegex, isCaseSensitive);","					for (i = 0; i < logEntries.length; i++) {","						currentSearch.applyTo(logEntries[i]);","					}","					setLogContainerHeight();","","					// Highlight the first search match","					if (currentSearch.hasVisibleMatches()) {","						setCurrentMatchIndex(0);","						displayMatches();","					} else {","						displayNoMatches();","					}","				}","			}","","			function updateSearchFromFilters() {","				if (currentSearch) {","					if (currentSearch.hasMatches()) {","						if (currentMatchIndex === null) {","							currentMatchIndex = 0;","						}","						var currentMatch = currentSearch.matches[currentMatchIndex];","						if (currentMatch.isVisible()) {","							displayMatches();","							setCurrentMatchIndex(currentMatchIndex);","						} else {","							currentMatch.setNotCurrent();","							// Find the next visible match, if one exists","							var nextVisibleMatchIndex = currentSearch.getNextVisibleMatchIndex();","							if (nextVisibleMatchIndex > -1) {","								setCurrentMatchIndex(nextVisibleMatchIndex);","								displayMatches();","							} else {","								displayNoMatches();","							}","						}","					} else {","						displayNoMatches();","					}","				}","			}","","			function refreshCurrentMatch() {","				if (currentSearch && currentSearch.hasVisibleMatches()) {","					setCurrentMatchIndex(currentMatchIndex);","				}","			}","","			function displayMatches() {",'				replaceClass($("searchBox"), "hasmatches", "nomatches");','				$("searchBox").title = "" + currentSearch.matches.length + " matches found";','				$("searchNav").style.display = "block";',"				setLogContainerHeight();","			}","","			function displayNoMatches() {",'				replaceClass($("searchBox"), "nomatches", "hasmatches");','				$("searchBox").title = "No matches found";','				$("searchNav").style.display = "none";',"				setLogContainerHeight();","			}","","			function toggleSearchEnabled(enable) {",'				enable = (typeof enable == "undefined") ? !$("searchDisable").checked : enable;','				$("searchBox").disabled = !enable;','				$("searchReset").disabled = !enable;','				$("searchRegex").disabled = !enable;','				$("searchNext").disabled = !enable;','				$("searchPrevious").disabled = !enable;','				$("searchCaseSensitive").disabled = !enable;','				$("searchNav").style.display = (enable && ($("searchBox").value !== "") &&',"						currentSearch && currentSearch.hasVisibleMatches()) ?",'					"block" : "none";',"				if (enable) {",'					removeClass($("search"), "greyedout");','					addClass(document.body, "searching");','					if ($("searchHighlight").checked) {','						addClass(logMainContainer, "searchhighlight");',"					} else {",'						removeClass(logMainContainer, "searchhighlight");',"					}",'					if ($("searchFilter").checked) {','						addClass(logMainContainer, "searchfilter");',"					} else {",'						removeClass(logMainContainer, "searchfilter");',"					}",'					$("searchDisable").checked = !enable;',"				} else {",'					addClass($("search"), "greyedout");','					removeClass(document.body, "searching");','					removeClass(logMainContainer, "searchhighlight");','					removeClass(logMainContainer, "searchfilter");',"				}","				setLogContainerHeight();","			}","","			function toggleSearchFilter() {",'				var enable = $("searchFilter").checked;',"				if (enable) {",'					addClass(logMainContainer, "searchfilter");',"				} else {",'					removeClass(logMainContainer, "searchfilter");',"				}","				refreshCurrentMatch();","			}","","			function toggleSearchHighlight() {",'				var enable = $("searchHighlight").checked;',"				if (enable) {",'					addClass(logMainContainer, "searchhighlight");',"				} else {",'					removeClass(logMainContainer, "searchhighlight");',"				}","			}","","			function clearSearch() {",'				$("searchBox").value = "";',"				doSearch();","			}","","			function searchNext() {","				if (currentSearch !== null && currentMatchIndex !== null) {","					currentSearch.matches[currentMatchIndex].setNotCurrent();","					var nextMatchIndex = currentSearch.getNextVisibleMatchIndex();",'					if (nextMatchIndex > currentMatchIndex || confirm("Reached the end of the page. Start from the top?")) {',"						setCurrentMatchIndex(nextMatchIndex);","					}","				}","			}","","			function searchPrevious() {","				if (currentSearch !== null && currentMatchIndex !== null) {","					currentSearch.matches[currentMatchIndex].setNotCurrent();","					var previousMatchIndex = currentSearch.getPreviousVisibleMatchIndex();",'					if (previousMatchIndex < currentMatchIndex || confirm("Reached the start of the page. Continue from the bottom?")) {',"						setCurrentMatchIndex(previousMatchIndex);","					}","				}","			}","","			function setCurrentMatchIndex(index) {","				currentMatchIndex = index;","				currentSearch.matches[currentMatchIndex].setCurrent();","			}","","			/* ------------------------------------------------------------------------- */","","			// CSS Utilities","","			function addClass(el, cssClass) {","				if (!hasClass(el, cssClass)) {","					if (el.className) {",'						el.className += " " + cssClass;',"					} else {","						el.className = cssClass;","					}","				}","			}","","			function hasClass(el, cssClass) {","				if (el.className) {",'					var classNames = el.className.split(" ");',"					return array_contains(classNames, cssClass);","				}","				return false;","			}","","			function removeClass(el, cssClass) {","				if (hasClass(el, cssClass)) {","					// Rebuild the className property",'					var existingClasses = el.className.split(" ");',"					var newClasses = [];","					for (var i = 0, len = existingClasses.length; i < len; i++) {","						if (existingClasses[i] != cssClass) {","							newClasses[newClasses.length] = existingClasses[i];","						}","					}",'					el.className = newClasses.join(" ");',"				}","			}","","			function replaceClass(el, newCssClass, oldCssClass) {","				removeClass(el, oldCssClass);","				addClass(el, newCssClass);","			}","","			/* ------------------------------------------------------------------------- */","","			// Other utility functions","","			function getElementsByClass(el, cssClass, tagName) {","				var elements = el.getElementsByTagName(tagName);","				var matches = [];","				for (var i = 0, len = elements.length; i < len; i++) {","					if (hasClass(elements[i], cssClass)) {","						matches.push(elements[i]);","					}","				}","				return matches;","			}","","			// Syntax borrowed from Prototype library","			function $(id) {","				return document.getElementById(id);","			}","","			function isDescendant(node, ancestorNode) {","				while (node != null) {","					if (node === ancestorNode) {","						return true;","					}","					node = node.parentNode;","				}","				return false;","			}","","			function isOrphan(node) {","				var currentNode = node;","				while (currentNode) {","					if (currentNode == document.body) {","						return false;","					}","					currentNode = currentNode.parentNode;","				}","				return true;","			}","","			function escapeHtml(str) {",'				return str.replace(/&/g, "&amp;").replace(/[<]/g, "&lt;").replace(/>/g, "&gt;");',"			}","","			function getWindowWidth() {","				if (window.innerWidth) {","					return window.innerWidth;","				} else if (document.documentElement && document.documentElement.clientWidth) {","					return document.documentElement.clientWidth;","				} else if (document.body) {","					return document.body.clientWidth;","				}","				return 0;","			}","","			function getWindowHeight() {","				if (window.innerHeight) {","					return window.innerHeight;","				} else if (document.documentElement && document.documentElement.clientHeight) {","					return document.documentElement.clientHeight;","				} else if (document.body) {","					return document.body.clientHeight;","				}","				return 0;","			}","","			function getToolBarsHeight() {",'				return $("switches").offsetHeight;',"			}","","			function getChromeHeight() {","				var height = getToolBarsHeight();","				if (showCommandLine) {",'					height += $("commandLine").offsetHeight;',"				}","				return height;","			}","","			function setLogContainerHeight() {","				if (logMainContainer) {","					var windowHeight = getWindowHeight();",'					$("body").style.height = getWindowHeight() + "px";','					logMainContainer.style.height = "" +','						Math.max(0, windowHeight - getChromeHeight()) + "px";',"				}","			}","","			function setCommandInputWidth() {","				if (showCommandLine) {",'					$("command").style.width = "" + Math.max(0, $("commandLineContainer").offsetWidth -','						($("evaluateButton").offsetWidth + 13)) + "px";',"				}","			}","","			window.onresize = function() {","				setCommandInputWidth();","				setLogContainerHeight();","			};","","			if (!Array.prototype.push) {","				Array.prototype.push = function() {","			        for (var i = 0, len = arguments.length; i < len; i++){","			            this[this.length] = arguments[i];","			        }","			        return this.length;","				};","			}","","			if (!Array.prototype.pop) {","				Array.prototype.pop = function() {","					if (this.length > 0) {","						var val = this[this.length - 1];","						this.length = this.length - 1;","						return val;","					}","				};","			}","","			if (!Array.prototype.shift) {","				Array.prototype.shift = function() {","					if (this.length > 0) {","						var firstItem = this[0];","						for (var i = 0, len = this.length - 1; i < len; i++) {","							this[i] = this[i + 1];","						}","						this.length = this.length - 1;","						return firstItem;","					}","				};","			}","","			if (!Array.prototype.splice) {","				Array.prototype.splice = function(startIndex, deleteCount) {","					var itemsAfterDeleted = this.slice(startIndex + deleteCount);","					var itemsDeleted = this.slice(startIndex, startIndex + deleteCount);","					this.length = startIndex;","					// Copy the arguments into a proper Array object","					var argumentsArray = [];","					for (var i = 0, len = arguments.length; i < len; i++) {","						argumentsArray[i] = arguments[i];","					}","					var itemsToAppend = (argumentsArray.length > 2) ?","						itemsAfterDeleted = argumentsArray.slice(2).concat(itemsAfterDeleted) : itemsAfterDeleted;","					for (i = 0, len = itemsToAppend.length; i < len; i++) {","						this.push(itemsToAppend[i]);","					}","					return itemsDeleted;","				};","			}","","			function array_remove(arr, val) {","				var index = -1;","				for (var i = 0, len = arr.length; i < len; i++) {","					if (arr[i] === val) {","						index = i;","						break;","					}","				}","				if (index >= 0) {","					arr.splice(index, 1);","					return index;","				} else {","					return false;","				}","			}","","			function array_removeFromStart(array, numberToRemove) {","				if (Array.prototype.splice) {","					array.splice(0, numberToRemove);","				} else {","					for (var i = numberToRemove, len = array.length; i < len; i++) {","						array[i - numberToRemove] = array[i];","					}","					array.length = array.length - numberToRemove;","				}","				return array;","			}","","			function array_contains(arr, val) {","				for (var i = 0, len = arr.length; i < len; i++) {","					if (arr[i] == val) {","						return true;","					}","				}","				return false;","			}","","			function getErrorMessage(ex) {","				if (ex.message) {","					return ex.message;","				} else if (ex.description) {","					return ex.description;","				}",'				return "" + ex;',"			}","","			function moveCaretToEnd(input) {","				if (input.setSelectionRange) {","					input.focus();","					var length = input.value.length;","					input.setSelectionRange(length, length);","				} else if (input.createTextRange) {","					var range = input.createTextRange();","					range.collapse(false);","					range.select();","				}","				input.focus();","			}","","			function stopPropagation(evt) {","				if (evt.stopPropagation) {","					evt.stopPropagation();",'				} else if (typeof evt.cancelBubble != "undefined") {',"					evt.cancelBubble = true;","				}","			}","","			function getEvent(evt) {","				return evt ? evt : event;","			}","","			function getTarget(evt) {","				return evt.target ? evt.target : evt.srcElement;","			}","","			function getRelatedTarget(evt) {","				if (evt.relatedTarget) {","					return evt.relatedTarget;","				} else if (evt.srcElement) {","					switch(evt.type) {",'						case "mouseover":',"							return evt.fromElement;",'						case "mouseout":',"							return evt.toElement;","						default:","							return evt.srcElement;","					}","				}","			}","","			function cancelKeyEvent(evt) {","				evt.returnValue = false;","				stopPropagation(evt);","			}","","			function evalCommandLine() {",'				var expr = $("command").value;',"				evalCommand(expr);",'				$("command").value = "";',"			}","","			function evalLastCommand() {","				if (lastCommand != null) {","					evalCommand(lastCommand);","				}","			}","","			var lastCommand = null;","			var commandHistory = [];","			var currentCommandIndex = 0;","","			function evalCommand(expr) {","				if (appender) {","					appender.evalCommandAndAppend(expr);","				} else {",'					var prefix = ">>> " + expr + "\\r\\n";',"					try {",'						log("INFO", prefix + eval(expr));',"					} catch (ex) {",'						log("ERROR", prefix + "Error: " + getErrorMessage(ex));',"					}","				}","				// Update command history","				if (expr != commandHistory[commandHistory.length - 1]) {","					commandHistory.push(expr);","					// Update the appender","					if (appender) {","						appender.storeCommandHistory(commandHistory);","					}","				}","				currentCommandIndex = (expr == commandHistory[currentCommandIndex]) ? currentCommandIndex + 1 : commandHistory.length;","				lastCommand = expr;","			}","			//]]>","		</script>",'		<style type="text/css">',"			body {","				background-color: white;","				color: black;","				padding: 0;","				margin: 0;","				font-family: tahoma, verdana, arial, helvetica, sans-serif;","				overflow: hidden;","			}","","			div#switchesContainer input {","				margin-bottom: 0;","			}","","			div.toolbar {","				border-top: solid #ffffff 1px;","				border-bottom: solid #aca899 1px;","				background-color: #f1efe7;","				padding: 3px 5px;","				font-size: 68.75%;","			}","","			div.toolbar, div#search input {","				font-family: tahoma, verdana, arial, helvetica, sans-serif;","			}","","			div.toolbar input.button {","				padding: 0 5px;","				font-size: 100%;","			}","","			div.toolbar input.hidden {","				display: none;","			}","","			div#switches input#clearButton {","				margin-left: 20px;","			}","","			div#levels label {","				font-weight: bold;","			}","","			div#levels label, div#options label {","				margin-right: 5px;","			}","","			div#levels label#wrapLabel {","				font-weight: normal;","			}","","			div#search label {","				margin-right: 10px;","			}","","			div#search label.searchboxlabel {","				margin-right: 0;","			}","","			div#search input {","				font-size: 100%;","			}","","			div#search input.validregex {","				color: green;","			}","","			div#search input.invalidregex {","				color: red;","			}","","			div#search input.nomatches {","				color: white;","				background-color: #ff6666;","			}","","			div#search input.nomatches {","				color: white;","				background-color: #ff6666;","			}","","			div#searchNav {","				display: none;","			}","","			div#commandLine {","				display: none;","			}","","			div#commandLine input#command {","				font-size: 100%;","				font-family: Courier New, Courier;","			}","","			div#commandLine input#evaluateButton {","			}","","			*.greyedout {","				color: gray !important;","				border-color: gray !important;","			}","","			*.greyedout *.alwaysenabled { color: black; }","","			*.unselectable {","				-khtml-user-select: none;","				-moz-user-select: none;","				user-select: none;","			}","","			div#log {","				font-family: Courier New, Courier;","				font-size: 75%;","				width: 100%;","				overflow: auto;","				clear: both;","				position: relative;","			}","","			div.group {","				border-color: #cccccc;","				border-style: solid;","				border-width: 1px 0 1px 1px;","				overflow: visible;","			}","","			div.oldIe div.group, div.oldIe div.group *, div.oldIe *.logentry {","				height: 1%;","			}","","			div.group div.groupheading span.expander {","				border: solid black 1px;","				font-family: Courier New, Courier;","				font-size: 0.833em;","				background-color: #eeeeee;","				position: relative;","				top: -1px;","				color: black;","				padding: 0 2px;","				cursor: pointer;","				cursor: hand;","				height: 1%;","			}","","			div.group div.groupcontent {","				margin-left: 10px;","				padding-bottom: 2px;","				overflow: visible;","			}","","			div.group div.expanded {","				display: block;","			}","","			div.group div.collapsed {","				display: none;","			}","","			*.logentry {","				overflow: visible;","				display: none;","				white-space: pre;","			}","","			span.pre {","				white-space: pre;","			}","			","			pre.unwrapped {","				display: inline !important;","			}","","			pre.unwrapped pre.pre, div.wrapped pre.pre {","				display: inline;","			}","","			div.wrapped pre.pre {","				white-space: normal;","			}","","			div.wrapped {","				display: none;","			}","","			body.searching *.logentry span.currentmatch {","				color: white !important;","				background-color: green !important;","			}","","			body.searching div.searchhighlight *.logentry span.searchterm {","				color: black;","				background-color: yellow;","			}","","			div.wrap *.logentry {","				white-space: normal !important;","				border-width: 0 0 1px 0;","				border-color: #dddddd;","				border-style: dotted;","			}","","			div.wrap #log_wrapped, #log_unwrapped {","				display: block;","			}","","			div.wrap #log_unwrapped, #log_wrapped {","				display: none;","			}","","			div.wrap *.logentry span.pre {","				overflow: visible;","				white-space: normal;","			}","","			div.wrap *.logentry pre.unwrapped {","				display: none;","			}","","			div.wrap *.logentry span.wrapped {","				display: inline;","			}","","			div.searchfilter *.searchnonmatch {","				display: none !important;","			}","","			div#log *.TRACE, label#label_TRACE {","				color: #666666;","			}","","			div#log *.DEBUG, label#label_DEBUG {","				color: green;","			}","","			div#log *.INFO, label#label_INFO {","				color: #000099;","			}","","			div#log *.WARN, label#label_WARN {","				color: #999900;","			}","","			div#log *.ERROR, label#label_ERROR {","				color: red;","			}","","			div#log *.FATAL, label#label_FATAL {","				color: #660066;","			}","","			div.TRACE#log *.TRACE,","			div.DEBUG#log *.DEBUG,","			div.INFO#log *.INFO,","			div.WARN#log *.WARN,","			div.ERROR#log *.ERROR,","			div.FATAL#log *.FATAL {","				display: block;","			}","","			div#log div.separator {","				background-color: #cccccc;","				margin: 5px 0;","				line-height: 1px;","			}","		</style>","	</head>","",'	<body id="body">','		<div id="switchesContainer">','			<div id="switches">','				<div id="levels" class="toolbar">',"					Filters:",'					<input type="checkbox" id="switch_TRACE" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide trace messages" /><label for="switch_TRACE" id="label_TRACE">trace</label>','					<input type="checkbox" id="switch_DEBUG" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide debug messages" /><label for="switch_DEBUG" id="label_DEBUG">debug</label>','					<input type="checkbox" id="switch_INFO" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide info messages" /><label for="switch_INFO" id="label_INFO">info</label>','					<input type="checkbox" id="switch_WARN" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide warn messages" /><label for="switch_WARN" id="label_WARN">warn</label>','					<input type="checkbox" id="switch_ERROR" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide error messages" /><label for="switch_ERROR" id="label_ERROR">error</label>','					<input type="checkbox" id="switch_FATAL" onclick="applyFilters(); checkAllLevels()" checked="checked" title="Show/hide fatal messages" /><label for="switch_FATAL" id="label_FATAL">fatal</label>','					<input type="checkbox" id="switch_ALL" onclick="toggleAllLevels(); applyFilters()" checked="checked" title="Show/hide all messages" /><label for="switch_ALL" id="label_ALL">all</label>',"				</div>",'				<div id="search" class="toolbar">','					<label for="searchBox" class="searchboxlabel">Search:</label> <input type="text" id="searchBox" onclick="toggleSearchEnabled(true)" onkeyup="scheduleSearch()" size="20" />','					<input type="button" id="searchReset" disabled="disabled" value="Reset" onclick="clearSearch()" class="button" title="Reset the search" />','					<input type="checkbox" id="searchRegex" onclick="doSearch()" title="If checked, search is treated as a regular expression" /><label for="searchRegex">Regex</label>','					<input type="checkbox" id="searchCaseSensitive" onclick="doSearch()" title="If checked, search is case sensitive" /><label for="searchCaseSensitive">Match case</label>','					<input type="checkbox" id="searchDisable" onclick="toggleSearchEnabled()" title="Enable/disable search" /><label for="searchDisable" class="alwaysenabled">Disable</label>','					<div id="searchNav">','						<input type="button" id="searchNext" disabled="disabled" value="Next" onclick="searchNext()" class="button" title="Go to the next matching log entry" />','						<input type="button" id="searchPrevious" disabled="disabled" value="Previous" onclick="searchPrevious()" class="button" title="Go to the previous matching log entry" />','						<input type="checkbox" id="searchFilter" onclick="toggleSearchFilter()" title="If checked, non-matching log entries are filtered out" /><label for="searchFilter">Filter</label>','						<input type="checkbox" id="searchHighlight" onclick="toggleSearchHighlight()" title="Highlight matched search terms" /><label for="searchHighlight" class="alwaysenabled">Highlight all</label>',"					</div>","				</div>",'				<div id="options" class="toolbar">',"					Options:",'					<input type="checkbox" id="enableLogging" onclick="toggleLoggingEnabled()" checked="checked" title="Enable/disable logging" /><label for="enableLogging" id="enableLoggingLabel">Log</label>','					<input type="checkbox" id="wrap" onclick="toggleWrap()" title="Enable / disable word wrap" /><label for="wrap" id="wrapLabel">Wrap</label>','					<input type="checkbox" id="newestAtTop" onclick="toggleNewestAtTop()" title="If checked, causes newest messages to appear at the top" /><label for="newestAtTop" id="newestAtTopLabel">Newest at the top</label>','					<input type="checkbox" id="scrollToLatest" onclick="toggleScrollToLatest()" checked="checked" title="If checked, window automatically scrolls to a new message when it is added" /><label for="scrollToLatest" id="scrollToLatestLabel">Scroll to latest</label>','					<input type="button" id="clearButton" value="Clear" onclick="clearLog()" class="button" title="Clear all log messages"  />','					<input type="button" id="hideButton" value="Hide" onclick="hide()" class="hidden button" title="Hide the console" />','					<input type="button" id="closeButton" value="Close" onclick="closeWindow()" class="hidden button" title="Close the window" />',"				</div>","			</div>","		</div>",'		<div id="log" class="TRACE DEBUG INFO WARN ERROR FATAL"></div>','		<div id="commandLine" class="toolbar">','			<div id="commandLineContainer">','				<input type="text" id="command" title="Enter a JavaScript command here and hit return or press \'Evaluate\'" />','				<input type="button" id="evaluateButton" value="Evaluate" class="button" title="Evaluate the command" onclick="evalCommandLine()" />',"			</div>","		</div>","	</body>","</html>",""]
},i=[];ConsoleAppender=function(){};var o=1;ConsoleAppender.prototype=new Appender,ConsoleAppender.prototype.create=function(t,e,r,s,a,l,c,h){function u(t,e){this.loggingEvent=t,this.levelName=t.level.name,this.formattedMessage=e}function p(t,e){this.name=t,this.initiallyExpanded=e}function d(){}var f=this,g=!1,m=!1,y=!1,v=!1,x=[],w=!0,b=o++;s=extractBooleanFromParam(s,this.defaults.initiallyMinimized),r=extractBooleanFromParam(r,this.defaults.lazyInit),a=extractBooleanFromParam(a,this.defaults.useDocumentWrite);var A=this.defaults.newestMessageAtTop,T=this.defaults.scrollToLatestMessage;l=l?l:this.defaults.width,c=c?c:this.defaults.height;var C=this.defaults.maxMessages,E=this.defaults.showCommandLine,S=this.defaults.commandLineObjectExpansionDepth,k=this.defaults.showHideButton,D=this.defaults.showCloseButton;this.defaults.showLogEntryDeleteButtons,this.setLayout(this.defaults.layout);var L,B,M,R,P,I=t?"InPageAppender":"PopUpAppender",O=function(t){return m?(handleError(I+": configuration option '"+t+"' may not be set after the appender has been initialized"),!1):!0},F=function(){return y&&w&&!v};this.isNewestMessageAtTop=function(){return A},this.setNewestMessageAtTop=function(t){A=bool(t),F()&&R().setNewestAtTop(A)},this.isScrollToLatestMessage=function(){return T},this.setScrollToLatestMessage=function(t){T=bool(t),F()&&R().setScrollToLatest(T)},this.getWidth=function(){return l},this.setWidth=function(t){O("width")&&(l=extractStringFromParam(t,l))},this.getHeight=function(){return c},this.setHeight=function(t){O("height")&&(c=extractStringFromParam(t,c))},this.getMaxMessages=function(){return C},this.setMaxMessages=function(t){C=extractIntFromParam(t,C),F()&&R().setMaxMessages(C)},this.isShowCommandLine=function(){return E},this.setShowCommandLine=function(t){E=bool(t),F()&&R().setShowCommandLine(E)},this.isShowHideButton=function(){return k},this.setShowHideButton=function(t){k=bool(t),F()&&R().setShowHideButton(k)},this.isShowCloseButton=function(){return D},this.setShowCloseButton=function(t){D=bool(t),F()&&R().setShowCloseButton(D)},this.getCommandLineObjectExpansionDepth=function(){return S},this.setCommandLineObjectExpansionDepth=function(t){S=extractIntFromParam(t,S)};var N=s;this.isInitiallyMinimized=function(){return s},this.setInitiallyMinimized=function(t){O("initiallyMinimized")&&(s=bool(t),N=s)},this.isUseDocumentWrite=function(){return a},this.setUseDocumentWrite=function(t){O("useDocumentWrite")&&(a=bool(t))},u.prototype.append=function(){R().log(this.levelName,this.formattedMessage)},p.prototype.append=function(){R().group(this.name,this.initiallyExpanded)},d.prototype.append=function(){R().groupEnd()};var z=function(){M(),g?v&&ee&&B():L(),M()&&U()};this.append=function(t){if(w){var e=f.getLayout().format(t);this.getLayout().ignoresThrowable()&&(e+=t.getThrowableStrRep()),x.push(new u(t,e)),z()}},this.group=function(t,e){w&&(x.push(new p(t,e)),z())},this.groupEnd=function(){w&&(x.push(new d),z())};var U=function(){for(;x.length>0;)x.shift().append();h&&R().focus()};this.setAddedToLogger=function(t){this.loggers.push(t),enabled&&!r&&L()},this.clear=function(){F()&&R().clearLog(),x.length=0},this.focus=function(){F()&&R().focus()},this.focusCommandLine=function(){F()&&R().focusCommandLine()},this.focusSearch=function(){F()&&R().focusSearch()};var H=window;this.getCommandWindow=function(){return H},this.setCommandWindow=function(t){H=t},this.executeLastCommand=function(){F()&&R().evalLastCommand()};var q=new PatternLayout("%m");this.getCommandLayout=function(){return q},this.setCommandLayout=function(t){q=t},this.evalCommandAndAppend=function(t){var e={appendResult:!0,isError:!1},n="";try{var i,o;!H.eval&&H.execScript&&H.execScript("null");var r={};for(o=0,len=j.length;len>o;o++)r[j[o][0]]=j[o][1];var s=[],a=function(t){s.push([t,H[t]])};a("appender"),H.appender=f,a("commandReturnValue"),H.commandReturnValue=e,a("commandLineFunctionsHash"),H.commandLineFunctionsHash=r;var l=function(t){a(t),H[t]=function(){return this.commandLineFunctionsHash[t](f,arguments,e)}};for(o=0,len=j.length;len>o;o++)l(j[o][0]);for(H===window&&H.execScript?(a("evalExpr"),a("result"),window.evalExpr=t,H.execScript("window.result=eval(window.evalExpr);"),i=window.result):i=H.eval(t),n=isUndefined(i)?i:formatObjectExpansion(i,S),o=0,len=s.length;len>o;o++)H[s[o][0]]=s[o][1]}catch(c){n="Error evaluating command: "+getExceptionStringRep(c),e.isError=!0}if(e.appendResult){var h=">>> "+t;isUndefined(n)||(h+=newLine+n);var u=e.isError?Level.ERROR:Level.INFO,p=new LoggingEvent(null,new Date,u,[h],null),d=this.getLayout();this.setLayout(q),this.append(p),this.setLayout(d)}};var j=i.concat([]);this.addCommandLineFunction=function(t,e){j.push([t,e])};var K="log4javascriptCommandHistory";this.storeCommandHistory=function(t){setCookie(K,t.join(","))};var V=function(t){var e=n();t.open();for(var i=0,o=e.length;o>i;i++)t.writeln(e[i]);t.close()};this.setEventTypes(["load","unload"]);var G=function(){var t=R();t.setAppender(f),t.setNewestAtTop(A),t.setScrollToLatest(T),t.setMaxMessages(C),t.setShowCommandLine(E),t.setShowHideButton(k),t.setShowCloseButton(D),t.setMainWindow(window);var e=getCookie(K);e&&(t.commandHistory=e.split(","),t.currentCommandIndex=t.commandHistory.length),f.dispatchEvent("load",{win:t})};this.unload=function(){logLog.debug("unload "+this+", caller: "+this.unload.caller),v||(logLog.debug("really doing unload "+this),v=!0,y=!1,m=!1,f.dispatchEvent("unload",{}))};var Y=function(t,e,n,i){function o(){try{v&&clearInterval(r),t(R())&&(clearInterval(r),n())}catch(e){clearInterval(r),w=!1,handleError(i,e)}}var r=setInterval(o,e)},X=function(){var t=document.domain!=location.hostname;return a?"":getBaseUrl()+"console_uncompressed.html"+(t?"?log4javascript_domain="+escape(document.domain):"")};if(t){var Q=null,W=[];this.addCssProperty=function(t,e){O("cssProperties")&&W.push([t,e])};var J,Z=!1,_=uniqueId+"_InPageAppender_"+b;this.hide=function(){g&&m&&(F()&&R().$("command").blur(),J.style.display="none",N=!0)},this.show=function(){g&&(m?(J.style.display="block",this.setShowCommandLine(E),N=!1):Z||B(!0))},this.isVisible=function(){return!N&&!v},this.close=function(t){v||t&&!confirm("This will permanently remove the console from the page. No more messages will be logged. Do you wish to continue?")||(J.parentNode.removeChild(J),this.unload())},P=function(){function t(){try{s||f.show(),G(),y=!0,U()}catch(t){w=!1,handleError(n,t)}}function e(){try{var e=function(t){return isLoaded(t)};a&&V(R().document),e(R())?t():Y(e,100,t,n)}catch(i){w=!1,handleError(n,i)}}var n="InPageAppender.open: unable to create console iframe";N=!1,J=Q.appendChild(document.createElement("div")),J.style.width=l,J.style.height=c,J.style.border="solid gray 1px";for(var i=0,o=W.length;o>i;i++)J.style[W[i][0]]=W[i][1];var r=a?"":" src='"+X()+"'";J.innerHTML="<iframe id='"+_+"' name='"+_+"' width='100%' height='100%' frameborder='0'"+r+" scrolling='no'></iframe>",v=!1;var h=function(t){try{return bool(t)&&bool(t.document)}catch(e){return!1}};h(R())?e():Y(h,100,e,n),m=!0},B=function(t){if(t||!s){var n=function(){if(e)try{var t=document.getElementById(e);1==t.nodeType&&(Q=t),P()}catch(n){handleError("InPageAppender.init: invalid container element '"+e+"' supplied",n)}else Q=document.createElement("div"),Q.style.position="fixed",Q.style.left="0",Q.style.right="0",Q.style.bottom="0",document.body.appendChild(Q),f.addCssProperty("borderWidth","1px 0 0 0"),f.addCssProperty("zIndex",1e6),P()};pageLoaded&&e&&e.appendChild?(Q=e,P()):pageLoaded?n():log4javascript.addEventListener("load",n),Z=!0}},L=function(){B(),g=!0},R=function(){var t=window.frames[_];return t?t:void 0},M=function(){return w&&!v?(m&&!y&&R()&&isLoaded(R())&&(y=!0),y):!1}}else{var $=f.defaults.useOldPopUp,te=f.defaults.complainAboutPopUpBlocking,ee=this.defaults.reopenWhenClosed;this.isUseOldPopUp=function(){return $},this.setUseOldPopUp=function(t){O("useOldPopUp")&&($=bool(t))},this.isComplainAboutPopUpBlocking=function(){return te},this.setComplainAboutPopUpBlocking=function(t){O("complainAboutPopUpBlocking")&&(te=bool(t))},this.isFocusPopUp=function(){return h},this.setFocusPopUp=function(t){h=bool(t)},this.isReopenWhenClosed=function(){return ee},this.setReopenWhenClosed=function(t){ee=bool(t)},this.close=function(){logLog.debug("close "+this);try{ne.close(),this.unload()}catch(t){}},this.hide=function(){logLog.debug("hide "+this),F()&&this.close()},this.show=function(){logLog.debug("show "+this),m||P()},this.isVisible=function(){return M()};var ne;P=function(){function t(){R().setCloseIfOpenerCloses(!$||!a),G(),y=!0,U(),Y(s,500,h,"PopUpAppender.checkPopUpClosed: error checking pop-up window")}var e="width="+l+",height="+c+",status,resizable",n="";try{var i=window.frameElement;i&&(n="_"+i.tagName+"_"+(i.name||i.id||""))}catch(o){n="_inaccessibleParentFrame"}var r="PopUp_"+location.host.replace(/[^a-z0-9]/gi,"_")+"_"+b+n;$&&a||(r=r+"_"+uniqueId);var s=function(t){if(v)return!0;try{return bool(t)&&t.closed}catch(e){}return!1},h=function(){v||f.unload()};try{if(ne=window.open(X(),r,e),v=!1,m=!0,ne&&ne.document)if(a&&$&&isLoaded(ne))ne.mainPageReloaded(),t();else{a&&V(ne.document);var u=function(t){return bool(t)&&isLoaded(t)};isLoaded(ne)?t():Y(u,100,t,"PopUpAppender.init: unable to create console window")}else w=!1,logLog.warn("PopUpAppender.init: pop-ups blocked, please unblock to use PopUpAppender"),te&&handleError("log4javascript: pop-up windows appear to be blocked. Please unblock them to use pop-up logging.")}catch(p){handleError("PopUpAppender.init: error creating pop-up",p)}},B=function(){s||P()},L=function(){B(),g=!0},R=function(){return ne},M=function(){if(w&&!isUndefined(ne)&&!v){if(ne.closed||y&&isUndefined(ne.closed))return f.unload(),logLog.debug("PopUpAppender: pop-up closed"),!1;!y&&isLoaded(ne)&&(y=!0)}return w&&y&&!v}}this.getConsoleWindow=R},ConsoleAppender.addGlobalCommandLineFunction=function(t,e){i.push([t,e])},t.prototype=new ConsoleAppender,t.prototype.defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:!1,focusPopUp:!1,lazyInit:!0,useOldPopUp:!0,complainAboutPopUpBlocking:!0,newestMessageAtTop:!1,scrollToLatestMessage:!0,width:"600",height:"400",reopenWhenClosed:!1,maxMessages:null,showCommandLine:!0,commandLineObjectExpansionDepth:1,showHideButton:!1,showCloseButton:!0,showLogEntryDeleteButtons:!0,useDocumentWrite:!0},t.prototype.toString=function(){return"PopUpAppender"},log4javascript.PopUpAppender=t,e.prototype=new ConsoleAppender,e.prototype.defaults={layout:new PatternLayout("%d{HH:mm:ss} %-5p - %m{1}%n"),initiallyMinimized:!1,lazyInit:!0,newestMessageAtTop:!1,scrollToLatestMessage:!0,width:"100%",height:"220px",maxMessages:null,showCommandLine:!0,commandLineObjectExpansionDepth:1,showHideButton:!1,showCloseButton:!1,showLogEntryDeleteButtons:!0,useDocumentWrite:!0},e.prototype.toString=function(){return"InPageAppender"},log4javascript.InPageAppender=e,log4javascript.InlineAppender=e}(),function(){function t(t){var e=0;for(var n in t)e=Math.max(toStr(n).length,e);var i=[];for(n in t){var o,r="  "+padWithSpaces(toStr(n),e+2);try{o=splitIntoLines(toStr(t[n])).join(padWithSpaces(newLine,e+6))}catch(s){o="[Error obtaining property. Details: "+getExceptionMessage(s)+"]"}i.push(r+o)}return i.join(newLine)}function e(t,n,i,l,c){function h(t){return t.nodeType==o.TEXT_NODE&&/^[ \t\r\n]*$/.test(t.nodeValue)}function u(t){return t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function p(t){for(var e=t.style.cssText.split(";"),n="",i=0,o=e.length;o>i;i++){var r=e[i].split(":"),s=[];/^\s*$/.test(r[0])||s.push(trim(r[0]).toLowerCase()+":"+trim(r[1])),n=s.join(";")}return n}function d(t){if(t.prefix)return t.prefix;if(t.outerHTML){var e=new RegExp("<([^:]+):"+t.tagName+"[^>]*>","i");if(e.test(t.outerHTML))return RegExp.$1.toLowerCase()}return""}n="undefined"==typeof n?!0:!!n,"string"!=typeof i&&(i=""),l=!!l,c=!!c;var f,g="<",m=">";if(!n||t.nodeType==o.DOCUMENT_FRAGMENT_NODE){f="";for(var y=0,v=t.childNodes.length;v>y;y++)f+=e(t.childNodes[y],!0,i+a);return f}switch(t.nodeType){case o.ELEMENT_NODE:var x=t.tagName.toLowerCase();f=l?newLine+i:"",f+=g;var w=d(t),b=!!w;for(b&&(f+=w+":"),f+=x,y=0,v=t.attributes.length;v>y;y++){var A=t.attributes[y];A.specified&&null!==A.nodeValue&&"style"!==A.nodeName.toLowerCase()&&"string"==typeof A.nodeValue&&0!==A.nodeName.indexOf("_moz")&&(f+=" "+A.nodeName.toLowerCase()+'="',f+=u(A.nodeValue),f+='"')}if(t.style.cssText){var T=p(t);""!==T&&(f+=' style="'+p(t)+'"')}if(array_contains(s,x)||b&&!t.hasChildNodes())f+="/"+m;else{f+=m;for(var C=!(1===t.childNodes.length&&t.childNodes[0].nodeType===o.TEXT_NODE),E=array_contains(r,x),y=0,v=t.childNodes.length;v>y;y++)f+=e(t.childNodes[y],!0,i+a,C,E);var S=g+"/"+x+m;f+=C?newLine+i+S:S}return f;case o.TEXT_NODE:if(h(t))f="";else{if(c)f=t.nodeValue;else{for(var k=splitIntoLines(trim(t.nodeValue)),D=[],y=0,v=k.length;v>y;y++)D[y]=trim(k[y]);f=D.join(newLine+i)}l&&(f=newLine+i+f)}return f;case o.CDATA_SECTION_NODE:return"<![CDATA["+t.nodeValue+"]"+"]>"+newLine;case o.DOCUMENT_NODE:f="";for(var y=0,v=t.childNodes.length;v>y;y++)f+=e(t.childNodes[y],!0,i);return f;default:return""}}function n(){ConsoleAppender.addGlobalCommandLineFunction("$",function(t,e){return document.getElementById(e[0])}),ConsoleAppender.addGlobalCommandLineFunction("dir",function(e,n){for(var i=[],o=0,r=n.length;r>o;o++)i[o]=t(n[o]);return i.join(newLine+newLine)}),ConsoleAppender.addGlobalCommandLineFunction("dirxml",function(t,n){for(var i=[],o=0,r=n.length;r>o;o++)t.getCommandWindow(),i[o]=e(n[o]);return i.join(newLine+newLine)}),ConsoleAppender.addGlobalCommandLineFunction("cd",function(t,e,n){var i,o;return 0===e.length||""===e[0]?(i=window,o="Command line set to run in main window"):e[0].window==e[0]?(i=e[0],o="Command line set to run in frame '"+e[0].name+"'"):(i=window.frames[e[0]],i?o="Command line set to run in frame '"+e[0]+"'":(n.isError=!0,o="Frame '"+e[0]+"' does not exist",i=t.getCommandWindow())),t.setCommandWindow(i),o}),ConsoleAppender.addGlobalCommandLineFunction("clear",function(t,e,n){n.appendResult=!1,t.clear()}),ConsoleAppender.addGlobalCommandLineFunction("keys",function(t,e){var n=[];for(var i in e[0])n.push(i);return n}),ConsoleAppender.addGlobalCommandLineFunction("values",function(t,e){var n=[];for(var i in e[0])try{n.push(e[0][i])}catch(o){logLog.warn("values(): Unable to obtain value for key "+i+". Details: "+getExceptionMessage(o))}return n}),ConsoleAppender.addGlobalCommandLineFunction("expansionDepth",function(t,e,n){var i=parseInt(e[0],10);return isNaN(i)||0>i?(n.isError=!0,""+e[0]+" is not a valid expansion depth"):(t.setCommandLineObjectExpansionDepth(i),"Object expansion depth set to "+i)})}function i(){n()}var o={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},r=["script","pre"],s=["br","img","hr","param","link","area","input","col","base","meta"],a="  ";i()}(),log4javascript.setDocumentReady=function(){pageLoaded=!0,log4javascript.dispatchEvent("load",{})},window.addEventListener)window.addEventListener("load",log4javascript.setDocumentReady,!1);else if(window.attachEvent)window.attachEvent("onload",log4javascript.setDocumentReady);else{var oldOnload=window.onload;window.onload="function"!=typeof window.onload?log4javascript.setDocumentReady:function(t){oldOnload&&oldOnload(t),log4javascript.setDocumentReady()}}return window.log4javascript=log4javascript,log4javascript}(),CryptoJS=CryptoJS||function(t,e){var n={},i=n.lib={},o=function(){},r=i.Base={extend:function(t){o.prototype=this;var e=new o;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=r.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes;if(t=t.sigBytes,this.clamp(),i%4)for(var o=0;t>o;o++)e[i+o>>>2]|=(255&n[o>>>2]>>>24-8*(o%4))<<24-8*((i+o)%4);else if(65535<n.length)for(o=0;t>o;o+=4)e[i+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],i=0;e>i;i+=4)n.push(0|4294967296*t.random());return new s.init(n,e)}}),a=n.enc={},l=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;t>i;i++){var o=255&e[i>>>2]>>>24-8*(i%4);n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;e>i;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-4*(i%8);return new s.init(n,e/2)}},c=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;t>i;i++)n.push(String.fromCharCode(255&e[i>>>2]>>>24-8*(i%4)));return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;e>i;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-8*(i%4);return new s.init(n,e)}},h=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},u=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,o=n.sigBytes,r=this.blockSize,a=o/(4*r),a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*r,o=t.min(4*e,o),e){for(var l=0;e>l;l+=r)this._doProcessBlock(i,l);l=i.splice(0,e),n.sigBytes-=o}return new s.init(l,o)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=u.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=n.algo={};return n}(Math);!function(t){function e(t,e,n,i,o,r,s){return t=t+(e&n|~e&i)+o+s,(t<<r|t>>>32-r)+e}function n(t,e,n,i,o,r,s){return t=t+(e&i|n&~i)+o+s,(t<<r|t>>>32-r)+e}function i(t,e,n,i,o,r,s){return t=t+(e^n^i)+o+s,(t<<r|t>>>32-r)+e}function o(t,e,n,i,o,r,s){return t=t+(n^(e|~i))+o+s,(t<<r|t>>>32-r)+e}for(var r=CryptoJS,s=r.lib,a=s.WordArray,l=s.Hasher,s=r.algo,c=[],h=0;64>h;h++)c[h]=0|4294967296*t.abs(t.sin(h+1));s=s.MD5=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,r){for(var s=0;16>s;s++){var a=r+s,l=t[a];t[a]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var s=this._hash.words,a=t[r+0],l=t[r+1],h=t[r+2],u=t[r+3],p=t[r+4],d=t[r+5],f=t[r+6],g=t[r+7],m=t[r+8],y=t[r+9],v=t[r+10],x=t[r+11],w=t[r+12],b=t[r+13],A=t[r+14],T=t[r+15],C=s[0],E=s[1],S=s[2],k=s[3],C=e(C,E,S,k,a,7,c[0]),k=e(k,C,E,S,l,12,c[1]),S=e(S,k,C,E,h,17,c[2]),E=e(E,S,k,C,u,22,c[3]),C=e(C,E,S,k,p,7,c[4]),k=e(k,C,E,S,d,12,c[5]),S=e(S,k,C,E,f,17,c[6]),E=e(E,S,k,C,g,22,c[7]),C=e(C,E,S,k,m,7,c[8]),k=e(k,C,E,S,y,12,c[9]),S=e(S,k,C,E,v,17,c[10]),E=e(E,S,k,C,x,22,c[11]),C=e(C,E,S,k,w,7,c[12]),k=e(k,C,E,S,b,12,c[13]),S=e(S,k,C,E,A,17,c[14]),E=e(E,S,k,C,T,22,c[15]),C=n(C,E,S,k,l,5,c[16]),k=n(k,C,E,S,f,9,c[17]),S=n(S,k,C,E,x,14,c[18]),E=n(E,S,k,C,a,20,c[19]),C=n(C,E,S,k,d,5,c[20]),k=n(k,C,E,S,v,9,c[21]),S=n(S,k,C,E,T,14,c[22]),E=n(E,S,k,C,p,20,c[23]),C=n(C,E,S,k,y,5,c[24]),k=n(k,C,E,S,A,9,c[25]),S=n(S,k,C,E,u,14,c[26]),E=n(E,S,k,C,m,20,c[27]),C=n(C,E,S,k,b,5,c[28]),k=n(k,C,E,S,h,9,c[29]),S=n(S,k,C,E,g,14,c[30]),E=n(E,S,k,C,w,20,c[31]),C=i(C,E,S,k,d,4,c[32]),k=i(k,C,E,S,m,11,c[33]),S=i(S,k,C,E,x,16,c[34]),E=i(E,S,k,C,A,23,c[35]),C=i(C,E,S,k,l,4,c[36]),k=i(k,C,E,S,p,11,c[37]),S=i(S,k,C,E,g,16,c[38]),E=i(E,S,k,C,v,23,c[39]),C=i(C,E,S,k,b,4,c[40]),k=i(k,C,E,S,a,11,c[41]),S=i(S,k,C,E,u,16,c[42]),E=i(E,S,k,C,f,23,c[43]),C=i(C,E,S,k,y,4,c[44]),k=i(k,C,E,S,w,11,c[45]),S=i(S,k,C,E,T,16,c[46]),E=i(E,S,k,C,h,23,c[47]),C=o(C,E,S,k,a,6,c[48]),k=o(k,C,E,S,g,10,c[49]),S=o(S,k,C,E,A,15,c[50]),E=o(E,S,k,C,d,21,c[51]),C=o(C,E,S,k,w,6,c[52]),k=o(k,C,E,S,u,10,c[53]),S=o(S,k,C,E,v,15,c[54]),E=o(E,S,k,C,l,21,c[55]),C=o(C,E,S,k,m,6,c[56]),k=o(k,C,E,S,T,10,c[57]),S=o(S,k,C,E,f,15,c[58]),E=o(E,S,k,C,b,21,c[59]),C=o(C,E,S,k,p,6,c[60]),k=o(k,C,E,S,x,10,c[61]),S=o(S,k,C,E,h,15,c[62]),E=o(E,S,k,C,y,21,c[63]);s[0]=0|s[0]+C,s[1]=0|s[1]+E,s[2]=0|s[2]+S,s[3]=0|s[3]+k},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var r=t.floor(i/4294967296);for(n[(o+64>>>9<<4)+15]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[(o+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(n.length+1),this._process(),e=this._hash,n=e.words,i=0;4>i;i++)o=n[i],n[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return e},clone:function(){var t=l.clone.call(this);return t._hash=this._hash.clone(),t}}),r.MD5=l._createHelper(s),r.HmacMD5=l._createHmacHelper(s)}(Math);var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];!function(){function t(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function e(t,e){void 0===Date.prototype[t]&&(Date.prototype[t]=e)}var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={su:0,sun:0,sunday:0,mo:1,mon:1,monday:1,tu:2,tue:2,tuesday:2,we:3,wed:3,wednesday:3,th:4,thu:4,thursday:4,fr:5,fri:5,friday:5,sa:6,sat:6,saturday:6},a=i.concat(n),l=["su","sun","sunday","mo","mon","monday","tu","tue","tuesday","we","wed","wednesday","th","thu","thursday","fr","fri","friday","sa","sat","saturday"],c={jan:0,january:0,feb:1,february:1,mar:2,march:2,apr:3,april:3,may:4,jun:5,june:5,jul:6,july:6,aug:7,august:7,sep:8,september:8,oct:9,october:9,nov:10,november:10,dec:11,december:11},h=[31,28,31,30,31,30,31,31,30,31,30,31],u=function(t){return t.match(/^(\d+)$/)?!0:!1},p=function(t,e,n,i){for(var o=i;o>=n;o--){var r=t.substring(e,e+o);if(r.length<n)return null;if(u(r))return r}return null},d=Date.parse,f=function(t,e){t+="",e+="";for(var n,i,o=0,r=0,s="",c="",h=new Date,u=h.getYear(),d=h.getMonth()+1,f=1,g=0,m=0,y=0,v="";r<e.length;){for(s=e.charAt(r),c="";e.charAt(r)===s&&r<e.length;)c+=e.charAt(r++);if("yyyy"===c||"yy"===c||"y"===c){if("yyyy"===c&&(n=4,i=4),"yy"===c&&(n=2,i=2),"y"===c&&(n=2,i=4),u=p(t,o,n,i),null===u)return 0/0;o+=u.length,2===u.length&&(u=u>70?1900+(u-0):2e3+(u-0))}else if("MMM"===c||"NNN"===c){d=0;for(var x=0;x<a.length;x++){var w=a[x];if(t.substring(o,o+w.length).toLowerCase()===w.toLowerCase()&&("MMM"===c||"NNN"===c&&x>11)){d=x+1,d>12&&(d-=12),o+=w.length;break}}if(1>d||d>12)return 0/0}else if("EE"===c||"E"===c)for(var b=0;b<l.length;b++){var A=l[b];if(t.substring(o,o+A.length).toLowerCase()===A.toLowerCase()){o+=A.length;break}}else if("MM"===c||"M"===c){if(d=p(t,o,c.length,2),null===d||1>d||d>12)return 0/0;o+=d.length}else if("dd"===c||"d"===c){if(f=p(t,o,c.length,2),null===f||1>f||f>31)return 0/0;o+=f.length}else if("hh"===c||"h"===c){if(g=p(t,o,c.length,2),null===g||1>g||g>12)return 0/0;o+=g.length}else if("HH"===c||"H"===c){if(g=p(t,o,c.length,2),null===g||0>g||g>23)return 0/0;o+=g.length}else if("KK"===c||"K"===c){if(g=p(t,o,c.length,2),null===g||0>g||g>11)return 0/0;o+=g.length}else if("kk"===c||"k"===c){if(g=p(t,o,c.length,2),null===g||1>g||g>24)return 0/0;o+=g.length,g--}else if("mm"===c||"m"===c){if(m=p(t,o,c.length,2),null===m||0>m||m>59)return 0/0;o+=m.length}else if("ss"===c||"s"===c){if(y=p(t,o,c.length,2),null===y||0>y||y>59)return 0/0;o+=y.length}else if("a"===c){if("am"===t.substring(o,o+2).toLowerCase())v="AM";else{if("pm"!==t.substring(o,o+2).toLowerCase())return 0/0;v="PM"}o+=2}else{if(t.substring(o,o+c.length)!==c)return 0/0;o+=c.length}}if(o!==t.length)return 0/0;if(2===d)if(0===u%4&&0!==u%100||0===u%400){if(f>29)return 0/0}else if(f>28)return 0/0;if((4===d||6===d||9===d||11===d)&&f>30)return 0/0;12>g&&"PM"===v?g=g-0+12:g>11&&"AM"===v&&(g-=12);var T=new Date(u,d-1,f,g,m,y);return T.getTime()};Date.parse=function(t,e){if(e)return f(t,e);var n,i=d(t),o=0;return isNaN(i)&&(n=/^(\d{4}|[+\-]\d{6})-(\d{2})-(\d{2})(?:[T ](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?))?/.exec(t))&&("Z"!==n[8]&&(o=60*+n[10]+ +n[11],"+"===n[9]&&(o=0-o)),n[7]=n[7]||"000",i=Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5]+o,+n[6],+n[7].substr(0,3))),i},Date.today=function(){return(new Date).clearTime()},Date.UTCtoday=function(){return(new Date).clearUTCTime()},Date.tomorrow=function(){return Date.today().add({days:1})},Date.UTCtomorrow=function(){return Date.UTCtoday().add({days:1})},Date.yesterday=function(){return Date.today().add({days:-1})},Date.UTCyesterday=function(){return Date.UTCtoday().add({days:-1})},Date.validateDay=function(t,e,n){var i=new Date(e,n,t);return i.getFullYear()===e&&i.getMonth()===n&&i.getDate()===t},Date.validateYear=function(t){return t>=0&&9999>=t},Date.validateSecond=function(t){return t>=0&&60>t},Date.validateMonth=function(t){return t>=0&&12>t},Date.validateMinute=function(t){return t>=0&&60>t},Date.validateMillisecond=function(t){return t>=0&&1e3>t},Date.validateHour=function(t){return t>=0&&24>t},Date.compare=function(t,e){return t.valueOf()<e.valueOf()?-1:t.valueOf()>e.valueOf()?1:0},Date.equals=function(t,e){return t.valueOf()===e.valueOf()},Date.equalsDay=function(t,e){return t.toYMD()===e.toYMD()},Date.getDayNumberFromName=function(t){return s[t.toLowerCase()]},Date.getMonthNumberFromName=function(t){return c[t.toLowerCase()]},Date.getMonthNameFromNumber=function(t){return i[t]},Date.getMonthAbbrFromNumber=function(t){return n[t]},Date.isLeapYear=function(t){return 29===new Date(t,1,29).getDate()},Date.getDaysInMonth=function(t,e){return 1===e?Date.isLeapYear(t)?29:28:h[e]},e("getMonthAbbr",function(){return n[this.getMonth()]}),e("getMonthName",function(){return i[this.getMonth()]}),e("getLastMonthName",function(){var t=this.getMonth();return t=0==t?11:t-1,i[t]}),e("getUTCOffset",function(){var e=t(Math.abs(this.getTimezoneOffset()/.6),4);return this.getTimezoneOffset()>0&&(e="-"+e),e}),e("toCLFString",function(){return t(this.getDate(),2)+"/"+this.getMonthAbbr()+"/"+this.getFullYear()+":"+t(this.getHours(),2)+":"+t(this.getMinutes(),2)+":"+t(this.getSeconds(),2)+" "+this.getUTCOffset()}),e("toYMD",function(e){return e="undefined"==typeof e?"-":e,this.getFullYear()+e+t(this.getMonth()+1,2)+e+t(this.getDate(),2)}),e("toDBString",function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1,2)+"-"+t(this.getUTCDate(),2)+" "+t(this.getUTCHours(),2)+":"+t(this.getUTCMinutes(),2)+":"+t(this.getUTCSeconds(),2)}),e("clearTime",function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this}),e("clearUTCTime",function(){return this.setUTCHours(0),this.setUTCMinutes(0),this.setUTCSeconds(0),this.setUTCMilliseconds(0),this}),e("add",function(t){return void 0!==t.milliseconds&&this.setMilliseconds(this.getMilliseconds()+t.milliseconds),void 0!==t.seconds&&this.setSeconds(this.getSeconds()+t.seconds),void 0!==t.minutes&&this.setMinutes(this.getMinutes()+t.minutes),void 0!==t.hours&&this.setHours(this.getHours()+t.hours),void 0!==t.days&&this.setDate(this.getDate()+t.days),void 0!==t.weeks&&this.setDate(this.getDate()+7*t.weeks),void 0!==t.months&&this.setMonth(this.getMonth()+t.months),void 0!==t.years&&this.setFullYear(this.getFullYear()+t.years),this}),e("addMilliseconds",function(t){return this.add({milliseconds:t})}),e("addSeconds",function(t){return this.add({seconds:t})}),e("addMinutes",function(t){return this.add({minutes:t})}),e("addHours",function(t){return this.add({hours:t})}),e("addDays",function(t){return this.add({days:t})}),e("addWeeks",function(t){return this.add({days:7*t})}),e("addMonths",function(t){return this.add({months:t})}),e("addYears",function(t){return this.add({years:t})}),e("setTimeToNow",function(){var t=new Date;this.setMilliseconds(t.getMilliseconds()),this.setSeconds(t.getSeconds()),this.setMinutes(t.getMinutes()),this.setHours(t.getHours())}),e("clone",function(){return new Date(this.valueOf())}),e("between",function(t,e){return this.valueOf()>=t.valueOf()&&this.valueOf()<=e.valueOf()}),e("compareTo",function(t){return Date.compare(this,t)}),e("equals",function(t){return Date.equals(this,t)}),e("equalsDay",function(t){return Date.equalsDay(this,t)}),e("isToday",function(){return Date.equalsDay(this,Date.today())}),e("isAfter",function(t){return t=t?t:new Date,this.compareTo(t)>0}),e("isBefore",function(t){return t=t?t:new Date,this.compareTo(t)<0}),e("getDaysBetween",function(t){return 0|(t.clone().valueOf()-this.valueOf())/864e5}),e("getHoursBetween",function(t){return 0|(t.clone().valueOf()-this.valueOf())/36e5}),e("getMinutesBetween",function(t){return 0|(t.clone().valueOf()-this.valueOf())/6e4}),e("getSecondsBetween",function(t){return 0|(t.clone().valueOf()-this.valueOf())/1e3}),e("getMillisecondsBetween",function(t){return 0|t.clone().valueOf()-this.valueOf()}),e("getMonthsBetween",function(t){var e,n,i=Math.ceil(new Date(t-this).getUTCDate()/31),o=new Date(this.getTime()),r=Date.getDaysInMonth;for(o.setUTCMonth(o.getUTCMonth()+i);o.getTime()<t.getTime();)o.setUTCMonth(o.getUTCMonth()+1),i++;return o.getTime()!==t.getTime()&&(o.setUTCMonth(o.getUTCMonth()-1),i--),t.getUTCMonth()===o.getUTCMonth()?(e=new Date(t-o).getUTCDate(),n=r(o.getUTCFullYear(),o.getUTCMonth()),i+e/n):(n=r(o.getUTCFullYear(),o.getUTCMonth()),e=n-o.getUTCDate()+1,i+ +(e/n).toFixed(5)+ +(t.getUTCDate()/r(t.getUTCFullYear(),t.getUTCMonth())).toFixed(5))
}),e("getOrdinalNumber",function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1}),e("toFormat",function(t){return g(t,m(this))}),e("toUTCFormat",function(t){return g(t,y(this))});var g=function(t,e){var n,i,o,r=[t],s=function(t,e){for(var n,i,o,s=0,a=r.length,l=[];a>s;s++)if("string"==typeof r[s]){for(o=r[s].split(t),n=0,i=o.length-1;i>n;n++)l.push(o[n]),l.push([e]);l.push(o[i])}else l.push(r[s]);r=l};for(n in e)s(n,e[n]);for(o="",n=0,i=r.length;i>n;n++)o+="string"==typeof r[n]?r[n]:r[n][0];return r.join("")},m=function(e){var s=e.getHours()%12?e.getHours()%12:12;return{YYYY:e.getFullYear(),YY:String(e.getFullYear()).slice(-2),MMMM:i[e.getMonth()],MMM:n[e.getMonth()],MM:t(e.getMonth()+1,2),MI:t(e.getMinutes(),2),M:e.getMonth()+1,DDDD:r[e.getDay()],DDD:o[e.getDay()],DD:t(e.getDate(),2),D:e.getDate(),HH24:t(e.getHours(),2),HH:t(s,2),H:s,SS:t(e.getSeconds(),2),PP:e.getHours()>=12?"PM":"AM",P:e.getHours()>=12?"pm":"am",LL:t(e.getMilliseconds(),3)}},y=function(e){var s=e.getUTCHours()%12?e.getUTCHours()%12:12;return{YYYY:e.getUTCFullYear(),YY:String(e.getUTCFullYear()).slice(-2),MMMM:i[e.getUTCMonth()],MMM:n[e.getUTCMonth()],MM:t(e.getUTCMonth()+1,2),MI:t(e.getUTCMinutes(),2),M:e.getUTCMonth()+1,DDDD:r[e.getUTCDay()],DDD:o[e.getUTCDay()],DD:t(e.getUTCDate(),2),D:e.getUTCDate(),HH24:t(e.getUTCHours(),2),HH:t(s,2),H:s,SS:t(e.getUTCSeconds(),2),PP:e.getUTCHours()>=12?"PM":"AM",P:e.getUTCHours()>=12?"pm":"am",LL:t(e.getUTCMilliseconds(),3)}}}(),function(){function t(t){return'[touch-action="'+t+'"]'}function e(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}var n=["none","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["scroll","pan-x pan-y","pan-y pan-x"]}],i="";n.forEach(function(n){i+=n+""===n?t(n)+e(n):n.selectors.map(t)+e(n.rule)});var o=document.createElement("style");o.textContent=i,document.head.appendChild(o)}(),function(t){function e(){this.ids=[],this.pointers=[]}t=t||{},e.prototype={set:function(t,e){var n=this.ids.indexOf(t);n>-1?this.pointers[n]=e:(this.ids.push(t),this.pointers.push(e))},has:function(t){return this.ids.indexOf(t)>-1},"delete":function(t){var e=this.ids.indexOf(t);e>-1&&(this.ids.splice(e,1),this.pointers.splice(e,1))},get:function(t){var e=this.ids.indexOf(t);return this.pointers[e]},item:function(t){return this.pointers[t]},get size(){return this.pointers.length}},t.PointerMap=e,window.PointerEventsPolyfill=t}(window.PointerEventsPolyfill),function(t){var e;"undefined"!=typeof WeakMap&&0>navigator.userAgent.indexOf("Firefox/")?e=WeakMap:(e=function(t){this.name="__$"+t+"$__"},e.prototype={set:function(t,e){Object.defineProperty(t,this.name,{value:e,writable:!0})},get:function(t){return t[this.name]}}),t.SideTable=e}(window.PointerEventsPolyfill),function(t){var e={targets:new t.SideTable("target"),handledEvents:new t.SideTable("pointer"),scrollType:new t.SideTable("scrollType"),pointermap:new t.PointerMap,events:[],eventMap:{},eventSources:{},registerSource:function(t,e){var n=e,i=n.events;i&&(this.events=this.events.concat(i),i.forEach(function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))},this),this.eventSources[t]=n)},registerTarget:function(t,e){this.scrollType.set(t,e||"none"),this.listen(this.events,t,this.boundHandler)},unregisterTarget:function(t){this.scrollType.set(t,null),this.unlisten(this.events,t,this.boundHandler)},down:function(t){this.fireEvent("pointerdown",t)},move:function(t){this.fireEvent("pointermove",t)},up:function(t){this.fireEvent("pointerup",t)},enter:function(t){this.fireEvent("pointerenter",t)},leave:function(t){this.fireEvent("pointerleave",t)},over:function(t){this.fireEvent("pointerover",t)},out:function(t){this.fireEvent("pointerout",t)},cancel:function(t){this.fireEvent("pointercancel",t)},eventHandler:function(t){if(!this.handledEvents.get(t)){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),this.handledEvents.set(t,!0)}},listen:function(t,e,n){t.forEach(function(t){this.addEvent(t,n,!1,e)},this)},unlisten:function(t,e,n){t.forEach(function(t){this.removeEvent(t,n,!1,e)},this)},addEvent:function(t,e,n,i){i.addEventListener(t,e,n)},removeEvent:function(t,e,n,i){i.removeEventListener(t,e,n)},makeEvent:function(t,e){var n=new PointerEvent(t,e);return this.targets.set(n,this.targets.get(e)||e.target),n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){var e={};for(var n in t)e[n]=t[n];return e},getTarget:function(t){return this.captureInfo&&this.captureInfo.id===t.pointerId?this.captureInfo.target:this.targets.get(t)},setCapture:function(t,e){this.captureInfo&&this.releaseCapture(this.captureInfo.id),this.captureInfo={id:t,target:e};var n=new PointerEvent("gotpointercapture",{bubbles:!0});this.implicitRelease=this.releaseCapture.bind(this,t),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease),this.targets.set(n,e),this.asyncDispatchEvent(n)},releaseCapture:function(t){if(this.captureInfo&&this.captureInfo.id===t){var e=new PointerEvent("lostpointercapture",{bubbles:!0}),n=this.captureInfo.target;this.captureInfo=null,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease),this.targets.set(e,n),this.asyncDispatchEvent(e)}},dispatchEvent:function(t){var e=this.getTarget(t);return e?e.dispatchEvent(t):void 0},asyncDispatchEvent:function(t){setTimeout(this.dispatchEvent.bind(this,t),0)}};e.boundHandler=e.eventHandler.bind(e),t.dispatcher=e}(window.PointerEventsPolyfill),function(t){var e=t.dispatcher,n=Array.prototype.forEach.call.bind(Array.prototype.forEach),i=Array.prototype.map.call.bind(Array.prototype.map),o={ATTRIB:"touch-action",SELECTOR:"[touch-action]",EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|scroll$/,OBSERVER_INIT:{subtree:!0,childList:!0,attributes:!0,attributeFilter:["touch-action"]},watchSubtree:function(t){a.observe(t,this.OBSERVER_INIT)},enableOnSubtree:function(t){var e=t||document;this.watchSubtree(t),e===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(e)},installNewSubtree:function(t){n(this.findElements(t),this.addElement,this)},findElements:function(t){var e=t||document;return e.querySelectorAll?e.querySelectorAll(this.SELECTOR):[]},touchActionToScrollType:function(t){var e=t;return e===this.EMITTER?"none":e===this.XSCROLLER?"X":e===this.YSCROLLER?"Y":this.SCROLLER.exec(e)?"XY":void 0},removeElement:function(n){e.unregisterTarget(n);var i=t.targetFinding.shadow(n);i&&e.unregisterTarget(i)},addElement:function(n){var i=n.getAttribute&&n.getAttribute(this.ATTRIB),o=this.touchActionToScrollType(i);if(o){e.registerTarget(n,o);var r=t.targetFinding.shadow(n);r&&e.registerTarget(r,o)}},elementChanged:function(t){this.removeElement(t),this.addElement(t)},concatLists:function(t,e){for(var n,i=0,o=e.length;o>i&&(n=e[i]);i++)t.push(n);return t},installOnLoad:function(){document.addEventListener("DOMContentLoaded",this.installNewSubtree.bind(this,document))},flattenMutationTree:function(t){var e=i(t,this.findElements,this);return e.push(t),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){var e=t;if("childList"===e.type){var n=this.flattenMutationTree(e.addedNodes);n.forEach(this.addElement,this);var i=this.flattenMutationTree(e.removedNodes);i.forEach(this.removeElement,this)}else"attributes"===e.type&&this.elementChanged(e.target)}},r=o.mutationWatcher.bind(o);t.installer=o,t.register=o.enableOnSubtree.bind(o),t.setTouchAction=function(t,n){var i=this.touchActionToScrollType(n);i?e.registerTarget(t,i):e.unregisterTarget(t)}.bind(o);var s=window.MutationObserver||window.WebKitMutationObserver;if(s)var a=new s(r);else o.watchSubtree=function(){console.warn("PointerEventsPolyfill: MutationObservers not found, touch-action will not be dynamically detected")}}(window.PointerEventsPolyfill),function(t){var e={shadow:function(t){if(t){var e=t.webkitShadowRoot||t.shadowRoot;if(e&&e.elementFromPoint)return e}},searchRoot:function(t,e,n){if(t){var i,o,r,s=t.elementFromPoint(e,n);for(o=this.shadow(s);o;){if(i=o.elementFromPoint(e,n)){var a=this.shadow(i);return this.searchRoot(a,e,n)||i}r=o.querySelector("shadow"),o=r&&r.olderShadowRoot}return s}},findTarget:function(t){var e=t.clientX,n=t.clientY;return this.searchRoot(document,e,n)}};t.targetFinding=e,t.findTarget=e.findTarget.bind(e)}(window.PointerEventsPolyfill),function(t){var e=t.dispatcher,n=t.installer,i=t.findTarget,o=e.pointermap,r=Array.prototype.map.call.bind(Array.prototype.map),s=2500,a=25,l={events:["touchstart","touchmove","touchend","touchcancel"],POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){null===this.firstTouch&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1)},removePrimaryTouch:function(t){this.isPrimaryTouch(t)&&(this.firstTouch=null,this.firstXY=null)},touchToPointer:function(t){var n=e.cloneEvent(t);return n.pointerId=t.identifier+2,n.target=i(n),n.bubbles=!0,n.cancelable=!0,n.button=0,n.buttons=1,n.isPrimary=this.isPrimaryTouch(t),n.pointerType=this.POINTER_TYPE,n},processTouches:function(t,e){var n=t.changedTouches,i=r(n,this.touchToPointer,this);i.forEach(e,this)},shouldScroll:function(t){if(this.firstXY){var n,i=e.scrollType.get(t.currentTarget);if("none"===i)n=!1;else if("XY"===i)n=!0;else{var o=t.changedTouches[0],r=i,s="Y"===i?"X":"Y",a=Math.abs(o["client"+r]-this.firstXY[r]),l=Math.abs(o["client"+s]-this.firstXY[s]);n=a>=l}return this.firstXY=null,n}},findTouch:function(t,e){for(var n,i=0,o=t.length;o>i&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(o.size>=e.length){var n=[];o.ids.forEach(function(t){if(1!==t&&!this.findTouch(e,t-2)){var i=o.get(t).out;n.push(this.touchToPointer(i))}},this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.scrolling||this.processTouches(t,this.overDown)},overDown:function(t){o.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),e.over(t),e.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var n=t,i=o.get(n.pointerId),r=i.out,s=i.outTarget;e.move(n),r&&s!==n.target&&(r.relatedTarget=n.target,n.relatedTarget=s,r.target=s,e.out(r),e.over(n)),i.out=n,i.outTarget=n.target},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(e.up(t),e.out(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){e.cancel(t),e.out(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){o.delete(t.pointerId),this.removePrimaryTouch(t)},dedupSynthMouse:function(t){var e=c.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};e.push(i);var o=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,i);setTimeout(o,s)}}},c={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],global:["mousedown","mouseup","mouseover","mouseout"],lastTouches:[],mouseHandler:e.eventHandler.bind(e),isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,o=t.clientY,r=0,s=n.length;s>r&&(e=n[r]);r++){var l=Math.abs(i-e.x),c=Math.abs(o-e.y);if(a>=l&&a>=c)return!0}},prepareEvent:function(t){var n=e.cloneEvent(t);return n.pointerId=this.POINTER_ID,n.isPrimary=!0,n.pointerType=this.POINTER_TYPE,n},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var n=o.has(this.POINTER_ID);if(n&&(this.cancel(t),n=!1),!n){var i=this.prepareEvent(t);o.set(this.POINTER_ID,t),e.down(i),e.listen(this.global,document,this.mouseHandler)}}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var n=this.prepareEvent(t);e.move(n)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var n=o.get(this.POINTER_ID);if(n&&n.button===t.button){var i=this.prepareEvent(t);e.up(i),this.cleanupMouse()}}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var n=this.prepareEvent(t);e.over(n)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var n=this.prepareEvent(t);e.out(n)}},cancel:function(t){var n=this.prepareEvent(t);e.cancel(n),this.cleanupMouse()},cleanupMouse:function(){o.delete(this.POINTER_ID),e.unlisten(this.global,document,this.mouseHandler)}},h={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var n=e.cloneEvent(t);return n.pointerType=this.POINTER_TYPES[t.pointerType],n},MSPointerDown:function(t){var n=this.prepareEvent(t);e.down(n)},MSPointerMove:function(t){var n=this.prepareEvent(t);e.move(n)},MSPointerUp:function(t){var n=this.prepareEvent(t);e.up(n)},MSPointerOut:function(t){var n=this.prepareEvent(t);e.out(n)},MSPointerOver:function(t){var n=this.prepareEvent(t);e.over(n)},MSPointerCancel:function(t){var n=this.prepareEvent(t);e.cancel(n)},MSLostPointerCapture:function(t){var n=e.makeEvent("lostpointercapture",t);e.dispatchEvent(n)},MSGotPointerCapture:function(t){var n=e.makeEvent("gotpointercapture",t);e.dispatchEvent(n)}};if(void 0===window.navigator.pointerEnabled){if(window.navigator.msPointerEnabled){var u=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:u,enumerable:!0}),e.registerSource("ms",h),e.registerTarget(document)}else e.registerSource("mouse",c),"ontouchstart"in window&&e.registerSource("touch",l),n.enableOnSubtree(document),e.listen(["mousemove"],document);Object.defineProperty(window.navigator,"pointerEnabled",{value:!0,enumerable:!0})}}(window.PointerEventsPolyfill),function(t){var e,n,i=t.dispatcher,o=window.navigator,r=function(t){if(!i.pointermap.has(t))throw Error("InvalidPointerId");return!0};o.msPointerEnabled?(e=Element.prototype.msSetPointerCapture,n=Element.prototype.msReleasePointerCapture):(e=function(t){r(t)&&i.setCapture(t,this)},n=function(t){r(t)&&i.releaseCapture(t,this)}),Element.prototype.setPointerCapture||Object.defineProperties(Element.prototype,{setPointerCapture:{value:e},releasePointerCapture:{value:n}})}(window.PointerEventsPolyfill),function(t,e){"use strict";function n(){if(!i.READY){i.event.determineEventTypes();for(var t in i.gestures)i.gestures.hasOwnProperty(t)&&i.detection.register(i.gestures[t]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in t,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=document,i.plugins={},i.READY=!1,i.Instance=function(t,e){var o=this;return n(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){o.enabled&&i.detection.startDetect(o,t)}),this},i.Instance.prototype={on:function(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)this.element.addEventListener(n[i],e,!1);return this},off:function(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)this.element.removeEventListener(n[i],e,!1);return this},trigger:function(t,e){var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var o=this.element;return i.utils.hasParent(e.target,o)&&(o=e.target),o.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var o=null,r=!1,s=!1;i.event={bindDom:function(t,e,n){for(var i=e.split(" "),o=0;o<i.length;o++)t.addEventListener(i[o],n,!1)},onTouch:function(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function(l){var c=l.type.toLowerCase();if(!c.match(/mouse/)||!s){c.match(/touch/)||c.match(/pointerdown/)||c.match(/mouse/)&&1===l.which?r=!0:c.match(/mouse/)&&1!==l.which&&(r=!1),c.match(/touch|pointer/)&&(s=!0);var h=0;r&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?h=i.PointerEvent.updatePointer(e,l):c.match(/touch/)?h=l.touches.length:s||(h=c.match(/up/)?0:1),h>0&&e==i.EVENT_END?e=i.EVENT_MOVE:h||(e=i.EVENT_END),h||null===o?o=l:l=o,n.call(i.detection,a.collectEventData(t,e,l)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(h=i.PointerEvent.updatePointer(e,l))),h||(o=null,r=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,e,n){var o=this.getTouchList(n,e),r=i.POINTER_TOUCH;return(n.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,n))&&(r=i.POINTER_MOUSE),{center:i.utils.getCenter(o),timeStamp:(new Date).getTime(),target:n.target,touches:o,eventType:e,pointerType:r,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(n){e.push(t.pointers[n])}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==i.POINTER_MOUSE,n[i.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==i.POINTER_PEN,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(t,n,i){for(var o in n)t[o]!==e&&i||(t[o]=n[o]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],n=[],i=0,o=t.length;o>i;i++)e.push(t[i].pageX),n.push(t[i].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,i=e.pageX-t.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var n=Math.abs(t.pageX-e.pageX),o=Math.abs(t.pageY-e.pageY);return n>=o?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var n,i=["webkit","khtml","moz","ms","o",""];if(e&&t.style){for(var o=0;o<i.length;o++)for(var r in e)e.hasOwnProperty(r)&&(n=r,i[o]&&(n=i[o]+n.substring(0,1).toUpperCase()+n.substring(1)),t.style[n]=e[r]);"none"==e.userSelect&&(t.onselectstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,n=0,o=this.gestures.length;o>n;n++){var r=this.gestures[n];if(!this.stopped&&e[r.name]!==!1&&r.handler.call(r,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var n=0,o=t.touches.length;o>n;n++)e.touches.push(i.utils.extend({},t.touches[n]))}var r=t.timeStamp-e.timeStamp,s=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,l=i.utils.getVelocity(r,s,a);return i.utils.extend(t,{deltaTime:r,deltaX:s,deltaY:a,velocityX:l.x,velocityY:l.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),direction:i.utils.getDirection(e.center,t.center),scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var n=t.defaults||{};return n[t.name]===e&&(n[t.name]=!0),i.utils.extend(i.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case i.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END){var n=i.detection.previous,o=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),o=!0),(!o||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,e){if(i.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),this.triggered=!1,void 0;if(!(e.options.drag_max_touches>0&&t.touches.length>e.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<e.options.drag_min_distance&&i.detection.current.name!=this.name)return;i.detection.current.name=this.name,(i.detection.current.lastEvent.drag_locked_to_axis||e.options.drag_lock_to_axis&&e.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var n=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&n!==t.direction&&(t.direction=i.utils.isVertical(n)?t.deltaY<0?i.DIRECTION_UP:i.DIRECTION_DOWN:t.deltaX<0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),e.trigger(this.name+t.direction,t),(e.options.drag_block_vertical&&i.utils.isVertical(t.direction)||e.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,e){if(i.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),this.triggered=!1,void 0;if(!(t.touches.length<2))switch(e.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var n=Math.abs(1-t.scale),o=Math.abs(t.rotation);if(n<e.options.transform_min_scale&&o<e.options.transform_min_rotation)return;i.detection.current.name=this.name,this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),o>e.options.transform_min_rotation&&e.trigger("rotate",t),n>e.options.transform_min_scale&&(e.trigger("pinch",t),e.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case i.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,e){return e.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE?(t.stopDetect(),void 0):(e.options.prevent_default&&t.preventDefault(),t.eventType==i.EVENT_START&&e.trigger(this.name,t),void 0)}},i.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==i.EVENT_END&&e.trigger(this.name,t)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=i:(t.Hammer=i,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return i}))}(this);var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(t){"use strict";var e=t.document,n=function(){return t.URL||t.webkitURL||t},i=t.URL||t.webkitURL||t,o=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r=!t.externalHost&&"download"in o,s=function(n){var i=e.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)},a=t.webkitRequestFileSystem,l=t.requestFileSystem||a||t.mozRequestFileSystem,c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},h="application/octet-stream",u=0,p=[],d=function(){for(var t=p.length;t--;){var e=p[t];"string"==typeof e?i.revokeObjectURL(e):e.remove()}p.length=0},f=function(t,e,n){e=[].concat(e);for(var i=e.length;i--;){var o=t["on"+e[i]];if("function"==typeof o)try{o.call(t,n||t)}catch(r){c(r)}}},g=function(e,i){var c,d,g,m=this,y=e.type,v=!1,x=function(){var t=n().createObjectURL(e);return p.push(t),t},w=function(){f(m,"writestart progress write writeend".split(" "))},b=function(){(v||!c)&&(c=x(e)),d?d.location.href=c:window.open(c,"_blank"),m.readyState=m.DONE,w()},A=function(t){return function(){return m.readyState!==m.DONE?t.apply(this,arguments):void 0}},T={create:!0,exclusive:!1};return m.readyState=m.INIT,i||(i="download"),r?(c=x(e),o.href=c,o.download=i,s(o),m.readyState=m.DONE,w(),void 0):(t.chrome&&y&&y!==h&&(g=e.slice||e.webkitSlice,e=g.call(e,0,e.size,h),v=!0),a&&"download"!==i&&(i+=".download"),(y===h||a)&&(d=t),l?(u+=e.size,l(t.TEMPORARY,u,A(function(t){t.root.getDirectory("saved",T,A(function(t){var n=function(){t.getFile(i,T,A(function(t){t.createWriter(A(function(n){n.onwriteend=function(e){d.location.href=t.toURL(),p.push(t),m.readyState=m.DONE,f(m,"writeend",e)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&b()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=m["on"+t]}),n.write(e),m.abort=function(){n.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),b)}),b)};t.getFile(i,{create:!1},A(function(t){t.remove(),n()}),A(function(t){t.code===t.NOT_FOUND_ERR?n():b()}))}),b)}),b),void 0):(b(),void 0))},m=g.prototype,y=function(t,e){return new g(t,e)};return m.abort=function(){var t=this;t.readyState=t.DONE,f(t,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,t.addEventListener("unload",d,!1),y}(self),require={skipDataMain:!0},requirejs,require,define;!function(global){function isFunction(t){return"[object Function]"===ostring.call(t)}function isArray(t){return"[object Array]"===ostring.call(t)}function each(t,e){if(t){var n;for(n=0;n<t.length&&(!t[n]||!e(t[n],n,t));n+=1);}}function eachReverse(t,e){if(t){var n;for(n=t.length-1;n>-1&&(!t[n]||!e(t[n],n,t));n-=1);}}function hasProp(t,e){return hasOwn.call(t,e)}function eachProp(t,e){var n;for(n in t)if(t.hasOwnProperty(n)&&e(t[n],n))break}function mixin(t,e,n,i){return e&&eachProp(e,function(e,o){(n||!hasProp(t,o))&&(i&&"string"!=typeof e?(t[o]||(t[o]={}),mixin(t[o],e,n,i)):t[o]=e)}),t}function bind(t,e){return function(){return e.apply(t,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(t){if(!t)return t;var e=global;return each(t.split("."),function(t){e=e[t]}),e}function makeContextModuleFunc(t,e,n){return function(){var i,o=aps.call(arguments,0);return n&&isFunction(i=o[o.length-1])&&(i.__requireJsBuild=!0),o.push(e),t.apply(null,o)}}function addRequireMethods(t,e,n){each([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(i){var o=i[1]||i[0];t[i[0]]=e?makeContextModuleFunc(e[o],n):function(){var t=contexts[defContextName];return t[o].apply(t,arguments)}})}function makeError(t,e,n,i){var o=new Error(e+"\nhttp://requirejs.org/docs/errors.html#"+t);return o.requireType=t,o.requireModules=i,n&&(o.originalError=n),o}function newContext(t){function e(t){var e,n;for(e=0;t[e];e+=1)if(n=t[e],"."===n)t.splice(e,1),e-=1;else if(".."===n){if(1===e&&(".."===t[2]||".."===t[0]))break;e>0&&(t.splice(e-1,2),e-=2)}}function n(t,n,i){var o,r,s,a,l,c,h,u,p,d,f,g=n&&n.split("/"),m=g,y=C.map,v=y&&y["*"];if(t&&"."===t.charAt(0)&&(n?(m=C.pkgs[n]?g=[n]:g.slice(0,g.length-1),t=m.concat(t.split("/")),e(t),r=C.pkgs[o=t[0]],t=t.join("/"),r&&t===o+"/"+r.main&&(t=o)):0===t.indexOf("./")&&(t=t.substring(2))),i&&(g||v)&&y){for(a=t.split("/"),l=a.length;l>0;l-=1){if(h=a.slice(0,l).join("/"),g)for(c=g.length;c>0;c-=1)if(s=y[g.slice(0,c).join("/")],s&&(s=s[h])){u=s,p=l;break}if(u)break;!d&&v&&v[h]&&(d=v[h],f=l)}!u&&d&&(u=d,p=f),u&&(a.splice(0,p,u),t=a.join("/"))}return t}function i(t){isBrowser&&each(scripts(),function(e){return e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===b.contextName?(e.parentNode.removeChild(e),!0):void 0})}function o(t){var e=C.paths[t];return e&&isArray(e)&&e.length>1?(i(t),e.shift(),b.undef(t),b.require([t]),!0):void 0}function r(t,e,i,o){var r,s,a,l=t?t.indexOf("!"):-1,c=null,h=e?e.name:null,u=t,p=!0,d="";return t||(p=!1,t="_@r"+(B+=1)),-1!==l&&(c=t.substring(0,l),t=t.substring(l+1,t.length)),c&&(c=n(c,h,o),s=D[c]),t&&(c?d=s&&s.normalize?s.normalize(t,function(t){return n(t,h,o)}):n(t,h,o):(d=n(t,h,o),r=b.nameToUrl(d))),a=!c||s||i?"":"_unnormalized"+(M+=1),{prefix:c,name:d,parentMap:e,unnormalized:!!a,url:r,originalName:u,isDefine:p,id:(c?c+"!"+d:d)+a}}function s(t){var e=t.id,n=E[e];
return n||(n=E[e]=new b.Module(t)),n}function a(t,e,n){var i=t.id,o=E[i];!hasProp(D,i)||o&&!o.defineEmitComplete?s(t).on(e,n):"defined"===e&&n(D[i])}function l(t,e){var n=t.requireModules,i=!1;e?e(t):(each(n,function(e){var n=E[e];n&&(n.error=t,n.events.error&&(i=!0,n.emit("error",t)))}),i||req.onError(t))}function c(){globalDefQueue.length&&(apsp.apply(k,[k.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function h(t,e,n){var i=t&&t.map,o=makeContextModuleFunc(n||b.require,i,e);return addRequireMethods(o,b,i),o.isBrowser=isBrowser,o}function u(t){delete E[t],each(R,function(e,n){return e.map.id===t?(R.splice(n,1),e.defined||(b.waitCount-=1),!0):void 0})}function p(t,e,n){var i,o=t.map.id,r=t.depMaps;if(t.inited)return e[o]?t:(e[o]=!0,each(r,function(t){var o=t.id,r=E[o];if(r&&!n[o]&&r.inited&&r.enabled)return i=p(r,e,n)}),n[o]=!0,i)}function d(t,e,n){var i=t.map.id,o=t.depMaps;if(t.inited&&t.map.isDefine)return e[i]?D[i]:(e[i]=t,each(o,function(o){var r,s=o.id,a=E[s];if(!A[s]&&a){if(!a.inited||!a.enabled)return n[i]=!0,void 0;r=d(a,e,n),n[s]||t.defineDepById(s,r)}}),t.check(!0),D[i])}function f(t){t.check()}function g(){var t,e,n,r,s=1e3*C.waitSeconds,a=s&&b.startTime+s<(new Date).getTime(),c=[],h=!1,u=!0;if(!x){if(x=!0,eachProp(E,function(n){if(t=n.map,e=t.id,n.enabled&&!n.error)if(!n.inited&&a)o(e)?(r=!0,h=!0):(c.push(e),i(e));else if(!n.inited&&n.fetched&&t.isDefine&&(h=!0,!t.prefix))return u=!1}),a&&c.length)return n=makeError("timeout","Load timeout for modules: "+c,null,c),n.contextName=b.contextName,l(n);u&&(each(R,function(t){if(!t.defined){var e=p(t,{},{}),n={};e&&(d(e,n,{}),eachProp(n,f))}}),eachProp(E,f)),a&&!r||!h||!isBrowser&&!isWebWorker||T||(T=setTimeout(function(){T=0,g()},50)),x=!1}}function m(t){s(r(t[0],null,!0)).init(t[1],t[2])}function y(t,e,n,i){t.detachEvent&&!isOpera?i&&t.detachEvent(i,e):t.removeEventListener(n,e,!1)}function v(t){var e=t.currentTarget||t.srcElement;return y(e,b.onScriptLoad,"load","onreadystatechange"),y(e,b.onScriptError,"error"),{node:e,id:e&&e.getAttribute("data-requiremodule")}}var x,w,b,A,T,C={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{}},E={},S={},k=[],D={},L={},B=1,M=1,R=[];return A={require:function(t){return h(t)},exports:function(t){return t.usingExports=!0,t.map.isDefine?t.exports=D[t.map.id]={}:void 0},module:function(t){return t.module={id:t.map.id,uri:t.map.url,config:function(){return C.config&&C.config[t.map.id]||{}},exports:D[t.map.id]}}},w=function(t){this.events=S[t.id]||{},this.map=t,this.shim=C.shim[t.id],this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},w.prototype={init:function(t,e,n,i){i=i||{},this.inited||(this.factory=e,n?this.on("error",n):this.events.error&&(n=bind(this,function(t){this.emit("error",t)})),this.depMaps=t&&t.slice(0),this.depMaps.rjsSkipMap=t.rjsSkipMap,this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDepById:function(t,e){var n;return each(this.depMaps,function(e,i){return e.id===t?(n=i,!0):void 0}),this.defineDep(n,e)},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,this.depCount-=1,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,b.startTime=(new Date).getTime();var t=this.map;return this.shim?(h(this,!0)(this.shim.deps||[],bind(this,function(){return t.prefix?this.callPlugin():this.load()})),void 0):t.prefix?this.callPlugin():this.load()}},load:function(){var t=this.map.url;L[t]||(L[t]=!0,b.load(this.map.id,t))},check:function(t){if(this.enabled&&!this.enabling){var e,n,i=this.map.id,o=this.depExports,r=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(s)){if(this.events.error)try{r=b.execCb(i,s,o,r)}catch(a){e=a}else r=b.execCb(i,s,o,r);if(this.map.isDefine&&(n=this.module,n&&void 0!==n.exports&&n.exports!==this.exports?r=n.exports:void 0===r&&this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=[this.map.id],e.requireType="define",l(this.error=e)}else r=s;this.exports=r,this.map.isDefine&&!this.ignore&&(D[i]=r,req.onResourceLoad&&req.onResourceLoad(b,this.map,this.depMaps)),delete E[i],this.defined=!0,b.waitCount-=1,0===b.waitCount&&(R=[])}this.defining=!1,t||this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var t=this.map,e=t.id,i=r(t.prefix,null,!1,!0);a(i,"defined",bind(this,function(i){var o,c,p,d=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null;return this.map.unnormalized?(i.normalize&&(d=i.normalize(d,function(t){return n(t,f,!0)})||""),c=r(t.prefix+"!"+d,this.map.parentMap,!1,!0),a(c,"defined",bind(this,function(t){this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),p=E[c.id],p&&(this.events.error&&p.on("error",bind(this,function(t){this.emit("error",t)})),p.enable()),void 0):(o=bind(this,function(t){this.init([],function(){return t},null,{enabled:!0})}),o.error=bind(this,function(t){this.inited=!0,this.error=t,t.requireModules=[e],eachProp(E,function(t){0===t.map.id.indexOf(e+"_unnormalized")&&u(t.map.id)}),l(t)}),o.fromText=function(t,e){var n=useInteractive;n&&(useInteractive=!1),s(r(t)),req.exec(e),n&&(useInteractive=!0),b.completeLoad(t)},i.load(t.name,h(t.parentMap,!0,function(t,e,n){return t.rjsSkipMap=!0,b.require(t,e,n)}),o,C),void 0)})),b.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){this.enabled=!0,this.waitPushed||(R.push(this),b.waitCount+=1,this.waitPushed=!0),this.enabling=!0,each(this.depMaps,bind(this,function(t,e){var n,i,o;if("string"==typeof t){if(t=r(t,this.map.isDefine?this.map:this.map.parentMap,!1,!this.depMaps.rjsSkipMap),this.depMaps[e]=t,o=A[t.id])return this.depExports[e]=o(this),void 0;this.depCount+=1,a(t,"defined",bind(this,function(t){this.defineDep(e,t),this.check()})),this.errback&&a(t,"error",this.errback)}n=t.id,i=E[n],A[n]||!i||i.enabled||b.enable(t,this)})),eachProp(this.pluginMaps,bind(this,function(t){var e=E[t.id];e&&!e.enabled&&b.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){var n=this.events[t];n||(n=this.events[t]=[]),n.push(e)},emit:function(t,e){each(this.events[t],function(t){t(e)}),"error"===t&&delete this.events[t]}},b={config:C,contextName:t,registry:E,defined:D,urlFetched:L,waitCount:0,defQueue:k,Module:w,makeModuleMap:r,configure:function(t){t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/");var e=C.pkgs,n=C.shim,i=C.paths,o=C.map;mixin(C,t,!0),C.paths=mixin(i,t.paths,!0),t.map&&(C.map=mixin(o||{},t.map,!0,!0)),t.shim&&(eachProp(t.shim,function(t,e){isArray(t)&&(t={deps:t}),t.exports&&!t.exports.__buildReady&&(t.exports=b.makeShimExports(t.exports)),n[e]=t}),C.shim=n),t.packages&&(each(t.packages,function(t){var n;t="string"==typeof t?{name:t}:t,n=t.location,e[t.name]={name:t.name,location:n||t.name,main:(t.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),C.pkgs=e),eachProp(E,function(t,e){t.inited||t.map.unnormalized||(t.map=r(e))}),(t.deps||t.callback)&&b.require(t.deps||[],t.callback)},makeShimExports:function(t){var e;return"string"==typeof t?(e=function(){return getGlobal(t)},e.exports=t,e):function(){return t.apply(global,arguments)}},requireDefined:function(t,e){return hasProp(D,r(t,e,!1,!0).id)},requireSpecified:function(t,e){return t=r(t,e,!1,!0).id,hasProp(D,t)||hasProp(E,t)},require:function(e,n,i,o){var a,h,u,p,d;if("string"==typeof e)return isFunction(n)?l(makeError("requireargs","Invalid require call"),i):req.get?req.get(b,e,n):(a=e,o=n,u=r(a,o,!1,!0),h=u.id,hasProp(D,h)?D[h]:l(makeError("notloaded",'Module name "'+h+'" has not been loaded yet for context: '+t)));for(i&&!isFunction(i)&&(o=i,i=void 0),n&&!isFunction(n)&&(o=n,n=void 0),c();k.length;){if(d=k.shift(),null===d[0])return l(makeError("mismatch","Mismatched anonymous define() module: "+d[d.length-1]));m(d)}return p=s(r(null,o)),p.init(e,n,i,{enabled:!0}),g(),b.require},undef:function(t){c();var e=r(t,null,!0),n=E[t];delete D[t],delete L[e.url],delete S[t],n&&(n.events.defined&&(S[t]=n.events),u(t))},enable:function(t){var e=E[t.id];e&&s(t).enable()},completeLoad:function(t){var e,n,i,r=C.shim[t]||{},s=r.exports&&r.exports.exports;for(c();k.length;){if(n=k.shift(),null===n[0]){if(n[0]=t,e)break;e=!0}else n[0]===t&&(e=!0);m(n)}if(i=E[t],!e&&!D[t]&&i&&!i.inited){if(!(!C.enforceDefine||s&&getGlobal(s)))return o(t)?void 0:l(makeError("nodefine","No define call for "+t,null,[t]));m([t,r.deps||[],r.exports])}g()},toUrl:function(t,e){var i=t.lastIndexOf("."),o=null;return-1!==i&&(o=t.substring(i,t.length),t=t.substring(0,i)),b.nameToUrl(n(t,e&&e.id,!0),o)},nameToUrl:function(t,e){var n,i,o,r,s,a,l,c,h;if(req.jsExtRegExp.test(t))c=t+(e||"");else{for(n=C.paths,i=C.pkgs,s=t.split("/"),a=s.length;a>0;a-=1){if(l=s.slice(0,a).join("/"),o=i[l],h=n[l]){isArray(h)&&(h=h[0]),s.splice(0,a,h);break}if(o){r=t===o.name?o.location+"/"+o.main:o.location,s.splice(0,a,r);break}}c=s.join("/"),c+=e||(/\?/.test(c)?"":".js"),c=("/"===c.charAt(0)||c.match(/^[\w\+\.\-]+:/)?"":C.baseUrl)+c}return C.urlArgs?c+((-1===c.indexOf("?")?"?":"&")+C.urlArgs):c},load:function(t,e){req.load(b,t,e)},execCb:function(t,e,n,i){return e.apply(i,n)},onScriptLoad:function(t){if("load"===t.type||readyRegExp.test((t.currentTarget||t.srcElement).readyState)){interactiveScript=null;var e=v(t);b.completeLoad(e.id)}},onScriptError:function(t){var e=v(t);return o(e.id)?void 0:l(makeError("scripterror","Script error",t,[e.id]))}}}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(t){return"interactive"===t.readyState?interactiveScript=t:void 0}),interactiveScript)}var documentExists=!1;try{document&&(documentExists=!0)}catch(e){documentExists=!1}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.0.6",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!documentExists),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(t,e,n,i){var o,r,s=defContextName;return isArray(t)||"string"==typeof t||(r=t,isArray(e)?(t=e,e=n,n=i):t=[]),r&&r.context&&(s=r.context),o=contexts[s],o||(o=contexts[s]=req.s.newContext(s)),r&&o.configure(r),o.require(t,e,n)},req.config=function(t){return req(t)},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),addRequireMethods(req),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(t){throw t},req.load=function(t,e,n){var i,o=t&&t.config||{};return isBrowser?(i=o.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),i.type=o.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i.setAttribute("data-requirecontext",t.contextName),i.setAttribute("data-requiremodule",e),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",t.onScriptLoad,!1),i.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",t.onScriptLoad)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i):(isWebWorker&&(importScripts(n),t.completeLoad(e)),void 0)},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(t){return head||(head=t.parentNode),dataMain=t.getAttribute("data-main"),dataMain?(cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript),dataMain=dataMain.replace(jsSuffixRegExp,""),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0):void 0}),define=function(t,e,n){var i,o;"string"!=typeof t&&(n=e,e=t,t=null),isArray(e)||(n=e,e=[]),!e.length&&isFunction(n)&&n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(t,n){e.push(n)}),e=(1===n.length?["require"]:["require","exports","module"]).concat(e)),useInteractive&&(i=currentlyAddingScript||getInteractiveScript(),i&&(t||(t=i.getAttribute("data-requiremodule")),o=contexts[i.getAttribute("data-requirecontext")])),(o?o.defQueue:globalDefQueue).push([t,e,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("text",["module"],function(t){var e,n,i,o,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),h=l&&location.hostname,u=l&&(location.port||void 0),p={},d=t.config&&t.config()||{};return e={version:"2.0.7",strip:function(t){if(t){t=t.replace(s,"");var e=t.match(a);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){n=r[e];try{t=new ActiveXObject(n)}catch(i){}if(t){r=[n];break}}return t},parseName:function(t){var e,n,i,o=!1,r=t.indexOf("."),s=0===t.indexOf("./")||0===t.indexOf("../");return-1!==r&&(!s||r>1)?(e=t.substring(0,r),n=t.substring(r+1,t.length)):e=t,i=n||e,r=i.indexOf("!"),-1!==r&&(o="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:e=i),{moduleName:e,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,n,i,o){var r,s,a,l=e.xdRegExp.exec(t);return l?(r=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(r&&r!==n||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==o)):!0},finishLoad:function(t,n,i,o){i=n?e.strip(i):i,d.isBuild&&(p[t]=i),o(i)},load:function(t,n,i,o){if(o.isBuild&&!o.inlineText)return i(),void 0;d.isBuild=o.isBuild;var r=e.parseName(t),s=r.moduleName+(r.ext?"."+r.ext:""),a=n.toUrl(s),p=d.useXhr||e.useXhr;!l||p(a,c,h,u)?e.get(a,function(n){e.finishLoad(t,r.strip,n,i)},function(t){i.error&&i.error(t)}):n([s],function(t){e.finishLoad(r.moduleName+"."+r.ext,r.strip,t,i)})},write:function(t,n,i){if(p.hasOwnProperty(n)){var o=e.jsEscape(p[n]);i.asModule(t+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(t,n,i,o,r){var s=e.parseName(n),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=i.toUrl(s.moduleName+a)+".js";e.load(l,i,function(){var n=function(t){return o(c,t)};n.asModule=function(t,e){return o.asModule(t,c,e)},e.write(t,l,n,r)},r)}},"node"===d.env||!d.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),e.get=function(t,e,i){try{var o=n.readFileSync(t,"utf8");0===o.indexOf("?")&&(o=o.substring(1)),e(o)}catch(r){i(r)}}):"xhr"===d.env||!d.env&&e.createXhr()?e.get=function(t,n,i,o){var r,s=e.createXhr();if(s.open("GET",t,!0),o)for(r in o)o.hasOwnProperty(r)&&s.setRequestHeader(r.toLowerCase(),o[r]);d.onXhr&&d.onXhr(s,t),s.onreadystatechange=function(){var e,o;4===s.readyState&&(e=s.status,e>399&&600>e?(o=new Error(t+" HTTP status: "+e),o.xhr=s,i(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,t))},s.send(null)}:"rhino"===d.env||!d.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var n,i,o="utf-8",r=new java.io.File(t),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),o)),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);l=String(n.toString())}finally{a.close()}e(l)}:("xpconnect"===d.env||!d.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),e.get=function(t,e){var n,r,s={},a=new FileUtils.File(t);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),n.init(a,1,0,!1),r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),r.init(n,"utf-8",n.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),s),r.close(),n.close(),e(s.value)}catch(l){throw new Error((a&&a.path||"")+": "+l)}}),e}),define("text!css/appbar.css",[],function(){return".skitch-app-bar-wrapper {\n    height: 100%;\n    width: 52px;\n}\n\n.skitch-app-bar-border {\n    position: absolute;\n    z-index: 1000;\n    left: 0px;\n    width: 52px;\n    height: 100%;\n    border-right: solid 1px rgba(0,0,0,0.2);\n    background-color: #f0f0f0;\n    -moz-user-select:none;\n    -webkit-user-select:none;\n}\n\n.skitch-app-bar-hitarea {\n    position: absolute;\n    top: 50%;\n    margin-top: -207px;\n    width: 92px;\n    border: 0px solid red;\n}\n\n.skitch-app-bar {\n    padding: 4px;\n    position: relative;\n    width: 44px;\n    height: 405px;\n    clip: rect(0px, 52px, 449px, 0px);\n    overflow: hidden;\n}\n\n.skitch-app-bar-button {\n    position: relative;\n    display: block;\n    width: 44px;\n    height: 44px;\n    margin: 0px 0px 0px 0px;\n}\n\n.skitch-app-bar hr {\n    border:0;\n    width: 40px;\n    height: 1px;\n    background-color: #cccccc;\n    margin: 5px auto 5px auto;\n    padding: 0;\n\n}\n\n.skitch-app-bar-main {\n    position: absolute;\n}\n\n.skitch-app-bar-button .skitch-icon {\n    width: 44px;\n    height: 44px;\n    background-size: 44px 44px;\n    margin: 0px 0px 0px 0px;\n    padding: 0px;\n}\n\n.skitch-app-bar .skitch-more-icon {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 44px;\n    height: 44px;\n}\n\n.skitch-app-bar-button .skitch-icon-text {\n    display: none;\n    color: white;\n    font-family: arial;\n    font-size: 12px;\n    text-align: center;\n    white-space: nowrap;\n    overflow: hidden;\n\n    -ms-text-overflow: ellipsis;\n    width: 100%;\n}\n\n.skitch-app-bar-button {\n    background-color: transparent;\n}\n.skitch-app-bar-button:hover {\n    background-color: #e6e6e6;\n}\n.skitch-app-bar-button.skitch-selected {\n    background-color: #4d4d4d;\n}\n\n.skitch-app-bar-button.skitch-selected .skitch-icon polygon,\n.skitch-app-bar-button.skitch-selected .skitch-icon rect,\n.skitch-app-bar-button.skitch-selected .skitch-icon circle,\n.skitch-app-bar-button.skitch-selected .skitch-icon path {\n    fill: #FFF;\n}\n\n\n/* sub-menus */\n\n.skitch-shape-dialog,\n.skitch-pen-dialog,\n.skitch-stamp-dialog,\n.skitch-color-dialog,\n.skitch-size-dialog {\n    padding: 4px;\n    width: 44px;\n    background: transparent;\n    border: solid 0px black;\n    position: absolute;\n    top: 50%;\n    margin-left: 52px;\n    z-index: 1001;\n}\n\n.skitch-shape-dialog {\n    margin-top: -118px;\n}\n\n.skitch-pen-dialog {\n    margin-top: -74px;\n}\n\n.skitch-stamp-dialog {\n    margin-top: -119px;\n}\n\n.skitch-color-dialog {\n    margin-top: -198px;\n}\n\n.skitch-size-dialog {\n    margin-top: -100px;\n}\n\n\n/* arrow */\n\n.skitch-arrow-button {\n}\n.skitch-arrow-button:hover {\n}\n.skitch-arrow-button.skitch-selected {\n}\n\n/* text */\n\n.skitch-text-button {\n}\n.skitch-text-button:hover {\n}\n.skitch-text-button.skitch-selected {\n}\n\n/* shapes */\n\n.skitch-shape-button {\n}\n.skitch-shape-button:hover {\n}\n.skitch-shape-button.skitch-selected {\n}\n\n/* shapes menu */\n\n.skitch-rectangle-button {\n}\n.skitch-rectangle-button:hover {\n}\n.skitch-rectangle-button.skitch-selected {\n}\n\n.skitch-rounded-rectangle-button {\n}\n.skitch-rounded-rectangle-button:hover {\n}\n.skitch-rounded-rectangle-button.skitch-selected {\n}\n\n.skitch-ellipse-button {\n}\n.skitch-ellipse-button:hover {\n}\n.skitch-ellipse-button.skitch-selected {\n}\n\n.skitch-line-button {\n}\n.skitch-line-button:hover {\n}\n.skitch-line-button.skitch-selected {\n}\n\n/* pen */\n\n.skitch-pen-button {\n}\n.skitch-pen-button:hover {\n}\n.skitch-pen-button.skitch-selected {\n}\n\n/* pen menu */\n\n.skitch-marker-button {\n}\n.skitch-marker-button:hover {\n}\n.skitch-marker-button.skitch-selected {\n}\n\n.skitch-highlighter-button {\n}\n.skitch-highlighter-button:hover {\n}\n.skitch-highlighter-button.skitch-selected {\n}\n\n/* pixelate */\n\n.skitch-pixelate-button {\n}\n.skitch-pixelate-button:hover {\n}\n.skitch-pixelate-button.skitch-selected {\n}\n\n/* stamps */\n\n.skitch-stamp-button.skitch-accept {\n}\n.skitch-stamp-button.skitch-accept:hover {\n}\n.skitch-stamp-button.skitch-selected.skitch-accept {\n}\n\n.skitch-stamp-button.skitch-exclaim {\n}\n.skitch-stamp-button.skitch-exclaim:hover {\n}\n.skitch-stamp-button.skitch-selected.skitch-exclaim {\n}\n\n.skitch-stamp-button.skitch-question {\n}\n.skitch-stamp-button.skitch-question:hover {\n}\n.skitch-stamp-button.skitch-selected.skitch-question {\n}\n\n.skitch-stamp-button.skitch-reject .skitch-icon {\n}\n.skitch-stamp-button.skitch-reject:hover {\n}\n.skitch-stamp-button.skitch-selected.skitch-reject {\n}\n\n.skitch-stamp-button.skitch-perfect .skitch-icon {\n}\n.skitch-stamp-button.skitch-perfect:hover {\n}\n.skitch-stamp-button.skitch-selected.skitch-perfect {\n}\n\n/* stamp menu */\n\n.skitch-stamp-accept-button {\n}\n.skitch-stamp-accept-button:hover {\n}\n.skitch-stamp-accept-button.skitch-selected {\n}\n\n.skitch-stamp-exclaim-button {\n}\n.skitch-stamp-exclaim-button:hover {\n}\n.skitch-stamp-exclaim-button.skitch-selected {\n}\n\n.skitch-stamp-question-button {\n}\n.skitch-stamp-question-button:hover {\n}\n.skitch-stamp-question-button.skitch-selected {\n}\n\n.skitch-stamp-reject-button {\n}\n.skitch-stamp-reject-button:hover {\n}\n.skitch-stamp-reject-button.skitch-selected {\n}\n\n.skitch-stamp-perfect-button {\n}\n.skitch-stamp-perfect-button:hover {\n}\n.skitch-stamp-perfect-button.skitch-selected {\n}\n\n\n/* crop */\n\n.skitch-crop-button {\n}\n.skitch-crop-button:hover {\n}\n.skitch-crop-button.skitch-selected {\n}\n\n/* colors */\n\n.skitch-color-button:hover .skitch-icon :first-child { /* ring hover */\n    fill: #4D4D4D;\n}\n.skitch-color-button.skitch-red .skitch-icon :nth-child(2) {\n    fill: rgba(255, 0, 0, 1);\n}\n.skitch-color-button.skitch-orange .skitch-icon :nth-child(2) {\n    fill: rgba(255, 128, 23, 1);\n}\n.skitch-color-button.skitch-yellow .skitch-icon :nth-child(2) {\n    fill: rgba(255, 247, 0, 1);\n}\n.skitch-color-button.skitch-green .skitch-icon :nth-child(2) {\n    fill: rgba(0, 232, 0, 1);\n}\n.skitch-color-button.skitch-blue .skitch-icon :nth-child(2) {\n    fill: rgba(25, 119, 255, 1);\n}\n.skitch-color-button.skitch-pink .skitch-icon :nth-child(2) {\n    fill: rgba(252, 12, 89, 1);\n}\n.skitch-color-button.skitch-white .skitch-icon :nth-child(2) {\n    fill: rgba(255, 255, 255, 1);\n}\n.skitch-color-button.skitch-black .skitch-icon :nth-child(2) {\n    fill: rgba(0, 0, 0, 1);\n}\n\n/* color menu */\n\n.skitch-red-button .skitch-icon :nth-child(2) {\n    fill: rgba(255, 0, 0, 1);\n}\n.skitch-red-button .skitch-icon:hover :first-child {\n    fill: #4D4D4D;\n}\n.skitch-orange-button .skitch-icon :nth-child(2) {\n    fill: rgba(255, 128, 23, 1);\n}\n.skitch-orange-button .skitch-icon:hover :first-child {\n    fill: #4D4D4D;\n}\n.skitch-yellow-button .skitch-icon :nth-child(2) {\n    fill: rgba(255, 247, 0, 1);\n}\n.skitch-yellow-button .skitch-icon:hover :first-child {\n    fill: #4D4D4D;\n}\n.skitch-green-button .skitch-icon :nth-child(2) {\n    fill: rgba(0, 232, 0, 1);\n}\n.skitch-green-button .skitch-icon:hover :first-child {\n    fill: #4D4D4D;\n}\n.skitch-blue-button .skitch-icon :nth-child(2) {\n    fill: rgba(25, 119, 255, 1);\n}\n.skitch-blue-button .skitch-icon:hover :first-child {\n    fill: #4D4D4D;\n}\n.skitch-pink-button .skitch-icon :nth-child(2) {\n    fill: rgba(252, 12, 89, 1);\n}\n.skitch-pink-button .skitch-icon:hover :first-child {\n    fill: #4D4D4D;\n}\n.skitch-white-button .skitch-icon :nth-child(2) {\n    fill: rgba(255, 255, 255, 1);\n}\n.skitch-white-button .skitch-icon:hover :first-child {\n    fill: #4D4D4D;\n}\n.skitch-black-button .skitch-icon :nth-child(2) {\n    fill: #000000;\n}\n.skitch-black-button .skitch-icon:hover :first-child {\n    fill: rgba(0, 0, 0, 1);\n}\n\n.skitch-custom-color-button .skitch-icon:hover :first-child {\n    fill: #4D4D4D;\n}\n\n/* sizes */\n\n.skitch-size-button:hover .skitch-icon :first-child { /* ring hover */\n    fill: #4D4D4D;\n}\n\n.skitch-size-button.skitch-size-1 .skitch-icon {\n}\n.skitch-size-button.skitch-size-1 .skitch-icon:hover {\n}\n\n.skitch-size-button.skitch-size-2 .skitch-icon {\n}\n.skitch-size-button.skitch-size-2 .skitch-icon:hover {\n}\n\n.skitch-size-button.skitch-size-3 .skitch-icon {\n}\n.skitch-size-button.skitch-size-3 .skitch-icon:hover {\n}\n\n.skitch-size-button.skitch-size-4 .skitch-icon {\n}\n.skitch-size-button.skitch-size-4 .skitch-icon:hover {\n}\n\n.skitch-size-button.skitch-size-5 .skitch-icon {\n}\n.skitch-size-button.skitch-size-5 .skitch-icon:hover {\n}\n\n\n/* size menu */\n\n.skitch-size-1-button {\n}\n.skitch-size-1-button:hover {\n}\n.skitch-size-1-button.skitch-selected {\n}\n\n.skitch-size-2-button {\n}\n.skitch-size-2-button:hover {\n}\n.skitch-size-2-button.skitch-selected {\n}\n\n.skitch-size-3-button {\n}\n.skitch-size-3-button:hover {\n}\n.skitch-size-3-button.skitch-selected {\n}\n\n.skitch-size-4-button {\n}\n.skitch-size-4-button:hover {\n}\n.skitch-size-4-button.skitch-selected {\n}\n\n.skitch-size-5-button {\n}\n.skitch-size-5-button:hover {\n}\n.skitch-size-5-button.skitch-selected {\n}\n\n.skitch-custom-color-dialog {\n    position: absolute;\n    background-color: #FDFDFD;\n    bottom: 0px;\n    left: 62px;\n    width: 200px;\n    height: 200px;\n    border: solid 1px rgba(0,0,0,0.2);\n}\n\n.skitch-custom-color-picker {\n    margin: 10px;\n}\n\n/* miscellaneous */\n\n.slide-left {\n    left: -52px;\n    -webkit-transition: all 0.2s cubic-bezier(0, 1, .66, 1);\n    -moz-transition: all 0.2s cubic-bezier(0, 1, .66, 1);\n    transition: all 0.2s cubic-bezier(0, 1, .66, 1);\n}\n\n.slide-right {\n    left: auto;\n    -webkit-transition: all 0.2s cubic-bezier(0, 1, .66, 1);\n    -moz-transition: all 0.2s cubic-bezier(0, 1, .66, 1);\n    transition: all 0.2s cubic-bezier(0, 1, .66, 1);\n}"}),define("text!css/appbar-win32.css",[],function(){return".skitch-app-bar-border {\n    background-color: #fdfdfd;\n\n}\n\n.skitch-app-bar-button .skitch-icon polygon,\n.skitch-app-bar-button .skitch-icon rect,\n.skitch-app-bar-button .skitch-icon circle,\n.skitch-app-bar-button .skitch-icon path {\n}\n\n.skitch-app-bar-button:hover {\n    background-color: #eff8fe;\n    -moz-box-shadow: 0 0 0px 1px #c3e5f5 inset;\n    -webkit-box-shadow: 0 0 0px 1px #c3e5f5 inset;\n    box-shadow: 0 0 0px 1px #c3e5f5 inset;\n}\n\n.skitch-app-bar-button.skitch-selected .skitch-icon polygon,\n.skitch-app-bar-button.skitch-selected .skitch-icon rect,\n.skitch-app-bar-button.skitch-selected .skitch-icon circle,\n.skitch-app-bar-button.skitch-selected .skitch-icon path {\n    fill: #3F3F3F;\n}\n\n.skitch-app-bar-button.skitch-selected {\n    background-color: #cbe8f6;\n    -moz-box-shadow: 0 0 0px 1px #8bcbe8 inset;\n    -webkit-box-shadow: 0 0 0px 1px #8bcbe8 inset;\n    box-shadow: 0 0 0px 1px #8bcbe8 inset;\n}\n\n.skitch-app-bar-button:hover.skitch-selected {\n    background-color: #cbe8f6;\n}\n\n.skitch-color-button .skitch-icon path {\n    fill: #D7D7D7;\n}\n\n.skitch-color-button:hover .skitch-icon :first-child { /* ring hover */\n    fill: #4D4D4D;\n}\n\n.skitch-color-button .skitch-icon path {\n    fill: #D7D7D7;\n}\n\n.skitch-color-button .skitch-icon polygon {\n    fill: #BFBFBF;\n}\n\n.skitch-size-button .skitch-icon path {\n    fill: #D7D7D7;\n}\n.skitch-size-button:hover .skitch-icon :first-child { /* ring hover */\n    fill: #4D4D4D;\n}\n.skitch-size-button .skitch-icon polygon {\n    fill: #BFBFBF;\n}\n\n"}),define("text!css/cropbar.css",[],function(){return'.skitchCropOptions {\n    position: absolute;\n    top: 0px;\n    right: 0px;\n    background-color: rgb(47,55,61);\n    height: 40px;\n    width: 100%;\n    border-bottom: 2px rgba(255,255,255,.38) solid;\n}\n\n.skitchCropOptions div {\n    float: right;\n}\n\n.skitchCropOptions div div {\n    float: none;\n    display: inline-block;\n    color: white;\n    font-family: "GothamMedium", "Gotham_SSm_4r", Helvetica, Arial, sans-serif;\n    font-size: 10pt;\n    margin-top: 10px;\n}\n\n.skitchCropOptions div div:last-of-type {\n    text-shadow: 1px 1px 2px rgba(0,0,0,.32);\n    height: 22px;\n    width: 60px;\n    background-color: rgb(38,176,100);\n    border-radius: 2px;\n    border-top: 1px rgb(51,204,120) solid;\n    line-height: 20px;\n    margin: 0px 10px;\n    text-align: center;\n}\n.skitchCropOptions div div:first-of-type {\n    text-shadow: 1px 1px 2px rgba(0,0,0,.32);\n    padding-left: 22px;\n    height: 20px;\n    line-height: 20px;\n    margin-left: 10px;\n    padding-right: 22px;\n}'}),define("text!css/cropbar-win32.css",[],function(){return""}),define("text!css/toast.css",[],function(){return'.skitchToastBoxContainer {\n	position: absolute;\n	width: 100%;\n	text-align: center;\n	top: 30px;\n}\n.skitchToastBox {\n	width: 200px;\n	height: 16px;\n	padding: 12px;\n	background-color: rgba(47,55,61,.95);\n	border-radius: 4px;\n	color: white;\n	cursor: default;\n	font-size: 10pt;\n	text-shadow: 1px 1px 2px rgba(0,0,0,.32);\n	font-family: "GothamMedium", "Gotham_SSm_4r", Helvetica, Arial, sans-serif;\n	border: 2px rgba(255,255,255,.38) solid;\n}\n.skitchToast {\n	padding-left: 20px;\n	padding-right: 20px;\n	display: inline-block;\n	width: 10px;\n	height: 10px;\n	color: #f1f5f8;\n	text-align: center;\n}\n\n\n.skitchZoomToolbox{\n    height: 16px;\n    padding: 12px;\n    background-color: rgba(47,55,61,.95);\n    border-radius: 4px;\n    color: #f1f5f8;\n    border: 2px rgba(255,255,255,.38) solid;\n    cursor: default;\n    font-size: 10pt;\n    text-shadow: 1px 1px 2px rgba(0,0,0,.32);\n    font-family: "GothamMedium", "Gotham_SSm_4r", Helvetica, Arial, sans-serif;\n}\n\n.skitchZoomToolboxPercent {\n    display: inline-block;\n    height: 16px;\n    border-right: solid 1px rgba(73,88,101,1);\n    padding-right: 20px;\n    padding-left: 20px;\n    width: 52px;\n    color: rgb(161,164,166);\n    text-align: center;\n}\n\n.skitchZoomToolboxReset {\n    display: inline-block;\n    height: 16px;\n    padding-left: 20px;\n    cursor: pointer;\n    padding-right: 20px;\n    border-right: solid 1px rgba(73,88,101,1);\n    text-align: center;\n    color: #FFFFFF;\n}\n\n.skitchZoomToolboxReset:hover {\n    color: #00BAFF;\n}\n\n.skitchZoomToolboxTip {\n    padding-left: 20px;\n    display: inline-block;\n    height: 16px;\n    text-align: center;\n    color: rgb(161,164,166);\n    padding-right: 20px;\n}'}),define("text!css/toast-win32.css",[],function(){return""}),define("text!css/color-picker.css",[],function(){return"/**\n * Farbtastic Color Picker 1.2\n *  2008 Steven Wittens\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation; either version 2 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA\n */\n.farbtastic {\n  position: relative;\n}\n.farbtastic * {\n  position: absolute;\n  cursor: crosshair;\n}\n.farbtastic, .farbtastic .wheel {\n    width: 195px;\n    height: 195px;\n    margin: auto;\n}\n.farbtastic .color, .farbtastic .overlay {\n  top: 47px;\n  left: 47px;\n  width: 101px;\n  height: 101px;\n}\n.farbtastic .wheel {\n  background: url(wheel.png) no-repeat;\n  width: 195px;\n  height: 195px;\n}\n.farbtastic .overlay {\n  background: url(mask.png) no-repeat;\n}\n.farbtastic .marker {\n  width: 17px;\n  height: 17px;\n  margin: -8px 0 0 -8px;\n  overflow: hidden; \n  background: url(marker.png) no-repeat;\n}\n\n"
}),define("text!css/pdfeditor.css",[],function(){return".pager {\n    position: absolute;\n    top: 10px;\n    left: 10px;\n    width: 300px;\n    height: 200px;\n    z-index: 99;\n}\n\n.pageSelector {\n    color:white;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n    z-index: 9999;\n    background-color: #676e73;\n}\n\n.skitch-pdf-pagerButtonLeft {\n    position: absolute;\n    bottom: 20px;\n    left: 0;\n    width: 80px;\n    height: 50px;\n    z-index: 9999;\n    background-image: url('../images/icons/leftnav.png');\n}\n\n.skitch-pdf-pagerButtonRight {\n    position: absolute;\n    bottom: 20px;\n    right: 0;\n    width: 80px;\n    height: 50px;\n    z-index: 9999;\n    background-image: url('../images/icons/rightnav.png');\n}\n\n.skitch-pdf-pager {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 80px;\n    z-index: 9999;\n    background-color: #231f20;\n    display: none;\n}\n\n.skitch-pdf-pager .pagerInfo {\n    color: white;\n    font-family: \"Segoe UI\", Verdana, Arial, sans-serif;\n    font-size: 36px;\n    margin: 10px;\n}\n\n.skitch-pdf-pager .pagerButtonShowAll {\n    float: right;\n    width: 40px;\n    height: 40px;\n    background-image: url('../images/icons/pagenav_icon_off_40x40.png');\n    margin: 20px 5px;\n}\n\n.skitch-pdf-pager .pagerButtonShowAll:hover {\n    background-image: url('../images/icons/pagenav_icon_on_40x40.png');\n}\n\n.pageSelectorClose {\n    position: absolute;\n    top: 24px;\n    left: 17px;\n    background: url('../images/icons/back.png') center center no-repeat;\n    width: 64px;\n    height: 64px;\n    z-index: 88888;\n}\n\n.pageSelectorClose:hover {\n    background: url('../images/icons/back_active.png') center center no-repeat;\n}\n\n.pageTilesHeader {\n    font-family:\"Segoe UI\",Verdana, Arial, sans-serif;\n    font-size:36px;\n    font-weight:lighter;\n    position: absolute;\n    left: 60px;\n    top: 130px;\n}\n\n.pageTilesHeader a {\n    color: white;\n}\n\n.pageTiles {\n    position: absolute;\n    left: 40px;\n    top: 200px;\n}\n\n.pageTile {\n    position: relative;\n    margin: 20px;\n}\n\n.pageTile .pageNumber {\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    width: 30px;\n    height: 30px;\n    background-color: black;\n    color: white;\n    text-align: center;\n    vertical-align: middle;\n    line-height: 30px;\n    font-family: Segoe UI, Verdana, Arial, sans-serif;\n}"}),define("text!css/pdfeditor-win32.css",[],function(){return""}),define("util/Include",["require","text!css/appbar.css","text!css/appbar-win32.css","text!css/cropbar.css","text!css/cropbar-win32.css","text!css/toast.css","text!css/toast-win32.css","text!css/color-picker.css","text!css/pdfeditor.css","text!css/pdfeditor-win32.css"],function(t){function e(){}var n=t("text!css/appbar.css"),i=t("text!css/appbar-win32.css"),o=t("text!css/cropbar.css"),r=t("text!css/cropbar-win32.css"),s=t("text!css/toast.css"),a=t("text!css/toast-win32.css"),l=t("text!css/color-picker.css"),c=t("text!css/pdfeditor.css"),h=t("text!css/pdfeditor-win32.css");return e.CSS=function(t){switch(t){case"appbar.css":$(document.createElement("style")).appendTo(document.head).html(n);break;case"appbar-win32.css":$(document.createElement("style")).appendTo(document.head).html(i);break;case"cropbar.css":$(document.createElement("style")).appendTo(document.head).html(o);break;case"cropbar-win32.css":$(document.createElement("style")).appendTo(document.head).html(r);break;case"toast.css":$(document.createElement("style")).appendTo(document.head).html(s);break;case"toast-win32.css":$(document.createElement("style")).appendTo(document.head).html(a);break;case"color-picker.css":$(document.createElement("style")).appendTo(document.head).html(l);break;case"pdfeditor.css":$(document.createElement("style")).appendTo(document.head).html(c);break;case"pdfeditor-win32.css":$(document.createElement("style")).appendTo(document.head).html(h)}},e}),define("env/Settings",[],function(){return{MANIFEST_KEY:"SkitchJS",MANIFEST_CREATOR:"skitchjs",VERSION:"1.0.1.250",USER_AGENT:"Skitch",APP_DATA_PATH:".skitch",STAMP_DEFAULT_WIDTH:100,STAMP_DEFAULT_HEIGHT:100,IMAGE_LOADER_PROXY_URL_PREFIX:"",SURFACE_BUFFER_EXPORT_DELAY_MS:800,LOG_FILE_INTERVAL_SECONDS:1,SESSION_TRACKING_INTERVAL_MINUTES:15,MARKETING_URL:"http://evernote.com/",TERMS_OF_SERVICE_URL:"http://evernote.com/tos/",PRIVACY_POLICY_URL:"http://evernote.com/privacy/",PRIVACY_POLICY_URL_JP:"http://evernote.com/intl/jp/legal/privacy.php",SUPPORT_URL:"http://evernote.com/contact/support/",DISCUSSION_FORUM_URL:"http://discussion.evernote.com/forum/122-skitch-for-metro/",CHECKOUT_LOGIN_URL:"https://www.evernote.com/Login.action?targetUrl=%2FCheckout.action&layout=win&offer=accountView",CHECKOUT_URL:"https://www.evernote.com/Checkout.action?layout=win&offer=accountView",RELATIVE_CHECKOUT_URL:"/Checkout.action?layout=win&offer=accountView",AUTH_TOKEN_URL:"https://www.evernote.com/SetAuthToken.action",SKITCH_DESKTOP_URL:"http://evernote.com/skitch",ENABLE_CANVAS_BUTTON_TEXT:!0,ENABLE_KEY_HANDLERS:!0,CROP_MARGIN:60,IS_EMBEDDED:!1,ENABLE_ANALYTICS:!0,SUPPORTS_TWO_FACTOR:!0,ANALYTICS_ACCOUNT:"UA-285778-57",SKITCH_NOTEBOOK_NAME:"Skitch",ACCEPTED_LANGUAGES:"*/*",DEFAULT_DB_NAME:"skitchdb",NOTE_TITLES:{blank:"",photo:"",camera:"",map:"",clipboard:"",pdf:"","default":""},FORCE_VERSION_UPDATE_PROMPT:!1,MIN_CROP_SIZE:1,JPEG_QUALITY:.95,UPLOAD_WARNING_LIMIT:.95,UPLOAD_MAXIMUM_LIMIT:1,ARROW_STROKE_WIDTH:2,ARROW_STROKE_COLOR:"rgba(0, 0, 0, 0.1)",MODAL_OVERLAY_COLOR:"rgba(0, 0, 0, 0.4)",BACKGROUND_SHADOW_COLOR:"rgba(0, 0, 0, 0.2)",DEFAULT_SURFACE_BACKGROUND_COLOR:"#e0dede",BACKGROUND_SHADOW_SIZE:10,ENABLE_CANVAS_APPBAR:!0,ENABLE_CANVAS_BACK_BUTTON:!0,EDAM_APPLICATION_NAME:"Evernote Skitch Touch",EDAM_CONTENT_CLASS:"evernote.skitch",EDAM_CONSUMER_KEY:"en-win-skitch-new",ENABLE_CANVAS_DISCARD_BUTTON:!0,EDAM_CONTENT:'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">\n<en-note>\n<en-media type="${mime}" hash="${contentHash}"/>\n</en-note>',MAX_RECTANGLE_CORNER_RADIUS:30,EVERNOTE_HOST:"www.evernote.com",EVERNOTE_STAGING_HOST:"stage.evernote.com",USE_EVERNOTE_STAGING_HOST:!1,EVERNOTE_INTL_BOOTSTRAP_HOST:"www.evernote.com",EVERNOTE_CHINA_BOOTSTRAP_HOST:"app.yinxiang.com",SKITCH_MARGIN:25,SKITCH_MIN_MARGIN:20,STORE_URI:"undefined"==typeof Windows?"":"ms-windows-store:PDP?PFN="+Windows.ApplicationModel.Package.current.id.familyName,MAX_TEXT_LENGTH:1/0,TEXT_LINE_HEIGHT_PADDING:8,CANVAS_SCREEN_OPEN_DELAY:300,MAX_POINTERS_FOR_GESTURE:2,SELECTION_STROKE_WIDTH:5,HIGHLIGHT_ALPHA:.4,HANDLE_RADIUS:6,HANDLE_HIT_RADIUS:6,HANDLE_STROKE_WIDTH:2,HANDLE_STROKE_COLOR:"rgba(0, 0, 0, 1)",DEFAULT_PREFIX:"skitch-id",SAVE_DELAY:5e3,PAN_STEP:10,PAN_STEP_LARGE:100,PAN_STEP_SMALL:1,ZOOM_STEP:.1,ZOOM_STEP_LARGE:.5,ZOOM_STEP_SMALL:.01,ZOOM_MIN:.25,ZOOM_MAX:4,SHADOW_COLOR:"rgba(0, 0, 0, 0.4)",ENABLE_INFINITE_CANVAS:!1,INFINITE_CANVAS_PADDING:80,INFINITE_CANVAS_GUTTER:16,THUMBNAIL_WIDTH:470,THUMBNAIL_HEIGHT:470,MIN_INPUT_FILE_SIZE:1,MAX_INPUT_FILE_SIZE:26214400,DEFAULT_FILE_TYPE:"jpg",EXPORT_FILE_TYPES_ALLOWED:[".png",".jpg"],FILE_TYPES_ALLOWED:[".png",".jpg",".jpeg",".jpe",".gif",".bmp",".pdf"],COLORS:{yellow:"rgba(255, 247, 0, 1)",orange:"rgba(255, 128, 23, 1)",blue:"rgba(25, 119, 255, 1)",white:"rgba(255, 255, 255, 1)",green:"rgba(0, 232, 0, 1)",pink:"rgba(252, 12, 89, 1)",red:"rgba(255, 0, 0, 1)",black:"rgba(0, 0, 0, 1)",transparent:"rgba(0, 0, 0, 0)"},TEXT_STROKE_COLORS:{yellow:"#000000",orange:"#000000",blue:"#ffffff",white:"#000000",green:"#000000",pink:"#ffffff",red:"#ffffff",black:"#ffffff"},STROKE_SIZES:{"size-1":2,"size-2":4,"size-3":8,"size-4":16,"size-5":32},FONT_SIZES:{"size-1":8,"size-2":16,"size-3":24,"size-4":32,"size-5":40},ARROW_SIZES:{"size-1":16,"size-2":24,"size-3":32,"size-4":48,"size-5":78},USE_HAMMER:!0,EVENTS:{pointerdown:"pointerdown",pointerup:"pointerup",pointermove:"pointermove",pointerover:"pointerover",pointerout:"pointerout",doubleclick:"dblclick",contextmenu:"contextmenu",tap:"tap",doubletap:"doubletap",hold:"hold",dragstart:"dragstart",drag:"drag",dragend:"dragend",gesturestart:"transformstart",gesturechange:"transform",gestureend:"transformend",inertiastart:"MSInertiaStart",keydown:"keydown",keyup:"keyup",keypress:"keypress",mousewheel:"mousewheel",resize:"resize",paste:"paste",dragover:"dragover",drop:"drop"}}}),define("util/Obj",["require","env/Settings"],function(t){function e(){}t("env/Settings");var n=Array.prototype.slice.call.bind(Array.prototype.slice);return e.merge=function(){return $.extend.apply($,n(arguments,0))},e.functions=function(t){var e={};for(var n in t)"function"==typeof t[n]&&(e[n]=t[n]);return e},e.having=function(t,e){function n(t,e){if(null==t||"object"!=typeof e)return!1;var n=!0,i=Object.keys(e);return i.forEach(function(i){n=n&&t[i]===e[i]}),n}var i=[];return Array.isArray(t)?(t.forEach(function(t){n(t,e)&&i.push(t)}),i):n(t,e)?t:null},e.copyProperties=function(t,e,n,i){n=n||[],i=i||{includeNull:!1},Array.isArray(n)||(n=[n]),n.forEach(function(n){(null!=t[n]||i.includeNull)&&(e[n]=t[n])})},e.removeFunctions=function(t){var n={};if(!t||Array.isArray(t)||t&&t.buffer instanceof ArrayBuffer||"object"!=typeof t)return t;for(var i in t)try{t[i]&&"object"==typeof t[i]?n[i]=Array.isArray(t[i])?t[i].map(function(t){return e.removeFunctions(t)}):e.removeFunctions(t[i]):"function"!=typeof t[i]&&(n[i]=t[i])}catch(o){}return n},e.defaults=function(t){var e=t||{},n=Array.prototype.slice.call(arguments,1);return n.forEach(function(t){null!=t&&Object.keys(t).forEach(function(n){null==e[n]&&(e[n]=t[n])})}),e},e.simple=function(t){return JSON.parse(JSON.stringify(t))},e}),define("util/Func",[],function(){function t(){}var e=Array.prototype.slice;return t.after=function(t,n){var i=function(){var i=e.call(arguments,1),o=t.apply(null,i);return i=[o].concat(e.call(arguments,0)),n.apply(this,i)};return i},t.drain=function(t){for(;t.length>0;)t.shift().apply(null,e.call(arguments,1))},t.getFunctionName=function(t){var e=Function.prototype.toString.call(t),n=e.match(/function\s+([^\(\s]+)\(/);return n&&n.length>1?n[1]:null},t}),define("mixin/Publisher",["require"],function(){function t(){this.events=[],this.subscriptions={}}function e(t){return Array.prototype.map.call(t,function(t){return t.toLowerCase()})}return t.prototype.registerEvents=function(){var t=e(arguments);this.events||(this.events=[]),this.events.push.apply(this.events,t)},t.prototype.fire=function(t){var e,n,i=t.toLowerCase(),o=this.subscriptions[i]&&this.subscriptions[i].slice(0),r=Array.prototype.slice.call(arguments,1);if(!o)return this;for(e=0;e<o.length;e++)n=this.handleSubscription(o[e],r);return this},t.prototype.handleSubscription=function(t,e){var n=Date.now(),i=t.invokeTime,o=t.defer,r=t.buffer,s=t.throttle,a=this.invokeSubscription.bind(this,t,e);if(r>0)clearTimeout(t.invokeId),t.invokeId=setTimeout(a,r);else if(o>0)t.invokeId=setTimeout(a,o);else if(!i||n-i>s)return a()},t.prototype.invokeSubscription=function(t,e){var n;return n=t.handler.apply(t.scope,e),t.invokeId=null,t.invokeCount++,t.invokeTime=(new Date).getTime(),t.single===!0&&this.off(t.name,t),n},t.prototype.on=function(t,e,n,i){var o=t.toLowerCase();return o&&e&&this.events.indexOf(o)>=0&&(this.subscriptions[o]=this.subscriptions[o]||[],this.subscriptions[o].push({name:o,handler:e.handler||e,scope:n||e.scope||this,single:i&&i.single||e.single||!1,defer:i&&i.defer||e.defer||0,buffer:i&&i.buffer||e.buffer||0,throttle:i&&i.throttle||e.throttle||0,invokeId:null,invokeTime:null,invokeCount:0,fireTime:null})),this},t.prototype.off=function(t,e,n){var i,o,r=t.toLowerCase();return r&&e&&(i=this.subscriptions[r],o=e.handler||e,$(i).each(function(t){return o===i[t].handler&&(void 0===n||n&&n==i[t].scope)?(clearTimeout(i[t].invokeId),i.splice(t,1),!1):void 0})),this},t.prototype.once=function(t,e,n,i){i=$.extend(i,{single:!0}),this.on(t,e,n,i)},t}),define("util/Class",["require","util/Obj","util/Func","mixin/Publisher"],function(t){function e(){}function n(){var t;return t=this.$id&&this.$class?this.$class+" ["+this.$id+"]":Object.prototype.toString.call(this)}var i=t("util/Obj"),o=t("util/Func"),r=t("mixin/Publisher"),s=0,a=Array.prototype.slice.call.bind(Array.prototype.slice);return e.define=function(t,e,l){var c,h,u;return e=e||Object,l=[r].concat(l||[]),h=o.getFunctionName(t),u=l.concat(t),c=function(n){var r=this instanceof c?this:new c,u=a(arguments,0);r.$id=r.$id||++s,r.$class=r.$class||h,r.$mixins=r.$mixins||[],e.apply(r,u),l.forEach(function(t){var e=o.getFunctionName(t);r.$mixins.some(function(t){return t===e})||(t.apply(r,u),r.$mixins.push(e))});var p=t.apply(r,u);return"object"==typeof p?r=p:i.merge(!0,r,n),r.constructor===c&&r.initialize(),r},c.Original=t,t.prototype.initialize||(t.prototype.initialize=e===Object?function(){}:e.prototype.initialize),i.merge(c,t),c.prototype=Object.create(e.prototype),u.forEach(function(t){i.merge(c.prototype,t.prototype),Object.keys(t.prototype).forEach(function(e){var n=Object.getOwnPropertyDescriptor(t.prototype,e);(null!=n.get||null!=n.set)&&Object.defineProperty(c.prototype,e,n)})}),c.prototype.parent=e.prototype,c.prototype.constructor=c,c.prototype.$class=h,c.prototype.toString=n,c.$class=h,c.parent=e,t.parent=e,c},e.createClassByName=function(t,e){var n,i=t.split("."),o=window;for(n=0;n<i.length;n++)o=o[i[n]];return new o(e)},e}),define("util/Geometry",["require"],function(){function t(){}return t.lineIntersectsLine=function(e,n){var i,o=t.lineEquation(e),r=t.lineEquation(n),s=o.a,a=o.b,l=o.c,c=r.a,h=r.b,u=r.c,p=s*h-c*a,d=!1;return 0!=p&&(i={x:(h*l-a*u)/p,y:(s*u-c*l)/p},d=t.pointIntersectsLine(i,e)&&t.pointIntersectsLine(i,n)),d},t.lineEquation=function(t){var e={a:t.y2-t.y1,b:t.x1-t.x2,c:null};return e.c=e.a*t.x1+e.b*t.y1,e},t.pointIntersectsLine=function(t,e){var n=Math.min(e.x1,e.x2)<=t.x&&t.x<=Math.max(e.x1,e.x2)&&Math.min(e.y1,e.y2)<=t.y&&t.y<=Math.max(e.y1,e.y2);return n},t.rotateLockPoint=function(t,e){var n=Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2)),i=Math.atan2(e.x-t.x,e.y-t.y),o=-Math.round(i/(Math.PI/4))*(Math.PI/4)+Math.PI/2,r=e.clone();return r.x=t.x+Math.cos(o)*n,r.y=t.y+Math.sin(o)*n,r},t}),define("util/Matrix",[],function(){function t(){}function e(t){if(Array.isArray(t)&&!Array.isArray(t[0]))for(var e=0;e<t.length;e++)t[e]=[t[e]];return t}return t.multiply=function(t,n){var i,o,r,s,a,l,c,h=[];if(!n)return t;for(t=e(t),n=e(n),s=t.length,a=n.length,l=n[0].length,i=0;s>i;i++)for(h[i]=[],r=0;l>r;r++){for(c=0,o=0;a>o;o++)c+=t[i][o]*n[o][r];h[i][r]=c}return h},t.determinant=function(t){var e=t[0],n=t[1],i=t[2];return e[0]*(n[1]*i[2]-i[1]*n[2])+e[1]*(i[0]*n[2]-n[0]*i[2])+e[2]*(n[0]*i[1]-i[0]*n[1])},t.adjoint=function(t){var e=t[0],n=t[1],i=t[2],o=e[0],r=e[1],s=e[2],a=n[0],l=n[1],c=n[2],h=i[0],u=i[1],p=i[2];return[[l*p-u*c,u*s-p*r,r*c-l*s],[h*c-p*a,o*p-s*h,s*a-c*o],[a*u-l*h,r*h-o*u,o*l-r*a]]},t.inverse=function(e){var n=t.determinant(e),i=t.adjoint(e);return[[i[0][0]/n,i[0][1]/n,i[0][2]/n],[i[1][0]/n,i[1][1]/n,i[1][2]/n],[i[2][0]/n,i[2][1]/n,i[2][2]/n]]},t}),define("util/Transformer",["require","util/Matrix"],function(t){function e(){}function n(t,e){for(var n=0;6>n;n++)e[n]=t[n]}function i(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}function o(t){return[t[0][0],t[1][0],t[0][1],t[1][1],t[0][2],t[1][2]]}function r(t){return[[t[0],t[2],t[4]],[t[1],t[3],t[5]],[0,0,1]]}var s=t("util/Matrix");return e.toArray=function(t){return[t.a,t.b,t.c,t.d,t.e,t.f]},e.identity=function(){return[1,0,0,1,0,0]},e.transformPoint=function(t,e){return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}},e.inverseTransformPoint=function(t,n){var i=e.inverse(t);return e.transformPoint(i,n)},e.transformBy=function(t,e){return i(t,e)},e.translateBy=function(t,i,o){var r=[1,0,0,1,i,o];return n(e.transformBy(t,r),t),e},e.scaleBy=function(t,i,o,r,s){var a=[i,0,0,o,0,0],l=r||0,c=s||0;return e.translateBy(t,l,c),n(e.transformBy(t,a),t),e.translateBy(t,-l,-c),e},e.rotateBy=function(t,i,o,r){var s=Math.cos(i),a=Math.sin(i),l=[s,-a,a,s,0,0],c=o||0,h=r||0;return e.translateBy(t,c,h),n(e.transformBy(t,l),t),e.translateBy(t,-c,-h),e},e.inverse=function(t){var e=s.inverse(r(t));return o(e)},e.multiply=function(t,e){return i(t,e)},e}),define("util/Box",["require","util/Geometry","util/Transformer","env/Settings"],function(t){function e(){throw new Error("util/Box is not a constructor function. Use graphics/Box")}var n=t("util/Geometry"),i=t("util/Transformer");return t("env/Settings"),e.containsPoints=function(t,e,n){var i,o,r,s=0;for(Array.isArray(e)||(e=[e]),n=n||e.length,i=0;n>s&&i<e.length;i++)o=e[i].x,r=e[i].y,o>t.left&&o<t.left+t.width&&r>t.top&&r<t.top+t.height&&s++;return s>=n},e.fromPoint=function(t,e){return e=e||0,{left:t.x-e,top:t.y-e,width:2*e,height:2*e}},e.fromPoints=function(t){if(t&&!(t.length<2)){var e=0,n=0,i=0,o=0;return t.forEach(function(t){e=Math.min(e,t.x),n=Math.min(n,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y)}),{left:e,top:n,width:i-e,height:o-n}}},e.getArea=function(t){var e=t.width||0,n=t.height||0;return e*n},e.transform=function(t,e){var n={x:t.left,y:t.top},o={x:t.left+t.width,y:t.top+t.height};return n=i.transformPoint(e,n),t.left=n.x,t.top=n.y,o=i.transformPoint(e,o),t.width=o.x-n.x,t.height=o.y-n.y,t},e.intersectsLine=function(t,i){var o,r=e.sides(t);for(o=0;o<r.length;o++)if(n.lineIntersectsLine(r[o],i))return!0;return!1},e.intersectsBox=function(t,e){return!(e.left>t.left+t.width||e.left+e.width<t.left||e.top>t.top+t.height||e.top+e.height<t.top)},e.intersection=function(t,n){var i={left:0,top:0,width:0,height:0};return e.intersectsBox(t,n)&&(i.left=Math.max(t.left,n.left),i.top=Math.max(t.top,n.top),i.width=Math.min(t.left-i.left+t.width,n.left-i.left+n.width),i.height=Math.min(t.top-i.top+t.height,n.top-i.top+n.height)),i},e.lineIntersection=function(t,n){var i,o,r,s,a,l=null,c={x:n.x1,y:n.y1},h={x:n.x2,y:n.y2};if(!e.containsPoints(t,c)){if(!e.containsPoints(t,h))return l;i=h,h=c,c=i}return o=c.x<h.x?Math.min:Math.max,r=c.y<h.y?Math.min:Math.max,s=c.x<h.x?t.left+t.width:t.left,a=c.y<h.y?t.top+t.height:t.top,l={x1:c.x,y1:c.y,x2:o(h.x,s),y2:r(h.y,a)}},e.containsBox=function(t,n){var i=e.vertices(n);return e.containsPoints(t,i)?!0:!1},e.sides=function(t){var e=[{x1:t.left,y1:t.top,x2:t.left+t.width,y2:t.top},{x1:t.left+t.width,y1:t.top,x2:t.left+t.width,y2:t.top+t.height},{x1:t.left+t.width,y1:t.top+t.height,x2:t.left,y2:t.top+t.height},{x1:t.left,y1:t.top+t.height,x2:t.left,y2:t.top}];return e},e.vertices=function(t){var e=[{x:t.left,y:t.top},{x:t.left+t.width,y:t.top},{x:t.left+t.width,y:t.top+t.height},{x:t.left,y:t.top+t.height}];return e},e.center=function(t,e){return{left:Math.floor((t.width-e.width)/2),top:Math.floor((t.height-e.height)/2),width:e.width,height:e.height}},e.union=function(){var t,e,n,i,o,r={left:0,top:0,width:0,height:0},s=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments,0);if(0===s.length)return r;r=s[0];for(var a=1;a<s.length;a++)t=s[a],e=Math.min(r.left,t.left),n=Math.min(r.top,t.top),i=Math.max(r.left+r.width,t.left+t.width),o=Math.max(r.top+r.height,t.top+t.height),r={left:e,top:n,width:i-e,height:o-n};return r},e.fit=function(t,e,n,i){var o,r,s,a;return n=n||i,a={width:Math.max(n,(t.width-e.width)/2),height:Math.max(n,(t.height-e.height)/2)},o=e.width,r=e.height,o>t.width-2*a.width&&(s=(t.width-2*a.width)/o,o*=s,r*=s),r>t.height-2*a.height&&(s=(t.height-2*a.height)/r,o*=s,r*=s),{top:e.top,left:e.left,width:Math.ceil(o),height:Math.ceil(r)}},e}),define("mixin/Transformable",["require","env/Settings","util/Transformer"],function(t){function e(){this.transformation=o.identity(),this.translation={x:0,y:0},this.scaling={x:1,y:1},this.rotation=0,this.registerEvents("transformed")}function n(t){return{x:Math.sqrt(t[0]*t[0]+t[1]*t[1]),y:Math.sqrt(t[2]*t[2]+t[3]*t[3])}}function i(t){return{x:t[4],y:t[5]}}t("env/Settings");var o=t("util/Transformer");return e.prototype={setTransformation:function(t){return t?(this.transformation=t.concat(),this.translation=i(this.transformation),this.scaling=n(this.transformation),this.rotation=0,this.fire("transformed",this.transformation),this):void 0},resetTransformation:function(){return this.setTransformation(o.identity()),this.translation.x=0,this.translation.y=0,this.scaling.x=1,this.scaling.y=1,this.rotation=0,this.fire("transformed",this.transformation),this},getInverseTransformation:function(){return o.inverse(this.transformation)},transformPoint:function(t){return o.transformPoint(this.transformation,t)},inverseTransformPoint:function(t){return o.inverseTransformPoint(this.transformation,t)},transformBy:function(t){return this.transformation=o.transformBy(this.transformation,t),this.fire("transformed",this.transformation),this},translateBy:function(t,e){return this.translation.x+=t,this.translation.y+=e,o.translateBy(this.transformation,t,e),this.fire("transformed",this.transformation),this},scaleBy:function(t,e,n,i){return this.scaling.x*=t,this.scaling.y*=e,o.scaleBy(this.transformation,t,e,n,i),this.fire("transformed",this.transformation),this},rotateBy:function(t){return this.rotation+=t,o.rotateBy(this.transformation,t),this.fire("transformed",this.transformation),this}},e}),define("log/Layout",["require","util/Class"],function(t){function e(){this.patternLayout=new log4javascript.PatternLayout("%d %p [%c] ")}var n=t("util/Class");return e.prototype={initialize:function(){},format:function(t){var e=this.patternLayout.format(t);return t.messages.forEach(function(t){var n;if(t instanceof Error&&(t={message:t.message,stack:t.stack&&t.stack.split("\n")}),"object"==typeof t&&null!==t)try{n=JSON.stringify(t,null,"  ")}catch(i){n="Unable to JSON stringify message: "+(t.toString&&t.toString()||Object.prototype.toString.call(t))}else n=t;e+=n}),e},toString:function(){return"Default Layout with Object to JSON conversion"}},e=n.define(e,log4javascript.Layout)}),define("log/Appender",["require","util/Class","log/Layout"],function(t){function e(){this.layout=new i("%d %p [%c] %m")}var n=t("util/Class"),i=t("log/Layout");return e.prototype={initialize:function(){},append:function(){},toString:function(){return"Appender"}},e=n.define(e,log4javascript.Appender)}),define("log/ConsoleAppender",["require","util/Class","log/Appender"],function(t){function e(){this.console=console,null==this.console&&(this.append=function(){})}var n=t("util/Class"),i=t("log/Appender"),o=log4javascript.Level;return e.prototype={initialize:function(){},append:function(t){var e=this.layout.format(t);t.level==o.ERROR&&this.console.error?this.console.error(e):t.level==o.DEBUG&&this.console.debug?this.console.debug(e):this.console.log(e)},toString:function(){return"ConsoleAppender"}},e=n.define(e,i)}),define("log/FileAppender",["require","util/Class","log/Appender"],function(t){function e(){}var n,i=t("util/Class"),o=t("log/Appender");return e.prototype={initialize:function(){},initAsync:function(){var e=t;return n=e("async/Promise"),(new n).resolve()},append:function(){},flushAsync:function(){return(new n).resolve()},toString:function(){return"FileAppender"}},e=i.define(e,o)}),define("log/Logger",["require","util/Class","log/ConsoleAppender","log/FileAppender"],function(t){function e(){throw Error("Use Logger.instance() instead of new Logger() to obtain a logger")}var n=t("util/Class"),i=t("log/ConsoleAppender"),o=t("log/FileAppender"),r=!1;return e.Level=log4javascript.Level,e.instance=function(t){var e=log4javascript.getLogger(t);return e},e.root=function(){return log4javascript.getRootLogger()},e.reset=function(){log4javascript.getRootLogger().setLevel(e.Level.DEBUG),e.removeAllAppenders(log4javascript.getRootLogger(),!0)},e.removeAllAppenders=function(t,n){n&&t.children.forEach(function(t){e.removeAllAppenders(t,n)}),t.removeAllAppenders()},e.initAsync=function(){var n=t,i=n("async/Promise"),s=new i,a=[];if(r)return s.resolve();r=!0,log4javascript.Logger=e,log4javascript.Logger.prototype.flushAsync=function(){var t=[];return this.getEffectiveAppenders().forEach(function(e){e.flushAsync&&t.push(e.flushAsync())}),i.join(t)};var l=new Date,c=l.getFullYear();l.getMonth()<9&&(c+="0"),c+=l.getMonth()+1;var h=new o({filename:"log-"+c+".txt"});a.push(h.initAsync());var u=new o({filename:"error-"+c+".txt"});return u.setThreshold(e.Level.WARN),a.push(u.initAsync()),i.join(a).done(function(){e.root().addAppender(h),e.root().addAppender(u),s.resolve()}),s},e.root().addAppender(new i),e=n.define(e)}),define("async/Promise",["require","util/Func","util/Class","log/Logger"],function(t){function e(){this.donequeue=[],this.failqueue=[],this.progressqueue=[],this.name=null,this.data=null,this.state=null;try{throw Error("Ignore this error - capturing call stack")}catch(t){this.stack=t.stack||"",this.stack=this.stack.split("\n")}}var n=t("util/Func"),i=t("util/Class"),o=t("log/Logger").instance("async.Promise");return e.toggleAbort=function(t,n){"function"==typeof t&&(n=t,t=!0),e.abortRequested=!!t,e.aborting=n},e.abortRequested=!1,e.aborting=null,e.ondone=function(t){return function(){t.resolve.apply(t,arguments)}},e.onfail=function(t){return function(){t.reject.apply(t,arguments)}},e.join=e.all=function(t){var n,i,o=new e,r=t.length,s=[];if(!t||0==t.length)return(new e).resolve(s);for(n=0;n<t.length;n++)i=t[n],i.done(function(){r--;var t=Array.prototype.slice.call(arguments,0);0==t.length?t=void 0:1==t.length&&(t=t[0]),s.push(t),0==r&&o.resolve(s)}).fail(function(){o.reject.apply(o,arguments)});return o},e.wrap=function(t,n,i,o){var r=new e;return null!=t&&t.then&&t.done&&t.fail?r=t:null!=t&&t.then?t.then(r.resolve.bind(r),r.reject.bind(r),r.progress.bind(r)):r.resolve(t),null!=n&&r.done(n),null!=i&&r.fail(i),null!=o&&r.incremental(o),r},e.prototype={initialize:function(){this.name=this.name||"anonymous",this.state=null==this.data?"unfulfilled":"fulfilled"},then:function(t,n,i){var r=new e({name:"Promise.then wrapper for "+this.name});return t&&this.done(function(){var e=null;try{e=t.apply(null,arguments)}catch(n){return o.error(n),r.reject.call(r,n),void 0}e&&e.done&&e.fail&&e.incremental?(e.done(function(){r.resolve.apply(r,arguments)}),e.fail(function(){r.reject.apply(r,arguments)}),e.incremental(function(){r.progress.apply(r,arguments)})):r.resolve(e)}),this.fail(function(){n&&n.apply(null,arguments),r.reject.apply(r,arguments)}),i&&this.progressqueue.push(i),r},done:function(t){return this.donequeue.push(t),"fulfilled"==this.state&&this.resolve(),this},incremental:function(t){return this.progressqueue.push(t),this},fail:function(t){return this.failqueue.push(t),"failed"==this.state&&this.reject("Promise is already in failed state, calling fail callback"),this},forward:function(t){return this.then(function(){return e.wrap(t)})},progress:function(t){this.progressqueue.forEach(function(e){e(t)})},resolve:function(){if(e.abortRequested)return e.aborting&&e.aborting(),e.aborting=null,this.reject({aborted:!0}),this;var t;return"unfulfilled"==this.state&&(this.state="fulfilled",this.data=Array.prototype.slice.call(arguments,0)),"fulfilled"!=this.state?this:(Array.isArray(this.data)?(t=this.data.slice(0),t.unshift(this.donequeue),n.drain.apply(null,t)):n.drain(this.donequeue,this.data),this)},reject:function(){if(o.warn.apply(o,arguments),o.warn("Existing stack history:\n"+this.stack.slice(4).join("\n")),"unfulfilled"==this.state&&(this.state="failed",this.data=Array.prototype.slice.call(arguments,0)),"failed"!=this.state)return o.warn("Cannot reject a promise that has already been resolved.  Fail callback will not be called."),this;var t=this.data.slice(0);return t.unshift(this.failqueue),n.drain.apply(null,t),this},link:function(t){return t.done(this.resolve.bind(this)),t.fail(this.reject.bind(this)),t.incremental(this.progress.bind(this)),this},isResolved:function(){return this.isFulfilled()||this.isRejected()},isFulfilled:function(){return"fulfilled"==this.state},isRejected:function(){return"failed"==this.state}},e=i.define(e)}),define("util/Binary",["require","async/Promise","log/Logger"],function(t){function e(){}var n=t("async/Promise"),i=t("log/Logger").instance("util.Binary");e.fromHex=function(t){var e,n=t.length/2,i=new Uint8Array(n);for(e=0;n>e;e++)i[e]=parseInt(t.substr(2*e,2),16);return i},e.toHex=function(t,e,n){var o,r,s,a="";try{for(e=e||0,n=n||t.length,r=e+n,o=e;r>o;o++)s=t[o].toString(16),1==s.length&&(s="0"+s),a+=s}catch(l){i.error(l)}return a},e.fromText=function(t){var e,n=t.length,i=new Uint8Array(n);for(e=0;n>e;e++)i[e]=t.charCodeAt(e);return i},e.fromTextAsync=function(t){var e,i,o=new n;try{e=new Blob([t]),i=new FileReader,i.onload=function(t){o.resolve(new Uint8Array(t.target.result))},i.onerror=o.reject.bind(o),i.readAsArrayBuffer(e)}catch(r){o.reject(r)}return o},e.slice=function(t,e,n){return e||"number"==typeof e?"number"==typeof n&&n>=0?t.subarray(e,e+n):t.subarray(e):t},e.toText=function(t,n,i){var o="",r=Array.prototype.slice.call(e.slice(t,n,i),0),s=[];return r.forEach(function(t){s.push(String.fromCharCode(t))}),o=s.join("")},e.toTextAsync=function(t,i,o){var r=new n;if("undefined"==typeof FileReader){var s=e.toText(t,i,o);r.resolve(s)}else try{var a=new FileReader;i&&(o=o||t.length,t=t.subarray(i,o));var l=new Blob([t]);a.onload=function(t){r.resolve(t.target.result)},a.onerror=r.reject.bind(r),a.readAsText(l)}catch(c){r.reject(c)}return r},e.msFromBase64Async=function(t){var e=new n,i=Windows.Security.Cryptography.CryptographicBuffer.decodeFromBase64String(t);return e.resolve(Windows.Security.Cryptography.CryptographicBuffer.copyToByteArray(i)),e},e.msToBase64Async=function(t){var e=new n,i=Windows.Security.Cryptography.CryptographicBuffer.createFromByteArray(t);return e.resolve(Windows.Security.Cryptography.CryptographicBuffer.encodeToBase64String(i)),e},e.w3FromBase64Async=function(t){var i=new n;return i.resolve(e.fromText(atob(t))),i},e.w3ToBase64Async=function(t){var i=new n;if("undefined"!=typeof FileReader&&e.useBlobConstructor)try{var o=new FileReader,r=new Blob([t]);o.onload=function(t){var e=t&&t.target&&t.target.result&&t.target.result.split("base64,").pop();i.resolve(e)},o.onerror=i.reject.bind(i),o.readAsDataURL(r)}catch(s){i.reject(s)}else{var a=e.toText(t),l=btoa(a);i.resolve(l)}return i},e.toObjectURL=function(t,e,n){var o,r,s;try{t instanceof Blob?o=t:e?(n=n||t.length,s=t.subarray(e,n),o=new Blob([s])):o=new Blob([t]),r=URL.createObjectURL(o)}catch(a){i.error(a)}return r},e.toDataURL=function(t,n){var i,o;return o=e.toText(t),i="data:"+n+";base64,"+btoa(o)},e.toUint32=function(t,e,n){return"number"==typeof e&&"number"==typeof n&&new DataView(t.buffer,t.byteOffset,t.byteLength).getUint32(e,!1)},e.loadAsync=function(t){var e=new n,i=new XMLHttpRequest;return i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){var t=i.response,n=new Uint8Array(t);e.resolve(n)},i.onerror=function(t){e.reject(t)},i.send(null),e},e.concat=function(){var t,e=0,n=0,i=Array.prototype.slice.call(arguments,0),e=i.reduce(function(t,e){return t+e.byteLength},0);return t=new Uint8Array(e),i.forEach(function(e){t.set(e,n),n+=e.byteLength}),t},e.fromBase64Async="undefined"!=typeof window&&window.Windows?e.msFromBase64Async:e.w3FromBase64Async,e.toBase64Async="undefined"!=typeof window&&window.Windows?e.msToBase64Async:e.w3ToBase64Async,e.useBlobConstructor=!1;try{new Blob,e.useBlobConstructor=!0}catch(o){}return e}),define("util/Mime",["require"],function(){function t(){}var e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",bmp:"image/bmp"};return t.extToMime=function(t){return t?e[t&&t.toLowerCase()]:void 0},t.mimeToExt=function(t){if(t)for(var n in e)if(e[n].toLowerCase()===t.toLowerCase())return n},t}),define("util/Num",["require"],function(){function t(){}var e=3;return t.fixed=function(t,n){return n=n||e,parseFloat(parseFloat(t).toFixed(n))},t.zeroOrOne=function(t,e){return null==t&&(t=e),t?1:0},t.getNearestNumber=function(t,e){for(var n=Number.MAX_VALUE,i=null,o=0;o<t.length;o++){var r=Math.abs(t[o]-e);
n>=r&&(n=r,i=t[o])}return i},t}),define("graphics/Space",["require","util/Class","mixin/Transformable","util/Transformer"],function(t){function e(){this.name=null,this.transformable=null,this.transformation=o.identity()}var n=t("util/Class"),i=t("mixin/Transformable"),o=t("util/Transformer");return e.prototype={initialize:function(){this.transformable&&this.transformable.on("transformed",this.onTransformed,this)},onTransformed:function(t){this.transformation=t}},e=n.define(e,Object,[i])}),define("graphics/Point",["require","util/Class","util/Transformer","graphics/Space","util/Obj"],function(t){function e(t,n,i){var r=this instanceof e?this:new e,s=t&&"object"==typeof t?t:{x:t,y:n,space:i};return s.space&&Array.isArray(s.space)&&(s.space=new o({name:"custom",transformation:s.space})),r.x=s.x,r.y=s.y,r.space=s.space,r}var n=t("util/Class"),i=t("util/Transformer"),o=t("graphics/Space");return t("util/Obj"),e.spaces={},e.prototype.relativeTo=function(t){var n=e.spaces,r=n[this.space]?n[this.space]:this.space,s=n[t]?n[t]:new o({name:"custom",transformation:t}),a=i.multiply(i.inverse(s.transformation),r?r.transformation:i.identity()),l=i.transformPoint(a,this),c=e(l.x,l.y,t);return c},e.prototype.distance=function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))},e.prototype.print=function(){return this.x+", "+this.y+" "+this.space},e.prototype.clone=function(){return new e(this.x,this.y,this.space)},e=n.define(e)}),define("graphics/CanvasGraphics",["require","util/Class","util/Num","mixin/Transformable","util/Transformer","graphics/Point","log/Logger"],function(t){function e(){this.context=null,this.snapshots=[],this.fontcss=null}function n(t){var e=window.devicePixelRatio||1,n=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||1;return e/n}var i=t("util/Class");t("util/Num");var o=t("mixin/Transformable"),r=t("util/Transformer"),s=t("graphics/Point"),a=t("log/Logger").instance("graphics.CanvasGraphics"),l=document.createElement("canvas").getContext("2d");return e.pixelRatio=n(l),e.identity=r.identity(),e.create=function(t,n){var i=new e;return i.setWidth(t),i.setHeight(n),i},e.prototype={initialize:function(){this.context=document.createElement("canvas").getContext("2d"),this.resetTransformation(),this.fontcss=this.context.font},getWidth:function(){return parseInt(this.context.canvas.style.width)},getHeight:function(){return parseInt(this.context.canvas.style.height)},setWidth:function(t){t=t||0;var n=this.context.canvas;n.width=t*e.pixelRatio,n.style.width=t+"px",this.resetTransformation()},setHeight:function(t){t=t||0;var n=this.context.canvas;n.height=t*e.pixelRatio,n.style.height=t+"px",this.resetTransformation()},snapshot:function(){return{transformation:this.transformation.concat(),translation:{x:this.translation.x,y:this.translation.y},scaling:{x:this.scaling.x,y:this.scaling.y},rotation:this.rotation,fontcss:this.fontcss}},save:function(){return this.snapshots.push(this.snapshot()),this.context.save.apply(this.context,arguments)},restore:function(){if(this.snapshots.length>0){var t=this.snapshots.pop();this.transformation=t.transformation,this.translation=t.translation,this.scaling=t.scaling,this.rotation=t.rotation,this.fontcss=t.fontcss}return this.context.restore.apply(this.context,arguments)},scale:function(t,e){this.scaleBy(t,e)},rotate:function(t){this.rotateBy(t)},translate:function(t,e){this.translateBy(t,e)},transform:function(t,e,n,i,o,r){this.transformBy([t,e,n,i,o,r]),this.scaling.x=this.transformation[0],this.scaling.y=this.transformation[3],this.translation.x=this.transformation[4],this.translation.y=this.transformation[5]},setTransform:function(t,e,n,i,o,r){this.resetTransformation(),this.transform(t,e,n,i,o,r)},imageSmoothingEnabled:function(t){return null!=t&&("imageSmoothingEnabled"in l&&(this.context.imageSmoothingEnabled=t),"webkitImageSmoothingEnabled"in l&&(this.context.webkitImageSmoothingEnabled=t),"mozImageSmoothingEnabled"in l&&(this.context.mozImageSmoothingEnabled=t)),this.context.globalAlpha},globalAlpha:function(t){return null!=t&&(this.context.globalAlpha=t),this.context.globalAlpha},globalCompositeOperation:function(t){return null!=t&&(this.context.globalCompositeOperation=t),this.context.globalCompositeOperation},strokeStyle:function(t){return null!=t&&(this.context.strokeStyle=t),this.context.strokeStyle},fillStyle:function(t){return null!=t&&(this.context.fillStyle=t),this.context.fillStyle},createLinearGradient:function(t,n,i,o){var r=this.pointRelativeTo(t,n,e.identity),s=this.pointRelativeTo(i,o,e.identity);return this.context.createLinearGradient(r.x,r.y,s.x,s.y)},createRadialGradient:function(t,n,i,o,r,s){var a=this.pointRelativeTo(t,n,e.identity),l=this.scaling.x*i,c=this.pointRelativeTo(o,r,e.identity),h=this.scaling.x*s;return this.context.createRadialGradient(a.x,a.y,l,c.x,c.y,h)},createPattern:function(){return this.context.createPattern.apply(this.context,arguments)},lineWidth:function(t){return null!=t&&(this.context.lineWidth=t),this.context.lineWidth},lineCap:function(t){return null!=t&&(this.context.lineCap=t),this.context.lineCap},lineJoin:function(t){return null!=t&&(this.context.lineJoin=t),this.context.lineJoin},miterLimit:function(t){return null!=t&&(this.context.miterLimit=t),this.context.miterLimit},shadowOffsetX:function(t){return null!=t&&(this.context.shadowOffsetX=t),this.context.shadowOffsetX},shadowOffsetY:function(t){return null!=t&&(this.context.shadowOffsetY=t),this.context.shadowOffsetY},shadowBlur:function(t){return null!=t&&(this.context.shadowBlur=t),this.context.shadowBlur},shadowColor:function(t){return null!=t&&(this.context.shadowColor=t),this.context.shadowColor},clearRect:function(t,n,i,o){var r=this.boxRelativeTo(t,n,i,o,e.identity);return this.context.clearRect(r.left,r.top,r.width,r.height)},fillRect:function(t,n,i,o){var r=this.boxRelativeTo(t,n,i,o,e.identity);return this.context.fillRect(r.left,r.top,r.width,r.height)},strokeRect:function(t,n,i,o){var r=this.boxRelativeTo(t,n,i,o,e.identity);this.context.save(),this.context.lineWidth*=this.scaling.x;var s=this.context.strokeRect(r.left,r.top,r.width,r.height);return this.context.restore(),s},beginPath:function(){return this.context.beginPath.apply(this.context,arguments)},closePath:function(){return this.context.closePath.apply(this.context,arguments)},moveTo:function(t,n){var i=this.pointRelativeTo(t,n,e.identity);return this.context.moveTo(i.x,i.y)},lineTo:function(t,n){var i=this.pointRelativeTo(t,n,e.identity);return this.context.lineTo(i.x,i.y)},quadraticCurveTo:function(t,n,i,o){var r=this.pointRelativeTo(t,n,e.identity),s=this.pointRelativeTo(i,o,e.identity);return this.context.quadraticCurveTo(r.x,r.y,s.x,s.y)},bezierCurveTo:function(t,n,i,o,r,s){var a=this.pointRelativeTo(t,n,e.identity),l=this.pointRelativeTo(i,o,e.identity),c=this.pointRelativeTo(r,s,e.identity);return this.context.bezierCurveTo(a.x,a.y,l.x,l.y,c.x,c.y)},arcTo:function(t,n,i,o,r){var s=this.pointRelativeTo(t,o,e.identity),a=this.pointRelativeTo(t,o,e.identity),l=this.scaling.x*r;return this.context.arcTo(s.x,s.y,a.x,a.y,l)},rect:function(t,n,i,o){var r=this.boxRelativeTo(t,n,i,o,e.identity);return this.context.rect(r.left,r.top,r.width,r.height)},arc:function(t,n,i,o,r,s){var a=this.pointRelativeTo(t,n,e.identity),l=this.scaling.x*i;return this.context.arc(a.x,a.y,l,o,r,s)},fill:function(t){if(null!=t){var e="fill with path argument not supported by PDF";throw a.error(e),Error(e)}return this.context.fill.apply(this.context,arguments)},stroke:function(t){if(null!=t){var e="stroke with path argument not yet implemented in pdf/CanvasGraphics";throw a.error(e),Error(e)}this.context.save(),this.context.lineWidth*=this.scaling.x;var n=this.context.stroke.apply(this.context,arguments);return this.context.restore(),n},clip:function(){return this.context.clip.apply(this.context,arguments)},isPointInPath:function(t,e){var n=this.pointRelativeTo(t,e,this.identity);return this.context.isPointInPath(n.x,n.y)},drawFocusRing:function(t,n,i,o){var r=this.pointRelativeTo(n,i,e.identity);return this.context.drawFocusRing(t,r.x,r.y,o)},font:function(t){return null!=t&&(this.fontcss=t,this.context.font=t),this.fontcss},textAlign:function(t){return null!=t&&(this.context.textAlign=t),this.context.textAlign},textBaseline:function(t){return null!=t&&(this.context.textBaseline=t),this.context.textBaseline},fillText:function(t,n,i,o){var r=this.pointRelativeTo(n,i,e.identity),o=this.scaling.x*o;this.context.save(),this.context.font=e.scaleFont(this.font(),this.scaling.x),this.context.lineWidth*=this.scaling.x;var s=4===arguments.length?this.context.fillText(t,r.x,r.y,o):this.context.fillText(t,r.x,r.y);return this.context.restore(),s},strokeText:function(t,n,i,o){var r=this.pointRelativeTo(n,i,e.identity),o=this.scaling.x*o;this.context.save(),this.context.font=e.scaleFont(this.font(),this.scaling.x),this.context.lineWidth*=this.scaling.x;var s=4===arguments.length?this.context.strokeText(t,r.x,r.y,o):this.context.strokeText(t,r.x,r.y);return this.context.restore(),s},measureText:function(t){var e;return e=this.context.measureText(t),{width:e.width}},drawImage:function(t,n,i,o,r,s,a,l,c){var h,u=Array.prototype.slice.call(arguments,1),p={x:this.scaling.x,y:this.scaling.y};return t instanceof e&&(t=t.context.canvas,p.x/=e.pixelRatio,p.y/=e.pixelRatio),2===u.length?(h=this.pointRelativeTo(n,i,e.identity),this.context.drawImage(t,h.x,h.y,t.width*p.x,t.height*p.y)):4===u.length?(h=this.pointRelativeTo(n,i,e.identity),l=o,c=r,this.context.drawImage(t,h.x,h.y,l*p.x,c*p.y)):8===u.length?(h=this.pointRelativeTo(s,a,e.identity),this.context.drawImage(t,n,i,o,r,h.x,h.y,l*p.x,c*p.y)):void 0},createImageData:function(){return this.context.createImageData.apply(this.context,arguments)},getImageData:function(t,n,i,o){return 1===e.pixelRatio?this.context.getImageData(t,n,i,o):(l.canvas.width=this.getWidth(),l.canvas.height=this.getHeight(),l.drawImage(this.context.canvas,0,0,l.canvas.width,l.canvas.height),l.getImageData(t,n,i,o))},putImageData:function(){return this.context.putImageData.apply(this.context,arguments)},pointRelativeTo:function(t,e,n){return s(t,e,this.transformation).relativeTo(n)},boxRelativeTo:function(t,e,n,i,o){var r=s(t,e,this.transformation).relativeTo(o),a=s(t+n,e+i,this.transformation).relativeTo(o),l=a.x-r.x,c=a.y-r.y;return{left:r.x,top:r.y,width:l,height:c}},resetTransformation:function(){o.prototype.resetTransformation.apply(this,arguments),this.scaleBy(e.pixelRatio,e.pixelRatio)},renderGrid:function(t){var e=1e4;t=t||"#777777",this.save(),this.beginPath(),this.fillStyle(t),this.font("12px Arial");for(var n=-e;e>=n;n+=100)this.fillText(n,n+2,12),this.fillText(n,2,n-2),this.moveTo(n,-e),this.lineTo(n,e),this.moveTo(-e,n),this.lineTo(e,n);this.strokeStyle(t),this.lineWidth(2),this.stroke(),this.beginPath(),this.lineWidth(3),this.strokeStyle("#ff0000"),this.moveTo(0,-e),this.lineTo(0,e),this.moveTo(-e,0),this.lineTo(e,0),this.stroke(),this.restore()}},e.scaleFont=function(t,e){return t.replace(/([^0-9]*)([0-9\.]+)([a-z]+)(\s+.*)/i,function(t,n,i,o,r){return""+n+i*e+o+r})},e=i.define(e,Object,[o])}),define("util/Img",["require","util/Binary","util/Mime","async/Promise","env/Settings","graphics/CanvasGraphics","log/Logger"],function(t){function e(){}function n(t){var e=HTMLCanvasElement.prototype.msToBlob.call(this);t(e)}var i=t("util/Binary"),o=t("util/Mime"),r=t("async/Promise"),s=t("env/Settings"),a=t("graphics/CanvasGraphics");return t("log/Logger").instance("util.Img"),e.loadAsync=function(t){var e=new r,n=document.createElement("img");return n.onload=function(){e.resolve(n)},n.onerror=function(){e.reject()},n.src=t,e},e.convertImageToDataURL=function(t){var e=a.create(t.width,t.height);return e.drawImage(t,0,0),e.context.canvas.toDataURL()},e.convertAsync=function(t,n){var i=new r;return n?e.toImageElementAsync(t).then(function(t){return e.toBytesAsync(t,n)}).done(function(t){i.resolve(t)}):i.reject("Could not convert image - MIME is required"),i},e.toImageElementAsync=function(t){var n=i.toObjectURL(t);return e.loadAsync(n)},e.toBytesAsync=function(t,n){var i,o,s,l,c=new r;return s=t.naturalWidth||t.width||t.getWidth&&t.getWidth(),l=t.naturalHeight||t.height||t.getHeight&&t.getHeight(),o=s>0&&l>0,o?(i=a.create(s,l),i.clearRect(0,0,s,l),i.drawImage(t,0,0),e.fromCanvasAsync(i.context.canvas,n).done(function(t){c.resolve(t)})):c.reject("Could not convert to bytes - DOM element is not valid - "+typeof t),c},e.fromCanvasAsync=function(t,a){var l,c=new r,h=o.mimeToExt(a)||s.DEFAULT_FILE_TYPE.toLowerCase();if(t.toBlob===n){var u,a=o.extToMime(h);return u=t.toDataURL(a,s.JPEG_QUALITY).split(",").pop(),i.fromBase64Async(u).done(function(t){c.resolve(t)}).fail(function(){c.reject.apply(c,arguments)})}return t.toBlob(function(n){l=new FileReader,l.onload=function(n){var r,a=o.extToMime(h),l=new Uint8Array(n.target.result);e.is(h,l)?c.resolve(l):(r=t.toDataURL(a,s.JPEG_QUALITY).split(",").pop(),i.fromBase64Async(r).done(function(t){c.resolve(t)}).fail(function(){c.reject.apply(c,arguments)}))},l.onerror=c.reject.bind(c),l.readAsArrayBuffer(n)}),c},e.is=function(t,n){var i=e["is"+t.toUpperCase()];return"function"==typeof i?i.call(e,n):!1},e.getBox=function(t){var e,n,i=t.height,o=t.width,r=i*o,s=0,a=-1,l=0,c=-1,h=r,u=t.data;for(n=0,e=!1;r>n&&!e;n++)u[4*n+3]>0&&(a=s=Math.floor(n/o),c=l=n%o,h=n,e=!0);for(n=r-1,e=!1;n>h&&!e;n--)u[4*n+3]>0&&(a=Math.floor(n/o),l=Math.min(n%o,l),c=Math.max(n%o,c),e=!0);for(n=s*o,e=!1;l>n%o&&!e;)u[4*n+3]>0&&(l=n%o,e=!0),n+=o,n/o>a&&(n=n%o+1+s*o);for(n=(s+1)*o-1,e=!1;n>-1&&n%o>c&&!e;)u[4*n+3]>0&&(c=n%o,e=!0),n+=o,n/o>a&&(n=n%o-1+s*o);return{left:l,top:s,width:c-l+1,height:a-s+1}},"undefined"!=typeof HTMLCanvasElement&&(HTMLCanvasElement.prototype.toBlob=HTMLCanvasElement.prototype.toBlob||n),e}),define("util/Color",["require","util/Class","util/Num","env/Settings"],function(t){function e(t,e,i,o){if(this.r=0,this.g=0,this.b=0,this.a=0,void 0!==t){if(null==e&&null==i&&null==o)if(null!=t.r)this.r=parseInt(t.r,10),this.g=parseInt(t.g,10),this.b=parseInt(t.b,10),this.a=parseFloat(t.a);else if(null!=t.red)this.r=parseInt(t.red,10),this.g=parseInt(t.green,10),this.b=parseInt(t.blue,10),this.a=parseFloat(t.alpha);else if(0==t.indexOf("#")){var r=t.replace("#","").match(/(.{2})/g);this.r=parseInt(r[0],16),this.g=parseInt(r[1],16),this.b=parseInt(r[2],16),this.a=r.length>3?n.fixed(parseInt(r[3],16)/255):1}else if(0==t.indexOf("rgb(")){var s=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/.exec(t);this.r=parseInt(s[2],10),this.g=parseInt(s[3],10),this.b=parseInt(s[4],10),this.a=1}else{if(0!=t.indexOf("rgba("))throw"Invalid color string";var s=/(.*?)rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\d\.]+)\)/.exec(t);this.r=parseInt(s[2],10),this.g=parseInt(s[3],10),this.b=parseInt(s[4],10),this.a=parseFloat(s[5])}else this.r=t,this.g=e,this.b=i,this.a=o||1;if(void 0===this.r||void 0===this.g||void 0===this.b||void 0===this.a)throw"Error parsing color"}}var n=(t("util/Class"),t("util/Num")),i=t("env/Settings");return e.yellow=new e("rgba(255, 247, 0, 1)"),e.orange=new e("rgba(255, 128, 23, 1)"),e.blue=new e("rgba(25, 119, 255, 1)"),e.white=new e("rgba(255, 255, 255, 1)"),e.green=new e("rgba(0, 232, 0, 1)"),e.pink=new e("rgba(252, 12, 89, 1)"),e.red=new e("rgba(255, 0, 0, 1)"),e.black=new e("rgba(0, 0, 0, 1)"),e.transparent=new e("rgba(0, 0, 0, 0)"),e.getStrokeColor=function(t){return e.isDark(t)?i.COLORS.white:i.COLORS.black},e.isDark=function(t){return t=t instanceof e?t:new e(t),.299*(t.r/255)+.587*(t.g/255)+.114*(t.b/255)<.5},e.getOfficialColorName=function(t){var n=null;for(var o in i.COLORS){var r=new e(i.COLORS[o]);if(r.equalsRGB(t)){n=o;break}}return n||this.toRGB(t.r,t.g,t.b)},e.toHex=function(t,n,i,o){if(null==t)return t;var r=new e(t,n,i,o);return r.toHex()},e.toRGB=function(t,n,i,o){if(null==t)return t;var r=new e(t,n,i,o);return r.toRGB()},e.toRGBA=function(t,n,i,o){if(null==t)return t;var r=new e(t,n,i,o);return r.toRGBA()},e.prototype.equals=function(t){return t instanceof e?this.r==t.r&&this.g==t.g&&this.b==t.b&&this.a==t.a:new e(t).equals(this)},e.prototype.equalsRGB=function(t){return t instanceof e?this.r==t.r&&this.g==t.g&&this.b==t.b:new e(t).equalsRGB(this)},e.prototype.toHex=function(){var t=this.r.toString(16);1==t.length&&(t="0"+t);var e=this.g.toString(16);1==e.length&&(e="0"+e);var n=this.b.toString(16);return 1==n.length&&(n="0"+n),"#"+t+e+n},e.prototype.toInteger=function(){var t=this.r.toString(16);1==t.length&&(t="0"+t);var e=this.g.toString(16);1==e.length&&(e="0"+e);var n=this.b.toString(16);return 1==n.length&&(n="0"+n),parseInt(t+e+n,16)},e.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},e.prototype.toRGBArray=function(){return[this.r,this.g,this.b]},e.prototype.toRGBA=e.prototype.rgba=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},e}),define("surface/Serializer",["require","util/Class","util/Num","util/Color"],function(t){function e(){this.surface=null}var n=t("util/Class"),i=t("util/Num"),o=t("util/Color");return e.serializePoint=function(t){return{x:i.fixed(t.x),y:i.fixed(t.y)}},e.serializeColor=function(t){var e=new o(t);return{red:e.r,green:e.g,blue:e.b,alpha:i.fixed(e.a)}},e.serializeSize=function(t){return{width:i.fixed(t.width),height:i.fixed(t.height)}},e.serializeStyle=function(t){return{shadowColor:t.shadowColor,shadowOffset:t.shadowOffset,shadowRadius:t.shadowRadius}},e.serializeBox=function(t){return{x:i.fixed(t.left),y:i.fixed(t.top),width:i.fixed(t.width),height:i.fixed(t.height)}},e.serializeFont=function(t){return{name:t.name,size:t.size}},e=n.define(e)}),define("util/Security",["require"],function(){function t(){}return t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=0|16*Math.random(),n="x"==t?e:8|3&e;return n.toString(16)})},t.MD5=function(t){if("string"!=typeof t&&t.buffer){if(window.Windows){var e=Windows.Security.Cryptography.Core.HashAlgorithmProvider.openAlgorithm("MD5"),n=e.hashData(Windows.Security.Cryptography.CryptographicBuffer.createFromByteArray(t));return Windows.Security.Cryptography.CryptographicBuffer.encodeToHexString(n)}for(var i="",o=0;o<t.length;o++)i+=String.fromCharCode(t[o]);var r=CryptoJS.enc.Latin1.parse(i);return CryptoJS.MD5(r).toString()}return CryptoJS.MD5((t||"").toString()).toString()},t}),define("surface/element/Element",["require","util/Obj","env/Settings","mixin/Transformable","util/Transformer","surface/Serializer","util/Class","util/Color","util/Num","util/Img","util/Security","graphics/CanvasGraphics","util/Box","graphics/Point"],function(t){function e(){this.hitgraphics=null,this.graphics=null,this.uuid=null,this.type="Element",this.hidden=!1,this.layer=null,this.order=0,this.depth=1,this.selected=!1,this.hit=!1,this.handles={},this.activeHandle=null,this.removed=!1,this.box={left:null,top:null,width:null,height:null},this.opacity=1,this.stroke={color:n.COLORS.black,alpha:1,width:1,style:"round",join:"round"},this.fill={color:n.COLORS.transparent},this.shadow={offset:{x:0,y:3},blur:4,color:n.COLORS.transparent},this.editing=!1,this.registerEvents("added","removed","selected","unselected","action","boxchanged","moved","manipulated")}var n=(t("util/Obj"),t("env/Settings")),i=t("mixin/Transformable"),o=t("util/Transformer"),r=t("surface/Serializer"),s=t("util/Class"),a=t("util/Color"),l=t("util/Num"),c=(t("util/Img"),t("util/Security")),h=t("graphics/CanvasGraphics"),u=t("util/Box");return t("graphics/Point"),e.prototype={initialize:function(){this.hitgraphics=new h,this.hitgraphics.globalCompositeOperation("source-out"),this.uuid||(this.uuid=c.uuid()),this.on("added",this.onAdded,this),this.on("removed",this.onRemoved,this)},clone:function(){var t=new this.constructor;return t.deserialize(null,this.serialize([1,0,0,1,0,0])),t.recreateId(),t},recreateId:function(){this.uuid=c.uuid()},serialize:function(){var t=r.serializeStyle({shadowColor:r.serializeColor({r:0,g:0,b:0,a:0}),shadowOffset:r.serializeSize({width:0,height:0}),shadowRadius:this.shadow.blur}),e={type:"Node",guid:this.uuid};return t&&(e.style=t),e},deserialize:function(t,e){return $.extend(!0,this,{uuid:e.guid,stroke:{color:e.strokeColor&&a.toRGBA(e.strokeColor),width:e.lineWidth},fill:{color:e.fillColor&&a.toRGBA(e.fillColor)},shadow:{color:e.style&&a.toRGBA(e.style.shadowColor),blur:e.style&&e.style.shadowRadius,offset:{x:e.style&&e.style.shadowOffset&&e.style.shadowOffset.width,y:e.style&&e.style.shadowOffset&&e.style.shadowOffset.height}}}),this.setTransformation(e.transform?o.toArray(e.transform):e.transform),this},hitTest:function(t,e,i){var r,s,a,l,c,h,p,d=this.hitgraphics,f=!1,g=50,m=6;if(!u.intersectsBox(this.box,{left:t.x-g/2,top:t.y-g/2,width:g,height:g}))return!1;for(d.setWidth(this.layer.graphics.getWidth()),d.setHeight(this.layer.graphics.getHeight()),c=this.shadow.color,this.shadow.color=n.COLORS.transparent,d.save(),d.transform.apply(d,this.layer.transformation),h=n.HANDLE_RADIUS,i||(n.HANDLE_RADIUS=n.HANDLE_HIT_RADIUS),null!=e?e(d):this.render(d),n.HANDLE_RADIUS=h,p=t.relativeTo(o.identity()),a=Math.min(Math.max(0,p.x-m/2),d.getWidth()),s=Math.min(Math.max(0,p.y-m/2),d.getHeight()),l=d.getImageData(a,s,m,m).data,d.restore(),this.shadow.color=c,r=3;r<l.length;r+=4)if(0!==l[r]){f=!0;break}return f},processHit:function(){},getHandle:function(t,e){var n;for(n in this.handles)if(this.hitTest(t,function(t){this.renderHandle(t,n)}.bind(this),e))return n},getStyle:function(){return{stroke:{color:this.stroke.color,width:this.stroke.width},fill:{color:this.fill.color}}},onAdded:function(t){this.graphics=t.graphics,this.layer=t,this.removed=!1},remove:function(){return this.layer&&this.layer.removeElement(this),this},manipulate:function(){this.calculateBox()},handle:function(t){this.activeHandle=t},unhandle:function(){this.activeHandle=null},onRemoved:function(){this.removed=!0},getSurface:function(){return this.surface||this.layer&&this.layer.surface},hide:function(){this.hidden=!0,this.layer&&this.layer.render()},show:function(){this.hidden=!1,this.layer&&this.layer.render()},initGraphics:function(t){var t=t||this.graphics;return t.fillStyle(this.fill.color),t.strokeStyle(this.stroke.color),t.lineWidth(this.stroke.width),t.lineCap(this.stroke.style),t.lineJoin(this.stroke.join),t.shadowOffsetX(this.shadow.offset.x),t.shadowOffsetY(this.shadow.offset.y),t.shadowBlur(this.shadow.blur),t.shadowColor(this.selected?n.COLORS.transparent:this.shadow.color),t.transform.apply(t,this.transformation),this},render:function(t,e,n){t=t||this.graphics||this.layer.graphics,n=n||this.layer.surface,t.save(),this.initGraphics(t),this.selected&&this.renderSelected(t,n),e?e.call(this,t,n):this.draw(t,n),t.restore(),this.selected&&this.renderHandles(t)},renderSelected:function(t,e){var t=t||this.graphics;t.save(),this.setSelectedStyles(t),this.drawSelection?this.drawSelection(t):this.draw(t,null,e),t.restore()},renderHandle:function(t,e){var t=t||this.graphics,n=e&&"object"==typeof e?e:this.handles[e];t.save(),this.initGraphics(t),this.setSelectedStyles(t),this.drawHandle(t,n),t.restore()},renderHandles:function(t){var e,t=t||this.graphics;for(e in this.handles)this.renderHandle(t,this.handles[e])},setSelectedStyles:function(t){t.lineWidth(t.lineWidth()+n.SELECTION_STROKE_WIDTH/this.layer.surface.scaling.x/this.scaling.x),this.fill.color===n.COLORS.white||this.stroke.color===n.COLORS.white?t.strokeStyle("rgba(0, 0, 0, 0.1)"):t.strokeStyle(n.COLORS.white),t.shadowColor(n.SHADOW_COLOR),t.globalAlpha(this.opacity)},draw:function(){},drawHandle:function(t,e){var i,o,t=t||this.graphics;i=n.HANDLE_RADIUS/this.layer.surface.scaling.x/this.scaling.x,o=(n.HANDLE_RADIUS+n.HANDLE_STROKE_WIDTH)/this.layer.surface.scaling.x/this.scaling.x,t.beginPath(),t.fillStyle(n.COLORS.white),t.shadowColor(n.SHADOW_COLOR),t.shadowOffsetY(2),t.arc(e.x,e.y,o,0,2*Math.PI,!0),t.fill(),t.beginPath(),t.fillStyle("rgba(5, 131, 209, 1)"),t.shadowColor(n.COLORS.transparent),t.arc(e.x,e.y,i,0,2*Math.PI,!0),t.fill()},select:function(t){this.selected=!0,this.layer.render(),this.fire("selected",this,t)},unselect:function(){this.selected=!1,this.layer&&this.layer.render(),this.fire("unselected",this)},getSelectedBox:function(){return this.box},getBox:function(){var t=this.selected?this.getSelectedBox():this.box,e=this.stroke.width+Math.max(this.shadow.offset.x,this.shadow.offset.y)+50;return{left:t.left-e,top:t.top-e,width:t.width+2*e,height:t.height+2*e}},setBox:function(t,e,n,i){var o=this.box,r=o.left!==t||o.top!==e||o.width!==n||o.height!==i;o.left=t,o.top=e,o.width=n,o.height=i,r&&this.fire("boxchanged",this,this.box)},move:function(t){this.calculateBox(),this.fire("moved",this,t)},rotate:function(){},translate:function(){},scale:function(){},applyTransformation:function(){},getSizeLevel:function(t){var e=t||this.stroke.width;if(null!=e){var i=[];for(var o in n.STROKE_SIZES)i.push(n.STROKE_SIZES[o]);var r=l.getNearestNumber(i,e);for(var o in n.STROKE_SIZES)if(r==n.STROKE_SIZES[o])return o}return null}},e=s.define(e,Object,i)}),define("surface/action/DeleteAction",["require","util/Class"],function(t){function e(){this.elements=null}var n=t("util/Class");return e.prototype.undo=function(){var t;$(this.elements).each(function(e,n){var i=n.layer;t=t||i.surface,t.disableRender(),i.add(n,!0)}),t&&(t.enableRender(),t.render())},e.prototype.run=function(){var t;$(this.elements).each(function(e,n){var i=n.layer;t=t||i.surface,t.disableRender(),i.remove(n,!0)}),t&&(t.enableRender(),t.render())},n.define(e)}),define("util/Text",["require"],function(){function t(){}var e="undefined"==typeof document?void 0:document.createElement("div");return t.encodeUTF8=function(t){return unescape(encodeURIComponent(t))},t.decodeUTF8=function(t){try{return decodeURIComponent(escape(t))}catch(e){return t}},t.trim=function(e){return t.ltrim(t.rtrim(e))},t.ltrim=function(t){return null!=t?String.prototype.replace.call(t,/^\s+/g,""):void 0},t.rtrim=function(t){return null!=t?String.prototype.replace.call(t,/\s+$/g,""):void 0},t.stripHtml=function(t){return null!=t&&e?(e.innerHTML=t,e.innerText):t},t.escapeRegex=function(t){var e,n,i=["\\","^","$","*","+","?",".","(",")","[","]","{","}","|"];return e=new RegExp("([\\"+i.join("\\")+"])","g"),n=t.replace("\\","\\\\").replace(e,"\\$1")},t.lpad=function(e,n,i){return t.pad("left",e,n,i)},t.rpad=function(e,n,i){return t.pad("right",e,n,i)},t.pad=function(t,e,n,i){var o,r=e+"";return i=i||" ",r.length<n&&(o=new Array(n-r.length+1).join(i),"left"==t?r=o+r:r+=o),r},t}),define("surface/element/Text",["require","util/Obj","util/Color","env/Settings","surface/element/Element","surface/Serializer","surface/action/DeleteAction","util/Num","util/Text","util/Transformer","util/Img","util/Class","graphics/CanvasGraphics","graphics/Point","log/Logger"],function(t){function e(){this.alignment="left",this.direction="leftToRight",this.value="",this.previousValue="",this.width=null,this.position={x:0,y:0},this.depth=3,this.font={name:"Helvetica,Arial,sans-serif",size:12,weight:""},this.baseline="alphabetic",this.handles={br:{x:0,y:0}},this.dashedLineWidth=1,this.dashPattern=null,this.editor=null,this.selectOnFocus=!0,this.originalAllowZoom=null}var n=t("util/Obj"),i=t("util/Color"),o=t("env/Settings"),r=t("surface/element/Element"),s=t("surface/Serializer");t("surface/action/DeleteAction");var a=t("util/Num"),l=t("util/Text"),c=t("util/Transformer");t("util/Img");var h=t("util/Class"),u=t("graphics/CanvasGraphics");t("graphics/Point"),t("log/Logger").instance("surface.element.Text");var p=256,d=8,f=.2,g=1/0;return e.measurementGraphics=u.create(1,1),e.prototype.initialize=function(){this.shadow.color=o.SHADOW_COLOR,this.selected&&this.calculateBox(),e.parent.prototype.initialize.apply(this,arguments)},e.prototype.getLineWidth=function(){return Math.min(g,f*this.font.size)},e.prototype.getMaxLineWidth=function(){return Math.min(g,f*p)},e.prototype.getMinLineWidth=function(){return Math.min(g,f*d)},e.prototype.initGraphics=function(t){var t=t||this.graphics;return e.parent.prototype.initGraphics.apply(this,arguments),t.font(this.getFontCss()),t.textAlign(this.alignment),t.textBaseline(this.baseline),this},e.prototype.hasText=function(){return null!=this.value&&this.value.length>0},e.prototype.drawText=function(t,e,n,i){t.fillText(e,n,i)},e.prototype.draw=function(t,e,n){var i=t||this.graphics,o=l.decodeUTF8(this.value).split(/\r?\n/),r=this.position.x,s=this.position.y,a=this.font.size,c=1.1*a;this.getLineWidth();var h=0;o.forEach(function(t,e){var o=(e-1)*c;i.shadowColor(this.shadow.color),n!==!0&&this.drawText(i,t,r,s+c+o),h=Math.max(h,i.measureText(t).width)}.bind(this)),this.handles.br={x:this.box.left+this.box.width,y:this.box.top+this.box.height}},e.prototype.drawSelection=function(t){var e=t||this.graphics;e.lineWidth(3/this.layer.surface.scaling.x),e.shadowColor(this.shadow.color),e.strokeStyle(o.COLORS.white),e.strokeRect(this.box.left,this.box.top,this.box.width,this.box.height)},e.prototype.getStyle=function(){return n.merge(!0,e.parent.prototype.getStyle.apply(this,arguments),{font:{size:this.font.size}})},e.prototype.manipulate=function(t,n){if(this.position,"br"===this.activeHandle){this.box.width;var i=Math.max(this.minWidth,Math.min(this.maxWidth,n.x-this.box.left));this.box.height*=i/this.box.width,this.box.width=i;var o=p-d,r=this.maxWidth-this.minWidth,s=(i-this.minWidth)/r,a=d+o*s;this.font.size=Math.max(d,Math.min(p,a)),e.parent.prototype.manipulate.apply(this,arguments)}},e.prototype.getSizeLevel=function(t){return e.parent.prototype.getSizeLevel.call(this,t||this.font.size)},e.prototype.move=function(t){this.position.x+=t.x,this.position.y+=t.y,e.parent.prototype.move.apply(this,arguments)},e.prototype.applyTransformation=function(t){this.position=c.transformPoint(this.position,t)},e.prototype.updateText=function(){},e.prototype.getTextMetrics=function(t){t=t||this.value;var n=null,i=e.measurementGraphics,o=l.decodeUTF8(t).split(/\r?\n/),r=0,s=this.font.size;return i.save(),this.surface&&i.transform.apply(i,this.surface.transformation),i.font(this.getFontCss()),i.lineWidth(this.stroke.width),o.forEach(function(t){var e=i.measureText(t);r+=1.1*(null!=e.height&&e.height>0?e.height:s),null==n&&(n=e),e.width>n.width&&(n=e)}),null==n?n={width:0,height:1.1*s}:n.height=r,i.restore(),n},e.prototype.calculateBox=function(){var t=this.position.x,e=this.position.y,n=this.getLineWidth();return this.box.left=t-n,this.box.top=e-n,this.box},e.prototype.getFontCss=function(t){return t=t||this.font,[t.weight,t.size+"px",t.name].join(" ").trim()},e.prototype.getMinFontCss=function(t){return t=t||this.font,[t.weight,d+"px",t.name].join(" ").trim()},e.prototype.getMaxFontCss=function(t){return t=t||this.font,[t.weight,p+"px",t.name].join(" ").trim()},e.prototype.serialize=function(t){var n=e.parent.prototype.serialize.call(this,t),o=s.serializeFont({name:this.font.name,size:a.fixed(this.font.size)});n.style.shadowColor=s.serializeColor(this.shadow.color),n.style.shadowOffset=s.serializeSize({width:this.shadow.offset.x,height:this.shadow.offset.y}),n.style.shadowRadius=this.shadow.blur;var r=c.transformPoint(t,this.position);return $.extend(n,{type:"Text",textStyle:this.textStyle,text:this.value,origin:s.serializePoint(r),font:o,strokeColor:s.serializeColor(i.getStrokeColor(this.fill.color)),fillColor:s.serializeColor(this.fill.color),lineWidth:a.fixed(this.stroke.width),alignment:this.alignment,direction:this.direction})},e.prototype.deserialize=function(t,n){var i=n.textStyle||this.textStyle,o=n.alignment||this.alignment,r=n.direction||this.direction,s=n.font.size,a=this.font.weight,l={x:n.origin.x,y:n.origin.y};return $.extend(!0,this,{textStyle:i,alignment:o,direction:r,position:l,value:n.text,font:{name:"Helvetica,Arial",size:s,weight:a}}),e.parent.prototype.deserialize.apply(this,arguments),this},e=h.define(e,r)}),define("surface/element/LabelText",["require","env/Settings","surface/element/Text","util/Text","util/Class","graphics/Point","graphics/CanvasGraphics","log/Logger"],function(t){function e(){this.font={name:"Helvetica,Arial,sans-serif",size:15,weight:""},this.maxWidth=100,this.stroke.width=0,this.fill.color=n.COLORS.white,this.shadow.offsetX=0,this.shadow.offsetY=0,this.shadow.blur=0,this.shadow.color=n.COLORS.transparent
}var n=t("env/Settings"),i=t("surface/element/Text");t("util/Text");var o=t("util/Class");return t("graphics/Point"),t("graphics/CanvasGraphics"),t("log/Logger").instance("surface.element.LabelText"),e.prototype.getLineWidth=function(){return this.stroke.width},e.prototype.drawText=function(t,e,n,i){t.fillText(e,n,i)},e.prototype.drawSelection=function(){},e.prototype.serialize=function(t){var n=e.parent.prototype.serialize.call(this,t);return n.textStyle="labelText",n},e=o.define(e,i)}),define("util/Trig",["require"],function(){function t(){}return t.rad=function(t){return t*Math.PI/180},t.deg=function(t){return 180*t/Math.PI},t}),define("surface/action/StampLabelAction",["require","util/Class"],function(t){function e(){this.element=null,this.oldValue=null,this.newValue=null,this.layer=null}var n=t("util/Class");return e.prototype.undo=function(){var t;t=this.element.text?this.element.text:this.element,t.value=this.oldValue,this.layer.render()},e.prototype.run=function(){var t;t=this.element.text?this.element.text:this.element,t.value=this.newValue,this.layer.render()},n.define(e)}),define("surface/element/stamp/StampLabel",["require","util/Class","surface/element/Element","surface/element/LabelText","util/Trig","env/Settings","util/Transformer","graphics/CanvasGraphics","log/Logger","surface/action/StampLabelAction"],function(t){function e(){this.stamp=null,this.defaultText=null,this.text=null,this.innerPadding=15,this.offset={x:0,y:0},this.stroke={style:"butt",width:2,color:r.COLORS.white},this.fill={color:"rgba(0, 0, 0, 0.8)",alpha:.8},this.shadow={offset:{x:0,y:3},color:"rgba(0, 0, 0, 0.4)",blur:3},this.minWidth=10,this.maxWidth=180}var n=t("util/Class"),i=t("surface/element/Element"),o=t("surface/element/LabelText");t("util/Trig");var r=t("env/Settings");t("util/Transformer");var s=t("graphics/CanvasGraphics");var Text=t("util/Text");t("log/Logger").instance("surface.element.stamp.StampLabel");var a=t("surface/action/StampLabelAction");return e.buttonText="a",e.defaultHeight=32,e.measurementGraphics=s.create(1,1),e.prototype={initialize:function(){e.parent.prototype.initialize.apply(this,arguments),this.text=this.text||new o({textStyle:"labelText",font:{name:"Helvetica,Arial",size:15*this.stamp.contentScaleFactor,weight:""},alignment:"left",direction:"leftToRight",baseline:"top",hidden:!0,offset:{x:0,y:0},maxWidth:this.maxWidth-this.innerPadding-e.defaultHeight/2,layer:this.stamp.layer}),this.calculateBox()},hasText:function(){return this.text.hasText()},getText:function(){return this.hasText()?this.text.value:""},setText:function(t){this.text.value=t,this.calculateBox()},direction:function(){return this.stamp.tail===!1||this.stamp.angle>90&&this.stamp.angle<270?"right":"left"},processHit:function(t){!this.text.editing&&this.hasText()&&this.hitTestHandle(t)?this.deleteLabel():this.hitTest(t)&&this.showInput()},hitTestHandle:function(t){var n=this,i=function(t){var e=t;e.save(),n.initGraphics(e),e.translate(n.stamp.position.x,n.stamp.position.y),n.drawHandle(e),e.restore()};this.calculateBox(),this.layer=this.stamp.layer;var o=e.parent.prototype.hitTest.call(this,t,i);return this.layer=null,o},hitTest:function(t){this.calculateBox(),this.layer=this.stamp.layer;var n=e.parent.prototype.hitTest.call(this,t);return this.layer=null,n},showInput:function(){this.calculatePosition(),this.stamp.layer.surface.foreground.render()},calculatePosition:function(){var t=this.stamp.contentScaleFactor,n=e.defaultHeight,i=this.text.editing||this.hasText()?this.stamp.radius:this.stamp.selectionRadius,o=e.defaultHeight/2;this.offset.x=Math.sqrt(Math.pow(i,2)-Math.pow(n/2,2))*t,this.offset.y=-n/2*t;var r="left"==this.direction();this.text.offset.x=(this.offset.x+this.innerPadding*t)*(r?-1:1),this.text.offset.y=this.offset.y+(n*t-1.2*this.text.font.size)/2,this.text.position.x=this.stamp.position.x+(this.text.offset.x-(r?this.maxWidth-this.innerPadding-o:0)*t),this.text.position.y=this.stamp.position.y+this.text.offset.y},calculateBox:function(){this.calculatePosition();var t=e.defaultHeight/2,n=this.maxWidth-this.innerPadding-t,i=this.getText()||e.buttonText,o=this.text.getTextMetrics(i).width,r="left"==this.direction(),s=this.offset.x,a=this.offset.y,l=this.stamp.contentScaleFactor,c=t*l+this.innerPadding*l+(this.text.editing?n*l:Math.min(Math.max(this.minWidth*l,o),n*l)),h=e.defaultHeight*l,u=this.stamp.position.x+(r?-s-c:s),p=this.stamp.position.y+a;return this.setBox(u,p,c,h),this.box},draw:function(t){var n=t||this.graphics,i=this.calculateBox(),o=this.stamp.contentScaleFactor,r=i.width/o,s=i.height/o,a=s/2,l=(this.text.editing||this.hasText()?this.stamp.radius:this.stamp.selectionRadius)/o,c=this.offset.x/o,h=this.offset.y/o,u="left"==this.direction();n.save(),n.translate(this.stamp.position.x,this.stamp.position.y),n.scale(this.stamp.contentScaleFactor,this.stamp.contentScaleFactor),n.save(),u&&n.rotate(Math.PI),n.beginPath(),n.moveTo(c,h),n.lineTo(c+r-a,h),n.arc(c+r-a,h+a,a,Math.PI*(u?.5:1.5),Math.PI*(u?1.5:.5)),n.lineTo(c,h+s),n.arc(c-this.offset.x,h+s/2,l,Math.acos(this.offset.x/l)+(u?Math.PI:0),-Math.acos(this.offset.x/l)+(u?Math.PI:0),!0),n.closePath(),n.fill(),n.beginPath(),n.moveTo(c,h),n.lineTo(c+r-a,h),n.arc(c+r-a,h+a,a,Math.PI*(u?.5:1.5),Math.PI*(u?1.5:.5)),n.lineTo(c,h+s),n.stroke(),n.restore(),this.text.editing||(n.save(),n.scale(1/o,1/o),this.stamp.selected&&this.hasText()&&this.drawHandle(n),n.font(this.text.getFontCss()),n.textBaseline("top"),u&&n.textAlign("right"),n.fillStyle("rgba(255, 255, 255, 1)"),n.fillText(Text.decodeUTF8(this.text.value)||e.buttonText,this.text.offset.x,this.text.offset.y),n.restore()),n.restore()},deleteLabel:function(){var t;t=new a({element:this,layer:this.stamp.layer,oldValue:this.text.value,newValue:""}),this.text.value="",t&&this.stamp.layer.surface.controller.activeTool.fire("action",this,t),this.stamp.layer.render()},drawHandle:function(t){var e=t||this.graphics;this.calculatePosition();var n={x:this.offset.x+this.box.width,y:this.offset.y+this.box.height/2},i=3/this.stamp.layer.surface.scaling.x;e.save(),e.lineWidth(e.lineWidth()/this.stamp.layer.surface.scaling.x),"left"==this.direction()&&e.rotate(Math.PI),e.beginPath(),e.strokeStyle(r.COLORS.white),e.fillStyle("rgba(5, 131, 209, 1)"),e.shadowColor(r.SHADOW_COLOR),e.shadowOffsetY(2),e.arc(n.x,n.y,r.HANDLE_RADIUS/this.stamp.layer.surface.scaling.x+e.lineWidth(),0,2*Math.PI),e.fill(),e.stroke(),e.strokeStyle(r.COLORS.white),e.beginPath(),e.moveTo(n.x-i,n.y-i),e.lineTo(n.x+i,n.y+i),e.moveTo(n.x+i,n.y-i),e.lineTo(n.x-i,n.y+i),e.closePath(),e.stroke(),e.restore()}},e=n.define(e,i)}),define("surface/element/stamp/Stamp",["require","util/Class","surface/element/stamp/StampLabel","surface/element/Element","util/Trig","env/Settings","util/Box","util/Security","util/Transformer","log/Logger"],function(t){function e(){this.angle=180,this.tail=!1,this.radius=26,this.selectionRadius=.75*Math.max(s.STAMP_DEFAULT_WIDTH,s.STAMP_DEFAULT_HEIGHT),this.defaultText=null,this.label=null,this.depth=2,this.position={x:0,y:0},this.contentScaleFactor=1,this.shadow={offset:{x:0,y:3},blur:4,color:"rgba(0, 0, 0, 0.2)"},this.handles={t1:{x:0,y:0}}}var n=t("util/Class"),i=t("surface/element/stamp/StampLabel"),o=t("surface/element/Element"),r=t("util/Trig"),s=t("env/Settings"),a=t("util/Box"),l=t("util/Security"),c=t("util/Transformer");t("log/Logger").instance("surface.element.stamp.Stamp");var h=Math.PI,u=2*h,p=180/h,d=h/4;return e.buttonText="a",e.prototype={initialize:function(){e.parent.prototype.initialize.apply(this,arguments),this.stroke.color=s.COLORS.transparent,this.stroke.style="round",this.stroke.join="miter",this.label=this.label||new i({stamp:this}),this.calculateBox()},hasText:function(){return this.label.hasText()},getText:function(){return this.label.getText()},setText:function(t){this.label.setText(t)},remove:function(){return this.layer&&this.layer.removeElement(this.label.text),e.parent.prototype.remove.apply(this,arguments)},updateAngle:function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y),n=this.angle;e>28?(this.angle=this.getAngle(t),this.tail=!0):(this.tail=!1,this.angle=180),this.angle!=n&&this.calculateBox()},getAngle:function(t){var e=Math.atan2(t.y,t.x);return 0>e&&(e=u+e),e=e%d>d/2?Math.ceil(e/d)*d:Math.floor(e/d)*d,e*p},calculateBox:function(){var t={left:this.position.x-this.selectionRadius*this.contentScaleFactor,top:this.position.y-this.selectionRadius*this.contentScaleFactor,width:2*this.selectionRadius*this.contentScaleFactor,height:2*this.selectionRadius*this.contentScaleFactor},e=this.label.calculateBox(),n=a.union(t,e);return this.setBox(n.left,n.top,n.width,n.height),this.box},initGraphics:function(t){e.parent.prototype.initGraphics.apply(this,arguments);var n=t||this.graphics;n.miterLimit(4),n.shadowColor(this.shadow.color)},renderSelected:function(t,e){var n=t||this.graphics;this.editing||this.hasText()||this.label.render(n,null,e),n.save(),n.translate(this.position.x,this.position.y),n.scale(this.contentScaleFactor,this.contentScaleFactor),n.beginPath(),n.strokeStyle(s.COLORS.white),n.lineWidth(2),n.arc(0,0,this.selectionRadius,0,2*Math.PI,!1),n.stroke(),n.closePath(),n.restore()},draw:function(t,e){var n=t||this.graphics;(this.label.editing||this.hasText())&&this.label.render(n,null,e),this.drawRing(n),this.drawIcon(n),this.calculateHandles()},drawHandle:function(t,e){if(o.prototype.drawHandle.call(this,t,e),!this.tail){var n,t=t||this.graphics;n=s.HANDLE_RADIUS/this.layer.surface.scaling.x/this.scaling.x,t.fillStyle("white"),t.fillRect(e.x-.2*n,e.y-.45*n,.4*n,.9*n),t.fillRect(e.x-.45*n,e.y-.2*n,.9*n,.4*n)}},calculateHandles:function(){this.handles.t1.x=this.position.x+this.selectionRadius*this.contentScaleFactor*Math.cos(r.rad(this.angle)),this.handles.t1.y=this.position.y+this.selectionRadius*this.contentScaleFactor*Math.sin(r.rad(this.angle))},move:function(t){this.position.x+=t.x,this.position.y+=t.y,e.parent.prototype.move.apply(this,arguments)},processHit:function(t){this.label.layer=this.layer,this.label.processHit(t),this.label.layer=null},show:function(){e.parent.prototype.show.apply(this,arguments),this.label.show()},hide:function(){e.parent.prototype.hide.apply(this,arguments),this.label.hide()},showInput:function(){this.label.showInput()},drawIcon:function(){},drawRing:function(t){var e=t||this.graphics;if(e.save(),e.translate(this.position.x,this.position.y),e.scale(this.contentScaleFactor,this.contentScaleFactor),e.rotate(-r.rad(this.angle)),e.fillStyle(this.fill.color),e.shadowColor("rgba(0, 0, 0, 0)"),e.shadowOffsetX(0),e.shadowOffsetY(3),e.shadowBlur(3),e.strokeStyle("rgba(255, 255, 255, 1)"),e.lineWidth(2),e.lineCap("butt"),e.lineJoin("miter"),e.miterLimit(4),e.save(),e.beginPath(),e.arc(0,0,18,0,2*Math.PI),e.closePath(),e.fillStyle("rgba(255, 255, 255, 0.95)"),e.fill(),e.restore(),e.save(),e.beginPath(),this.tail){var n=22.24859546128699,i=-17;e.arc(0,0,28,r.rad(38+this.angle),r.rad(322+this.angle)),e.lineTo(n,i),e.lineTo(n+14,i),e.lineTo(n+14+14,0),e.lineTo(n+14,-i),e.lineTo(n,-i),e.closePath()}else e.arc(0,0,28,0,2*Math.PI);if(e.arc(0,0,24,0,2*Math.PI,!0),e.shadowColor("rgba(0, 0, 0, 0.35)"),e.fillStyle("rgba(255, 255, 255, 1)"),e.fill(),e.beginPath(),e.rotate(r.rad(this.angle)),e.arc(0,0,22,0,2*Math.PI),e.arc(0,0,17,0,2*Math.PI,!0),e.fill(),e.restore(),e.save(),e.beginPath(),this.tail){var n=21.236760581595302,i=-15;e.arc(0,0,26,r.rad(40+this.angle),r.rad(320+this.angle)),e.lineTo(n,i),e.lineTo(n+14,i),e.lineTo(n+14+12,0),e.lineTo(n+14,-i),e.lineTo(n,-i),e.closePath()}else e.arc(0,0,26,0,2*Math.PI);e.arc(0,0,19,0,2*Math.PI,!0),e.fill(),e.restore(),e.restore()},serialize:function(t){var n=e.parent.prototype.serialize.call(this,t),i=c.transformPoint(t,this.position),o=s.STAMP_DEFAULT_WIDTH*this.contentScaleFactor,r=s.STAMP_DEFAULT_HEIGHT*this.contentScaleFactor;return n.type="Stamp",n.stampName=this.name,this.tail&&(n.tailAngleInDegrees=this.angle),n.frame={x:i.x-o/2,y:i.y-r/2,width:o,height:r},this.hasText()&&(n.guid=l.uuid(),n.labelGuid=l.uuid(),n.text=this.getText(),n.textPosition=this.label.text.position),n},deserialize:function(t,n){return e.parent.prototype.deserialize.apply(this,arguments),this.position.x=n.frame.x+n.frame.width/2,this.position.y=n.frame.y+n.frame.height/2,this.width=s.STAMP_DEFAULT_WIDTH,this.height=s.STAMP_DEFAULT_HEIGHT,this.contentScaleFactor=Math.max(n.frame.width/s.STAMP_DEFAULT_WIDTH,n.frame.height/s.STAMP_DEFAULT_HEIGHT),this.label.text.font.size=15*this.contentScaleFactor,n.text&&this.setText(n.text),n.tailAngleInDegrees&&(this.angle=n.tailAngleInDegrees,this.tail=!0,this.calculateHandles()),this}},e=n.define(e,o)}),define("surface/element/Vector",["require","env/Settings","surface/Serializer","util/Transformer","util/Color","util/Num","surface/element/Element","util/Class"],function(t){function e(){this.path=null,this.operations=[],this.points=null,this.closed=!1,this.visible=!0}var n=.5522848,i=t("env/Settings"),o=t("surface/Serializer"),r=t("util/Transformer"),s=t("util/Color"),a=t("util/Num"),l=t("surface/element/Element"),c=t("util/Class"),h={ABSOLUTE:{MOVETO:"M",CLOSEPATH:"Z",LINETO:"L",HORIZONTAL_LINETO:"H",VERTICAL_LINETO:"V",CUBIC_CURVETO:"C",CUBIC_SHORTHAND_CURVETO:"S",QUADRATIC_CURVETO:"Q",QUADRATIC_SHORTHAND_CURVETO:"T",ARC:"A"},RELATIVE:{MOVETO:"m",CLOSEPATH:"z",LINETO:"l",HORIZONTAL_LINETO:"h",VERTICAL_LINETO:"v",CUBIC_CURVETO:"c",CUBIC_SHORTHAND_CURVETO:"s",QUADRATIC_CURVETO:"q",QUADRATIC_SHORTHAND_CURVETO:"t",ARC:"a"},M:"moveTo",Z:"closePath",L:"lineTo",C:"bezierCurveTo",Q:"quadraticCurveTo",A:"arc"};return e.transform=function(t,e){var n,i,o,s,l,c,h,u;if(n=t,i=t.slice(0),i.splice(4,2,0,0),e=e.replace(/[\s+,]+/g," "),e=e.replace(/([a-z])(\S)/gi,"$1 $2"),s=e.match(/[a-z][^a-z]*/gi),s&&s.length>0){for(h=0;h<s.length;h++){if(l=$.trim(s[h]).split(" "),/^(M|L|C|Q)$/i.test(l[0]))for(u=1;u<l.length;u+=2)o=l[0]==l[0].toUpperCase()?n:i,c=r.transformPoint(o,{x:l[u],y:l[u+1]}),l[u]=a.fixed(c.x),l[u+1]=a.fixed(c.y);s[h]=l.join(" ")}e=s.join(" ")}return e},e.prototype.initialize=function(){e.parent.prototype.initialize.apply(this,arguments)},e.prototype.deserialize=function(t,n){var i,o,r;if(this.path=n.path.replace(/[\s+,]+/g," "),this.path=this.path.replace(/([a-z])(\S)/gi,"$1 $2"),r=this.path.match(/[a-z][^a-z]*/gi),r&&r.length>0)for(this.operations=[],i=0;i<r.length;i++)o=$.trim(r[i]).split(" "),this.operations.push(o);return e.parent.prototype.deserialize.apply(this,arguments),this.stroke.alpha=new s(this.stroke.color).a,this},e.prototype.invokeOperation=function(t,e){var n=t[0],i=h[n],o=t.slice(1);o.push(e||this.graphics),this[i].apply(this,o)},e.prototype.updateBoxFromPoint=function(t,e){var n,i,o,r,s,a,l=this.box;l&&(t=Number(t),e=Number(e),n=0===l.left?0:l.left||t,i=0===l.top?0:l.top||e,o=l.width||0,r=l.height||0,s=n+o,a=i+r,n=Math.min(n,t),i=Math.min(i,e),s=Math.max(s,t),a=Math.max(a,e),o=s-n,r=a-i,this.setBox(n,i,o,r))},e.prototype.resetBox=function(){this.box.left=null,this.box.top=null,this.box.width=null,this.box.height=null},e.prototype.draw=function(t){if(null==this.points){var e,n,i,t=t||this.graphics;if(this.resetBox(),i=this.operations.slice(0),this.beginPath(t),i&&i.length)for(e=0;e<i.length;e++)n=i[e],this.invokeOperation(n,t);t.stroke(),this.closed&&t.fill()}else{if(!this.visible)return;t.beginPath();for(var o=0;o<this.points.length;o++){var r=this.points[o];if(r.length>0){var s=r[0];for(t.moveTo(s.x,s.y),e=1;e<r.length;e++){var a=r[e];t.lineTo(a.x,a.y)}}}t.stroke()}},e.prototype.calculateBox=function(){for(var t,e,n,i=null,o=null,r=null,s=null,a=0;a<this.operations.length;a++){var l=this.operations[a];switch(l[0]){case"M":t=[{x:l[1],y:l[2]}];break;case"L":t=[{x:l[1],y:l[2]}];break;case"C":t=[{x:l[5],y:l[6]}];break;case"Q":t=[{x:l[5],y:l[6]}];break;case"A":t=[{x:l[1]-l[3],y:l[2]-l[3]},{x:l[1]+l[3],y:l[2]+l[3]}]}for(var c=0,h=t.length;h>c;c++)e=t[c].x,n=t[c].y,null==i&&(i=e),null==o&&(o=n),null==r&&(r=e),null==s&&(s=n),i=Math.min(i,e),o=Math.min(i,n),r=Math.max(r,e),s=Math.max(s,n)}return this.setBox(i,o,r-i,s-o),this.box},e.prototype.move=function(t){var n,i,o,r,s;for(s=this.operations,n=0,o=s.length;o>n;n++)if(r=s[n],/^(M|L|C|Q)$/.test(r[0]))for(i=1;i<r.length;i+=2)r[i]=+r[i]+t.x,r[i+1]=+r[i+1]+t.y;e.parent.prototype.move.apply(this,arguments)},e.prototype.applyTransformation=function(t){var n,i,o,s,a,l;for(a=this.operations,n=0,o=a.length;o>n;n++)if(s=a[n],/^(M|L|C|Q)$/i.test(s[0]))for(i=1;i<s.length;i+=2)l=r.transformPoint(t,{x:s[i],y:s[i+1]}),s[i]=l.x,s[i+1]=l.y;e.parent.prototype.applyTransformation.apply(this,arguments)},e.prototype.toPath=function(){var t,e,n,i,o=[];for(t=0;t<this.operations.length;t++){for(n=this.operations[t].slice(0),e=1;e<n.length;e++)i=n[e],i!==Math.round(i)&&(i=a.fixed(i).toString()),n[e]=i;o.push(n.join(" "))}return o.join(" ")},e.prototype.beginPath=function(t){t.beginPath(),this.operations.splice(0),this.closed=!1},e.prototype.closePath=function(t){t.closePath(),this.operations.push([h.ABSOLUTE.CLOSEPATH]),this.closed=!0},e.prototype.rotate=function(t,e){e.rotate(t)},e.prototype.translate=function(t,e,n){n.translate(t,e)},e.prototype.scale=function(t,e,n){n.scale(t,e)},e.prototype.transform=function(t,e,n,i,o,r,s){s.transform(t,e,n,i,o,r)},e.prototype.setTransform=function(t,e,n,i,o,r,s){s.setTransform(t,e,n,i,o,r)},e.prototype.moveTo=function(t,e,n){n.moveTo(t,e),this.updateBoxFromPoint(t,e),this.operations.push([h.ABSOLUTE.MOVETO,t,e])},e.prototype.lineTo=function(t,e,n){n.lineTo(t,e),this.updateBoxFromPoint(t,e),this.operations.push([h.ABSOLUTE.LINETO,t,e])},e.prototype.quadraticCurveTo=function(t,e,n,i,o){o.quadraticCurveTo(t,e,n,i),this.updateBoxFromPoint(n,i),this.operations.push([h.ABSOLUTE.QUADRATIC_CURVETO,t,e,n,i])},e.prototype.bezierCurveTo=function(t,e,n,i,o,r,s){s.bezierCurveTo(t,e,n,i,o,r),this.updateBoxFromPoint(o,r),this.operations.push([h.ABSOLUTE.CUBIC_CURVETO,t,e,n,i,o,r])},e.prototype.arcTo=function(t,e,n,i,o,r){r.arcTo(t,e,n,i,o)},e.prototype.rect=function(t,e,n,i,o){o.rect(t,e,n,i),this.operations.push([h.ABSOLUTE.MOVETO,t,e]),this.operations.push([h.ABSOLUTE.LINETO,t+n,e]),this.operations.push([h.ABSOLUTE.LINETO,t+n,e+i]),this.operations.push([h.ABSOLUTE.LINETO,t,e+i]),this.operations.push([h.ABSOLUTE.LINETO,t,e])},e.prototype.ellipse=function(t,e,i){var o=t.x-e.x,r=t.y-e.y,s=e.x*n,a=e.y*n,l=o+2*e.x,c=r+2*e.y,h=t.x,u=t.y;this.moveTo(o,u,i),this.bezierCurveTo(o,u-a,h-s,r,h,r,i),this.bezierCurveTo(h+s,r,l,u-a,l,u,i),this.bezierCurveTo(l,u+a,h+s,c,h,c,i),this.bezierCurveTo(h-s,c,o,u+a,o,u,i)},e.prototype.getEstimatedSize=function(){return new s(this.stroke.color).a<1?this.stroke.width/2/i.MAX_STROKE_WIDTH/this.layer.surface.contentScaleFactor:this.stroke.width/i.MAX_STROKE_WIDTH/this.layer.surface.contentScaleFactor},e.prototype.serialize=function(t){var n=e.parent.prototype.serialize.call(this,t),i=this.toPath();i=e.transform(t,i);var r=a.fixed(this.stroke.width),l=this.stroke.color,c=this.fill.color;return n.style.shadowColor=o.serializeColor(this.shadow.color),n.style.shadowOffset=o.serializeSize({width:this.shadow.offset.x,height:this.shadow.offset.y}),n.style.shadowRadius=this.shadow.blur,n=$.extend(n,{type:"Vector",path:i,lineWidth:r}),l&&0!=new s(l).a?n.strokeColor=o.serializeColor(l):delete n.strokeColor,c&&0!=new s(c).a?n.fillColor=o.serializeColor(c):delete n.fillColor,n},e=c.define(e,l)}),define("surface/element/Polygon",["require","util/Class","surface/element/Vector","util/Transformer"],function(t){function e(){this.vertices=[],this.closed=!0}var n=t("util/Class"),i=t("surface/element/Vector"),o=t("util/Transformer");return e.prototype.initialize=function(){e.parent.prototype.initialize.apply(this,arguments)},e.prototype.deserialize=function(t,n){return this.vertices=n.extension.vertices||[],e.parent.prototype.deserialize.apply(this,arguments),this},e.prototype.move=function(t){var n,i;for(n=0;n<this.vertices.length;n++)i=this.vertices[n],i.x+=t.x,i.y+=t.y;e.parent.prototype.move.apply(this,arguments)},e.prototype.applyTransformation=function(t){var n;for(n=0;n<this.vertices.length;n++)this.vertices[n]=o.transformPoint(t,this.vertices[n]);e.parent.prototype.applyTransformation.apply(this,arguments)},e.prototype.toVertices=function(){return this.vertices},e.prototype.serialize=function(t){for(var n=this.toVertices(),i=0;i<n.length;i++)n[i]=o.transformPoint(t,n[i]);var r=$.extend(e.parent.prototype.serialize.call(this,t),{extension:{type:"Polygon",vertices:n}});return r.fillColor&&delete r.fillColor,r},e=n.define(e,i)}),define("surface/element/Pixelate",["require","util/Transformer","util/Num","env/Settings","surface/element/Polygon","util/Class","graphics/CanvasGraphics","util/Color","util/Box","util/Num","graphics/Point"],function(t){function e(){this.left=null,this.top=null,this.width=null,this.height=null,this.pixelizedImage=null,this.depth=0,this.startPos=null,this.activePos=null}t("util/Transformer"),t("util/Num");var n=t("env/Settings"),i=t("surface/element/Polygon"),o=t("util/Class");t("graphics/CanvasGraphics"),t("util/Color");var r=t("util/Box");return t("util/Num"),t("graphics/Point"),e.sizes=[],e.images=[],e.prototype.draw=function(t,e){var i=e.background.getBitmap();if(i){var o=this.getPixelatedImage(Math.min(this.width,this.height)),s=o.width/i.width,a=r.intersection(i,this),l=a.left*s,c=a.top*s,h=a.width*s||1,u=a.height*s||1,p=a.left,d=a.top,f=a.width||1,g=a.height||1;t=t||this.graphics,t.shadowColor(n.COLORS.transparent),t.imageSmoothingEnabled(!1),t.drawImage(o,l,c,h,u,p,d,f,g),this.pixelizedImage=o,this.setBox(this.left,this.top,this.width,this.height)}},e.prototype.getPixelatedImage=function(t){var n=e.images;return 8>=t?n[0]:16>=t?n[1]:24>=t?n[2]:48>=t?n[3]:64>=t?n[4]:n[5]},e.prototype.select=function(){return!1},e.prototype.hitTest=function(){return!1},e=o.define(e,i)}),define("surface/layer/Layer",["require","util/Class","env/Settings","util/Img","mixin/Transformable","util/Obj","surface/element/stamp/Stamp","surface/element/Text","surface/action/DeleteAction","surface/element/Pixelate","graphics/CanvasGraphics","graphics/Point","util/Box"],function(t){function e(){this.surface=null,this.dom=null,this.graphics=null,this.elements=[],this.dirty=!1,this.pointer=null,this.doRender=!0,this.bgcolor=i.COLORS.transparent,this.registerEvents("render","elementadded","elementremoved","elementmoved","elementmanipulated","added","removed","paste","boxchanged")}var n=t("util/Class"),i=t("env/Settings");t("util/Img");var o=t("mixin/Transformable");t("util/Obj");var r=t("surface/element/stamp/Stamp"),s=t("surface/element/Text"),a=t("surface/action/DeleteAction"),l=t("surface/element/Pixelate"),c=t("graphics/CanvasGraphics");t("graphics/Point");var h=t("util/Box");return e.id={BACKGROUND:"__background__",ANNOTATION:"__annotation__",TEXT:"__text__"},e.prototype.initialize=function(){var t=this.surface?this.surface.getWidth():0,e=this.surface?this.surface.getHeight():0,n=c.create(t,e),i=n.context.canvas;$(i).attr("touch-action","none").addClass("skitch-layer").css({display:"block",position:"absolute",top:"0px",left:"0px"}),this.dom=i,this.graphics=n,this.initEvents()},e.prototype.initEvents=function(){this.on("added",this.onAdded,this),this.on("removed",this.onRemoved,this),this.on("elementadded",this.onElementAdded,this)},e.prototype.getElement=function(t,e){var n,i,o=[],r=[];for(this.elements.forEach(function(t){t.selected?o.push(t):r.push(t)}),n=o.length;n--;)if(i=o[n],i.hitTest(t,null,e))return i;for(n=r.length;n--;)if(i=r[n],i.hitTest(t,null,e))return i},e.prototype.onElementAdded=function(t,e){e.on("moved",this.onElementMoved,this),e.on("manipulated",this.onElementManipulated,this)},e.prototype.onElementMoved=function(t,e){this.fire("elementmoved",t,e)},e.prototype.onElementManipulated=function(t,e,n){this.fire("elementmanipulated",t,e,n)},e.prototype.isEmpty=function(){return 0===this.elements.length},e.prototype.hide=function(){this.hidden=!0},e.prototype.show=function(){this.hidden=!1},e.prototype.isDirty=function(){return this.dirty},e.prototype.getBox=function(){var t=this.elements.map(function(t){return t.box}),e=h.union(t);return e},e.prototype.translateElements=function(t){var e,n,i=this.elements;for(e=0;e<i.length;e++)n=i[e],n.move(t)},e.prototype.onAdded=function(){},e.prototype.onRemoved=function(){this.surface=null},e.prototype.getCanvas=function(){return this.graphics&&this.graphics.context.canvas},e.prototype.getElementByUuid=function(t){var e;for(e=0;e<this.elements.length;e++)if(t===this.elements[e].uuid)return this.elements[e]},e.prototype.containsElement=function(t){var e;for(e=0;e<this.elements.length;e++)if(t===this.elements[e]||t.uuid&&t.uuid===this.elements[e].uuid)return!0;return!1},e.prototype.add=function(t){return this.addElement(t)},e.prototype.addElement=function(t){if(this.containsElement(t))return!1;var e,n=t.depth,i=!1;for(e=this.elements.length-1;e>=0;e--){var o=this.elements[e],r=o.depth;if(n>=r){this.elements.splice(e+1,0,t),i=!0;break}}for(i||(e=0,this.elements.splice(e,0,t));e<this.elements.length;e++)this.elements[e].order=e;return this.dirty=!0,t.layer=this,t.on("boxchanged",this.onElementBoxChanged,this),this.fire("elementadded",this,t),t.fire("added",this),!0},e.prototype.onElementBoxChanged=function(){this.fire("boxchanged",this,this.getBox())},e.prototype.remove=function(t){return this.removeElement(t)},e.prototype.removeElement=function(t){var e,n=this,i=this.elements;for(e=0;e<i.length;e++)i[e]===t&&(i.splice(e,1),t.order=null);return n.fire("elementremoved",this,t),t.fire("removed",this),n.fire("boxchanged",this,this.getBox()),t},e.prototype.renderElement=function(t){this.addElement(t),this.render()},e.prototype.initGraphics=function(t){var t=t||this.graphics;return t.transform.apply(t,this.transformation),this.clip(),this},e.prototype.clip=function(){var t=this.graphics,e=this.surface.clipRect;t.beginPath(),t.rect(e.left,e.top,e.width,e.height),t.clip()},e.prototype.render=function(){if(this.doRender){var t,e,n=[],i=[];for(this.elements.forEach(function(t){t.selected?n.push(t):i.push(t)}),this.clear(),this.graphics.save(),this.initGraphics(),this.onBeforeRenderElements(),this.showGrid&&this.renderGrid(),e=0;e<i.length;e++)t=i[e],t.layer===this&&t.hidden||t.render();for(e=0;e<n.length;e++)t=n[e],t.layer===this&&t.hidden||t.render();return this.graphics.restore(),this.fire("render",this),this}},e.prototype.onBeforeRenderElements=function(){},e.prototype.fillWithColor=function(t){var e=this.graphics;return e.save(),e.fillStyle(t),e.setTransform(1,0,0,1,0,0),e.fillRect(0,0,e.getWidth(),e.getHeight()),e.restore(),this},e.prototype.clear=function(){var t=this.graphics;return t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.getWidth(),t.getHeight()),t.restore(),this},e.prototype.empty=function(t){var e=this,n=[];return this.clear(),$(this.elements).each(function(i,o){(!t||t&&o.selected)&&n.push(e.remove(o,!0))}),this.render(),n.length>0&&e.fire("action",new a({elements:n})),n},e.prototype.toDataURL=function(t){return this.getCanvas().toDataURL(t)},e.prototype.resize=function(t,e){return t&&e&&(this.graphics.setWidth(t),this.graphics.setHeight(e),this.render()),this},e.prototype.getCenter=function(){return{x:this.graphics.getWidth()/2,y:this.graphics.getHeight()/2}},e.prototype.renderGrid=function(t){var t=t||this.graphics;t.save(),this.initGraphics(t),t.renderGrid(),t.restore()},e.prototype.pan=function(t){t&&this.translateBy(t.x,t.y).render()},e.prototype.zoom=function(t,e){e=e||this.getCenter(),this.scaleBy(t,t,e.x,e.y).render()},e.prototype.copy=function(t,e,n,i){var o=this.graphics;t=t||0,e=e||0,n=n||o.getWidth(),i=i||o.getHeight();var r=h.transform({left:t,top:e,width:n,height:i},this.transformation);return o.getImageData(r.left,r.top,r.width,r.height)},e.prototype.paste=function(t,n,i,o){var r,s,a,l,h,u,p=this.graphics;if(n=n||0,i=i||0,1===t.nodeType&&/img|canvas|video/i.test(t.nodeName))h=t;else{if(t instanceof e){for(l=t.elements,this.fillWithColor(t.bgcolor),p.save(),p.setTransformation(this.transformation),p.translateBy(-n,-i),r=0;r<l.length;r++)a=l[r],s=a.selected,o||(a.selected=!1),a.render(p),a.selected=s;return p.restore(),this.fire("paste",this),this}t.data&&(u=c.create(t.width,t.height),u.putImageData(t,0,0),h=u.context.canvas)}return h&&(p.drawImage(h,n,i),this.fire("paste",this)),this},e.prototype.serialize=function(t,n){var i,o,a=[];for(i=0;i<this.elements.length;i++)o=this.elements[i],o instanceof l||n==e.id.ANNOTATION&&(o instanceof s||o instanceof r)||(n!=e.id.TEXT||o instanceof s||o instanceof r)&&a.push(o.serialize(t));return{type:"Layer",layerId:n,children:a}},e=n.define(e,Object,o)}),define("surface/layer/Buffer",["require","util/Class","surface/layer/Layer"],function(t){function e(){}var n=t("util/Class"),i=t("surface/layer/Layer");return e.prototype.initialize=function(){e.parent.prototype.initialize.apply(this,arguments),$(this.dom).hide(),$(this.dom).addClass("skitch-layer-buffer")},e.prototype.empty=function(){var t=this.graphics;return e.parent.prototype.empty.apply(this,arguments),t.save(),t.fillStyle("#ffffff"),t.fillRect(0,0,t.getWidth(),t.getHeight()),t.restore(),this},e.prototype.clip=function(){},e=n.define(e,i)}),define("surface/element/Bitmap",["require","env/Settings","surface/Serializer","async/Promise","surface/element/Element","surface/element/Pixelate","util/Binary","util/Img","util/Box","util/Transformer","util/Class","log/Logger","graphics/CanvasGraphics"],function(t){function e(){this.dom=null,this.src=null,this.left=0,this.top=0,this.width=0,this.height=0,this.clipRect={left:0,top:0,width:0,height:0},this.registerEvents("loaded")}var n=t("env/Settings"),i=t("surface/Serializer"),o=t("async/Promise"),r=t("surface/element/Element"),s=t("surface/element/Pixelate"),a=t("util/Binary"),l=t("util/Img"),c=t("util/Box"),h=t("util/Transformer"),u=t("util/Class"),p=t("log/Logger").instance("surface.element.Bitmap"),d=t("graphics/CanvasGraphics");return e.contentMode={NONE:0,ASPECT_FIT:1,ASPECT_FILL:2,FILL:3},e.prototype.initialize=function(){e.parent.prototype.initialize.apply(this,arguments),this.stroke.width=0,this.shadow.offset.x=0,this.shadow.offset.y=0,this.shadow.blur=0,this.shadow.color=n.COLORS.transparent,this.dom?(this.width=this.dom.width,this.height=this.dom.height,this.setBox(this.left,this.top,this.width,this.height),this.clipRect.left=this.left,this.clipRect.top=this.top,this.clipRect.width=this.width,this.clipRect.height=this.height,this.initDomPixels()):this.createDOM(),this.setSrcAsync(this.src)},e.prototype.toBytesAsync=function(t,e,i,o){var r,a=d.create(i,o),c=this.layer.surface,h=c.foreground;a.save(),a.fillStyle(n.COLORS.white),a.fillRect(0,0,a.getWidth(),a.getHeight()),a.restore(),a.drawImage(this.dom,t,e,i,o,0,0,i,o);for(var u=0;u<h.elements.length;u++)r=h.elements[u],r instanceof s&&this.pixelate(a,t,e,r);return l.toBytesAsync(a)},e.prototype.pixelate=function(t,e,i,o){var r=o.pixelizedImage,s=r.width/this.width,a=c.intersection(this,o),l=a.left*s,h=a.top*s,u=a.width*s||1,p=a.height*s||1,d=a.left-e,f=a.top-i,g=a.width||1,m=a.height||1;t.shadowColor(n.COLORS.transparent),t.imageSmoothingEnabled(!1),t.drawImage(r,l,h,u,p,d,f,g,m)},e.prototype.setSrcAsync=function(t){var e=new o;return!t||null!=this.dom&&t==this.dom.src?e.resolve():(this.src=null,this.dom=null,this.domPixels=null,l.loadAsync(t).done(function(t){this.dom=t,this.width=t.naturalWidth||t.width,this.height=t.naturalHeight||t.height,this.setBox(this.left,this.top,this.width,this.height),this.clipRect.left=this.left,this.clipRect.top=this.top,this.clipRect.width=this.width,this.clipRect.height=this.height,this.initDomPixels(),this.fire("loaded",this,t),e.resolve()}.bind(this)).fail(function(){e.reject.apply(e,arguments)})),e},e.prototype.initDomPixels=function(){if(!this.domPixels){var t=d.create(this.width,this.height);t.drawImage(this.dom,0,0),this.domPixels=t.getImageData(0,0,this.width,this.height).data}},e.prototype.createDOM=function(){return this.dom=document.createElement("img"),this.dom},e.prototype.move=function(t){this.left+=t.x,this.top+=t.y,this.clipRect.left+=t.x,this.clipRect.top+=t.y,this.setBox(this.left,this.top,this.width,this.height),e.parent.prototype.move.apply(this,arguments)
},e.prototype.initGraphics=function(t){return t=t||this.graphics,e.parent.prototype.initGraphics.apply(this,arguments),this.clip(t),this},e.prototype.clip=function(t){if(n.ENABLE_INFINITE_CANVAS){var e=this.clipRect;t=t||this.graphics,t.beginPath(),t.rect(e.left,e.top,e.width,e.height),t.clip()}},e.prototype.draw=function(t){t=t||this.graphics,0!=this.width&&0!=this.height&&t.drawImage(this.dom,this.left,this.top,this.width,this.height)},e.prototype.applyTransformation=function(t){var e=h.transformPoint(t,{x:this.left,y:this.top}),n=t[0];this.left=e.x,this.top=e.y,this.width*=n,this.height*=n},e.prototype.serialize=function(t){var n="skitch+uuid:///"+this.uuid,o=e.contentMode.NONE,r=c.transform({left:this.clipRect.left,top:this.clipRect.top,width:this.clipRect.width,height:this.clipRect.height},t),s=i.serializeBox(r);return $.extend(e.parent.prototype.serialize.call(this,t),{type:"Bitmap",uri:n,frame:s,contentMode:o})},e.prototype.deserialize=function(t,n){var i,r,s,c,h,u=n.frame,f=new o;e.parent.prototype.deserialize.apply(this,arguments),i=n.uri.split("///")[1],this.uuid=i;for(var g in t.resources)if(i.toLowerCase()===g.toLowerCase()){r=t.resources[g];break}c=n.cropRect||u,h=c.x>u.x||c.y>u.y||c.width<u.width||c.height<u.height,this.left=Math.max(c.x,u.x),this.top=Math.max(c.y,u.y),this.width=Math.min(c.width,u.width),this.height=Math.min(c.height,u.height),r?(s=a.toObjectURL(r)||a.toDataURL(r,t.mime),h?l.loadAsync(s).done(function(t){var e=t.naturalWidth||t.width,n=t.naturalHeight||t.height,i=d.create(e,n),o=c.x-u.x,r=c.y-u.y,a=c.width,l=c.height,h=0,p=0,g=c.width,m=c.height;i.drawImage(t,o,r,a,l,h,p,g,m),s=i.context.canvas.toDataURL(),f.resolve(s)}.bind(this)).fail(function(){f.reject.apply(f,arguments)}):f.resolve(s)):(p.warn("resource binary was not found embedded in image... something wrong loading bitmap.... falling back to transparent bg"),s=d.create(this.width,this.height).context.canvas.toDataURL("image/png")),f.done(function(t){this.setSrcAsync(t)}.bind(this))},e=u.define(e,r)}),define("surface/layer/Background",["require","util/Class","surface/layer/Layer","util/Img","util/Binary","async/Promise","env/Settings","util/Box","surface/element/Bitmap"],function(t){function e(){this.bgcolor=o.COLORS.white,this.registerEvents("loaded","bitmapcreated")}var n=t("util/Class"),i=t("surface/layer/Layer");t("util/Img"),t("util/Binary"),t("async/Promise");var o=t("env/Settings");t("util/Box");var r=t("surface/element/Bitmap");return e.prototype.initialize=function(){e.parent.prototype.initialize.apply(this,arguments),$(this.dom).addClass("skitch-layer-background")},e.prototype.onElementAdded=function(t,n){e.parent.prototype.onElementAdded.apply(this,arguments),n instanceof r&&(n.dom&&n.dom.width>0?this.fire("loaded",this):n.once("loaded",function(){this.fire("loaded",this)},this))},e.prototype.getBitmap=function(){return this.hasBitmap()?this.elements[0]:null},e.prototype.hasBitmap=function(){return this.elements.length>0},e.prototype.onBeforeRenderElements=function(){this.fillWithColor(this.bgcolor)},e=n.define(e,i)}),define("surface/layer/Foreground",["require","util/Class","surface/layer/Layer"],function(t){function e(){this.registerEvents("elementselectionschanged")}var n=t("util/Class"),i=t("surface/layer/Layer"),o=0;return e.prototype.initialize=function(){e.parent.prototype.initialize.apply(this,arguments),$(this.dom).addClass("skitch-layer-foreground")},e.prototype.onAdded=function(){e.parent.prototype.onAdded.apply(this,arguments)},e.prototype.getSelectedElements=function(){var t=[];for(var e in this.elements)this.elements[e].selected&&t.push(this.elements[e]);return t},e.prototype.addElement=function(t){return t.box.height>=o&&t.box.width>=o?(t.on("selected",this.onElementSelectionChanged,this),t.on("unselected",this.onElementSelectionChanged,this),e.parent.prototype.addElement.apply(this,arguments)):void 0},e.prototype.removeElement=function(t){return t.off("selected",this.onElementSelectionChanged),t.off("unselected",this.onElementSelectionChanged),e.parent.prototype.removeElement.apply(this,arguments)},e.prototype.onElementSelectionChanged=function(t){this.fire("elementselectionschanged",t)},e=n.define(e,i)}),define("surface/layer/Tool",["require","util/Class","surface/layer/Layer"],function(t){function e(){}var n=t("util/Class"),i=t("surface/layer/Layer");return e.prototype.initialize=function(){e.parent.prototype.initialize.apply(this,arguments),$(this.dom).addClass("skitch-layer-tool")},e.prototype.clip=function(){},e=n.define(e,i)}),define("surface/element/BubbleText",["require","env/Settings","util/Color","surface/element/Text","util/Text","util/Class","graphics/Point","graphics/CanvasGraphics","log/Logger"],function(t){function e(){this.font={name:"Helvetica,Arial,sans-serif",size:60,weight:"bold"},this.baseline="top",this.scratchCanvas=null}t("env/Settings");var n=t("util/Color"),i=t("surface/element/Text"),o=t("util/Text"),r=t("util/Class");t("graphics/Point");var s=t("graphics/CanvasGraphics");return t("log/Logger").instance("surface.element.BubbleText"),e.prototype.initGraphics=function(t){var t=t||this.graphics;return e.parent.prototype.initGraphics.apply(this,arguments),t.strokeStyle(n.getStrokeColor(this.fill.color)),t.lineWidth(this.getLineWidth()),this},e.prototype.drawText=function(t,e,n,i){t.save(),t.shadowOffsetX(this.shadow.offset.x),t.shadowOffsetY(this.shadow.offset.y),t.shadowBlur(this.shadow.blur),t.strokeText(e,n,i),t.shadowOffsetX(0),t.shadowOffsetY(0),t.shadowBlur(0),t.fillText(e,n,i),t.restore()},e.prototype.updateText=function(){var t=this.scratchCanvas||s.create(100,100),e=this.position.x,n=this.position.y,i=this.font.size,r=1.1*i,a=o.decodeUTF8(this.value).split(/\r?\n/),l=this.getLineWidth(),c=0,h=0,u=0,p=0;t.font(this.getFontCss()),a.forEach(function(e,n){p=(n-1)*r,c=Math.max(c,t.measureText(e).width)}),p=0,t.font(this.getMinFontCss()),a.forEach(function(e,n){p=(n-1)*r,h=Math.max(h,t.measureText(e).width)}),p=0,t.font(this.getMaxFontCss()),a.forEach(function(e,n){p=(n-1)*r,u=Math.max(u,t.measureText(e).width)}),this.minWidth=h+2*this.getMinLineWidth(),this.maxWidth=u+2*this.getMaxLineWidth(),this.setBox(e-l,n-l,c+2*l,r*a.length+2*l)},i.prototype.calculateBox=function(){return this.updateText(),this.box},e=r.define(e,i)}),define("surface/element/Arrow",["require","util/Class","surface/element/Vector","env/Settings","surface/Serializer","util/Transformer","util/Geometry"],function(t){function e(){this.from={x:0,y:0},this.to={x:0,y:0},this.handles={from:{x:0,y:0},to:{x:0,y:0}},this.size=0,this.stroke={color:o.COLORS.transparent,join:"miter"}}var n=t("util/Class"),i=t("surface/element/Vector"),o=t("env/Settings"),r=t("surface/Serializer"),s=t("util/Transformer"),a=t("util/Geometry");return e.prototype.initialize=function(){this.shadow.color=o.SHADOW_COLOR,e.parent.prototype.initialize.apply(this,arguments)},e.prototype.deserialize=function(t,n){return e.parent.prototype.deserialize.apply(this,arguments),$.extend(!0,this,{from:n.extension.startPoint,to:n.extension.endPoint,size:n.extension.toolArrowSize}),this},e.prototype.initGraphics=function(t){var t=t||this.graphics,n=o.ARROW_STROKE_WIDTH;return e.parent.prototype.initGraphics.apply(this,arguments),t.strokeStyle(o.COLORS.transparent),this.layer&&(n/=this.layer.surface.scaling.x/this.scaling.x),t.lineWidth(n),this},e.prototype.setSelectedStyles=function(t){e.parent.prototype.setSelectedStyles.apply(this,arguments),t.lineWidth(o.SELECTION_STROKE_WIDTH/this.layer.surface.scaling.x/this.scaling.x)},e.prototype.draw=function(t){var e,n,i,o,r,t=t||this.graphics,s=this.from,a=this.to,l=this.size;o=a.x-s.x,r=a.y-s.y,e=Math.atan2(-r,o),n=Math.sqrt(o*o+r*r),this.handles.from={x:s.x,y:s.y},this.handles.to={x:a.x,y:a.y},i=25*l*l>n*n?n/5:l,t.translate(s.x,s.y),t.rotate(e),this.beginPath(t);var c=i,h=0,u=0,p=n,d=0,f=Math.sqrt((p-h)*(p-h)+(d-u)*(d-u)),g=.7*(c-1.5),m=2*g,y=1.1*m,v=g/2,x=1.5,w=.08,b=Math.max(i*w,x),A={x:0,y:0},T={x:A.x+f,y:A.y},C={x:T.x-m,y:A.y},E={x:T.x-y,y:A.y},S={x:A.x+f/2,y:A.y},k={x:(S.x+C.x)/2,y:S.y},D=(b+v)/2,L={x:C.x-(C.x-A.x)/2,y:A.y},B=((b+v)/2+b)/2,M={x:C.x,y:A.y-v},R={x:E.x,y:A.y-y/2},P={x:E.x,y:A.y+y/2},I={x:C.x,y:A.y+v},O={x:A.x,y:A.y-b},F={x:L.x,y:A.y-B},N={x:A.x,y:A.y+b},z={x:L.x,y:A.y+B},U={x:O.x-M.x,y:O.y-M.y},H=U.x*U.x+U.y*U.y;if(0>=H)U={x:0,y:0};else{var H=1/Math.sqrt(H);U.x*=H,U.y*=H}var U={x:O.x+U.x*1.5*b,y:O.y+U.y*1.5*b},q={x:U.x,y:-U.y},j={x:k.x,y:S.y-D},K={x:k.x,y:S.y+D};this.moveTo(O.x,O.y,t),t.bezierCurveTo(F.x,F.y,j.x,j.y,M.x,M.y),this.lineTo(R.x,R.y,t),this.lineTo(T.x,T.y,t),this.lineTo(P.x,P.y,t),this.lineTo(I.x,I.y,t),t.bezierCurveTo(K.x,K.y,z.x,z.y,N.x,N.y),t.bezierCurveTo(q.x,q.y,U.x,U.y,O.x,O.y),this.closePath(t),t.fill(),this.selected&&t.stroke(),this.calculateBox()},e.prototype.calculateBox=function(){return this.setBox(Math.min(this.from.x,this.to.x),Math.min(this.from.y,this.to.y),Math.abs(this.to.x-this.from.x),Math.abs(this.to.y-this.from.y)),this.box},e.prototype.manipulate=function(t,n){this.layer.surface.controller.activeTool.isShiftDown?"from"===this.activeHandle?this.from=a.rotateLockPoint(this.to,n):"to"===this.activeHandle&&(this.to=a.rotateLockPoint(this.from,n)):"from"===this.activeHandle?this.from=n:"to"===this.activeHandle&&(this.to=n),e.parent.prototype.manipulate.apply(this,arguments)},e.prototype.getEstimatedSize=function(){return this.stroke.width?this.stroke.width/o.MAX_STROKE_WIDTH/this.layer.surface.contentScaleFactor:this.size/32},e.prototype.move=function(t){this.from.x+=t.x,this.from.y+=t.y,this.to.x+=t.x,this.to.y+=t.y,e.parent.prototype.move.apply(this,arguments)},e.prototype.applyTransformation=function(t){this.from=s.transformPoint(t,this.from),this.to=s.transformPoint(t,this.to)},e.prototype.serialize=function(t){var n=s.transformPoint(t,this.from),i=s.transformPoint(t,this.to),o=this.size,a=e.parent.prototype.serialize.call(this,t);return $.extend(a,{extension:{type:"Arrow",startPoint:r.serializePoint(n),endPoint:r.serializePoint(i),toolArrowSize:o}}),a.strokeColor&&delete a.strokeColor,a},e=n.define(e,i)}),define("surface/element/Ellipse",["require","util/Class","surface/element/Vector","env/Settings","util/Transformer","surface/Serializer","util/Num"],function(t){function e(){this.center={x:0,y:0},this.radius={x:0,y:0},this.handles={left:{x:0,y:0},top:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}}}var n=t("util/Class"),i=t("surface/element/Vector"),o=t("env/Settings"),r=t("util/Transformer"),s=t("surface/Serializer"),a=t("util/Num"),l=1;return e.prototype.initialize=function(){this.shadow.color=o.SHADOW_COLOR,e.parent.prototype.initialize.apply(this,arguments)},e.prototype.deserialize=function(t,n){return n.extension.frame,$.extend(!0,this,{center:n.extension.center,radius:{x:n.extension.xradius,y:n.extension.yradius}}),e.parent.prototype.deserialize.apply(this,arguments),this},e.prototype.draw=function(t){var e,t=t||this.graphics,n=this.center,i=this.radius;i.x>0&&i.y>0&&(this.handles.left={x:n.x-i.x,y:n.y},this.handles.right={x:n.x+i.x,y:n.y},this.handles.top={x:n.x,y:n.y-i.y},this.handles.bottom={x:n.x,y:n.y+i.y},e=Math.max(i.x,i.y),this.beginPath(t),this.ellipse(n,i,t),t.stroke()),this.calculateBox()},e.prototype.calculateBox=function(){return this.setBox(this.center.x-this.radius.x,this.center.y-this.radius.y,2*this.radius.x,2*this.radius.y),this.box},e.prototype.manipulate=function(t,n){var i,o,r,s;"left"===this.activeHandle?n.x<this.box.left+this.box.width-l?(r=this.center.x+this.radius.x,this.radius.x=Math.abs(r-n.x)/2,this.center.x=Math.abs(n.x+this.radius.x)):(this.center.x=this.box.left+this.box.width-l,this.radius.x=l):"right"===this.activeHandle?n.x>this.box.left+l?(i=this.center.x-this.radius.x,this.radius.x=Math.abs(n.x-i)/2,this.center.x=Math.abs(i+this.radius.x)):(this.center.x=this.box.left+l,this.radius.x=l):"top"===this.activeHandle?n.y<this.box.top+this.box.height-l?(s=this.center.y+this.radius.y,this.radius.y=Math.abs(s-n.y)/2,this.center.y=Math.abs(n.y+this.radius.y)):(this.center.y=this.box.top+this.box.height-l,this.radius.y=l):"bottom"===this.activeHandle&&(n.y>this.box.top+l?(o=this.center.y-this.radius.y,this.radius.y=Math.abs(n.y-o)/2,this.center.y=Math.abs(o+this.radius.y)):(this.center.y=this.box.top+l,this.radius.y=l)),e.parent.prototype.manipulate.apply(this,arguments)},e.prototype.move=function(t){this.center.x+=t.x,this.center.y+=t.y,e.parent.prototype.move.apply(this,arguments)},e.prototype.applyTransformation=function(t){this.center=r.transformPoint(t,this.center),this.radius.x*=t[0],this.radius.y*=t[3]},e.prototype.serialize=function(t){var n=r.transformPoint(t,this.center),i=this.radius.x*t[0],o=this.radius.y*t[3],l=e.parent.prototype.serialize.call(this,t);return $.extend(l,{extension:{type:"Ellipse",center:s.serializePoint(n),xradius:a.fixed(i),yradius:a.fixed(o)}}),l.fillColor&&delete l.fillColor,l},e=n.define(e,i)}),define("surface/element/Line",["require","util/Class","util/Geometry","surface/element/Vector","util/Transformer","surface/Serializer"],function(t){function e(){this.from=null,this.to=null,this.shadow={offset:{x:0,y:0},blur:0},this.handles={from:{x:0,y:0},to:{x:0,y:0}}}var n=t("util/Class"),i=t("util/Geometry"),o=t("surface/element/Vector"),r=t("util/Transformer"),s=t("surface/Serializer");return e.prototype.deserialize=function(t,n){return $.extend(!0,this,{from:n.extension.startPoint,to:n.extension.endPoint}),e.parent.prototype.deserialize.apply(this,arguments),this},e.prototype.draw=function(t){var t=t||this.graphics,e=this.from,n=this.to;this.handles.from={x:e.x,y:e.y},this.handles.to={x:n.x,y:n.y},this.beginPath(t),this.moveTo(e.x,e.y,t),this.lineTo(n.x,n.y,t),t.stroke(),this.calculateBox()},e.prototype.calculateBox=function(){return this.setBox(Math.min(this.from.x,this.to.x),Math.min(this.from.y,this.to.y),Math.abs(this.to.x-this.from.x),Math.abs(this.to.y-this.from.y)),this.box},e.prototype.manipulate=function(t,n){this.layer.surface.controller.activeTool.isShiftDown?"from"===this.activeHandle?this.from=i.rotateLockPoint(this.to,n):"to"===this.activeHandle&&(this.to=i.rotateLockPoint(this.from,n)):"from"===this.activeHandle?this.from=n:"to"===this.activeHandle&&(this.to=n),e.parent.prototype.manipulate.apply(this,arguments)},e.prototype.move=function(t){this.from.x+=t.x,this.from.y+=t.y,this.to.x+=t.x,this.to.y+=t.y,e.parent.prototype.move.apply(this,arguments)},e.prototype.applyTransformation=function(t){this.from=r.transformPoint(t,this.from),this.to=r.transformPoint(t,this.to)},e.prototype.serialize=function(t){var n=r.transformPoint(t,this.from),i=r.transformPoint(t,this.to),o=$.extend(e.parent.prototype.serialize.call(this,t),{extension:{type:"Line",startPoint:s.serializePoint(n),endPoint:s.serializePoint(i)}});return o.fillColor&&delete o.fillColor,o},e=n.define(e,o)}),define("surface/element/Rectangle",["require","util/Transformer","util/Num","env/Settings","surface/element/Polygon","util/Class"],function(t){function e(){this.left=null,this.top=null,this.width=null,this.height=null,this.handles={tl:{x:0,y:0},tr:{x:0,y:0},bl:{x:0,y:0},br:{x:0,y:0}},this.cornerRadius=0}var n=t("util/Transformer"),i=t("util/Num"),o=t("env/Settings"),r=t("surface/element/Polygon"),s=t("util/Class"),a=1,l=1;return o.MAX_RECTANGLE_CORNER_RADIUS,e.prototype.initialize=function(){this.shadow.color=o.SHADOW_COLOR,this.vertices=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],e.parent.prototype.initialize.apply(this,arguments)},e.prototype.deserialize=function(t,n){var i,o,r,s,a,l=n.extension.vertices;for(o=l[0],i=1;i<l.length;i++)r=l[i],r.x!=o.x&&(s=Math.abs(r.x-o.x)),r.y!=o.y&&(a=Math.abs(r.y-o.y)),o.x+o.y>r.x+r.y&&(o=r);return $.extend(!0,this,{left:o.x,top:o.y,width:s,height:a,cornerRadius:n.extension.extension.cornerRadius||0}),e.parent.prototype.deserialize.apply(this,arguments),this},e.prototype.draw=function(t){var t=t||this.graphics,e=this.left,n=this.top,i=this.width,o=this.height,r=this.cornerRadius;this.handles.tl={x:this.left,y:this.top},this.handles.tr={x:this.left+this.width,y:this.top},this.handles.bl={x:this.left,y:this.top+this.height},this.handles.br={x:this.left+this.width,y:this.top+this.height},this.beginPath(t),0==r?this.rect(e,n,i,o,t):(r>0&&(r=Math.max(1,Math.min(this.cornerRadius,Math.min(i,o)/3))),this.moveTo(e+r,n,t),this.lineTo(e+i-r,n,t),this.quadraticCurveTo(e+i,n,e+i,n+r,t),this.lineTo(e+i,n+o-r,t),this.quadraticCurveTo(e+i,n+o,e+i-r,n+o,t),this.lineTo(e+r,n+o,t),this.quadraticCurveTo(e,n+o,e,n+o-r,t),this.lineTo(e,n+r,t),this.quadraticCurveTo(e,n,e+r,n,t)),t.stroke(),this.calculateBox()},e.prototype.calculateBox=function(){return this.setBox(this.left,this.top,this.width,this.height),this.box},e.prototype.manipulate=function(t,n){"tl"===this.activeHandle?(n.x<this.left+this.width-a?(this.width+=this.left-n.x,this.left=n.x):(this.left+=this.width-a,this.width=a),n.y<this.top+this.height-l?(this.height+=this.top-n.y,this.top=n.y):(this.top+=this.height-l,this.height=l)):"tr"===this.activeHandle?(this.width=n.x>this.left+a?Math.abs(n.x-this.left):a,n.y<this.top+this.height-l?(this.height+=this.top-n.y,this.top=n.y):(this.top+=this.height-l,this.height=l)):"bl"===this.activeHandle?(n.x<this.left+this.width-a?(this.width+=this.left-n.x,this.left=n.x):(this.left+=this.width-a,this.width=a),this.height=n.y>this.top+l?Math.abs(n.y-this.top):l):"br"===this.activeHandle&&(this.width=n.x>this.left+a?Math.abs(n.x-this.left):a,this.height=n.y>this.top+l?Math.abs(n.y-this.top):l),e.parent.prototype.manipulate.apply(this,arguments)},e.prototype.move=function(t){this.left+=t.x,this.top+=t.y,e.parent.prototype.move.apply(this,arguments)},e.prototype.applyTransformation=function(t){var e=n.transformPoint(t,{x:this.left,y:this.top});this.left=e.x,this.top=e.y,this.width*=t[0],this.height*=t[3],this.cornerRadius*=t[0]},e.prototype.toVertices=function(){return[{x:i.fixed(this.left),y:i.fixed(this.top)},{x:i.fixed(this.left+this.width),y:i.fixed(this.top)},{x:i.fixed(this.left+this.width),y:i.fixed(this.top+this.height)},{x:i.fixed(this.left),y:i.fixed(this.top+this.height)}]},e.prototype.serialize=function(t){var n=e.parent.prototype.serialize.call(this,t);return n.extension.extension={type:"Rectangle"},this.cornerRadius>0&&(n.extension.extension.cornerRadius=this.cornerRadius),n},e=s.define(e,r)}),define("surface/element/stamp/ApproveStamp",["require","util/Class","surface/element/stamp/Stamp"],function(t){function e(){this.defaultIconWidth=23,this.defaultIconHeight=17.5,this.defaultText="Approved",this.name="com.evernote.skitch.approved"}var n=t("util/Class"),i=t("surface/element/stamp/Stamp");return e.prototype={initialize:function(){e.parent.prototype.initialize.apply(this,arguments),this.fill.color="#00BC2F"},drawIcon:function(t){var e=t||this.graphics;e.save(),e.translate(this.position.x,this.position.y),e.scale(this.contentScaleFactor,this.contentScaleFactor),e.translate(-1*(this.defaultIconWidth/2),-1*(this.defaultIconHeight/2)),e.shadowColor("rgba(0, 0, 0, 0)"),e.beginPath(),e.moveTo(8.287,17.527),e.bezierCurveTo(7.686000000000001,17.527,7.113000000000001,17.283,6.7010000000000005,16.848000000000003),e.lineTo(.6050000000000004,10.454000000000002),e.bezierCurveTo(-.22999999999999954,9.577000000000002,-.19699999999999962,8.189000000000002,.6790000000000004,7.354000000000003),e.bezierCurveTo(1.5550000000000004,6.5180000000000025,2.943,6.553000000000003,3.7760000000000002,7.428000000000003),e.lineTo(8.285,12.157000000000004),e.lineTo(19.223,.679),e.bezierCurveTo(20.058,-.19599999999999995,21.445,-.22999999999999998,22.322,.6040000000000001),e.bezierCurveTo(23.197,1.439,23.232,2.826,22.396,3.701),e.lineTo(9.871,16.847),e.bezierCurveTo(9.458,17.281,8.885,17.527,8.287,17.527),e.closePath(),e.fill(),e.restore()}},e=n.define(e,i)}),define("surface/element/stamp/ExclaimStamp",["require","util/Class","surface/element/stamp/Stamp"],function(t){function e(){this.defaultIconWidth=5.6,this.defaultIconHeight=22,this.defaultText="Wow!",this.name="com.evernote.skitch.exclaim"}var n=t("util/Class"),i=t("surface/element/stamp/Stamp");return e.prototype={initialize:function(){e.parent.prototype.initialize.apply(this,arguments),this.fill.color="#FF8214"},drawIcon:function(t){var e=t||this.graphics;e.save(),e.translate(this.position.x,this.position.y),e.scale(this.contentScaleFactor,this.contentScaleFactor),e.translate(-1*(this.defaultIconWidth/2),-1*(this.defaultIconHeight/2)),e.shadowColor("rgba(0, 0, 0, 0)"),e.beginPath(),e.moveTo(2.822,17.484),e.bezierCurveTo(1.575,17.484,.5640000000000001,18.495,.5640000000000001,19.742),e.bezierCurveTo(.564,20.988,1.575,22,2.822,22),e.bezierCurveTo(4.068,22,5.077,20.988,5.077,19.742),e.bezierCurveTo(5.078,18.495,4.07,17.484,2.822,17.484),e.closePath(),e.moveTo(2.822,0),e.bezierCurveTo(1.3010000000000002,0,.06200000000000028,1.214,.004999999999999893,2.735),e.lineTo(.004999999999999893,2.855),e.bezierCurveTo(.004999999999999893,3.113,.037999999999999895,3.364,.1039999999999999,3.601),e.lineTo(1.2449999999999999,13.635000000000002),e.lineTo(1.25,13.635000000000002),e.bezierCurveTo(1.31,14.461000000000002,1.9889999999999999,15.117,2.825,15.117),e.bezierCurveTo(3.6590000000000003,15.117,4.3420000000000005,14.461,4.399,13.635000000000002),e.lineTo(4.404,13.635000000000002),e.lineTo(5.544,3.601),e.bezierCurveTo(5.606,3.376,5.637,3.138,5.641,2.893),e.bezierCurveTo(5.562,1.386,4.332,0,2.822,0),e.closePath(),e.fill(),e.restore()}},e=n.define(e,i)}),define("surface/element/stamp/PerfectStamp",["require","util/Class","surface/element/stamp/Stamp"],function(t){function e(){this.defaultIconWidth=20,this.defaultIconHeight=19,this.defaultText="Perfect.",this.name="com.evernote.skitch.perfect"}var n=t("util/Class"),i=t("surface/element/stamp/Stamp");return e.prototype={initialize:function(){e.parent.prototype.initialize.apply(this,arguments),this.fill.color="#ff1e64"},drawIcon:function(t){var e=t||this.graphics;e.save(),e.translate(this.position.x,this.position.y),e.scale(this.contentScaleFactor,this.contentScaleFactor),e.translate(-1*(this.defaultIconWidth/2),-1*(this.defaultIconHeight/2)),e.shadowColor("rgba(0, 0, 0, 0)"),e.beginPath(),e.moveTo(5.052,5.498),e.bezierCurveTo(5.566,5.506,5.99,5.379,6.337,5.104),e.bezierCurveTo(6.742999999999999,4.782,7.143,4.433,7.478,4.04),e.bezierCurveTo(9.035,2.202,10.828,.7120000000000002,13.23,.14400000000000013),e.bezierCurveTo(15.627,-.4239999999999998,18.348,.7540000000000001,19.486,2.833),e.bezierCurveTo(20.033,3.833,20.083000000000002,4.913,19.919,6.021000000000001),e.bezierCurveTo(19.73,7.283000000000001,19.229,8.417000000000002,18.490000000000002,9.445),e.bezierCurveTo(17.855,10.332,17.165000000000003,11.177,16.523000000000003,12.059000000000001),e.bezierCurveTo(15.530000000000003,13.422,14.711000000000004,14.877,14.260000000000003,16.519000000000002),e.bezierCurveTo(14.101000000000003,17.1,14.084000000000003,17.689,14.133000000000003,18.287000000000003),e.bezierCurveTo(14.149000000000003,18.467000000000002,14.142000000000003,18.653000000000002,14.112000000000002,18.834000000000003),e.bezierCurveTo(14.036000000000001,19.328000000000003,13.688000000000002,19.635,13.184000000000001,19.676000000000002),e.bezierCurveTo(12.662,19.717000000000002,12.155000000000001,19.615000000000002,11.667000000000002,19.441000000000003),e.bezierCurveTo(9.669000000000002,18.719,7.725000000000001,17.881000000000004,5.907000000000002,16.764000000000003),e.bezierCurveTo(4.469000000000002,15.879000000000003,3.155000000000002,14.850000000000003,2.0460000000000016,13.573000000000004),e.bezierCurveTo(.9820000000000015,12.348000000000004,.20700000000000163,10.973000000000004,.0410000000000017,9.331000000000003),e.bezierCurveTo(-.174,7.174,.41,5.275,2.034,3.781),e.bezierCurveTo(2.939,2.947,4.008,2.617,5.231,2.9370000000000003),e.bezierCurveTo(5.389,2.978,5.545,3.0420000000000003,5.694,3.115),e.bezierCurveTo(6.106,3.314,6.383,3.624,6.421,4.096),e.bezierCurveTo(6.46,4.584,6.183,4.906000000000001,5.804,5.142),e.bezierCurveTo(5.586,5.279,5.336,5.365,5.052,5.498),e.closePath(),e.fill(),e.restore()}},e=n.define(e,i)}),define("surface/element/stamp/QuestionStamp",["require","util/Class","surface/element/stamp/Stamp"],function(t){function e(){this.defaultIconWidth=14,this.defaultIconHeight=22,this.defaultText="What?",this.name="com.evernote.skitch.question"}var n=t("util/Class"),i=t("surface/element/stamp/Stamp");return e.prototype={initialize:function(){e.parent.prototype.initialize.apply(this,arguments),this.fill.color="#367BD9"},drawIcon:function(t){var e=t||this.graphics;e.save(),e.translate(this.position.x,this.position.y),e.scale(this.contentScaleFactor,this.contentScaleFactor),e.translate(-1*(this.defaultIconWidth/2),-1*(this.defaultIconHeight/2)),e.shadowColor("rgba(0, 0, 0, 0)"),e.beginPath(),e.moveTo(6.46,17.601),e.bezierCurveTo(5.27,17.601,4.306,18.587,4.306,19.802),e.bezierCurveTo(4.306,21.015,5.27,22,6.46,22),e.bezierCurveTo(7.648,22,8.612,21.015,8.612,19.802),e.bezierCurveTo(8.614,18.587,7.65,17.601,6.46,17.601),e.closePath(),e.moveTo(6.462,0),e.bezierCurveTo(4.156,0,2.018,.894,.583,2.454),e.bezierCurveTo(-.23099999999999998,3.3390000000000004,-.18800000000000006,4.731,.6809999999999999,5.564),e.bezierCurveTo(1.5459999999999998,6.396,2.9090000000000003,6.353,3.725,5.466),e.bezierCurveTo(4.335,4.799,5.362,4.4,6.462,4.4),e.bezierCurveTo(8.181,4.4,9.690999999999999,5.428000000000001,9.690999999999999,6.601000000000001),e.bezierCurveTo(9.690999999999999,7.773000000000001,8.181,8.801000000000002,6.461999999999999,8.801000000000002),e.bezierCurveTo(5.272999999999999,8.801000000000002,4.305999999999999,9.786000000000001,4.305999999999999,11.001000000000001),e.lineTo(4.305999999999999,13.199000000000002),e.bezierCurveTo(4.305999999999999,14.416000000000002,5.272999999999999,15.400000000000002,6.459999999999999,15.400000000000002),e.bezierCurveTo(7.647999999999999,15.400000000000002,8.611999999999998,14.416000000000002,8.611999999999998,13.199000000000002),e.lineTo(8.611999999999998,12.927000000000001),e.bezierCurveTo(11.709999999999997,12.113000000000001,13.998999999999999,9.587000000000002,13.998999999999999,6.601000000000002),e.bezierCurveTo(13.999,2.961,10.618,0,6.462,0),e.closePath(),e.fill(),e.restore()}},e=n.define(e,i)}),define("surface/element/stamp/RejectStamp",["require","util/Class","surface/element/stamp/Stamp"],function(t){function e(){this.defaultIconWidth=17,this.defaultIconHeight=17,this.defaultText="Rejected",this.name="com.evernote.skitch.rejected"}var n=t("util/Class"),i=t("surface/element/stamp/Stamp");return e.prototype={initialize:function(){e.parent.prototype.initialize.apply(this,arguments),this.fill.color="#ED1E1E"},drawIcon:function(t){var e=t||this.graphics;e.save(),e.translate(this.position.x,this.position.y),e.scale(this.contentScaleFactor,this.contentScaleFactor),e.translate(-1*(this.defaultIconWidth/2),-1*(this.defaultIconHeight/2)),e.shadowColor("rgba(0, 0, 0, 0)"),e.beginPath(),e.moveTo(11.506,8.501),e.lineTo(16.379,3.6279999999999992),e.bezierCurveTo(17.209,2.7989999999999995,17.209,1.4529999999999994,16.379,.6229999999999993),e.bezierCurveTo(15.549000000000003,-.20700000000000074,14.203000000000001,-.20700000000000063,13.373000000000001,.6229999999999993),e.lineTo(8.501,5.496),e.lineTo(3.628,.623),e.bezierCurveTo(2.798,-.20699999999999996,1.4530000000000003,-.20699999999999996,.6230000000000002,.623),e.bezierCurveTo(-.20699999999999974,1.4529999999999998,-.20699999999999974,2.7990000000000004,.6230000000000002,3.628),e.lineTo(5.495,8.501000000000001),e.lineTo(.6219999999999999,13.372000000000002),e.bezierCurveTo(-.20800000000000007,14.201000000000002,-.20800000000000007,15.548000000000002,.6219999999999999,16.378),e.bezierCurveTo(1.0379999999999998,16.793,1.5819999999999999,17.001,2.126,17.001),e.bezierCurveTo(2.669,17.001,3.213,16.793000000000003,3.627,16.378),e.lineTo(8.5,11.506),e.lineTo(13.373000000000001,16.378),e.bezierCurveTo(13.787,16.793,14.332,17.001,14.877,17.001),e.bezierCurveTo(15.418000000000001,17.001,15.963000000000001,16.793000000000003,16.377000000000002,16.378),e.bezierCurveTo(17.207,15.548,17.207,14.201,16.377000000000002,13.372),e.lineTo(11.506,8.501),e.closePath(),e.fill(),e.restore()}},e=n.define(e,i)}),define("surface/element/ElementFactory",["require","util/Class","surface/layer/Background","surface/layer/Foreground","surface/element/Bitmap","surface/element/BubbleText","surface/element/Vector","surface/element/Arrow","surface/element/Ellipse","surface/element/Line","surface/element/Rectangle","surface/element/stamp/ApproveStamp","surface/element/stamp/ExclaimStamp","surface/element/stamp/PerfectStamp","surface/element/stamp/QuestionStamp","surface/element/stamp/RejectStamp"],function(t){function e(){}var n=t("util/Class"),i=t("surface/layer/Background"),o=t("surface/layer/Foreground"),r=t("surface/element/Bitmap"),s=t("surface/element/BubbleText"),a=t("surface/element/Vector"),l=t("surface/element/Arrow"),c=t("surface/element/Ellipse"),h=t("surface/element/Line"),u=t("surface/element/Rectangle"),p=t("surface/element/stamp/ApproveStamp"),d=t("surface/element/stamp/ExclaimStamp"),f=t("surface/element/stamp/PerfectStamp"),g=t("surface/element/stamp/QuestionStamp"),m=t("surface/element/stamp/RejectStamp"),y={Layer:{BACKGROUND_LAYER_ID:i,ANNOTATION_LAYER_ID:o,TEXT_LAYER_ID:o},Bitmap:r,Text:s,Vector:a,Highlighter:a,"Vector.Arrow":l,"Vector.Ellipse":c,"Vector.Line":h,"Vector.Polygon.Rectangle":u},v={"com.evernote.skitch.approved":p,"com.evernote.skitch.exclaim":d,"com.evernote.skitch.perfect":f,"com.evernote.skitch.question":g,"com.evernote.skitch.rejected":m};return e.createFrom=function(t,e){var n,i,o,r;for(i=t.type,o=t.extension;o;)o.type&&(i+="."+o.type),o=o.extension;return n="Stamp"==i?v[t.stampName]:y[i]||a,"Layer"===i&&(n=n[t.layerId]),/^Bitmap/.test(i)&&(e=$.extend(e,{uuid:t.uri&&t.uri.split("///")[1]})),r=new n(e)},e=n.define(e)}),define("surface/action/StyleAction",["require","util/Class","util/Color","surface/element/Vector"],function(t){function e(){this.oldStyles=[],this.newStyle={stroke:{color:null,width:null},fill:{color:null},font:{size:null}}}var n=t("util/Class"),i=t("util/Color"),o=t("surface/element/Vector");return e.prototype.undo=function(){var t,e,n;for(t=0;t<this.oldStyles.length;t++){if(e=this.oldStyles[t].style,n=this.oldStyles[t].element,e.size&&(n.size=e.size),e.stroke&&e.stroke.color){var r=new i(n.stroke.color),s=new i(e.stroke.color);r.r=s.r,r.g=s.g,r.b=s.b,n.stroke.color=r.toRGBA()}if(e.stroke&&e.stroke.width&&(n.stroke.width=e.stroke.width,n.stroke.width=n instanceof o&&new i(n.stroke.color).a<1?2*e.stroke.width:e.stroke.width),e.fill&&e.fill.color){var r=new i(n.fill.color),s=new i(e.fill.color);r.r=s.r,r.g=s.g,r.b=s.b,n.fill.color=r.toRGBA()}n.font&&e.font&&e.font.size&&(n.font.size=e.font.size),n.layer.render()}},e.prototype.run=function(){var t,e,n=this.newStyle;for(t=0;t<this.oldStyles.length;t++){if(e=this.oldStyles[t].element,n.size&&(e.size=n.size),n.stroke&&n.stroke.color){var r=new i(e.stroke.color),s=new i(n.stroke.color);r.r=s.r,r.g=s.g,r.b=s.b,e.stroke.color=r.toRGBA()}if(n.stroke&&n.stroke.width&&(e.stroke.width=n.stroke.width,e.stroke.width=e instanceof o&&new i(e.stroke.color).a<1?2*n.stroke.width:n.stroke.width),n.fill&&n.fill.color){var r=new i(e.fill.color),s=new i(n.fill.color);r.r=s.r,r.g=s.g,r.b=s.b,e.fill.color=r.toRGBA()}e.font&&n.font&&n.font.size&&(e.font.size=n.font.size),e.layer.render()}},n.define(e)}),define("surface/tool/Tool",["require","util/Class","util/Geometry"],function(t){function e(){this.name=null,this.started=!1,this.surface=null,this.color=null,this.size=null,this.cursor=null,this.isShiftKeyDown=!1,this.registerEvents("started","updated","stopped","afterstop","action")}var n=t("util/Class"),i=t("util/Geometry");return e.prototype.onPointerDown=function(){},e.prototype.onPointerMove=function(){},e.prototype.onPointerUp=function(){},e.prototype.onPointerOut=function(){},e.prototype.onPointerOver=function(){},e.prototype.onDoubleClick=function(){},e.prototype.onTap=function(){},e.prototype.onDoubleTap=function(){},e.prototype.onHold=function(){},e.prototype.onDragStart=function(){},e.prototype.onDrag=function(){},e.prototype.onDragEnd=function(){},e.prototype.onGestureStart=function(){},e.prototype.onGestureChange=function(){},e.prototype.onGestureEnd=function(){},e.prototype.onInertiaStart=function(){},e.prototype.onMouseWheel=function(){},e.prototype.onKeyDown=function(){},e.prototype.onKeyUp=function(){},e.prototype.onKeyPress=function(){},e.prototype.onResize=function(){},e.prototype.start=function(){this.started=!0,this.fire("started",this)
},e.prototype.stop=function(){this.started=!1,this.fire("stopped",this)},e.prototype.update=function(){this.fire("updated",this)},e.prototype.afterStop=function(){this.fire("afterstop",this)},e.prototype.cancel=function(){this.started=!1},e.prototype.use=function(){},e.prototype.release=function(){},e.prototype.rotateLockPoint=function(t,e){return i.rotateLockPoint(t,e)},e=n.define(e)}),define("surface/action/CropAction",["require","util/Class","util/Box"],function(t){function e(){this.surface=null,this.lastClip={top:0,left:0,width:0,height:0},this.clip={top:0,left:0,width:0,height:0}}var n=t("util/Class"),i=t("util/Box");return e.prototype.undo=function(){if(this.surface.setClip(this.lastClip),this.surface.background.hasBitmap()){var t=this.surface.background.getBitmap();t.clipRect=i.intersection(t.box,this.lastClip)}this.surface.fit()},e.prototype.run=function(){this.surface.setClip(this.clip),this.surface.removeElementsOutsideClip(this.clip),this.surface.fit()},n.define(e)}),define("surface/tool/CropTool",["require","util/Class","surface/tool/Tool","util/Box","env/Settings","graphics/CanvasGraphics","graphics/Point","surface/action/CropAction","util/Include"],function(t){function e(){this.element=null,this.isCropping=!1,this.clipTopLeft=null,this.clipBottomRight=null,this.CROP_APPLY_TEXT="Apply",this.CROP_CANCEL_TEXT="Cancel"}var n=t("util/Class"),i=t("surface/tool/Tool"),o=t("util/Box"),r=t("env/Settings"),s=t("graphics/CanvasGraphics"),a=t("graphics/Point"),l=t("surface/action/CropAction"),c=t("util/Include");return e.isCropping=!1,e.prototype.initialize=function(){c.CSS("cropbar.css")},e.prototype.use=function(t){this.enterCropMode(t)},e.prototype.release=function(t){this.exitCropMode(t)},e.prototype.enterCropMode=function(){function t(t,e){var n=0,i=0,o=0,r=0;do n+=e.offsetLeft-e.scrollLeft,i+=e.offsetTop-e.scrollTop;while(e=e.offsetParent);return o=t.pageX-n,r=t.pageY-i,{x:o,y:r}}if(!this.isCropping&&(this.isCropping=!0,!this.element)){this.started=!0;var e=this.surface.margin;this.surface.margin=r.CROP_MARGIN,this.surface.fit(),this.surface.margin=e;var n=this.surface.getClip(),i=new a(n.left,n.top,"surface").relativeTo("dom"),l=new a(n.left+n.width,n.top+n.height,"surface").relativeTo("dom");this.clipTopLeft=i,this.clipBottomRight=l;var c=$(this.surface.dom).width(),h=$(this.surface.dom).height(),u=s.create(c,h),p=u.context.canvas;$(p).attr("touch-action","none").addClass("skitch-layer").css({display:"block",position:"absolute",top:"0px",left:"0px"});var d=!1,f=20,g="TopLeft",m=0,y=0,v={x:0,y:0},x={},w={};$(u.context.canvas).on(r.EVENTS.pointerdown,function(e){v=t(e.originalEvent,p),d=!0;var n=Math.min(i.x,l.x),o=Math.max(i.x,l.x),r=Math.min(i.y,l.y),s=Math.max(i.y,l.y),a={},c={};a.x=Math.round(n),a.y=Math.round(r),c.x=Math.round(o),c.y=Math.round(s),x.x=a.x,x.y=a.y,w.x=c.x,w.y=c.y,Math.sqrt(Math.pow(v.x-a.x,2)+Math.pow(v.y-a.y,2))<f?g="TopLeft":Math.sqrt(Math.pow(v.x-c.x,2)+Math.pow(v.y-c.y,2))<f?g="BottomRight":Math.sqrt(Math.pow(v.x-c.x,2)+Math.pow(v.y-a.y,2))<f?g="TopRight":Math.sqrt(Math.pow(v.x-a.x,2)+Math.pow(v.y-c.y,2))<f?g="BottomLeft":v.x>=a.x&&v.x<=c.x&&v.y>=a.y&&v.y<=c.y?(g="Drag",m=v.x-a.x,y=v.y-a.y):g="None",i.x=a.x,i.y=a.y,l.x=c.x,l.y=c.y}),$(u.context.canvas).on(r.EVENTS.pointermove,function(e){if(v=t(e.originalEvent,p),d){var r=Math.min(i.x,l.x),s=Math.max(i.x,l.x),c=Math.min(i.y,l.y),h=Math.max(i.y,l.y);i.x=Math.round(r),i.y=Math.round(c),l.x=Math.round(s),l.y=Math.round(h);var u=new a(n.left,n.top,"surface").relativeTo("dom"),f=new a(n.left+n.width,n.top+n.height,"surface").relativeTo("dom"),x=function(t,e,n){return Math.min(Math.max(t,e),n)};if("TopLeft"==g)i.x=x(v.x,u.x,f.x),i.y=x(v.y,u.y,f.y);else if("BottomRight"==g)l.x=x(v.x,u.x,f.x),l.y=x(v.y,u.y,f.y);else if("TopRight"==g)l.x=x(v.x,u.x,f.x),i.y=x(v.y,u.y,f.y);else if("BottomLeft"==g)i.x=x(v.x,u.x,f.x),l.y=x(v.y,u.y,f.y);else if("Drag"==g){var w=l.x-i.x,A=l.y-i.y;i.x,i.y,l.x,l.y,i.x=v.x-m,i.y=v.y-y,l.x=i.x+w,l.y=i.y+A;var T=o.containsPoints({top:u.y,left:u.x,width:f.x-u.x,height:f.y-u.y},[i,l]);T||(i.x<u.x&&(i.x=u.x,l.x=i.x+w),i.y<u.y&&(i.y=u.y,l.y=i.y+A),l.x>f.x&&(l.x=f.x,i.x=l.x-w),l.y>f.y&&(l.y=f.y,i.y=l.y-A))}}b()}),$(u.context.canvas).on(r.EVENTS.pointerup,function(){d=!1});var b=function(){var t=u.context.canvas.width,e=u.context.canvas.height;u.clearRect(0,0,t,e),u.fillStyle("rgba(0,0,0,.35)"),u.globalAlpha(1);var n=Math.min(i.x,l.x),o=Math.max(i.x,l.x),r=Math.min(i.y,l.y),s=Math.max(i.y,l.y),a={},c={};a.x=Math.round(n),a.y=Math.round(r),c.x=Math.round(o),c.y=Math.round(s),u.fillRect(0,0,Math.round(a.x),e),u.fillRect(Math.round(c.x),0,Math.round(t-c.x),Math.round(e)),u.fillRect(Math.round(a.x),0,Math.round(c.x-a.x),Math.round(a.y)),u.fillRect(Math.round(a.x),Math.round(c.y),Math.round(c.x-a.x),Math.round(e-c.y)),u.lineWidth(1),u.globalAlpha(.25);var h=function(t,e,n,i){u.beginPath(),u.moveTo(t,e),u.lineTo(n,i),u.stroke()},p=Math.floor((c.x-a.x)/3),d=Math.floor((c.y-a.y)/3);u.strokeStyle("rgb(0,0,0)"),u.strokeRect(a.x+1+.5,a.y+1+.5,p-2,d-2),u.strokeRect(a.x+p+1+.5,a.y+1+.5,p-2,d-2),u.strokeRect(a.x+p+p+1+.5,a.y+1+.5,a.x+.5+c.x-a.x-1-(a.x+p+p+1+.5)-1,d-2),u.strokeRect(a.x+1+.5,a.y+d+1+.5,p-2,d-2),u.strokeRect(a.x+p+1+.5,a.y+d+1+.5,p-2,d-2),u.strokeRect(a.x+p+p+1+.5,a.y+d+1+.5,a.x+.5+c.x-a.x-1-(a.x+p+p+1+.5)-1,d-2),u.strokeRect(a.x+1+.5,a.y+d+d+1+.5,p-2,a.y+.5+c.y-a.y-1-(a.y+d+d+1)-1),u.strokeRect(a.x+p+1+.5,a.y+d+d+1+.5,p-2,a.y+.5+c.y-a.y-1-(a.y+d+d+1)-1),u.strokeRect(a.x+p+p+1+.5,a.y+d+d+1+.5,a.x+.5+c.x-a.x-1-(a.x+p+p+1+.5)-1,a.y+.5+c.y-a.y-1-(a.y+d+d+1)-1),u.globalAlpha(.5),u.strokeStyle("rgb(255,255,255)"),h(a.x+p+.5,a.y+.5,a.x+p+.5,c.y-1.5),h(a.x+p+p+.5,a.y+.5,a.x+p+p+.5,c.y-1.5),h(a.x+1.5,a.y+d+.5,a.x+p,a.y+d+.5),h(a.x+1+p,a.y+d+.5,a.x+p+p,a.y+d+.5),h(a.x+1.5+p+p,a.y+d+.5,c.x-.5,a.y+d+.5),h(a.x+1.5,a.y+d+d+.5,a.x+p,a.y+d+d+.5),h(a.x+1+p,a.y+d+d+.5,a.x+p+p,a.y+d+d+.5),h(a.x+1.5+p+p,a.y+d+d+.5,c.x-.5,a.y+d+d+.5),u.strokeRect(a.x+.5,a.y+.5,c.x-a.x-1,c.y-a.y-1),u.globalAlpha(1);var g=!1,m=16,y=3;!g&&Math.sqrt(Math.pow(v.x-a.x,2)+Math.pow(v.y-a.y,2))<f?(u.fillStyle("rgba(153, 153, 153, 1)"),g=!0):u.fillStyle("rgba(100, 100, 100, 1)"),u.beginPath(),u.moveTo(a.x-y,a.y-y),u.lineTo(a.x-y+m,a.y-y),u.lineTo(a.x-y+m,a.y-y+m/2-1),u.lineTo(a.x-y+m/2-1,a.y-y+m/2-1),u.lineTo(a.x-y+m/2-1,a.y-y+m),u.lineTo(a.x-y,a.y-y+m),u.closePath(),u.fill(),u.fillStyle("rgba(255, 255, 255, 1)"),u.lineWidth(2),u.stroke(),!g&&Math.sqrt(Math.pow(v.x-c.x,2)+Math.pow(v.y-a.y,2))<f?(u.fillStyle("rgba(153, 153, 153, 1)"),g=!0):u.fillStyle("rgba(100, 100, 100, 1)"),u.beginPath(),u.moveTo(c.x+y,a.y-y),u.lineTo(c.x+y,a.y-y+m),u.lineTo(c.x+y-m/2+1,a.y-y+m),u.lineTo(c.x+y-m/2+1,a.y-y+m/2-1),u.lineTo(c.x+y-m,a.y-y+m/2-1),u.lineTo(c.x+y-m,a.y-y),u.closePath(),u.fill(),u.fillStyle("rgba(255, 255, 255, 1)"),u.lineWidth(2),u.stroke(),!g&&Math.sqrt(Math.pow(v.x-c.x,2)+Math.pow(v.y-c.y,2))<f?(u.fillStyle("rgba(153, 153, 153, 1)"),g=!0):u.fillStyle("rgba(100, 100, 100, 1)"),u.beginPath(),u.moveTo(c.x+y,c.y+y),u.lineTo(c.x+y-m,c.y+y),u.lineTo(c.x+y-m,c.y+y-m/2+1),u.lineTo(c.x+y-m/2+1,c.y+y-m/2+1),u.lineTo(c.x+y-m/2+1,c.y+y-m),u.lineTo(c.x+y,c.y+y-m),u.closePath(),u.fill(),u.fillStyle("rgba(255, 255, 255, 1)"),u.lineWidth(2),u.stroke(),!g&&Math.sqrt(Math.pow(v.x-a.x,2)+Math.pow(v.y-c.y,2))<f?(u.fillStyle("rgba(153, 153, 153, 1)"),g=!0):u.fillStyle("rgba(100, 100, 100, 1)"),u.beginPath(),u.moveTo(a.x-y,c.y+y),u.lineTo(a.x-y,c.y+y-m),u.lineTo(a.x-y+m/2-1,c.y+y-m),u.lineTo(a.x-y+m/2-1,c.y+y-m/2+1),u.lineTo(a.x-y+m,c.y+y-m/2+1),u.lineTo(a.x-y+m,c.y+y),u.closePath(),u.fill(),u.fillStyle("rgba(255, 255, 255, 1)"),u.lineWidth(2),u.stroke()};this.resizeHandler=function(t,e){var n=new a(i.x,i.y,"dom").relativeTo("surface"),o=new a(l.x,l.y,"dom").relativeTo("surface"),s=A.surface.margin;A.surface.margin=r.CROP_MARGIN,A.surface.fit(),A.surface.margin=s;var c=n.relativeTo("dom"),h=o.relativeTo("dom");i.x=c.x,i.y=c.y,l.x=h.x,l.y=h.y,u.setWidth(t),u.setHeight(e),b()},this.surface.on("resize",this.resizeHandler),b(),$(this.surface.dom).append(u.context.canvas),this.cropCanvas=u.context.canvas,this.previousTool=this.surface.controller.previousTool,this.previousTool||(this.previousTool=this.surface.controller.tools.arrow),this.cropDiv=$('<div class="skitchCropOptions skitchVisible"><div class="skitchVisible"><div  class="skitchVisible" id="skitchCancelCrop">'+this.CROP_CANCEL_TEXT+'</div><div  class="skitchVisible" id="skitchApplyCrop">'+this.CROP_APPLY_TEXT+"</div></div></div>").get(0);var A=this;$("#skitchApplyCrop",this.cropDiv).click(function(){A.applyCrop()}),$("#skitchCancelCrop",this.cropDiv).click(function(){A.cancelCrop()}),$(this.surface.dom).append(this.cropDiv)}},e.prototype.applyCrop=function(){var t=Math.min(this.clipTopLeft.x,this.clipBottomRight.x),e=Math.max(this.clipTopLeft.x,this.clipBottomRight.x),n=Math.min(this.clipTopLeft.y,this.clipBottomRight.y),i=Math.max(this.clipTopLeft.y,this.clipBottomRight.y),s={},c={};s.x=t,s.y=n,c.x=e,c.y=i,s=new a(s.x,s.y,"dom").relativeTo("surface"),c=new a(c.x,c.y,"dom").relativeTo("surface");var h={top:s.y,left:s.x,width:c.x-s.x,height:c.y-s.y},u=this.surface.getClip(),p=!0;if(o.intersectsBox(u,h),p&&(h.width>r.MIN_CROP_SIZE||h.height>r.MIN_CROP_SIZE)){var d=o.intersection(u,h),f=new l({surface:this.surface,lastClip:u,clip:d});this.fire("action",this,f),this.surface.setClip(d),this.surface.removeElementsOutsideClip(d)}this.removeAndResetView(),this.surface.zoomEnabled,this.surface.zoomEnabled=!0,this.surface.controller.useTool(this.previousTool)},e.prototype.cancelCrop=function(){this.removeAndResetView(),this.surface.zoomEnabled,this.surface.zoomEnabled=!0,this.surface.controller.useTool(this.previousTool)},e.prototype.exitCropMode=function(){this.cropDiv&&this.removeAndResetView(),i.prototype.stop.call(this),this.resizeHandler&&(this.surface.off("resize",this.resizeHandler),this.resizeHandler=null),this.started=!1},e.prototype.removeAndResetView=function(){$(this.cropDiv).remove(),$(this.cropCanvas).remove(),this.cropDiv=null,this.surface.fit().render(),this.isCropping=!1},e.prototype.start=function(){},e.prototype.stop=function(){},e=n.define(e,i)}),define("surface/tool/ZoomTool",["require","util/Class","util/Transformer","util/Box","graphics/CanvasGraphics","surface/layer/Buffer","env/Settings","graphics/Point","surface/tool/Tool"],function(t){function e(){this.offset=null,this.from=null,this.to=null}var n=t("util/Class");t("util/Transformer"),t("util/Box");var i=t("graphics/CanvasGraphics");t("surface/layer/Buffer"),t("env/Settings");var o=t("graphics/Point"),r=t("surface/tool/Tool");return e.prototype.onPointerDown=function(){},e.prototype.onPointerMove=function(t,e){this.started?this.update(t,e):this.start(t)},e.prototype.onPointerUp=function(t){this.started&&this.stop(t)},e.prototype.start=function(t){var n=this.surface,r=n.buffer,s=n.getClip();this.from=t,this.offset=o(0,0,"clip").relativeTo("surface"),r.resize(s.width/i.pixelRatio,s.height/i.pixelRatio),r.resetTransformation(),r.translateBy(-this.offset.x,-this.offset.y),r.paste(n.background,0,0,!0),r.paste(n.foreground,0,0,!0),this.update(t,1),this.hideLayers(),e.parent.prototype.start.apply(this,arguments)},e.prototype.stop=function(){this.surface.active.clear(),this.surface.setTransformation(this.surface.active.transformation),this.surface.render(),this.showLayers(),e.parent.prototype.stop.apply(this,arguments)},e.prototype.update=function(t,n){var i=this.surface.active,o=t.x-this.from.x,r=t.y-this.from.y,s=this.surface.constrainPan({x:o,y:r});this.to=t,n&&i.scaleBy(n,n,t.x,t.y),i.translateBy(s.x,s.y),i.clear(),i.graphics.save(),i.graphics.transform.apply(i.graphics,i.transformation),i.graphics.drawImage(this.surface.buffer.graphics.context.canvas,this.offset.x,this.offset.y),i.graphics.restore(),e.parent.prototype.update.apply(this,arguments),this.from=t},e.prototype.hideLayers=function(){$(this.surface.background.dom).hide(),$(this.surface.foreground.dom).hide()},e.prototype.showLayers=function(){$(this.surface.background.dom).show(),$(this.surface.foreground.dom).show()},e=n.define(e,r)}),define("surface/action/ManipulateAction",["require","util/Class","surface/element/Text","surface/element/stamp/Stamp"],function(t){function e(){this.element=null,this.handle=null,this.from={x:0,y:0},this.to={x:0,y:0}}var n=t("util/Class"),i=t("surface/element/Text"),o=t("surface/element/stamp/Stamp");return e.prototype.manipulate=function(t,e,n,r,s){this.element.activeHandle=this.handle,this.element.manipulate(t,e),this.element instanceof i&&n&&(this.element.font.size=n),this.element instanceof o&&"undefined"!=r&&(this.element.angle=r,this.element.tail=s),this.element.activeHandle=null,this.element.layer.render()},e.prototype.undo=function(){this.manipulate(this.to,this.from,this.fromFontSize,this.fromAngle,this.fromTail)},e.prototype.run=function(){this.manipulate(this.from,this.to,this.toFontSize,this.toAngle,this.toTail)},n.define(e)}),define("surface/action/MoveAction",["require","util/Class"],function(t){function e(){this.elements=null,this.from={x:0,y:0},this.to={x:0,y:0}}var n=t("util/Class");return e.prototype.move=function(t){var e,n,i=this.elements||[];for(e=0;e<i.length;e++)n=i[e],n.move({x:t.x,y:t.y}),n.layer.render()},e.prototype.undo=function(){this.move({x:this.from.x-this.to.x,y:this.from.y-this.to.y})},e.prototype.run=function(){this.move({x:this.to.x-this.from.x,y:this.to.y-this.from.y})},n.define(e)}),define("surface/tool/SelectTool",["require","env/Settings","util/Obj","surface/tool/Tool","util/Color","surface/action/ManipulateAction","surface/action/DeleteAction","surface/layer/Buffer","surface/action/MoveAction","util/Num","util/Box","surface/element/BubbleText","surface/element/stamp/Stamp","surface/element/Vector","util/Class","graphics/Point"],function(t){function e(){this.buffer=null,this.active=null,this.element=null,this.handle=null,this.elements=null,this.manipulating=null,this.fromFontSize=null,this.toFontSize=null,this.moved=!1,this.multiSelect=!1,this.preventSelectChange=!1}var n=t("env/Settings");t("util/Obj");var i=t("surface/tool/Tool"),o=t("util/Color"),r=t("surface/action/ManipulateAction"),s=t("surface/action/DeleteAction"),a=t("surface/layer/Buffer"),l=t("surface/action/MoveAction"),c=t("util/Num"),h=t("util/Box"),u=t("surface/element/BubbleText"),p=t("surface/element/stamp/Stamp"),d=t("surface/element/Vector"),f=t("util/Class");t("graphics/Point");var g;return e.prototype.initialize=function(){this.elements=[],this.startPoint=null,this.from=null,this.to=null,this.active=this.surface.active,this.buffer=new a({surface:this.surface})},e.prototype.onPointerDown=function(t){if(this.element=this.surface.controller.activeElement,this.handle=this.surface.controller.activeHandle,this.multiSelect=this.surface.controller.shiftKey,this.element instanceof p&&this.element.selected){var e=t.distance(this.element.handles.t1);e<2*n.HANDLE_RADIUS&&(this.element.tail=!0,this.preventSelectChange=!0,this.surface.render())}},e.prototype.onPointerMove=function(t,e){this.started?this.update(t,e):(this.element&&!this.element.selected&&((!this.multiSelect||this.moved)&&this.unselectAll(),this.select(this.element),this.surface.foreground.render()),this.start(t)),this.moved=!0},e.prototype.onPointerUp=function(t){var e=!1;this.started&&this.stop(t),this.multiSelect?this.element&&!this.moved&&this.toggle(this.element):this.element&&(e=this.element.selected,this.moved||(this.unselectAll(),e?this.unselect(this.element):this.select(this.element))),this.moved=!1,this.preventSelectChange=!1},e.prototype.toggle=function(t){t.selected?this.unselect(t):this.select(t)},e.prototype.start=function(t){this.startPoint=t,this.from=this.startPoint,g=this.surface.getBox(),this.to={x:0,y:0},this.manipulating=this.handle&&this.element;var n=this.elements.map(function(t){return t.getBox()});this.union=h.union(n),this.manipulating?(this.manipulating instanceof u?(this.fromFontSize=this.manipulating.font.size,this.toFontSize=this.manipulating.font.size):(this.fromFontSize=null,this.toFontSize=null),this.manipulating instanceof p?(this.fromAngle=this.manipulating.angle,this.toAngle=this.manipulating.angle,this.fromTail=this.manipulating.tail,this.toTail=this.manipulating.tail):(this.fromAngle=null,this.toAngle=null,this.fromTail=null,this.toTail=null),this.manipulating.handle(this.handle),this.manipulating.hide(),this.drawElement(this.manipulating)):(this.copySelectedElementsToBuffer(),this.drawBuffer({x:this.union.left,y:this.union.top}),this.hideSelectedElements()),e.parent.prototype.start.apply(this,arguments)},e.prototype.stop=function(t){var n,i,o,s,a=this.elements.slice(0);if(this.to=t,this.manipulating)this.manipulating.fire("manipulated",this.manipulating,this.from,this.to),this.manipulating.show(),s=new r({element:this.manipulating,handle:this.manipulating.activeHandle,from:this.startPoint,to:this.to,fromFontSize:this.fromFontSize,toFontSize:this.toFontSize,fromAngle:this.fromAngle,toAngle:this.toAngle,fromTail:this.fromTail,toTail:this.toTail}),this.manipulating=null;else{for(n=0;n<a.length;n++)i=a[n],o={x:c.fixed((this.to.x-this.startPoint.x)/i.scaling.x),y:c.fixed((this.to.y-this.startPoint.y)/i.scaling.y)},i.hidden=!1,i.move(o);this.buffer.clear(),s=new l({elements:a,from:this.startPoint,to:this.to})}this.fire("action",this,s),$(this.surface.foreground.dom).show(),e.parent.prototype.stop.apply(this,arguments),this.active.clear(),this.surface.foreground.render(),this.active.setTransformation(this.surface.transformation),this.from=null},e.prototype.update=function(t){this.to=t,this.manipulating?(this.manipulating instanceof u?this.toFontSize=this.manipulating.font.size:this.manipulating instanceof p&&(this.manipulating.updateAngle({x:this.to.x-this.manipulating.position.x,y:this.to.y-this.manipulating.position.y}),this.toAngle=this.manipulating.angle,this.toTail=this.manipulating.tail),this.manipulating.manipulate(this.from,this.to),this.drawElement(this.manipulating)):this.drawBuffer({x:this.union.left+this.to.x-this.startPoint.x,y:this.union.top+this.to.y-this.startPoint.y}),this.from=t,e.parent.prototype.update.apply(this,arguments)},e.prototype.drawElement=function(t){this.active.graphics.save(),this.active.clear(),this.active.initGraphics(),t.render(this.active.graphics),this.active.graphics.restore()},e.prototype.drawBuffer=function(t){this.active.graphics.save(),this.active.clear(),this.active.initGraphics(),this.active.graphics.drawImage(this.buffer.graphics.context.canvas,t.x,t.y,this.buffer.graphics.getWidth()/this.surface.scaling.x,this.buffer.graphics.getHeight()/this.surface.scaling.y),this.active.graphics.restore()},e.prototype.copySelectedElementsToBuffer=function(){var t=this.union,e=this.surface,n=this.buffer;n.resize(t.width*e.scaling.x,t.height*e.scaling.y),n.resetTransformation(),n.translateBy(-t.left,-t.top),n.scaleBy(e.scaling.x,e.scaling.y,t.left,t.top),n.initGraphics(),this.elements.forEach(function(t){t.render(n.graphics)})},e.prototype.hasSelection=function(){return this.elements.length>0},e.prototype.select=function(t){if(!this.preventSelectChange){var e;for(e=0;e<this.elements.length;e++)if(this.elements[e]===t)return;t.select()!==!1&&this.elements.push(t),this.elements.sort(function(t,e){return t.order-e.order})}},e.prototype.unselect=function(t){if(!this.preventSelectChange)for(var e=this.elements.slice(0),n=0;n<e.length;n++)if(e[n]===t)return t.show(),this.elements.splice(n,1),t.unselect(),t},e.prototype.selectAll=function(){if(!this.preventSelectChange){var t,e=this.surface.foreground.elements;this.surface.disableRender();for(var n=0;n<e.length;n++)t=e[n],t.selected||this.select(t);this.surface.enableRender(),this.surface.render()}},e.prototype.unselectAll=function(){if(!this.preventSelectChange){var t=this.surface.foreground.elements,e=!1;this.surface.disableRender(),this.elements.splice(0);for(var n=0;n<t.length;n++)t[n].selected&&(t[n].selected=!1,e=!0);this.surface.enableRender(),e&&(this.surface.foreground.render(),this.surface.foreground.fire("elementselectionschanged"))}},e.prototype.hideSelectedElements=function(){var t;t=this.elements,this.surface.disableRender();for(var e=0;e<t.length;e++)t[e].hide();this.surface.enableRender(),this.surface.foreground.render()},e.prototype.deleteSelectedElements=function(){var t,e,n;this.surface.disableRender(),e=this.elements.slice(0);for(var i=0;i<e.length;i++)t=e[i],this.unselect(t),t.remove();return this.surface.enableRender(),n=new s({elements:e}),this.surface.controller.activeTool.fire("action",this,n),this.surface.foreground.render(),e},e.prototype.getSelectedElementStyles=function(){var t,e,n,i;for(i=[],n=this.elements.slice(0),t=0;t<n.length;t++){e=n[t];var r=e.stroke.width;e instanceof d&&new o(e.stroke.color).a<1&&(r=e.stroke.width/2),i.push({element:e,style:{size:e.size,stroke:{color:e.stroke.color,width:r},fill:{color:e.fill.color},font:{size:e.font&&e.font.size}}})}return i},e.prototype.updateSelectedElementStyles=function(t){var e,n,i,r=!1;for(i=this.elements.slice(0),e=0;e<i.length;e++)if(n=i[e],!(n instanceof p)){if(t.size&&"undefined"!=typeof n.size&&n.size!=t.size&&(n.size=t.size,r=!0),t.stroke&&(t.stroke.width&&(n instanceof d&&new o(n.stroke.color).a<1?n.stroke.width!=2*t.stroke.width&&(n.stroke.width=2*t.stroke.width,r=!0):n.stroke.width!=t.stroke.width&&(n.stroke.width=t.stroke.width,r=!0)),t.stroke.color)){var s=new o(n.stroke.color),a=new o(t.stroke.color);s.equals(a)||(a.a=s.a,n.stroke.color=a.toRGBA(),r=!0)}if(t.fill&&t.fill.color){var s=new o(n.fill.color),a=new o(t.fill.color);s.equals(a)||(a.a=s.a,n.fill.color=a.toRGBA(),r=!0)}n.font&&t.font&&t.font.size&&n.font.size!=t.font.size&&(n.font.size=t.font.size,r=!0)}return this.surface.foreground.render(),r},e=f.define(e,i)}),define("surface/action/DrawAction",["require","util/Class"],function(t){function e(){this.element=null}var n=t("util/Class");return e.prototype.run=function(){this.element.layer.renderElement(this.element)},e.prototype.undo=function(){this.element.remove(),this.element.layer&&this.element.layer.render()},n.define(e)}),define("surface/tool/ElementTool",["require","env/Settings","surface/tool/Tool","surface/action/DrawAction","util/Box","util/Class"],function(t){function e(){this.element=null,this.startpos=null}var n=t("env/Settings"),i=t("surface/tool/Tool"),o=t("surface/action/DrawAction"),r=(t("util/Box"),t("util/Class"));return e.prototype.onPointerDown=function(){},e.prototype.onPointerMove=function(t,e){this.started?this.update(t,e):this.start(t)},e.prototype.onPointerUp=function(t){this.started&&this.stop(t)},e.prototype.start=function(t){this.startpos=t,this.element&&(this.element.stroke.color=this.color,this.element.stroke.width=n.STROKE_SIZES[this.size]*this.surface.contentScaleFactor),this.onStart(t),e.parent.prototype.start.apply(this,arguments)},e.prototype.update=function(t){this.onUpdate(t),e.parent.prototype.update.apply(this,arguments)},e.prototype.stop=function(t){this.onStop(t),this.element=null,e.parent.prototype.stop.apply(this,arguments)},e.prototype.onStart=function(){this.element&&this.surface.active.renderElement(this.element)},e.prototype.onUpdate=function(){this.element&&this.surface.active.render()},e.prototype.onStop=function(){if(this.element){var t=new o({element:this.element});this.surface.active.clear(),this.surface.active.removeElement(this.element),this.surface.foreground.addElement(this.element),this.fire("action",this,t)}},e=r.define(e,i)}),define("surface/tool/ArrowTool",["require","util/Class","surface/tool/ElementTool","util/Box","env/Settings","surface/element/Arrow"],function(t){function e(){this.name="arrow",this.transformation=null}var n=t("util/Class"),i=t("surface/tool/ElementTool");t("util/Box");var o=t("env/Settings"),r=t("surface/element/Arrow");return e.prototype.start=function(t){this.element=new r({from:t,to:t,size:o.ARROW_SIZES[this.size]*this.surface.contentScaleFactor}),this.element.fill.color=this.color,e.parent.prototype.start.apply(this,arguments)},e.prototype.update=function(t){this.isShiftDown&&(t=this.rotateLockPoint(this.element.from,t)),this.element.to=t,e.parent.prototype.update.apply(this,arguments)},e.prototype.stop=function(t){this.isShiftDown&&(t=this.rotateLockPoint(this.element.from,t));var n=this.element;e.parent.prototype.stop.apply(this,arguments),Math.sqrt(Math.pow(n.to.x-n.from.x,2)+Math.pow(n.to.y-n.from.y,2))<48&&this.surface.controller.undo()},e.prototype.run=function(t){this.element=new r({from:t.from,to:t.to,size:t.size}),this.element.stroke.width=16,this.element.fill.color=t.color;var e=this.element.to.x-this.element.from.x,n=this.element.to.y-this.element.from.y;this.element.setBox(Math.min(this.element.from.x,this.element.to.x),Math.min(this.element.from.y,this.element.to.y),Math.abs(e),Math.abs(n)),this.surface.foreground.renderElement(this.element)},e=n.define(e,i)}),define("surface/tool/EllipseTool",["require","util/Class","surface/tool/ElementTool","surface/element/Ellipse"],function(t){function e(){}var n,i=t("util/Class"),o=t("surface/tool/ElementTool"),r=t("surface/element/Ellipse");return e.prototype.start=function(t){n=t,this.element=new r({center:{},radius:{}}),e.parent.prototype.start.apply(this,arguments)},e.prototype.update=function(t){var i,o,r,s=this.element,a={},l={};i=Math.min(n.y,t.y),o=Math.min(n.x,t.x),l.x=Math.abs(t.x-n.x)/2,l.y=Math.abs(t.y-n.y)/2,r=Math.max(l.x,l.y),a.x=o+l.x,a.y=i+l.y,s.radius=l,s.center=a,e.parent.prototype.update.apply(this,arguments)},e=i.define(e,o)}),define("surface/tool/Smoother",["require","util/Class"],function(t){function e(){}var n,i,o,r,s,a,l,c,h,u,p,d=t("util/Class");return e.quickSmooth=function(t){var e=.3,n=t.length,i=t[n-1],o=t[n-2];t[n-1]={x:i.x*e+o.x*(1-e),y:i.y*e+o.y*(1-e)}},e.smooth=function(t,d){var f,g,m=[];for(n=[],f=0;f<t.length;f++)n.push({x:t[f].x,y:t[f].y});for(i=[],o=[],r=n.length,s=0,a=20,l=10,c=90,h=1.5,u=4,p=!1,l=d/2,a=d,h=Math.sqrt(d/5),g=e.path(),m.push(g[0]),f=1;f<g.length;f+=3)m.push({cp1:{x:g[f].x,y:g[f].y},cp2:{x:g[f+1].x,y:g[f+1].y},to:{x:g[f+2].x,y:g[f+2].y}});return m},e.path=function(){var t=[],o=[];e.detectCorners(),function(){var o,s;o=0;do if(i[o]){for(s=o+1;r>s&&!i[s];s++);s==r?s-=1:e.filterPoints(n,o,s,u,!1),e.fitBeziers(t,n,o,s,h),o=s}while(r-1>o)}();var s=t.length;if(s>0){var a=0;o[a++]=t[0].pt1;for(var l=0;s>l;++l){var c=t[l];o[a++]=c.cp1,o[a++]=c.cp2,o[a++]=c.pt2}}else if(r>0){var p=n[0].x,d=n[0].y,a=0;o[a++]={x:p,y:d};for(var l=1;r>l;l++){var f=(n[l].x+p)/2,g=(n[l].y+d)/2;p=n[l].x,d=n[l].y,o[a++]={x:f,y:g},o[a++]={x:f,y:g},o[a++]={x:p,y:d}}}return o},e.detectCorners=function(){var t=[],e=[],h=[];t[0]=0,e[0]=0;for(var d=1;r>d;d++)t[d]=n[d].x-n[d-1].x,e[d]=n[d].y-n[d-1].y,h[d]=Math.sqrt(t[d]*t[d]+e[d]*e[d]),i[d]=!1;var f;i[0]=!0,i[r-1]=!0;for(var g=2,m=-1,y=0,d=1;r-1>d;d++){var v=0,x=0,w=0;for(f=d;f>=1&&(v+=h[f],x+=t[f],w+=e[f],!(v>=l));f--);if(!(0>=f)){v=0;var b=0,A=0;for(f=d+1;r>f&&(v+=h[f],b+=t[f],A+=e[f],!(v>=l));f++);if(!(f>=r)){var T=x*b+w*A,C=Math.sqrt(x*x+w*w),E=Math.sqrt(b*b+A*A);T/=C*E;var S=180*(Math.acos(T)/Math.PI);S>c?S>y&&(y=S,m=d):(-1!=m&&(i[m]=!0,g++,m=-1),y=0)}}}s=0,o=[];for(var d=1;r-1>d;d++)o[d]=p?u+2*Math.floor(a/h[d]):u,o[d]>s&&(s=o[d]);return g},e.filterPoints=function(t,e,n,i,r){if(!(2>=n-e))for(var s=i;s>0;s--){var a=t[e].x,l=t[e].y,c=a,h=l;r&&(t[e].x=.25*t[n].x+.5*a+.25*t[e+1].x,t[e].y=.25*t[n].y+.5*l+.25*t[e+1].y);for(var u=e+1;n>u;u++)if(o[u]>s){var p=t[u].x,d=t[u].y;t[u].x=.25*c+.5*t[u].x+.25*t[u+1].x,t[u].y=.25*h+.5*t[u].y+.25*t[u+1].y,c=p,h=d}r&&(t[n].x=.25*c+.5*t[n].x+.25*a,t[n].y=.25*h+.5*t[n].y+.25*l)}},e.normalize=function(t){var e=t.x*t.x+t.y*t.y,n=Math.sqrt(e);n>0&&(t.x=t.x/n,t.y=t.y/n)},e.fitBeziers=function(t,n,i,o,r){var s={x:0,y:0},a={x:0,y:0};o-i>=1&&(s={x:n[i+1].x-n[i].x,y:n[i+1].y-n[i].y},e.normalize(s),a={x:n[o-1].x-n[o].x,y:n[o-1].y-n[o].y},e.normalize(a)),e.recrFit(t,n,i,o,s,a,r,0)},e.createBezierSegment=function(t,e,n,i,o,r,s,a){var l={pt1:{x:t,y:e},cp1:{x:n,y:i},cp2:{x:o,y:r},pt2:{x:s,y:a}};return l},e.recrFit=function(t,n,i,o,r,s,a,l){if(2>o-i){var c=n[o].x-n[i].x,h=n[o].y-n[i].y,u=Math.sqrt(c*c+h*h)/3;return t[t.length]=e.createBezierSegment(n[i].x,n[i].y,n[i].x+u*r.x,n[i].y+u*r.y,n[o].x+u*s.x,n[o].y+u*s.y,n[o].x,n[o].y),void 0}var p=e.parameterizePoints(n,i,o),d=[];d[0]=1;for(var f=0;10>f;f++){var g=e.generateBezier(n,i,o,p,r,s),m=e.calcMaxError(n,i,o,g,p,d);if(a>=m)return t[t.length]=g,void 0;if(m>10*a)break;e.improveParameters(n,i,o,p,g)}var y=e.middleTangent(n,d[0]);e.recrFit(t,n,i,d[0],r,y,a,l+1),y.x*=-1,y.y*=-1,e.recrFit(t,n,d[0],o,y,s,a,l+1)},e.parameterizePoints=function(t,e,n){var i=[];i[0]=0;for(var o=e+1;n>=o;o++)i[o-e]=i[o-e-1]+Math.sqrt(t[o].x*t[o].x+t[o].y*t[o].y);for(var r=i[n-e],o=e+1;n>=o;o++)i[o-e]/=r;return i},e.generateBezier=function(t,n,i,o,r,s){for(var a,l,c,h,u,p=0,d=0,f=0,g=0,m=0,y=n;i>=y;y++){var v=1-o[y-n],x=v*v,w=o[y-n]*o[y-n],b=v*x,A=3*x*o[y-n],T=3*v*w,C=o[y-n]*w,E=r.x*A,S=r.y*A,k=s.x*T,D=s.y*T;p+=E*E+S*S,d+=E*k+S*D,f+=k*k+D*D;var L=t[y].x-(t[n].x*(b+A)+t[i].x*(T+C)),B=t[y].y-(t[n].y*(b+A)+t[i].y*(T+C));g+=E*L+S*B,m+=k*L+D*B}if(a=p*f-d*d,1e-6>a&&a>-1e-6){var M=p+d;if(M>1e-6||-1e-6>M)h=u=g/M;else{var R=d+f;h=u=R>1e-6||-1e-6>R?m/R:0}}else l=p*m-d*g,c=g*f-m*d,h=c/a,u=l/a;if(1e-6>h||1e-6>u){var P=t[i].x-t[n].x,I=t[i].y-t[n].y;h=u=Math.sqrt(P*P+I*I)/3}return e.createBezierSegment(t[n].x,t[n].y,t[n].x+h*r.x,t[n].y+h*r.y,t[i].x+u*s.x,t[i].y+u*s.y,t[i].x,t[i].y)},e.evaluatePoint=function(t,e,n,i,o){var r=1-t,s=t*t,a=r*r,l=a*r,c=3*a*t,h=3*r*s,u=t*s,p=l*e.x+c*n.x+h*i.x+u*o.x,d=l*e.y+c*n.y+h*i.y+u*o.y;return{x:p,y:d}},e.evaluateBezPoint=function(t,n){return e.evaluatePoint(t,n.pt1,n.cp1,n.cp2,n.pt2)},e.calcMaxError=function(t,n,i,o,r,s){var a=0;s[0]=(i-n)/2;for(var l={x:0,y:0},c=n+1;i>c;c++){l=e.evaluatePoint(r[c-n],o.pt1,o.cp1,o.cp2,o.pt2);var h=l.x-t[c].x,u=l.y-t[c].y,p=Math.sqrt(h*h+u*u);p>a&&(a=p,s[0]=c)}return a},e.improveParameters=function(t,n,i,o,r){var s,a,l,c,h,u,p,d,f,g;s=3*(r.cp1.x-r.pt1.x),a=3*(r.cp1.y-r.pt1.y),l=3*(r.cp2.x-r.cp1.x),c=3*(r.cp2.y-r.cp1.y),h=3*(r.pt2.x-r.cp2.x),u=3*(r.pt2.y-r.cp2.y),p=2*(l-s),d=2*(c-a),f=2*(h-l),g=2*(u-c);for(var m=n;i>=m;m++)o[m-n]=e.newtonRaphson(r,t[m].x,t[m].y,o[m-n],s,a,l,c,h,u,p,d,f,g);for(var y=o[0],v=o[i-n]-y,m=0;i-n+1>m;m++)o[m]=(o[m]-y)/v},e.newtonRaphson=function(t,n,i,o,r,s,a,l,c,h,u,p,d,f){var g,m={x:0,y:0};m=e.evaluateBezPoint(o,t);var y=1-o,v=y*y*r+2*o*y*a+o*o*c,x=y*y*s+2*o*y*l+o*o*h,w=y*u+o*d,b=y*p+o*f,A=m.x-n,T=m.y-i,C=A*v+T*x,E=v*v+x*x+A*w+T*b;return g=E>1e-8||-1e-8>E?o-C/E:o},e.middleTangent=function(t,n){var i={x:t[n-1].x-t[n].x,y:t[n-1].y-t[n].y},o={x:t[n].x-t[n+1].x,y:t[n].y-t[n+1].y};return e.normalize(i),e.normalize(o),i.x+=o.x,i.y+=o.y,e.normalize(i),i},e=d.define(e)}),define("surface/tool/HighlighterTool",["require","util/Class","surface/tool/ElementTool","util/Box","surface/tool/Smoother","surface/element/Vector","surface/element/Line","util/Color","env/Settings","surface/action/DrawAction"],function(t){function e(){this.points=null}function n(t,e){var n,i,o,s,a,l;for(l=[],o=r.smooth(t,e),s=o.shift(),l.push(["M",s.x,s.y]),n=0;n<o.length;n++)i=o[n],a=["C",i.cp1.x,i.cp1.y,i.cp2.x,i.cp2.y,i.to.x,i.to.y],l.push(a);return l}var i=t("util/Class"),o=t("surface/tool/ElementTool");t("util/Box");var r=t("surface/tool/Smoother"),s=t("surface/element/Vector"),a=t("surface/element/Line"),l=t("util/Color"),c=t("env/Settings"),h=t("surface/action/DrawAction");return e.prototype.use=function(){},e.prototype.onPointerUp=function(t){var n=this.started;return this.surface.controller.moved||this.surface.controller.selectionChanged||(n||this.start(t),this.update({x:t.x,y:t.y+1},this.surface.controller.activeScale),n||(this.stop({x:t.x,y:t.y+1}),this.afterStop())),e.parent.prototype.onPointerUp.apply(this,arguments)},e.prototype.start=function(t){this.isShiftDown?this.element=new a({from:t,to:t}):(this.from=t,this.points=[t],this.element=new s),e.parent.prototype.start.apply(this,arguments);var n=new l(this.element.stroke.color);n.a=c.HIGHLIGHT_ALPHA,this.element.stroke.width*=2,this.element.stroke.color=n.toRGBA(),this.element.stroke.alpha=n.a,this.straightHighlighter=this.isShiftDown
},e.prototype.stop=function(){this.surface.active.clear(),this.straightHighlighter||this.element&&(this.element.operations=n(this.points,this.element.stroke.width)),e.parent.prototype.stop.apply(this,arguments)},e.prototype.update=function(t){if(this.straightHighlighter){this.isShiftDown&&(t=this.rotateLockPoint(this.element.from,t));var n=this.element,i=this.surface.active,o=i.graphics;n.to=t,i.clear(),o.save(),o.transform.apply(o,i.transformation),this.element.initGraphics(o),this.element.render(o,null,this.surface),o.restore()}else{var r,a,l=this.points,i=this.surface.active,o=i.graphics;for(l.push(t),i.clear(),o.save(),o.transform.apply(o,i.transformation),this.element.initGraphics(o),o.beginPath(),o.moveTo(this.from.x,this.from.y),r=1;r<l.length;r++)a=l[r],o.lineTo(a.x,a.y);o.stroke(),s.prototype.updateBoxFromPoint.call(this.element,t.x,t.y),o.restore()}e.parent.prototype.update.apply(this,arguments)},e.prototype.onStart=function(){},e.prototype.onUpdate=function(){},e.prototype.onStop=function(){if(this.element){var t=new h({element:this.element});this.surface.active.clear(),this.surface.active.removeElement(this.element),this.surface.foreground.renderElement(this.element),this.fire("action",this,t)}},e=i.define(e,o)}),define("surface/tool/LineTool",["require","util/Class","util/Box","surface/tool/ElementTool","surface/element/Line"],function(t){function e(){}var n=t("util/Class");t("util/Box");var i=t("surface/tool/ElementTool"),o=t("surface/element/Line");return e.prototype.start=function(t){this.element=new o({from:t,to:t}),e.parent.prototype.start.apply(this,arguments)},e.prototype.update=function(t){this.isShiftDown&&(t=this.rotateLockPoint(this.element.from,t)),this.element.to=t,e.parent.prototype.update.apply(this,arguments)},e=n.define(e,i)}),define("surface/tool/PenTool",["require","util/Class","surface/tool/ElementTool","util/Box","surface/tool/Smoother","surface/action/DrawAction","util/Color","util/Transformer","surface/element/Vector","surface/element/Line","util/Obj"],function(t){function e(){this.name="marker",this.from={x:null,y:null},this.points=[[]],e.Initialized=!1}function n(t){if(0!=e.WetUses&&0==e.UsingTool){var i=(new Date).getTime()-e.StrokeTime;e.WetAlpha=p+(1-p)*i/1e3,e.WetAlpha=Math.min(1,e.WetAlpha);var o,r=t.surface.active,s=r.graphics,a=t.points[t.points.length-1],c=new l(e.LastUsed.stroke.color);r.clear(),s.save(),r.initGraphics(),t.element.initGraphics(s),s.strokeStyle("rgba("+c.r+","+c.g+","+c.b+","+e.WetAlpha+")"),s.beginPath();for(var h=0;h<t.points.length;h++)if(a=t.points[h],a.length>0){var u=a[0];for(s.moveTo(u.x,u.y),o=1;o<a.length;o++){var d=a[o];s.lineTo(d.x,d.y)}}s.stroke(),s.restore()}else e.WetAlpha=p;requestAnimationFrame(n.bind(this,t))}function i(t,e){var n,i,o,r,a,l;for(l=[],o=s.smooth(t,e),r=o.shift(),l.push(["M",r.x,r.y]),n=0;n<o.length;n++)i=o[n],a=["C",i.cp1.x,i.cp1.y,i.cp2.x,i.cp2.y,i.to.x,i.to.y],l.push(a);return l}var o=t("util/Class"),r=t("surface/tool/ElementTool");t("util/Box");var s=t("surface/tool/Smoother"),a=t("surface/action/DrawAction"),l=t("util/Color");t("util/Transformer");var c=t("surface/element/Vector"),h=t("surface/element/Line");t("util/Obj");var u=1e3,p=.4;return e.Initialized=!1,e.LastUsed=null,e.WetUses=0,e.WetAlpha=p,e.UsingTool=!1,e.StrokeTime=null,e.prototype.onPointerUp=function(t){var n=this.started;return this.surface.controller.moved||this.surface.controller.selectionChanged||(n||this.start(t),this.update({x:t.x,y:t.y+1},this.surface.controller.activeScale),n||(this.stop({x:t.x,y:t.y+1}),this.afterStop())),e.parent.prototype.onPointerUp.apply(this,arguments)},e.prototype.start=function(t){var i,o;if(this.isShiftDown)null!=e.LastUsed&&(e.WetUses=0,e.WetAlpha=p,e.Initialized=!1,this.complete()),this.element=new h({from:t,to:t}),e.parent.prototype.start.apply(this,arguments),this.straightHighlighter=!0;else{if(e.UsingTool=!0,!e.Initialized){e.Initialized=!0,n(this);var r=this,s=function(){e.UsingTool&&r.stop(),e.WetUses=0,e.WetAlpha=p,e.Initialized=!1,null!=e.LastUsed&&r.complete()};this.surface.controller.on("toolchanged",s),this.surface.on("presave",s)}this.from=t,o=this.points[this.points.length-1],o.push(t),null!=e.LastUsed?(this.element=e.LastUsed,i=new l(e.LastUsed.stroke.color),i.a=1,e.LastUsed.stroke.color=i.toRGBA(),this.surface.foreground.render()):(this.element=new c,this.element.editing=!0,this.element.points=this.points),e.WetAlpha=1,e.WetUses+=1,e.parent.prototype.start.apply(this,arguments),i=new l(this.element.stroke.color),i.a=p,this.element.stroke.color=i.toRGBA(),this.element.visible=!0,this.straightHighlighter=!1}},e.prototype.stop=function(){if(this.straightHighlighter)e.parent.prototype.stop.apply(this,arguments),this.surface.render();else{var t=new l(this.element.stroke.color);t.a=0,this.element.stroke.color=t.toRGBA(),e.StrokeTime=(new Date).getTime(),e.UsingTool=!1,this.element.points=[];for(var n=0;n<this.points.length;n++)this.element.points.push(this.points[n]);this.points.push([]);var i=this.element;e.parent.prototype.stop.apply(this,arguments),this.element=i;var o=this;setTimeout(function(){e.WetUses>0&&(e.WetUses=e.WetUses-1),0==e.WetUses&&(e.UsingTool=!1,o.complete())},u),e.LastUsed=i,this.element.visible=!1}},e.prototype.update=function(t){var n=this.surface.active,i=n.graphics;if(this.straightHighlighter)this.isShiftDown&&(t=this.rotateLockPoint(this.element.from,t)),this.element.to=t,n.clear(),i.save(),i.transform.apply(i,n.transformation),this.element.initGraphics(i),this.element.render(i,null,this.surface),i.restore();else{var o,n=this.surface.active,i=n.graphics,r=this.points[this.points.length-1];r.push(t),s.quickSmooth(r),i.save(),n.clear(),n.initGraphics(),this.element.initGraphics(i),i.beginPath();for(var a=0;a<this.points.length;a++){var r=this.points[a];if(r.length>0){var l=r[0];for(i.moveTo(l.x,l.y),o=1;o<r.length;o++){var t=r[o];i.lineTo(t.x,t.y)}}}i.stroke(),i.restore(),c.prototype.updateBoxFromPoint.call(this.element,t.x,t.y)}e.parent.prototype.update.apply(this,arguments)},e.prototype.complete=function(){if(null!=e.LastUsed){for(var t=0;t<this.points.length;t++){var n=this.points[t];if(n.length>0)for(var o=i(n,e.LastUsed.stroke.width),r=0;r<o.length;r++)e.LastUsed.operations.push(o[r])}var s=new l(e.LastUsed.stroke.color);s.a=1,e.LastUsed.stroke.color=s.toRGBA(),e.LastUsed.points=null,e.LastUsed.editing=!1,e.LastUsed=null,this.points=[[]],this.surface.render();var c=new a({element:this.element});this.fire("action",this,c),this.element=null}},e.prototype.onStart=function(){},e.prototype.onUpdate=function(){},e.prototype.onStop=function(){this.element&&(this.surface.active.clear(),this.surface.active.removeElement(this.element),this.surface.foreground.addElement(this.element))},e=o.define(e,r)}),define("surface/layer/Pixelate",["require","util/Class","surface/layer/Layer"],function(t){function e(){this.registerEvents("elementselectionschanged")}var n=t("util/Class"),i=t("surface/layer/Layer"),o=0;return e.prototype.initialize=function(){e.parent.prototype.initialize.apply(this,arguments),$(this.dom).addClass("skitch-layer-pixelate")},e.prototype.onAdded=function(t){e.parent.prototype.onAdded.apply(this,arguments),t.layers.background.on("loaded",this.onBackgroundLayerLoaded,this)},e.prototype.onBackgroundLayerLoaded=function(){this.render()},e.prototype.getSelectedElements=function(){var t=[];for(var e in this.elements)this.elements[e].selected&&t.push(this.elements[e]);return t},e.prototype.addElement=function(t){return t.box.height>=o&&t.box.width>=o?(t.on("selected",this.onElementSelectionChanged,this),t.on("unselected",this.onElementSelectionChanged,this),e.parent.prototype.addElement.apply(this,arguments)):void 0},e.prototype.removeElement=function(t){return t.off("selected",this.onElementSelectionChanged),t.off("unselected",this.onElementSelectionChanged),e.parent.prototype.removeElement.apply(this,arguments)},e.prototype.onElementSelectionChanged=function(t){this.fire("elementselectionschanged",t)},e=n.define(e,i)}),define("surface/tool/PixelateTool",["require","env/Settings","util/Box","util/Num","util/Class","graphics/CanvasGraphics","surface/tool/ElementTool","surface/element/Pixelate","surface/layer/Pixelate"],function(t){function e(){this.element=null}t("env/Settings"),t("util/Box"),t("util/Num");var n=t("util/Class"),i=t("graphics/CanvasGraphics"),o=t("surface/tool/ElementTool"),r=t("surface/element/Pixelate"),s=t("surface/layer/Pixelate");return e.prototype.start=function(t){this.element=new r({top:t.y,left:t.x,width:0,height:0}),this.surface.removeLayer("pixelate");var n=this.surface.addLayerAfter("pixelate",new s({surface:this.surface}),!0,"background");n.setTransformation(this.surface.transformation),e.parent.prototype.start.apply(this,arguments);var i=[],o=this.surface.foreground.elements;this.element.layer.removeElement(this.element);for(var a=0;a<o.length;a++){var l=o[a];l.constructor==r&&i.push(l)}for(var c=0;c<i.length;c++){var l=i[c];l.layer.removeElement(l),n.addElement(l)}n.addElement(this.element)},e.prototype.stop=function(){var t=this.element;e.parent.prototype.stop.apply(this,arguments);for(var n=this.surface.layers.pixelate.elements,i=[],o=0;o<n.length;o++){var s=n[o];s.constructor==r&&i.push(s)}for(var a=0;a<i.length;a++){var s=i[a];s.layer.removeElement(t),this.surface.foreground.addElement(s)}this.surface.removeLayer("pixelate"),this.surface.layers.foreground.render()},e.prototype.update=function(t){var n=t,i=this.element,o=this.startpos;this.element.activePos=t,i.top=Math.min(o.y,n.y),i.left=Math.min(o.x,n.x),i.width=Math.abs(n.x-o.x),i.height=Math.abs(n.y-o.y),e.parent.prototype.update.apply(this,arguments),this.surface.layers.pixelate.render()},e.prototype.generatePixelatedImages=function(){var t,e=this.surface.background.getBitmap(),n=e&&e.dom,o=[4,6,10,12,14,16];r.sizes.splice(0),r.images.splice(0);for(var s=0;s<o.length;s++)t=o[s]*i.pixelRatio,r.sizes.push(t),r.images.push(this.generatePixelatedImage(n,n.width/t,n.height/t)),t+=3},e.prototype.generatePixelatedImage=function(t,e,n){var o=i.create(e,n);return o.drawImage(t,0,0,e,n),o.context.canvas},e=n.define(e,o)}),define("surface/tool/RectangleTool",["require","util/Class","surface/tool/ElementTool","surface/element/Rectangle","util/Box"],function(t){function e(){this.element=null}var n=t("util/Class"),i=t("surface/tool/ElementTool"),o=t("surface/element/Rectangle");return t("util/Box"),e.prototype.start=function(t){this.element=new o({top:t.y,left:t.x,width:0,height:0}),e.parent.prototype.start.apply(this,arguments)},e.prototype.update=function(t){var n=t,i=this.element,o=this.startpos;i.top=Math.min(o.y,n.y),i.left=Math.min(o.x,n.x),i.width=Math.abs(n.x-o.x),i.height=Math.abs(n.y-o.y),e.parent.prototype.update.apply(this,arguments)},e=n.define(e,i)}),define("surface/tool/RoundedRectangleTool",["require","util/Class","surface/tool/ElementTool","surface/element/Rectangle","env/Settings"],function(t){function e(){this.element=null}var n=t("util/Class"),i=t("surface/tool/ElementTool"),o=t("surface/element/Rectangle"),r=t("env/Settings");return e.prototype.start=function(t){this.element=new o({top:t.y,left:t.x,width:0,height:0,cornerRadius:r.MAX_RECTANGLE_CORNER_RADIUS*this.surface.contentScaleFactor*this.surface.scaling.x}),e.parent.prototype.start.apply(this,arguments)},e.prototype.update=function(t){var n=this.element,i=this.startpos;n.top=Math.min(i.y,t.y),n.left=Math.min(i.x,t.x),n.width=Math.abs(t.x-i.x),n.height=Math.abs(t.y-i.y),this.surface.active.clear(),n.render(this.surface.active.graphics),e.parent.prototype.update.apply(this,arguments)},e.prototype.stop=function(){e.parent.prototype.stop.apply(this,arguments)},e=n.define(e,i)}),define("surface/action/TextChangeAction",["require","util/Class"],function(t){function e(){this.element=null,this.oldValue=null,this.newValue=null}var n=t("util/Class");return e.prototype.undo=function(){this.element.value=this.oldValue,this.element.layer.render()},e.prototype.run=function(){this.element.value=this.newValue,this.element.layer.render()},n.define(e)}),define("surface/tool/TextTool",["require","util/Obj","util/Class","util/Box","util/Text","util/Transformer","env/Settings","surface/action/DrawAction","surface/action/TextChangeAction","surface/action/StampLabelAction","surface/element/Text","surface/element/BubbleText","surface/element/LabelText","surface/tool/ElementTool","graphics/Point","log/Logger"],function(t){function e(){this.name="text",this.previousColor=null,this.previousSize=null,this.element=null,this.registerEvents("beforeedit","edit")}function n(t){if(t.value=t.value,"number"==typeof t.selectionStart)t.selectionStart=t.selectionEnd=t.value.length;else if("undefined"!=typeof t.createTextRange){t.focus();var e=t.createTextRange();e.collapse(!1),e.select()}}t("util/Obj");var i=t("util/Class");t("util/Box");var o=t("util/Text");t("util/Transformer");var r=t("env/Settings"),s=t("surface/action/DrawAction"),a=t("surface/action/TextChangeAction");t("surface/action/StampLabelAction");var l=t("surface/element/Text"),c=t("surface/element/BubbleText"),h=t("surface/element/LabelText"),u=t("surface/tool/ElementTool"),p=t("graphics/Point");t("log/Logger").instance("surface.tool.TextTool");var d=10;return e.prototype.onPointerDown=function(){this.started&&!this.editor&&(this.started=!1)},e.prototype.onPointerMove=function(){},e.prototype.onPointerUp=function(t){var e=this.surface.controller.activeElement;this.surface.controller.editingOnLastPointerDown||this.surface.controller.selectionChanged||(e&&e.label&&e.label.text&&(e=e.label.text),e&&e instanceof l&&(this.element=e),this.element&&!(this.element instanceof h)||this.started||this.start(t))},e.prototype.onDoubleClick=function(t){if(!this.started){var e=this.surface.controller.activeElement;this.element=e&&e instanceof l?e:null,this.start(t)}},e.prototype.start=function(t){var n=this.surface.controller;this.previousColor=this.color,this.previousSize=this.size,this.element?(this.color=this.element.fill.color,this.size=this.element.getSizeLevel()):this.element=new c({surface:this.surface,selectOnFocus:!0,textStyle:"bubbleText",value:"",position:{x:t.x,y:t.y-=r.FONT_SIZES[this.size]},font:{size:r.FONT_SIZES[this.size]*this.surface.contentScaleFactor},fill:{color:this.color}}),n.activeElement!=this.element&&this.element instanceof c&&(n.activeElement&&(n.activeElement.selected=!1),n.activeElement=null),e.parent.prototype.start.apply(this,arguments),this.showInput()},e.prototype.stop=function(){this.started&&this.element&&(this.size=this.previousSize,this.color=this.previousColor,this.started=!1,this.surface.foreground.render(),this.surface.active.clear(),this.fire("stopped",this))},e.prototype.onStart=function(){},e.prototype.onUpdate=function(){},e.prototype.onStop=function(){},e.prototype.showInput=function(){var t=this.surface,e=t.controller.activeElement,n=e?e.label:null;this.element.previousValue=this.element.value,n&&(n.text.editing=!0,n.calculateBox(),n.text.editing=!1,n.text.hasText()||(n.text.value=e.defaultText));var i=this.createEditor();this.element.hide(),this.editor=i,this.element.editing=!0,this.originalAllowZoom=t.controller.allowZoom,t.controller.allowZoom=!1,this.updateValue(!0),setTimeout(this.focusInput.bind(this),100),t.foreground.render()},e.prototype.focusInput=function(){this.editor&&this.editor.focus()},e.prototype.hideInput=function(){var t,e,n=this.surface,i=this.editor,r=n.controller.activeElement;t=o.encodeUTF8(i.val()),this.element&&(0===$.trim(t).length?this.element.remove():(this.element instanceof h?t!==this.element.previousValue&&(e=new a({element:this.element,oldValue:this.element.previousValue,newValue:t})):this.element.layer?t!==this.element.previousValue&&(e=new a({element:this.element,oldValue:this.element.previousValue,newValue:t})):(n.foreground.addElement(this.element),e=new s({element:this.element})),this.element.value=t,this.element.updateText())),e&&n.controller.tools.text.fire("action",this,e),this.editor=null,i.remove(),n.controller.allowZoom=this.originalAllowZoom,this.element&&(this.element.editing=!1,this.element.show()),this.stop(),r&&r.calculateBox(),n.active.clear(),n.foreground.render(),this.element=null},e.prototype.updateValue=function(t){if(this.element){var e,n=this.element,i=this.editor,r=i.val(),s=this.surface,a=s.active,l=n.selected,c=10;"null"==r.toLowerCase()&&console.log("<|"),(t||n.value!==r)&&(e=n.getTextMetrics(r),""===r&&(e.width=0),i.css({width:e.width*s.scaling.x+c+"px",height:(e.height+10)*s.scaling.x+"px"}),a.clear(),a.graphics.save(),a.initGraphics(),n.value=o.encodeUTF8(r),n.updateText(),n.selected=!1,n.render(a.graphics,null,s),n.selected=l,a.graphics.restore())}},e.prototype.createEditor=function(){var t=document.createElement("textarea"),e=this.surface,n=this.element,i=n.font,r=i.size,s=1.1*r,a=p(n.position.x,n.position.y,"surface").relativeTo("dom"),l=n.getTextMetrics(),c=Math.max(l.width,d),u=s,f=n instanceof h?1:3;return $(t).on("change",this.onChange.bind(this)).on("focus",this.onFocus.bind(this)).on("blur",this.onBlur.bind(this)).on("cut",this.onCut.bind(this)).on("paste",this.onPaste.bind(this)).on("keydown",this.onKeydown.bind(this)).on("keypress",this.onKeypress.bind(this)).on("keyup",this.onKeyup.bind(this)).val(o.decodeUTF8(this.element.value)).addClass("skitch-tool-element-text-editor").appendTo(e.dom).attr({wrap:"off",spellcheck:!1}).css({display:"block",resize:"none","z-index":"99999","min-width":"0px","min-height":"0px",overflow:"hidden","word-break":"keep-all","white-space":"pre",background:"transparent",padding:"0px",margin:"0px",outline:"none",border:"0px solid #000000","-webkit-box-shadow":"none","box-shadow":"none",position:"absolute",width:c*e.scaling.x+"px",color:n.fill.color,height:u*e.scaling.x+"px","font-family":i.name,"font-weight":i.weight,"font-size":r*e.scaling.x+"px","line-height":s*e.scaling.x+"px","letter-spacing":"0.005em",left:a.x+"px",top:a.y+f+"px","-webkit-text-fill-color":"transparent"})},e.prototype.onChange=function(){this.updateValue()},e.prototype.onFocus=function(){if(this.editor){var t=this.editor.get(0);this.element.selectOnFocus?t.select():n(t),this.updateValue()}},e.prototype.onBlur=function(){this.hideInput()},e.prototype.onCut=function(){this.updateValue()},e.prototype.onPaste=function(t){this.updateValue();var e=o.encodeUTF8(this.editor.val());this.element instanceof h&&this.element.getTextMetrics(e).width>=this.element.maxWidth*this.surface.contentScaleFactor&&t.preventDefault()},e.prototype.onKeydown=function(t){t.stopPropagation(),9===t.which&&(t.preventDefault(),this.onBlur(t)),t.ctrlKey&&90===t.keyCode&&t.preventDefault()},e.prototype.onKeypress=function(t){var e=o.encodeUTF8(this.editor.val());this.updateValue(),this.element instanceof h&&this.element.getTextMetrics(e).width>=this.element.maxWidth*this.surface.contentScaleFactor&&t.preventDefault(),9===t.which&&(t.preventDefault(),this.onBlur(t)),this.element instanceof h&&(13===t.which||10===t.which)&&t.preventDefault(),t.stopPropagation()},e.prototype.onKeyup=function(t){this.updateValue(),9===t.which&&(t.preventDefault(),this.onBlur(t)),t.stopPropagation()},e=i.define(e,u)}),define("surface/tool/StampTool",["require","util/Class","util/Box","util/Transformer","surface/tool/ElementTool"],function(t){function e(){this.icon=null,this.type=null}var n=t("util/Class");t("util/Box"),t("util/Transformer");var i=t("surface/tool/ElementTool");return e.prototype.onPointerDown=function(t){this.element=this.surface.controller.activeElement,this.element&&this.element.selected?this.element.processHit(t):this.start(t)},e.prototype.onPointerMove=function(t,e){this.started&&this.update(t,e)},e.prototype.onPointerUp=function(t){this.started&&this.stop(t)},e.prototype.onDoubleClick=function(t){this.element=this.surface.controller.activeElement,this.element&&this.element.processHit(t)},e.prototype.start=function(t){var n=this.type;this.element=new n({position:t,icon:this.icon,contentScaleFactor:this.surface.contentScaleFactor,layer:this.surface.foreground}),e.parent.prototype.start.apply(this,arguments)},e.prototype.update=function(t){this.element.updateAngle({x:t.x-this.element.position.x,y:t.y-this.element.position.y}),e.parent.prototype.update.apply(this,arguments)},e=n.define(e,i)}),define("surface/element/Measurement",["require","util/Class","surface/element/Vector","util/Transformer","surface/Serializer"],function(t){function e(){this.from=null,this.to=null,this.value=null,this.shadow={offset:{x:0,y:0},blur:0},this.handles={from:{x:0,y:0},to:{x:0,y:0}}}var n=t("util/Class"),i=t("surface/element/Vector"),o=t("util/Transformer"),r=t("surface/Serializer");return e.prototype.deserialize=function(t,n){return $.extend(!0,this,{from:n.extension.startPoint,to:n.extension.endPoint,vale:n.extension.value}),e.parent.prototype.deserialize.apply(this,arguments),this},e.prototype.draw=function(t){var t=t||this.graphics,e=this.from,n=this.to,i=n.x-e.x,o=n.y-e.y,r=Math.atan2(-o,i),s=Math.sqrt(i*i+o*o);this.handles.from={x:e.x,y:e.y},this.handles.to={x:n.x,y:n.y},t.translateBy(e.x,e.y),t.rotateBy(r),this.beginPath(t),this.moveTo(0,-50,t),this.lineTo(0,50,t),this.moveTo(0,0,t),this.lineTo(s,0,t),this.moveTo(s,-50,t),this.lineTo(s,50,t),t.stroke(),this.setBox(Math.min(e.x,n.x),Math.min(e.y,n.y),Math.abs(n.x-e.x),Math.abs(n.y-e.y))},e.prototype.manipulate=function(t,n){"from"===this.activeHandle?this.from=n:"to"===this.activeHandle&&(this.to=n),e.parent.prototype.manipulate.apply(this,arguments)},e.prototype.move=function(t){this.from.x+=t.x,this.from.y+=t.y,this.to.x+=t.x,this.to.y+=t.y,e.parent.prototype.move.apply(this,arguments)},e.prototype.applyTransformation=function(t){this.from=o.transformPoint(t,this.from),this.to=o.transformPoint(t,this.to)},e.prototype.serialize=function(t){var n=o.transformPoint(t,this.from),i=o.transformPoint(t,this.to),s=$.extend(e.parent.prototype.serialize.call(this,t),{extension:{type:"Measurement",startPoint:r.serializePoint(n),endPoint:r.serializePoint(i),value:this.value}});return s.fillColor&&delete s.fillColor,s},e=n.define(e,i)}),define("surface/tool/MeasurementTool",["require","util/Class","util/Box","surface/tool/ElementTool","surface/element/Measurement"],function(t){function e(){}var n=t("util/Class");t("util/Box");var i=t("surface/tool/ElementTool"),o=t("surface/element/Measurement");return e.prototype.start=function(t){this.element=new o({from:t,to:t}),e.parent.prototype.start.apply(this,arguments)},e.prototype.update=function(t){this.element.to=t,e.parent.prototype.update.apply(this,arguments)},e=n.define(e,i)}),define("env/Device",["require","util/Class","env/Settings"],function(t){function e(){}var n=t("util/Class");return t("env/Settings"),e.getRegion=function(){return"undefined"!=typeof Windows?Windows.System.UserProfile.GlobalizationPreferences.homeGeographicRegion:"en-US"},e.getHostName=function(){var t,e;return"undefined"!=typeof Windows&&(e=Windows.Networking.Connectivity.NetworkInformation.getHostNames(),e.length>0&&(t=e[0].displayName)),t},e.getDeviceDescription=function(){return e.getHostName()||"Windows 8 Device"},e.getDeviceIdentifier=function(){return e.getDiskSerialNumber()},e.getDiskSerialNumber=function(){var t,e,n=-1;if("undefined"!=typeof Windows){t=Windows.System.Profile.HardwareIdentification.getPackageSpecificToken(null).id,e=Windows.Security.Cryptography.CryptographicBuffer.copyToByteArray(t);for(var i=0;i<e.length;i+=4)if(3===e[i]&&0===e[i+1]){n=(e[i+2]<<8)+e[i+3];break}}return n},e.isHiDpi=function(){return null!=window.devicePixelRatio&&window.devicePixelRatio>1},e.prototype={},e=n.define(e)}),define("surface/cursor/CursorData",["require"],function(){function t(){}t.forName=function(t){return e[t]||{}};var e=t.urls={};return e.marker={},e.marker.blackOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAErklEQVRoQ+2ZfWhVZRzHvSsNtiYTktCJsVyB0jVBWVqzzbb+UDOEyAmmk2SEkAbVAsUMX8pof5gmDRwqK0UnpjGdpW3YUMKWSDBBytnqj/Wiqcux4cy3z3ecI8eze8/Lvefcq7IDHx7v3XPO8/3+nuf5Pb9zjQy6x6/IPa5/0ICBAGZQQVwLL8FXsAZuen1uumdA42+A52E1vAP/wEK47MVEOg1YxS9B7N8wFBbDZHgFfnEzkS4DGvczeA4k/lf4DzJhJLwGC6AUTjuZSIcBU/wzCHsL2uAiXAP97WHIhXnwOkyCv+KZSLUBjbcJCmCpIf6SId7UqD5ZMAregCnwAvTEMpFKAxrrc3gatFkVebt4u4nRfKEMpRl4E/plp1QZMMWPR8TbcBY6bZG3B1j3aFO/CB9BFHpjdYo1M0F+9wAP2wxPwruGeEX+ussgMjABvob1UAPdqTZgih/DwJXQDl7Fa6lJvM6JPaA0+38qDQw2Ip9niP+NVsvGa+T30fdTUKvD7UqsGQtrD0j8VngUllsif8PDsplIH5UUWjZ7DfH91r75nDAMWMUvY6DfjWXjR3wV99S7iZeJoA08xDO/AGWPFUbktWy8iFf5sAs8iw/agIIhATqE3oc/wK/4ddxz0Evkw1hC44w1O59Wh5RqG7fIZ9BHkd8JEt8A5yDumjeFh2FARdgPoLL4S+iX8myDS3whbIcPjcj7Eh/0EiqxCJ/Nv3+GeC8mVvGr6HfYb+SDnoFneaC5AbUHFsEsUD1vNyHxKs6UZiX+kCH+qn15ePkcRBZ6kIFOgMqF70Cf54LK4VdtM2GK38b3ylJNyYgPagnpJeQo/ATvgU5a1fMSr7crVZEHQBtaLyhbghIfhAHz5aSYh6nGqYbdoPNAm1qV5EbQqfojqDTQ4XYk2chLfLIGJP4TQ6RKZEVYZa8irMzyCNRBB6ivirOVcAzOQ0Jr3hQehAFF+aQR1W8NQY/RquxV1TkM9CKiFKnXRV062P4FtxRr1xn3czKbWGu/DD6G46DZ0C8JM0EVpC7NhipJCdZYirppxrNIp47JGFC2GQ4jYA4o6+hNS2v8Aqj81cu6XkI8/1Dl15Wjgc7OzmFZWVlju7u7T+fk5GiT2i+ZyAYtF82IIq313QXaEyI08RLjaKC9vb04Ly/vCO002u/jREfPkJEhhmDVMW41kN9Ax+3vZCDS3Nw8vaioqIF2Ju03YUczEVdOBjIaGxtnlJaW7qedRasyN2WR9WpmwIDXSIXVr28GzGxjHaSrqyujo6PjqWg0Wt3a2ro4Nzf3VHZ29h1LyCE7haW333P7DJjZxu+oLtnJ7+MS6i8DkcrKysfz8/MLe3p6VB7cvkZylZWVfVBXV7fqTy7r3zIzM3vb2tqOVVVV6feeUHO9kzNzE+sQ0i8JyufmFamtrZ1aXl6+g3YerUpmq1CVBPpflJi/GicUzgRusmahvtmwPCOjqalpeklJST3ty7Q6B6x7QGbSFvnbUXYwPXAOJLAifN9yXx9kkYqKiicKCgomt7S0HK+pqTlzN6x5+xS5vQ8oOwllmrRmm3hry82A7lOftGebZAz43lipvMHLDKRSj++xbgEjI2lAthR+XwAAAABJRU5ErkJggg==",e.marker.whiteOutline="data:image/png;base64,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",e.marker.mask="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAC00lEQVRoQ+2XS2gTURSG/zuTpElMqGJK8YWFVtO0bgQ31U1XlSqCj0Zd6rqCiJTig7oJuqmoCysKdVubVAVBBRfSpeIDFc1k4xNBGkQlMTWtyRxvogkltE2m904GYbKZzZyT7///c+7MMOrYT/iPf8wWYHF6dgJyAtCvYjZzVHc1nlGgnzDS0/oEiK5Ai/UzoHiYUEdfL6Dcq1WEtQIII9CiR0rwJWgK7dkEOF6AMbWaEOsEUP4CtJvHK+HLItoPbATT49VEWCOgCnxZRHDfFqjqk8VSqLsAHco5JX7j1ELOV8Lmgn2HVVW5vpCI+grQc2eRuHW6VvjiUrcccsM7/ct6AaRHoE0MGYLvDLugY5LvQZe1AghD/LSJLAH+EYffbO0OmAhfEGb2DgwgHj1vyPm23gY4fc+4853VngFmCxhg8ehwLRDlY9MgvHkCiB1j2vhFQ/CF08aTeVqr86Xe8keI9H6mTYwYh0+/AlM3GKmTnwDRfabFdhiBoLVhD/z6y6XAyxfAO/6c+d3sf3s7WYsIWr3Li0Z34X1nfS33z3eP3BEifOXPzo9QsJW9ic0uBiUDXm4CRF8w8z2UIa97mcc9xo/PHn585uYTQU3dPgSaXos4L32JUyla2fg59q34/tK2uxVO5yhPoqcyib/wgQSYsmapYzO3Tt4I6Ww7S4w/KDWfbj24zuPK302l0V0WFtzmh7JKkwUvb4SIjRZmP5PNXvO9vzNVfjC1dC+HN5AE5XemCc/9zMmdR0CG8/JG6N83bbFhR3g4m8Ulz7vYJ/6By9C+NwLFcVImcGUv8RGaTq5gHyZ/FGe/AB0Kj/HLY0Bv5qMyaCa8nBEiyoNoEFnf5VxDqsuhOh6aDW3OEteTes5/iY+QReDyltgWIOaAPUJi/olX2wmIeyjWwU5AzD/xajsBcQ/FOtgJiPknXm0nIO6hWAc7ATH/xKvtBMQ9FOvwB59LVOBheDwxAAAAAElFTkSuQmCC",e.highlighter={},e.highlighter.blackOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAGuElEQVRoQ+2Ye2ydcxjHd+reKp27ldDpsFgRoRk2NS3ZXIaElLg0IiVziUvS8N/i75IQEokKaRgpC7FlI7ScMiwV144FpXPp3CnVMvfv583vOXn7Ou97zvs7p6vJnuSb3znved/nfS7f5/k9v5OZsY1LZhu3f0Y5HEDHIcJBwiyHfbTuKdS4tUrrbsKuQqVbd9S6g/tMHPkN4dpOwq/Ca8ItwqtxgfZ1YKYUXiUsFhqdUVOVzAkpPkV4Pd8LfByokKJ+YUGZLf5T+n4UvhF+EshinXvHY1ovFv6KvtPHgaOl5O0UxmPYx8IHwifCh8I7wmZhTCDCvwhbhL9Deufp8xsCdPpMOFyAVpMkrQPcf5nQ7bRg3CvCYArDivW9Vje+J+wh/CFcLTzunM7pSOsA9LleuNNpIHIU7/fFWpXivr107/sCVDLJ6kOzkKNSWgfoEMuEu53Gr7UeIYwWYRiGzHb3/a4VKv0s7CLQseD7/gINAuNPEk5zn8Pqj9OXN+2CjwNQ6EGnYETrXAEuxwkGvSQcJUA5ogevkT5hqUAdYMvOAu2WVnuAc+JYrXShOe6ZK7RC4aBe0joAhWida5yyL7TeI9DiKNBvhd9CQP+XAtEnW6uFceEwp4eMvis0mEFOb3Qh6usFHL9RgAEBjdI6wP1HChQXAvfPd9+hBcVm4AUHC5ZuCvA69zuRzgonOj1Q5ocY47mMA+sEsnOTc4BspnaAZ/YVPhWIBpvZAwkvZgdmNyZz3wlQxeQpfYA+yIECmYqTk/XDM8LuwjXCfYK3A3AauhDFVgFDCgmFSpFCpQsECvSE0EP5HCDb1AJjSod7FxloE1aU4gARtWj16jO0gPtQBxoFkXGCEdcKcJbrtF26z3PCopATSRmgQzEL1Qtk/TyBWvKqAewiAxhMF2CnXCUMCV8JnwtwGUPBQiHrnLlS60qBjsWzdwg3u9+SHCBgGwQ2NgTHXyzFAQoOPhPtM0IGOv2TFgoXyhB9IkkHMnneGcP3JAd4Hw5wD0JBvyV4tVEUoJBo4wC7Yuyoq9+eFU53LyZyWYEx+iLhoZAz+RzgPkZsZiLqbD93P5vhplIcgEJs8XSEswUiGSeXRgy1+8gI9LNCZhxhU8wnUOgjgcAhUIlBMJC0+wDPQAUiy+bzqMCmxijBKMwKTayYGcQ6hXMFOhHXswLcZ/p80tnBbHW/GRVZ6TwUvtUAnQwKB+LjAL39LuFygUiwJ9DfMY5d2LoR35l1iDS7KDM+v/Fy1mIE+zCYkxntFNlbyA2PPg7Q/y8UHhagAsbQ0ug6tFVaHLsmB5Nw0RZjMLrp/VCKcwdnAGYoZiFqgA5HOy3JAXZVFG90FhHp+QIjQ/hAUshg5iCySUSPcTo5U1Nj8J7rrHAfQEGGuBsE6BqITwZ4jqjQ2hB4f7xAocWJ7arVuoGuQgAY6KgnDLYRmprhHroPBhMsHOUktlZYLlAP1E8gPg7wzKECx0QEB9htHzGlzgCiS7oZtzE4HE0iirE4AGXYYe1fClODkWT5ZQFq0vnYKKmrXKZ9HOAFpJdzLSmH+2xYtztjOeDAV4yz9LPSdu3vFSJr0TWDqSV2dCbdAYHih+vQhQYAoudmrwzwQqLHOYDDDYVMJyIjFKEZCxVogUQ2aiw6GEegA1HmTA0lMZbCB0Sa4NDZeEfe+vLNAPxkonxCgBoUMp0oX2QxlnZLjQCMhg4chjCQFmwgwtaK//UXCoqi4uuA9WdGiVsFippIE0FG7U3CsEBWMJg6sQGPgrS/UcxYO2rmszHxWqIDo6OjM6uqquaOj49vrKmpiZ6YKDxqgbMrXQT6kHaiiJFhYKid2IwOaVpurBOJDgwPD59aV1f3gtZFWrN5tNDioJO1PDtO2iiBkUVRIXXo3QNJDmT6+/uXNDU1rdF6ltan9UxZouZrbL7nkhyo6O3tPbOlpWW11nO0spFMaTR9HNvugE/UyvlMkAHrNmHFY2NjFSMjI/MaGhruHRwcXFZbW7uhurp6EoViulM57SuoK3DAuk3BuyM3JHSntKq878eBTEdHx+z6+voFExMTtMOczJK0trYu7+npuW2zJPxbZWXllqGhoXWdnZ1sVtPWnayImQiZb9hNTTLd3d0L29raVmi9RCt/0IYNpeczYIX/bfOOpO+D4S4UZCOkqKKvr29Jc3PzKq1LtbIPhGsAZ6Yt8rkoJ3i+fR/wpUWa5/7XG1mmvb19TmNj4/yBgYH1XV1djMXTzvlodgqdB+hOwA4cabK7Ve4t5ABGcM9/LvLFdKGtEsFSX1JMBkp9x5Q+/w8DOu5AWYOCNwAAAABJRU5ErkJggg==",e.highlighter.whiteOutline="data:image/png;base64,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",e.highlighter.mask="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFb0lEQVRoQ+1Xa2scVRh+z5lJdmY3k02228baaG8x7ab1gihoxdJ6KRZqpdBNRfwgCH5pPwn+ChUE/SgiCBVJbLX1Rq0SsGpBbMFLeknUtvRq2iabze5sds6c43NmkxjqbjIkO0hhDwxze+ec53mf9znnDFM9vYpu48YaBP5n9RoK1E0ApXxilCNFI8TYOCmVxnn1fP1Hr4AGRvJPIn6WiJ3HMSRk+RdT8csuTebtUmuReLNL596fZAT4U01ldm0kZpzAd01zkVgcgQAc/QBQv4YFNl9Gp98Xu3essI34IFRpjZKAO56nzuTFvpthgYWNy3VmU60OOwMC6egIkPqbiiPr2LmBsfmAjXc/m3bIWhPEmYZHI1eH2MjAhOraHptQVrIlxleTrzqIme0AnSKmNiHyCSibio6AkpdIXsmwM9/naw2i7n6hnRLedzDkBhgTRlVypq6V+oZypZ3s8uEiip9R1/ZmEq5djDXF4zx1Bym5iRh/gEhshh/uqTbGYj1wBYDeIcl/Jumfz1P5uiNFmURHGaYsY0BGmd6rlTKAWoofJsUKxPy1ePcMSBkg9Tud6rt3toFvBaoyex7EN8erGXpxBEjdFIrtcn130BGuRwUuyDEEDX8pAEKW1mTvsiw6WQGk+miwfx+ACrUh20ySBkDg0eDVhJliF/aP1lRREyB5DPH2rTELJ4By8Jl8xRz8+L2aA3dsS7jJ5jbyW7jtFm7oUpmZJnuyn0Kgnfq+UJxY3nLui6u1+vHW9T5mGuorxLfUk8AkymcPG+wHkLmbNirx+GpBPG0afPeUQR+e/qoagcATHdvi5CRXUjO9hhViT70VmASAoyXl7bNujF2nxCqBuvdQInptqBSNBrE+u5c4e7tiYHLxcAiPv8b1VoQEJOZSQK15KklW6keUUFd9PRAAYicA6BCRNywku2by8sW8z0ad3KRL1464Yn32cZOzAQ3SJ/9lo1zshz/y2rCqJ/smiLw6L4FVW9rITv+G2WhFNZ0X7gGSnpC0rel0fwCwWgPIPoDcHWT/Zi7Jrh0p/OuB3m9xrVWYU4HKgkYgwJbXl4BSrlDiyabTByFvDQKZ3UeQuaf1WyHlVk0WZWVST+/zePTB9Fc1PGDS0i0WpVN6T6QNv6z+BKTY0XTmoM5kDQV6X5wNdCZouvymPOCKYmf87GeXqqqoSyi+9I9aK/LCSwgKoJQ/hAc+F8ofM5mZI+GNFUS5IK2Y55RG/RJf2mrF1OsY/DmUQAxG9BCPkvNR+x4mAfvglD/eMk8deLcqgc6sTY4aisQDWFUvY9ALAFdEnXu4xuqrBGYYXDN9P+H76oQh/eMu88alx0Xir0M39GJWS7XZz/UsNtGVTbc00U8YY2V9S0j3VtlOB6tuZYpUR5GpwyVZPmaNFkdmmzYUYL1CF0biZLd3Ijn3ETe7McgGfLu5/h6YQaTLwniETn10cq79zK0EkF0Dm7dEyTCXWNy4H94GWONOAMZuVLUhJ0uwd8IZO1N9BCX437ZwD8z05Y9R2X+IDX8Co9Uw89SqWrBNJ2HbG3HbDUBrATAJoADM2gOQSuHnhTkgYIFIDCrwYMM3R6sPAan2stMH9k+Po1a9ZOWtXMLhvAs71YzkRjdX/lQ2FTKq9/iyFeUGAhSHsfVvozkf2GgUCGYj1kdq8g3isQzArEMGl+GswVXkDw7VgucJZN3GmYfJbhjfLF6BipEv4MCPO7ZdFcAASw5IaLBmvcBGo0DQqzYyw0xUv8yGyb6OWbwCYUeKKK5BIKLEhu62oUDoVEUU2FAgosSG7rahQOhURRTYUCCixIbutqFA6FRFFNhQIKLEhu62oUDoVEUU2FAgosSG7va2V+AfwoCz76dc/qIAAAAASUVORK5CYII=",e.text={},e.text.blackOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFn0lEQVRoQ+2Za2yeUxzA17q3She3WF3W6chC3RIjQdqldelmQ5Bi6AeamHtQESLbXBIxfHEZRqTYh/IJcU1rXSxII0Q65tLoRDp3SrXM/fd785zkeNe+ffv2fd+a7CS/nPd5+jzn/P/n/C/n/7Rk2lbeSrZy+adtUyCLHazgmQNgevTsF/zeBL9k8X7GRwqxA6XMuACa4RjYCzbCUCTJnolS3l8HHdCdizL5VqAJIe6B7+EleBe+hj/hr0RA51TJ7WAGHAunwTdwKXwyEUXypYDj3AoXwlJ4L1lxTWQz/AF/JwQFtud6JyiD3eFMaIFTYX22SuRLgSVMeCVcBX3gDih8vPKjyeROqMiuoKktgsvgCPgpGyXyoUANE70GKvEOfAe/RZMr4N5wcHJvI70OHD+jHLvA/nAfrIYnwF3L2CargO/fkazecvqv4Pdoxj34/SA0gLatH8yEj+CCRJHwuGPtBvrB4XARuIMFVWBHRn8TboNXIA6LO3D9EJTDXfBrIolmc33yrGanf4TmO2eAptgI+k9BFdB2v4R6cFXjFdMxdWYF+jhSbmd+nwKtsBB+jiQ0Mp0O18LJMFJoBRTyGThpjIk6ua+pGEqDPeugNybXmkvsrCqgI1+XKDlcaAV0vP1AMwlx3jm9fyhUgw5svLc/BD6H1+FR+ACCafle0RUI0cN4LufBOWDEUTijzWegA/8IOrkZWbMxcbn6seJFV8BVs7nampKr+zS8Dzq0odKopKOK1zqmq+79WHjHmRIFNIsuMH6/DIOg8wUhQzLTB0IW1uRq4Q2IHb/oChgSu0GbbgdNRMdTqCCwjn4kHA2alj7j7w2gw8aOWnQF6hDgftD2PwXNJkQbc8TVcEWimH7QD/qETn4WGGJ/gNCKqoCrfxNoQteA558gvKbicdrs7N8UWh8I/mAe0NnPnUoFPOM8CW/DAxCHQ1f/MTCB2RttFF7TUrk7wULHhJWeyIqWBwybHrrWwCOJgHSppomsBBPYzWl/m821PmOCs4+PC0U1IRW4O1l5TSk+xPm3ejBZPQvuks0srGk9nPzN0nLK8oAHr/NhMViMxNFE/9gHDJUWKAcmCpjYPPQZgUarid0Bz0c3gMeTgh4lFPIgMJargLVt3PSDStDW3RGbiUybN1cEn4jfcUxLTGvkOYVWwIn90nAxXALWw4bJdIFcVbFpLkYjy8hb4F4wd4Smg+sjmtws+DZtvC0uJ1vQaEb7wuVwNrj1L4KOOdoxwZ2wuFkGHvRU/lWIKy9N7ym4HfwwkLFNVgEHdzWddB6YuGw98CFYK9h03plwPHiIexwMw8vAmiJumpe2Px96IWNZmQ8FnNwixfLRY4OJ7SjQP4JwRhsVUiB/K6BmlS68Y3lPX/A0a5bOXYHBwcHp5eXlc4aHhzdUVlbGKT9t0VKXCmT896Bmr3kpiM0EpgOb7MJBLxzF3Ym4+Y5+opJxaB5tzszfRvv7++urq6vX0M+j7x51hC1vxh+uFMYV1B8C435pyHKe1GOZTKhk7dq1TXV1dS/QL6DXofI6+UQEHevZTAqUdnZ2zm9sbHyefiG90SU9suRDhkmNsU2BSS1fHl5O7UCINvF4Q0NDpQMDA4fV1tau7O3tXVJVVbW+oqLiXyaUZXTKg5hjD5FSIESbic40weg00eGzel4FStra2mbV1NScMDIyEg5dqZdn0Jqbm5d2dHQs30SLRywrK9vc19e3bsWKFZaSUxadghN7HPDDapxUStrb209saWlZTb+Y3uIjFtRkY6U17ue/rJYyx4fiKJTajWic0q6urqaGhobn6BfRmwdiHwj/sMhx6vy8ti2M5mcdcx/lf70DJa2trbPnzp17XE9Pz1urVq3yw9SURZux9mi8esDoJEaaKY02uSrgeyr5n1v5oNB4O5C7dxXpza1egX8AjgCwQAfJDt4AAAAASUVORK5CYII=",e.text.whiteOutline="data:image/png;base64,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",e.text.mask="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADRElEQVRoQ+1YS2sTURQ+d5JqktoUiyAVqzRqSSJSoeLaRaAIKkibVFy40Z0rRdFlXUpFF/0BFnfJtD4ogkiFdqEuBFeSxFBDtRKldNFHzAxx5h5PB5Q2mWkmwzVJYQJZZO49d77vfPe8wjCaQNjBH+YSaLJ6rgI2BFgExHf0Xfy3V5JOAMIAMNhnw37bLf9HAc4fqGU27svLPxjAbysEePTsbpACveCRRoGxESdkxBJAnANeOM8+v12vFwz2DYXBK30AYHvqsRVHADEJGfkyeZzXA2Dz3l+Rwe4A6yzUYy+KwCKkUyECr5m9nAqNBKFYh7GWnynSPt3yWkUSNyg2HtolIYSAxvFMW1aeq3wpAWcQjl8HiY1vWaMYgezkHTO1lFD8kM/HvjaUAKwo7awwXaoiEE0k6FnSFAziOZaRX1bZhGKd4OtaaSyBdEoib1a1JBgZygHzHDMFQyqw7OTt1iBg111b942wdCq18wig/lxDbcybffHeVLWmXKHq6F0G5BNUnGZB51/WStJSkKsqFKYVM9CbzbGpBBBugrL0GBZmV2sBtUyjzSGARaWsRwLzT7/bCQcjvYZiQZafWW2NGND0CMtNZS2KmAEWvJ3d1PMcoabuFEjSVeA82RpZiFoIyueXTMH3Xewn0LJpKm2VNKoBj7WlJ99UEij2Xtjf7vf9tLxSCHdZJnW/6VdIVfGwPy9/q6sK02bL9qPRQayUtR6z4MVwYpBauFfmCmAR0nKX2azQ+DSKbIBlkh+rFDge3wXI5ul5z9Y1Aq/xfgr6vGncNFoByiajlE3uWWQgD0RpUNG9J411LH+C3LP0tlNawwlsACsF/GxhQrVTA2rtoRrhhWjCcgyttBcyDwD1N5CZGqpnGjNiJJt6XVmxjSIXja/ZHS3FEDCuB86t6+pwMDe9vJ2XVw/Gu4Id7BHBvAKlpb1sYbaq98fw8BgVu1u11NpYF0fg79s21ADpCTVxGYVTwNLHL3kOUEY6TZPZNfrZXwMY/Q2jq5ZzRIWxeAJ23CZwj0tAoDMdHeUq4MhtAo1cBQQ609FRrgKO3CbQyFVAoDMdHeUq4MhtAo1cBQQ609FRrgKO3CbQyFVAoDMdHbXjFfgDDRCs4BqGKzQAAAAASUVORK5CYII=",e.arrow={},e.arrow.blackOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEnElEQVRoQ+2ZfUxVZRzHueTLguFQV2uwqTjYcom1/mDkYIigBihmmSxbg1Vk/ZVbYS1Nhs5XzLe15WRrMUcby9ZGkrpAZNHGSNcfsNHWXUwdVJpGIRSV6efLzmGHy30998C9OJ7ts+de7j3n+X2f5/v8nt+5uGKmeHNN8fhjpgVM8ApqgqvgNTgPZXDXOmY0r8BsAv0QnoTDcAQWwl9TQcAcgqyHO3Ac9kM7vAMD0S7gUQL8HL6Fj+E9+Ae2QS8MR7OAJwjuDHxiiHiVfhm8DldgEKJ2DzxNcCfhA2iCYngFSsANf3oGr5WIhk2sGGSTLSCPfwfL4aAhQN7/Hf63Wsd8HWkBswjkGGTDW9ANaVALb0Ib/AbazF5bJAU8TESfwr+wG3pgLnwFe0F74Ybxua/4I2ahx41AT9Mr0yi7zIRG+AYOwa+g7OO3TcQK6J7vg9KdfDwma/Bep+oOOApnoQ9kEdlGq7HdEPR3oOD1+UQIyOW+OjXVdkKD8TqRXhnmKXgXukCzbAa9mtfKOldhXLr0JcZpAbHGzM6gV+rbDJmQBXXwNZyAa6DN+R9sMq551hDlNV1OlgDVLz9COcjXp2AIHoFqkL9/gT9AtkkHbdatxmc36b2my8kSsIqBDoBmUzO5HlJBNlLgClCCFOR8uABfgA6w66AVCak5aSHTPppZlcDysYJ80BAjQfK7mvK/9kMSvA3ayGNqnGBVOCnAtE8Zg6sQU0APgMaQKDMb6b3KBM16IfxgiA025jHfc1KAaZ8NjKBN6svL8/hM5cEekP9vWcSFLMIpAZ726fcRicZTifASPAM/Q8i+t97bKQHe7ONNg07b50DngAKvBJ2+tptTAoK1j/bEQ5AMqjhfhs9gn10bOSEgWPtoljVeHDwGL8BKOAcqH2xZyQkBgeyjMZQ2U+B5KDJWQA8tOtiaQYdexAR4s4+Clt8XgUqFtUbQKiVa4HtQmr0NOpX1S4Nn0acVC9jCXQGrfXYxmk5Z/fSx0QhaDydKlTpxzaB1wAlVmzrYQiodPBWFK0D2UWCqcxbAGlDQsod+iLpsmWnHgraK8Cugv79/bnx8/JLBwcHuxMREPZd6tnj+oJpfpfAlj6DNmZY9wp5pX17yK6Cnp2dFSkpKC30u/UUvN9EKqNJMAD09TUrQwa6Aq7W1tSAnJ6eRvoheT0+eG83MMKr/lUUmbKbtrEBsU1NTYX5+/pf06+j1sB3WhvMVRDh/92ehaQHhzGyw146sgJltrBcNDAzE9vb2Lk1PT/+os7PzjeTk5K6EhIQxFvKTnYIdP+zvjQgws02od/OTnUK9le3vS4CroqJicWpqatbQ0JDS4mhLopWUlFTW19dX9dGsn8XFxQ273e626urqn7xkJ9sBhXqhuYlVIeqfCkqHZnPV1tZml5aW1tG/SK/Cy5pGlTb1nKvyIWLNmoVGVsMSSWxzc3NBXl5eA30xvc4B6x6QGFsFmJNqp9Ook7Np51739Qq4ysvL0zIyMjI7Ojraa2pq9JNhxD3vuUqBngeUnYQyTUSzjS97BRKg6/SdqJv50VxvZ+NE0zXBrEA0xTsulnuvCXxAhzz8GwAAAABJRU5ErkJggg==",e.arrow.whiteOutline="data:image/png;base64,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",e.arrow.mask="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACx0lEQVRoQ+2Wz2sTQRTH3+xumiaaIKL1IlTUlk38gVAUvKgXFcGCIc0WD2qRHqv25t/gqVLBmyKKSBuCqL1YL570IHhsQopSpXioOUhTktpk9znZmjbUNruZvjUJzB4S2NmZ+Xzf9/tml2HUQGjji0kBTXZPOuC5ARaMw3LwLgQLxc32am0HLLwFmeRD0I0xUOB2ewmw2EWWmZhGPTECCnuwldOt5wDibzCtEyybyqA+eAEUfFsvpi0mABfy5eUj4eybHPbGddDUtFOPtZKAT7CIZ9l8srjY278npHbOA2P+NhGAT2AmOcwATNyfCEAY5gBYlxN8Zbz5DqA5CunUOIdH/k2jQtT4yLlOuoFvrgBEs4wrZ3yZVx8qIByeQTTxmP8NuYVvngDEb0sr5VOhLy8XqrAYid8Bpt5vBN47AYjPeE1LwJSb/wAhvID05A0emVJ1rKTHTmuKz3ai0cubHkDWlzcL30Na4OcaEI8MoBWDTGqqkvfq/fyhWNfODu0HP3HURuG9c2BmsqNSYYwMPLJdQOsdFHMGm3v/qxaSq/BBJDHL4btF4L0RgPCU8YjYjXn4UhgsdR/7OjW7EdBu2ojxnP9eFYX3SADrY+mJz05QqMf7QVFfOz3nNE7fA3/jU29jPHBuFwT25kRzX7s2rYCa+NQVEBmY5r1x3qm6bsaJBTjHBw9e7oHOYNYNnJtnaAW4iU+lsX07xjZ9R7gh3vAMnQCX8anuv/rF6b+3XSGEApzjU4VfPf8HjwFYo7yRrwkUfm0KnQCH+KxDI//mgevbgaY/hbaID4fWeKWP81caKbQHAtbjY0P3XDkKmn+ER2SI4qyv5xZNhJa03eAvdP8vaHoHqAItsA6NAwIbU02RAqgqKbqOdEC0clTzpANUlRRdRzogWjmqedIBqkqKriMdEK0c1TzpAFUlRdeRDohWjmpe2zvwB9rJQuD4In1EAAAAAElFTkSuQmCC",e.line={},e.line.blackOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAC7klEQVRoQ+1YTYhSURSeZ9GPZjnbXITlBFFuZRZNNulmitqFixZuMphF7VxHbVpIq4gCYRgXFW5aFNVGKanF4C4MWmRJhBEUZYnSQFTfkXfh9rL7fubdezW88HFQ3zvv+94599xzNGYmfBkTzn9mKsDHCB6Er3fANzc+xyEC20D4DhADfgHHgC9ORegWsB1Eb5vEr8JmgQU3InQK4MlfBulPwC7gHHAEWAS6dpHQJcBK/i2I9gD6Pg6sAMvA2jgKGEX+K4j+BELAdXM/nIb9aKbXP3WojoCIPP12DZgDzgOvgf44RcAp+QsgTSlFUaGqJFyqIuCWPJ0FlFK2S4UAaeRJnWwBUsnLFiCdvEwBSsjLEqCMvAwBSsn7LUA5eT8FaCHvlwBt5P0QoJX8RgVoJ78RAXSC3zWbLRpGWPNF/QvfVbLGzHFvY9v8WC7w2krMw89N4CxAbS/r55WS9xoBEr0PeAjQMH4F+K76zbNAeI0Aza70N8iqCZqiaCinYUR62vBZ5FXAJjiZBfabAj7Drqsm7zWF2AtgImgI3wM8Bz4A0jasZf8OPwoj0O12Z0Oh0IF+v/8yEomM+rOJROwAtgADE7Zj4CgiXr8TCmi320djsdhj2EXYJ4KHkB+lxBkXkQCjXq8vpVKpB7AnYB/pIimKjkhAoFqtHs9kMvdhT8JS2XQ0aHtNBy/3TQV4eWt+3jOMAKs2vONerxfodDqHEonEjWazuRyNRl+Ew+E/UkhQnfzkKPQ1FMCqjdunOqhObl26vp4EGIVCYW88Hj88GAy28h52Y2Wz2YuVSuXSeyz+t2AwuN5qtZ4Vi8U3OqsT28RBkNgJbOZIGuVyeSGXy92CPQP71EL0Bz7TqUsHmLbFV6FhNDgmgVqttpROp+/BnoKlc4DfA3RwaTm8+Lc1LaPacsd88H8dASOfz88lk8n5RqOxViqVXo1DzlsjbjfQUHUisFZZd8b89Xw7AXSDtlbZydtyIsCJH23XTLyA36pqaEDt5j1NAAAAAElFTkSuQmCC",e.line.whiteOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADZUlEQVRoQ2NkGOKAcYi7n2HUA9SKwc+fP2v/+vXrsbCw8CdSzBzwGNi/fz+HjY3N8u/fvyvy8PD8f/z4sZO8vPx7Yj0xoB5YtWoVZ2Bg4LInT57819PT692zZ0+4qampLSmeGDAPIDve0NCw6cOHD2+Aoc5/4sSJNDMzM7uLFy86AsU/EIqJAfEAFsc/BDr0MxBzsrKyqrx8+XLe/fv3M42NjU8MOg/gcPxHoEP/iYuLc58/f34qOzu7IjAfhH758uU1UPw/Pk/QNQbwOd7S0pJz06ZNk5mYmFStrKxyb968eRfo8K+DJgaIdTzQI3m3bt0CJSlQrOANfZDn6BIDZDgeVBf8IxT6dPEALR1Pcw/Q2vE09QA9HE8zD9DL8TTxAD0dT3UP0NvxVPXAQDieah4YKMdTxQMD6XiKPTDQjqfIA4PB8ZR4gPH379/rQD0paGcE1vj6h9yqRGqYEd22Iab9g6yGrMbc7du3LYCd7xmKioopHz9+BDV7we15ejue3BhgzMrKUu7p6dl279695To6Ou1Ag34MhOPJ9QBIH7+3t7f26tWrF7x582aBg4PD1JMnT/aCOiP0SDYUJyGgAcxALAj0hBrIE8D88O7Pnz8/6e14SmIApBfsCU9PTxV3d3f5goKCi0D+CyCmWYbFlsHxZmLgUIcgNze35tevX68LCAhgG2wCeYIHiNmA+BsUE+wGklrS4FOP1wPAoQ0HYEmzH0g7AukDeAwCmUNXh8Pcgs8DjAcPHvS0t7ffCqS9gfT2gXIkuTHABBzq83JxcdkMpH2B9DZQWU/N6KeGWfhiYNQD1AhhQmaAYwBW2iArBo7XMz19+lRHV1d3+uXLlzOlpaWv8PLyoiQhPKUTIXupJg/2AKy0IdVUIkonUo0kWT3IA4ylpaVKKioqNt++fWNHNkEKCMLDw+tXrlzZ+AwIkOW4uLh+3rlz50h3d/e9gSydYJmYC+gIPiBmQXIk48KFC23j4+OXAuloIH0YzaF/gHxQrQuqwAYMIJdC4NhAcgnT3r17PZ2dnTcBaT8gDaoHkPMAqOIakMoLObRGi9EBSztQi4d1DDCmpqaqAifcLE6dOnVi9uzZtwdDmkePcUJ9YlDpBMKwpvJApxgM+wl5AKRhwJrKxIQWMR4gxpwBUzPkPQAAUGXET4yuJQ8AAAAASUVORK5CYII=",e.line.mask="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABNklEQVRoQ+2XMQrCQBBFd0PAq6itnZcQBBUELfReKRQLEY9ha6mHkTgqsikCgWT274zCpM5M3vt/i42n4ZzcHz/eBJTbswZgBRAdnfeLrvt+ooHSldv8di4e/ck4z3qXLhLqAgE+QHeVUBWowwcJGsx27+O0atOEmkAjfH+6dFl+aAP/eUdFAAWvIoCEFxdAw4sKpIAXE0gFLyKQEj65QGr4pAIS8MkEpOCTCEjCwwWk4aECGvAwAS14iIAmfLSANnycANHe30/r+r2dOt7n2977m96L+x8gP/L347X6kxKGj2ugov5KSCcfPh/XQCXxLJzPNrHHgTOPEeB8GTRjAqAg2WusAXZ0oEFrABQke401wI4ONGgNgIJkr7EG2NGBBq0BUJDsNdYAOzrQoDUACpK95u8beAHJBRXgx8FPkwAAAABJRU5ErkJggg==",e.rect={},e.rect.blackOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAC4klEQVRoQ+1YMYsTQRS+DYqYEMkpiF60iOQK0VRCsFBykjSnaCFiCotUKfwBqcU6P8AiVQqLyGGhqE2CF7SQgFUUC4MpNKcIajAkcijq94XMsRey2d1xJ5M7d+DjbcjMm/nem/dm3hgLO7wZO3z9Cz4B3R78bz1A4mvAVcUeuA/914A/VvPIeiAIhX1gBfihiMR+6F0HQsDAawKLUPgVOAV8VkTgMPS+Bg4C37wmQKVfgOPAB0UEjkHve+DQyFgTp5HdQpMIUNc+ICBJ6DfGbZr2+8wJhDH5d8nFi2EH8NEb/Zg5gSOY+CNwBvjlksge9H8JHAU+6SIgLBaT8AQt3x6LqZl7wNGEFp6ZFFOO9HkZxI4m9AmMWcD3gOkg87eQn4VcHD7SaW+es1DUFA8ubLGtK+Ooo+skjmDiZWCv5FXiJ8a9Bbq6CPA+w+KD0m16ZsXF+xOLJHGPcpTV3E4k/L1r6gFumQ3ZDW8zbmm0pZQUNCwp7wEZRYsXaqv4uA54XlKyqGfW4Z5nJaWisbJjTDAreV7UM3b4asASUjaO7EgzsFli8tVD7lml2+0uhkKhk/1+/00kErF0o91KVP4/1XrtdnslFos9hbwAua5yIbK6pxEw6vX6aiqVegR5CfLJNFfKLuBfx00jEKhWqxczmcxDyMuQjxUGrDQPn4C06TwaOPSAyDZmnb1eL9DpdE4nEok7zWbzZjQafRUOh7fl/HnITkMCItu4Nco8ZCcSMAqFwol4PH5uMBjwYNpqS2jZbPZWpVK5vYFm/i8YDG62Wq3nxWLxnc7sJIKYVwO+jvEqLJpRLpfP53K5u5A3IJ+NLZTXXr6FWh7zbj0q09+chYbeMCkJ1Gq11XQ6/QDyCiTPAXMM8Hi3POJlFiMzxk+jMlbzcsyu9oCRz+eXk8nk2Uaj8aJUKrHg1r7nx71nd5dndiKYabRmG6ttZ0eA49hn7iy/leu9DCgdupx4QMe6HM/5F9IGOEBp6J2bAAAAAElFTkSuQmCC",e.rect.whiteOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADAElEQVRoQ+1Yv48SURC+tzljbgkXOMHo7VlguMIolQmx0HAGmtNoYYwUFlQU/gHUxpo/wIKKwgJjLDRqA/GIFobECo3FESmU0wieRLKYiwb8Bm8vK3Fh990uj8N9ycsUu/Pjm5k38+axuQO+2AG3f84FIDqC/20EWK/Xe8AYu+ZkBPr9/kNJkq5DR99ID28EZAhXAWANgn84BGIBOjagwwP5XbsB+CF8G8JPQ/AXhwAchY630LEE+d/sBrAE4V8h/AQEf3QIwAp0fICOI5C/PQkAlI6HsSVOQD3w7ejyfeIAvPDYd07jB2zw9iJIZ1fGxAEcA4BPMOIsDPhlEcg8eF+D9zj4PosCoHksBAOsRmIRAOpDZ2riETCl0CAy/yoKpuTx9gFuhS6AIQ+4EdA1MlM566aQm0J/PDCTVUhBM9rXxQ6NbAXOaYjqxD4oXsU+xHOVAM9P7E3stigA81BMwwdRq+WZJi66P6k68KaqmlVFWg2YmXmAUmbL4s3T7O/LOFObTg00/mazeT8QCCTMWsPzX6vVKgaDwRvgtX2klCFU2c15mqScWDTZ0ZmgqmT7UE9nZwGbRkjeczQONB1sGjHp1YPvWaXdbvs9Hs8pVVXf+Xw+wzCOs8TJ7yO9V6/X10Kh0HPQi6AbThrCK3sUAFYul9djsdgT0Mugz0aFkteA/fKNAiAVi8VLiUTiMegV0KdQ5tSB5cbhAuB2nU2Mgwho1UYvs9PpSI1G40wkErlbrVZvKYryxuv1/pVC01CdBgC0amPVKdNQnQgAy2QyJ8Ph8Plut0uNaW8tYyWTyduFQuHOFpb+myzLO7Va7WU2m30vsjpph5iuBvQuSVdhbbF8Pn8hlUrdA70J+mLIULr+0gucYZu3GlGe//VVaBANnRCpVCqtx+PxR6BXQakP6M8AtXfDFs9jDA+PW0Z5vGYnz0xHgKXT6dVoNHquUqm8yuVyNHALz/nh6I27y1N1ok2VRmi1MUq7cQCIj/6ZOs/v1Xo7D5QIWWYiIMIu0zp/A2/M/kD8slZNAAAAAElFTkSuQmCC",e.rect.mask="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAxklEQVRoQ+2XwQ2DMBAEcTsUlCJTEO3AF/mROTALQhm+iy7czPmstHX+rNOLn2YDD9vTwMMCpv820JZvSxqoLJghAzYA+jRA892PUIXYr5pn6l16Bmyg22oVIBrYz3SFmGegI+AIOUI7At4DdPP2+RlibqHkFjpqkN6v3CuXrlH6oKO5DRCx1/8jowbvyIfOwB0fSL9hA0QonWsgTZjqa4AIpXMNpAlTfQ0QoXSugTRhqq8BIpTONZAmTPU1QITSuQbShKn+Bvlt99H9PrktAAAAAElFTkSuQmCC",e.rrect={},e.rrect.blackOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEfklEQVRoQ+2ZX0yWVRzHfVErIQpLl4Y2MdQ5ZWYXaBsOEqZDB1absfKCG7loc04t2trSbLW5iTVtNS/whgt01KamU+cGE6wL46Js1HSG4ir8M/+EERiVfz5fdh59gud9n/P4PvC+uPdsn52H5zl/fr/f+Z3f+Z2XyKgRXiIjXP5RKQUSvYJhrsAklFkN5TALngioXDftT8MB2AWXbPqHpcArTPY5NMEhuAD/2AjgajOW52xYDsWwBvb7jRGGAq8yyXZ4B34GWbIPbvtNPuB7Gn8/CpkwB7bBetgba5x4FZjC4N/BOlNfo/7bCH8noAKSRUo8Bk9DPuyABfB7tLHiUUB9N0MObISLILfR+0eMMLbjS1mtmPrrWf0nw0fQYebxNIjtBF4GkM/K+h/DUegxwpdRb4UZRoloxnO/l/C/wLtw0CiRQb0ENoFW41+vgeJR4HEGlNVfglNwC/Tue6PUj0YQGwUkxzx4H16Ev2A0zIYToAind4NKPApkMdofMA1+NcI+Y5Saab7Z7gPJMR7OgFznMujdc3DefOsKW4GnGFCbdio4m0xhUM8TzDevOaO908a9CgoMnaaRnn8Dfbs+HAr4ThhDIy+D+I4Xjws90IQpBQZYILUCAzaxr8+OBBdSSFUU8owaPgooCil0OlHN1yDxupCEfQHajWCK4d+AMkmdzkHOgaW0/wIKQAekSi6cNEqFHkZ1kB2HDaA0WsLq3RvwNkwHWwOp7zn4BPaADi31XQzKdBeZd0av+5XtBIM68kJpg5KtcbAWlIgpCdNpPBHGeHWK8e4/vl0BncLOWJ/xfBOULIaeSiiZmw9fg+4ESuycTFIpsb7bGkj9lKwpFXcyWqXR+2AF/GC+D9LfdgIvw6mvDrM3QW70OiiRU1IXT1ESp4TuS/gUdoP8P/R0WkLKysoUtQLvwVdQD9rUWvogRa6oTbsKVsIW0ArobuyZSmvweFbAEU7uIp9/Hl6DItAlR3skSJGP6/LSDLpGngXtCblV1BKGAhpcK6FfIZ4EKSQ3CDq2XETuJ4FvwJ8Q1fKORkEn8TOGIo8u5qp1vw1SdCtTJNIPAqqtzpAwFQgibGhtYyrQ1dU1PiMjY3ZPT8+prKws3b6SrsRUoKOjoygnJ+cY9cvUzUknvc9Gi7S0tJQWFhYeol5OfcTWL4dT0VgrkNbY2LispKTkIHUZ9WEEC/pr25DrklJgyE3sM0H/CjjRxt22u7s7rbOzc25eXt7Otra2t7Kzs3/KzMz8nwslQ3TqV8CJNkGtmQzRSQpEqqurp+fm5hb09vbqFL1XnqVUVFR80NDQ8OEFivtbenp6X3t7+7c1NTW6iFidmkENZNPe2cTpNFYu476EROrq6hZVVlbWU6+i1lXRLaiOe+UrvTYTDVUbdxTqXw3XRGlNTU2lxcXFB6jLqXUOuPeAlEmY5R05U2F0qFzDdtyHegUiVVVVM/Lz8xe2traeqK2t1X9QEu7zA1fG7z6g6CQUaRIabaK5lJ8C6qc2SWd5myhku48S2s5mBRIqoN/kdwGt8GRA8pNwxAAAAABJRU5ErkJggg==",e.rrect.whiteOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFn0lEQVRoQ+1Ya0xcRRTm7vIqD1m6loIsRCqPNEjAhlBM2gBCNAhdXlFQICQgP0zAIIoJoFJTiImAqYLxB/KDAAqSAFKQmEAA6w8gpEqQVB66sixFsViQ8hRYv0PumpXu497upbs1THIy986dOXO+mXPOfHMZq4e8MA+5/VbHAMy9g4LtwNLSkrtUKn2FYRg5JADAHuEDTq1Wr6H/T6i7lpeXP3Nzc/uNy3hBAGxvbydaW1vXTk1N9be2tvZ0dnbeGh8f3+FigKZPSEiITUJCgmdqampcQEBA9O7ubp6dnV2nMR0mA9jY2EjCJFfLysrerKysnMQzreQ2ZN/Y5Ie+i/BuB3EuLCwMLC8vr9rb23vd2dm53ZAekwAMDw/LQkNDR4qLiwtg/AgmWoZsscareQIgWwiEPURaUFAQVlVV9dHY2Nj58PBwlT5dpgBgVldXL6tUKp/AwMB3MMEihNyGdNqyxnDVT2Bpx2g8PdN4j8nJySsymUzh4uJymW2/BwfXCXQtgA18f6S6urq8pKTkG3RYJ+NnZmYueXt7f2Bra+vHguCyEfs7OzszSqXyLT8/v2ussY5wo2eLioreRSyEoe1vXYpMAeAEH12Mjo5+enBw8CaU70Gctra2bjQ3N5fn5OSM61s1HYYw9fX1wenp6W/b29ufw/e7EHFkZOTZ/v7+YbFY7M62CboDEqS8O0iZj0OrkjX29P7+/qJIJPLH+x0+ANDXFWOnMdYDz7/TbkK8McevmMMVzytC78BJKF+Gci8o1gSZJ9pUaHsUbRTQfIoUY29jrAyDFtiBMrTNo02K9z8fBACjExpApGtBjOozJQbua8JjAIdW4HgHDgWxUZ+1eBdCKlQiFVIW0pk1DAHA2NsY662V1YwuiEkuBMaoTE5ODunq6pplDfMAubuO0zgvODiYTmeufIgZHR19DpTkE0dHxwsYR7TESi6X+3Z0dPyAg4xACZ5GJWtra9+2tbUVZmdn97PGShobG19KSUl5AyfqGbgXpwVCrldvbm4q2tvbqzIzM79gDy2mqanpGVDsq2CkF4/iIHOanp6+AkNPgPu8hgmIiBEJOw05BbHmc4qh7y7kDwidwge65ubmPgbf2vT39yeySPTinsJphfQYYpOfn/8UaPRXuMAkpaWlEZ3WMEmixDYQrvppHJE1ouIHjLalpeV8YmJiB8hcQk1Nzffsd0EBkHEnu7u7X46JiSkcGBh4MTY29gbaiNSZUsS9vb3noqKivuzr6/swPj7+cygj/9cZT1xXSJ9BtMruPT09SWClxQjgNnD4ZlwnZ/Py8jb5oKitrT2BwPdFIKc7ODi8ABb6flxcXAd00N1YJ5Um/aYCIB3kLqcyMjKeKC0tTfby8oqEAT6IXyc+ABDHd7EAivn5+cGKiop2BPDPGE8xQW6ltwgBgJTTTtBfCBcWkPg+FodchNyPDF6F/GVo5TWIhAKg2U3KPHQxp5rut3wKXSkpE9EPAao5nSFCAuBjrGB9DQJYWVlxxcl4dn19/aZEIqEblsUVgwAUCkWkj4/PAOoo1IMWZ72RQGOGhoZiIyIielDHoe7l6pcPEqihHRDhIHkeh9Q11JdQfw3D+P5tO3IsxwCOfImNTHCwA5pso90XVFm0sLDwZFBQ0KcTExOvenp6/gha+x8XsoTsdABAk234rqYlZCcCwICynvH19b0ALkKn6L/lMRT8ry/DP//3bqFofwPf2Z6dnf0OdPoXc2YnTRA7wAjiMtqXEKahoeFiVlZWM+p01NcPGUrHPfGVDb47J2R/7Sx0sBtaykWgtLGgyV2o5ajpHNCOAeIqnPiKkAYf1nWcRo9ydbno/l/vAJObm+sXFhYWjn82w3V1dTOW4PN8YoD6UnYioUxj1myjz524XGioj9mzjSkAuMSS2fpw2QGzGcdl4n8AppCQTyfJgBcAAAAASUVORK5CYII=",e.rrect.mask="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABvklEQVRoQ+2Xv04CQRDGZ0AkgInYGQorG+8ZNNpYoKHQKAW+HwVoLEiksIHoM0BjZQyxUvwDBBDWwQRUTNi7uRFyyWx3uZ3v5vt+u3d7aJysgQAPVAMLpqcEFgwABAkMmmDgDF56FWiUOgh05WHQZIRUJgbJ6C6V5gHCSTflMgaMuYH++z7elbtuHmqbYzbTUYisXAPijm2ugAFKvtdel2p+3PCXieX4o42EfwNmcIj1iytbUpz7xjlJA4Rmavs30OwksFFqT5LbyK1Bon9J19u0BMKuGjdmQPNuoRU5wvv880QrlYlDMtaapeHfQK0Q+rlhzdZphRqnjcgYxlSxXtybGBhtbCc7/FcDWCtQ/9+DDHy4Tn66MyJBBpZ+6VmOOr4J/DHg82zlVU8NeE3MtjO86ikBr4kpgakE5JdQ0F6jEPQPGQgeJV7f4Hj1ofg036MEDA+wdl62bU7O/fkc5iDox+lRtMH+oRkvDiIBmINmtxq8X0rOAheq8f0dEOqDLaMG2NEJFSoBoSDZMkqAHZ1QoRIQCpItowTY0QkVKgGhINkySoAdnVChEhAKki2jBNjRCRUqAaEg2TKBJ/AJEkBG4ESgm30AAAAASUVORK5CYII=",e.ellipse={},e.ellipse.blackOutline="data:image/png;base64,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",e.ellipse.whiteOutline="data:image/png;base64,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",e.ellipse.mask="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACt0lEQVRoQ+1XzWsTQRR/b9M2u6QFLZUUvESQfIkHBU9e6kGpHqqm3XhSvPlx8OZf4VEqehM92bVRK2jBg714EvQgpkkRmotgsYhQl02a7IyTNN2mjcad3UziwuQY3r75fbz35g3SdJZCgH8oCfTZPelAnw0AAQ6QKhByB3BwHtbXVuD7UpmRtJtEQ3BgQoWxaBxodRoU5TaAMuhHhC4SYMCpfQWUgRx+NjbdgKJH9CEgtQxg6JFXIt0i8Bbsr+ex+G7DDfC9MTRxcgRCB1+w/0/xft8FAnQB8kYGd8qEF0Mjnl1GIUjrOQCc4kngjwClH2HZOPEn8L8OTUUjYXUSFJph6I42QCF8AoI5s1JeHF5dWGtzok4ipb8HxGNuSfgiYFrl8b1AaGxiH2hjc4DK6Y4gKHkD1noWS0s/W+MaxDX1Ww8IkAeYf3q99SAreSGmKgMr7huSVMukFtcKz0uteWh65j7Lcc0NCe8O2DSJRaO4fQiNXVVBM38w+zU3BzsxlFpgRUax9LA+brf6IXkpzkrPyd0pn3cCmxsqfnldcQ5N6TcY+Htc4LeDSe0WFnJ3nVyHz4ZhaMQhJIZAfk5hzetssjSlf+Bpvl2g2DDAZeO4Q6De7ukscSOGdwcCT6CthGZusskz60a1tpi+lBDBBBaesInTbLzANTF0aYzalYRWfLna+zHKTgz4RVYf2B1Widi58YgamWTzZJpFbq0SwFYJCvNm2VwcLr1qu20b+1AvV4lm9Qd4mdsp3CCv0851yh405DIooWd8Dxr7Ihu/j93vT7uHsPeL7K8D/x9PyuiZMIzuT/yHT0pPV5jvjwQ44BsTVwJJgEsuAcHSAQGicqWUDnDJJSBYOiBAVK6U0gEuuQQESwcEiMqVUjrAJZeAYOmAAFG5UkoHuOQSECwdECAqV8rAO/Ab29SO4DUnibIAAAAASUVORK5CYII=",e.pixelate={},e.pixelate.blackOutline="data:image/png;base64,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",e.pixelate.whiteOutline="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAHHUlEQVRoQ9VZfUxTVxSnFBwFlwoqIGpGMp0bMBxjjGX/zMTMTVoK5ctPFAzJFFoGU2HARDRxRKfC2gIuIaKCLtFI+CpuJibsT+OYxiii/8hi/EAURjYK2/jY77z1vTz0PtravqA3uXnteeede37nnnPuOe8pvF7xoXjF9fdyC8DU1NR7MMAxzAgJQ/SAvl2hUFyj+67yO2NcdwAoJicne6HcWzMtBKXveHt7v008zvLv37//nYqKikm5AfhCORsW8UlO1DHXamlvI/o4QPrbd4Djr62pYfLn5uVx/FarNVir1Q7JDWDuxMTEY1hXlaRNZK7V2tFOVh9VKpXBxMDz11osbAAGA8dvMpneLCwsfCg3ADUUug8AATqNhrlWm9VKSo/4+Pgs5kw7Pn4fYAJqzGYmf57RyPMvAcMwhY0jEO7EgABAuzaBuU7HhU6yqK28vJyLE/g2xYO/RQKAAQCIv76+PjYtLe1BUFAQBwAu+KcUEHcBPCQX0nz2OVO+9eef7K4/NWJXJID0MZtMTH5jfj7Pb4PS4iCels3ED7sFANZ6ioWUa9esYSp04eJFJt1UXc2k5xcUSHqMKJtNcyu3AIyOjl7z8/MLl1r1+6oq5q1OayeT/qUEgAQtF2N8NvvXYztQXV29JjMzc59arX5DJFSBQPUjV6k+epTtWh1WJr3gq0ImXaPVirPZX54CMBeCwjDnR0ZGqrHF3G4uW7ZM1dzc3AQQqqojR5gKdbS1M+mFu3Yy6drERAIwApmUzSg7CcMdF/KFFDVmIKaKLG6X6ot02UXp8sjhw2wArdwB99zYuXs3G4BOHgCksA/mHEwCwwHQ6/Wh586d+xUA/A8fOsRUqF0CwK6iIiZ/YpKOd6FFntwB5k7m5uYuMZvNt+iA++7gQaZCrS2tTHpRcTGTrktOokJwAjLnywWAX1hhNBoXI7h7CcDHH8YzFSouKWHSk/TJTDoRx8bG+lQqFVW/HosB1mIK8Q589EEcU6GvS0uZ9OQUPdGnUH6M0ZVnGh4e/r2xsXFvQUEBHSzyAsAC8xDE9yiI496PZSpaWlbGpOtTU6gWsi1fvlx/9+7dv+1MBIRy/1PMB5geS6OCEvDP1+nP4OCgoqWlZVFWVtZvVPPErqQdf36U7dnDpKekpXIAoqKiPu3t7eUVJQC0I1Rek/U9dpAxOyyA8bbX/4qYd6OZin5TXs6kp6ancS5k7zMEFwKoWwMDA7lhYWHdYtciZnfOAYcd2crIKKaie/buZdLTMtKZdDsqvrPzWC0kdGTbtmYxF06Q6BOkFJWSc/zkCZLv8VpI6MiyMrcwAVANwxrp6zI4o8I1RukHlR3kDVJyTjSekqUWEhqarZszXQKQsX4dBetodHR0Kj14/fr18wRCSs7JpkZZaiEBwJZNm10CsG7Der51/ITzjfHxXyjtSsk5dbpJNgBcR5a5cRMTAFWRrEEA7M0+12piNyhAJeU0njktSy2k5juyzRs2ugRg/cYNfG2zgB6EnCfU2UnJafrxjCy1kNpRRyaZE3FDVNt4OSPH5VrI3qCkYC3a5juYzbCSOAerJTqymfTm7j1T23g5kvNCtdDZs2dVGo2mLCAgoGxkZOQA3pYdyMjI4NKefQgdGf4L/YBD7f8v0sS1DT3CdXYScl6sFtqxY0dgcXFxSXh4+O6+vj6U9gcr6+rqxK/7xB0Z1wM7oTyxPFvbEI3v7FhyXqgWUuh0uuDKyspS9Lv5N2/eNJWUlHzb1tb22K4ALSruyKgzc2WMg/kfTLrS4Ds7KTlifqdKCVJuHg6YfThsjLiacaUC5g8RAFcUlo1X2HYE7Wv8Kl1dXQr0tQvRnBShtDXcuHHDUltbeyg9PX1g1apVggUQ1HzNLpuCjgRzAKB8KnLxCjHz0NCQqr+/fwFcaDtc6FhISMiTwMBAcRB74fC5DRDnHS0i530CoESW2UfZxtWFKDvhOXKtCVef9RQ/AVBduXJli7+/fwSOdLFLKVGj+MXGxm7r7u4+jlfkY7C2oChqlymbzdYTFxd3CjKm7YynlHNGDilM7eDS0NDQECjlzT+E14VzGhoaUuLj43MuX75cn52d3YwDhTIHNwB28tGjR/34eQ9T8vW3M0q4w8PtAOZCTMrFAgD89sXO5MDCX+D6A671oIn7UXr9TT3qwGzvgBIK0Ns1mgIAuE4QPjQUxsTE5F29erUmJyenCq40KLIWAaAdoTmrMcDrNO0kRboMsVgsZXwaNRgMB5BeyWXEw+EnIHfcw5lnpY5/xerVq4PxirAiIiJie09PzzG8cau4dOmS+CR2Rr7sPJIAsHJgZ2dnNnL/CpwJtxMSEhpAo1po1q0utspMACiol9qDm4KVso1TXw5lN7togZkqSPo4TR0Tlc30luwJJn2ofqnGTAD47EQVIl8Nzlq2kbKaszX8S2V1sTL/AaIMFl7oZOP6AAAAAElFTkSuQmCC",e.stamp_accept={},e.stamp_accept.blackOutline="data:image/png;base64,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",e.stamp_accept.whiteOutline="data:image/png;base64,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",e.stamp_reject={},e.stamp_reject.blackOutline="data:image/png;base64,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",e.stamp_reject.whiteOutline="data:image/png;base64,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",e.stamp_exclaim={},e.stamp_exclaim.blackOutline="data:image/png;base64,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",e.stamp_exclaim.whiteOutline="data:image/png;base64,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",e.stamp_perfect={},e.stamp_perfect.blackOutline="data:image/png;base64,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",e.stamp_perfect.whiteOutline="data:image/png;base64,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",e.stamp_question={},e.stamp_question.blackOutline="data:image/png;base64,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",e.stamp_question.whiteOutline="data:image/png;base64,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",t
}),define("surface/cursor/Cursor",["require","util/Class","util/Color","util/Img","async/Promise","graphics/CanvasGraphics","env/Device","env/Settings","surface/cursor/CursorData","log/Logger"],function(t){function e(){this.blackOutlinePromise=null,this.whiteOutlinePromise=null,this.maskPromise=null,this.x=10,this.y=36,this.color=new i("#ffffff"),this.cssValue=null}var n=t("util/Class"),i=t("util/Color"),o=t("util/Img"),r=t("async/Promise"),s=t("graphics/CanvasGraphics");t("env/Device");var a=t("env/Settings"),l=t("surface/cursor/CursorData");return t("log/Logger").instance("surface.cursor.Cursor"),e.path="../cursors/",e.imagePromises=function(t){return{blackOutlinePromise:o.loadAsync(l.forName(t).blackOutline),whiteOutlinePromise:o.loadAsync(l.forName(t).whiteOutline),maskPromise:l.forName(t).mask?o.loadAsync(l.forName(t).mask):r.wrap()}},e.imagePromisesFromDisk=function(t,n){return{blackOutlinePromise:o.loadAsync(e.path+"cursor_"+t+(n?"":"_blackoutline")+".png"),whiteOutlinePromise:o.loadAsync(e.path+"cursor_"+t+(n?"":"_whiteoutline")+".png"),maskPromise:n?r.wrap():o.loadAsync(e.path+"cursor_"+t+"_mask.png")}},e.attachDefault=function(t,e){t.style.cursor=e||"default"},e.pregen=function(){function t(t){Object.keys(a.COLORS).forEach(function(e){"transparent"!=e&&n(t,new i(a.COLORS[e]))})}function n(t,n){var a=new e(e.imagePromisesFromDisk(t,null==n));a.color=n||new i("#ffffff");var h=new Image;a.dataUrlAsync().done(function(t){h.src=t}),a.color.equals(new i("#ffffff"))&&a.blackOutlinePromise.then(function(e){return r.push("urls."+t+" = {};"),r.push("urls."+t+".blackOutline = '"+o.convertImageToDataURL(e)+"';"),a.whiteOutlinePromise}).then(function(e){return r.push("urls."+t+".whiteOutline = '"+o.convertImageToDataURL(e)+"';"),a.maskPromise}).done(function(e){e&&r.push("urls."+t+".mask = '"+o.convertImageToDataURL(e)+"';"),s++,s==l.length+c.length&&document.write(r.join("\n"))}),document.body.appendChild(h)}var r=[],s=0,l=["marker","highlighter","text","arrow","line","rect","rrect","ellipse"];l.forEach(function(e){t(e)});var c=["pixelate","stamp_accept","stamp_reject","stamp_exclaim","stamp_perfect","stamp_question"];c.forEach(function(t){n(t)})},e.prototype={initialize:function(){},dataUrlAsync:function(){var t=this,e=new r,n=48/s.pixelRatio,o=48/s.pixelRatio,a=s.create(n,o),l=a.context.globalCompositeOperation,c=i.isDark(this.color)?this.whiteOutlinePromise:this.blackOutlinePromise;return this.maskPromise.done(function(i){null!=i?(a.drawImage(i,0,0,n,o),a.context.globalCompositeOperation="source-out",a.fillStyle(t.color.toRGBA()),a.fillRect(0,0,n,o),a.context.globalCompositeOperation=l,c.done(function(t){a.drawImage(t,0,0,n,o),e.resolve(a.context.canvas.toDataURL("image/png"))})):c.done(function(t){e.resolve(t.src)})}),e},attach:function(t){var e=this;this.cssValue?t.style.cursor=this.cssValue:this.dataUrlAsync().done(function(n){var i='url("'+n+'") '+e.x+" "+e.y+", crosshair";t.style.cursor=i})}},e=n.define(e)}),define("surface/controller/KeyHandlers",["require","util/Class","util/Box","graphics/Point","env/Settings","surface/action/DrawAction","log/Logger"],function(t){function e(){this.controller=null,this.surface=null,this.tools=null}function n(t){return t.shiftKey?a.ZOOM_STEP_LARGE:t.altKey?a.ZOOM_STEP_SMALL:a.ZOOM_STEP}function i(t){return t.shiftKey?a.PAN_STEP_LARGE:t.altKey?a.PAN_STEP_SMALL:a.PAN_STEP}var o=t("util/Class"),r=t("util/Box"),s=t("graphics/Point"),a=t("env/Settings"),l=t("surface/action/DrawAction"),c=t("log/Logger").instance("surface.controller.KeyHandlers");return e.prototype.onControlKeyDown=function(){this.controller.shiftKey||this.controller.altKey||this.controller.metaKey||this.controller.useTool("pan")},e.prototype.onControlKeyUp=function(){this.controller.using("pan")&&this.controller.usePreviousTool()},e.prototype.onShiftKeyDown=function(){},e.prototype.onShiftKeyUp=function(){},e.prototype.onAltKeyDown=function(){},e.prototype.onAltKeyUp=function(){},e.prototype.onMetaKeyDown=function(){},e.prototype.onMetaKeyUp=function(){},e.prototype.onDeleteKeyDown=function(t){t.preventDefault(),this.controller.fire("elementsdeleted",this.tools.select.deleteSelectedElements())},e.prototype.onZeroKeyDown=function(t){(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.surface.fit())},e.prototype.onOneKeyDown=function(t){(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.surface.resetZoomPan())},e.prototype.onPlusKeyDown=function(t){var e=n(t),i=this.surface.getCenter();(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.surface.zoom(1+e,s(i.x,i.y,"dom").relativeTo("surface")))},e.prototype.onMinusKeyDown=function(t){var e=n(t),i=this.surface.getCenter();(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.surface.zoom(1/(1+e),s(i.x,i.y,"dom").relativeTo("surface")))},e.prototype.onLeftArrowKeyDown=function(t){var e=i(t);t.preventDefault(),this.tools.select.hasSelection()?(this.tools.select.elements.forEach(function(t){t.move({x:-e,y:0})}),this.surface.foreground.render()):this.surface.pan({x:e,y:0})},e.prototype.onRightArrowKeyDown=function(t){var e=i(t);t.preventDefault(),this.tools.select.hasSelection()?(this.tools.select.elements.forEach(function(t){t.move({x:e,y:0})}),this.surface.foreground.render()):this.surface.pan({x:-e,y:0})},e.prototype.onUpArrowKeyDown=function(t){var e=i(t);t.preventDefault(),this.tools.select.hasSelection()?(this.tools.select.elements.forEach(function(t){t.move({x:0,y:-e})}),this.surface.foreground.render()):this.surface.pan({x:0,y:e})},e.prototype.onDownArrowKeyDown=function(t){var e=i(t);t.preventDefault(),this.tools.select.hasSelection()?(this.tools.select.elements.forEach(function(t){t.move({x:0,y:e})}),this.surface.foreground.render()):this.surface.pan({x:0,y:-e})},e.prototype.onEscapeKeyDown=function(t){this.controller.using("crop")?this.tools.crop.cancelCrop():this.controller.fire("keyesc",t)},e.prototype.onEnterKeyDown=function(t){this.controller.using("crop")&&(t.preventDefault(),t.stopImmediatePropagation(),this.tools.crop.applyCrop())},e.prototype.onBackspaceKeyDown=function(t){t.preventDefault(),this.onDeleteKeyDown(t),this.controller.fire("keybackspace",t)},e.prototype.onSpacebarKeyDown=function(){this.controller.isSpacebarDown=!0},e.prototype.onSpacebarKeyUp=function(){this.controller.isSpacebarDown=!1},e.prototype.onYKeyDown=function(t){(t.ctrlKey||t.metaKey)&&(t.preventDefault(),t.stopImmediatePropagation(),this.controller.redo())},e.prototype.onZKeyDown=function(t){t.metaKey&&t.shiftKey?(t.preventDefault(),t.stopImmediatePropagation(),this.controller.redo()):(t.ctrlKey||t.metaKey)&&(t.preventDefault(),t.stopImmediatePropagation(),this.controller.undo())},e.prototype.onSKeyDown=function(t){(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.surface.dom.focus(),this.surface.exportAsync().done(function(t){var e=new Blob([t.bytes],{type:t.mime});saveAs(e,(t.name||"skitch")+"."+t.extension)}).fail(function(t){c.error("Unable to export surface image"),c.error(t)}))},e.prototype.onCKeyDown=function(t){var e=this;if(t.ctrlKey||t.metaKey)if(this.tools.select.hasSelection())this.controller.copied.splice(0),this.tools.select.elements.forEach(function(t){var e=t.clone();this.controller.copied.push(e)}.bind(this));else if("undefined"!=typeof Windows){var n=new Windows.ApplicationModel.DataTransfer.DataPackage;e.surface.updateBufferLayer(!1);var i=Graphics.create(e.surface.layers.buffer.graphics.getWidth(),e.surface.layers.buffer.graphics.getHeight()),o=i.context.canvas;i.drawImage(e.surface.layers.buffer.graphics.context.canvas,0,0);var r=function(t){if(t.msDetachStream){n.setBitmap(Windows.Storage.Streams.RandomAccessStreamReference.createFromStream(t.msDetachStream()));try{Windows.ApplicationModel.DataTransfer.Clipboard.setContent(n)}catch(e){c.error("Error copying content to Clipboard: "+e+". Try again.")}}};o.toBlob(r)}},e.prototype.onVKeyDown=function(t){if((t.ctrlKey||t.metaKey)&&this.controller.copied){this.controller.tools.select.unselectAll();for(var e in this.controller.copied){var n=this.controller.copied[e];n.move({x:40,y:40});var i=this.surface.getBox(),o=n.calculateBox(this.surface);r.containsBox(i,o)||(n.move({x:-40,y:-40}),n.move({x:0,y:40}),o=n.calculateBox(this.surface),r.containsBox(i,o)||(n.move({x:0,y:-40}),n.move({x:40,y:0}),r.containsBox(i,o)||n.move({x:-40,y:0}))),this.surface.layers.foreground.addElement(n),this.controller.activeTool.fire("action",this.controller.activeTool,new l({element:n})),this.tools.select.select(n),this.controller.copied[e]=n.clone()}}},e.prototype.onAKeyDown=function(t){(t.ctrlKey||t.metaKey)&&(t.preventDefault(),t.shiftKey||this.tools.select.selectAll())},e.prototype.onRKeyDown=function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.preventDefault()},e.prototype.onUKeyDown=function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.preventDefault()},e.prototype.onOKeyDown=function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.preventDefault()},e.prototype.onLKeyDown=function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.preventDefault()},e.prototype.onKKeyDown=function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.preventDefault()},e.prototype.onMKeyDown=function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.preventDefault()},e.prototype.onHKeyDown=function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.preventDefault()},e.prototype.onXKeyDown=function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.preventDefault()},e.prototype.onTKeyDown=function(t){(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.preventDefault()},e=o.define(e)}),define("surface/controller/Controller",["require","util/Obj","util/Class","util/Img","env/Settings","surface/action/DeleteAction","surface/action/StyleAction","surface/tool/Tool","surface/tool/CropTool","surface/tool/ZoomTool","surface/tool/SelectTool","surface/tool/ArrowTool","surface/tool/EllipseTool","surface/tool/HighlighterTool","surface/tool/LineTool","surface/tool/PenTool","surface/tool/PixelateTool","surface/tool/RectangleTool","surface/tool/RoundedRectangleTool","surface/tool/TextTool","surface/tool/StampTool","surface/tool/MeasurementTool","surface/element/Arrow","surface/element/stamp/ApproveStamp","surface/element/stamp/ExclaimStamp","surface/element/stamp/PerfectStamp","surface/element/stamp/QuestionStamp","surface/element/stamp/RejectStamp","surface/element/Text","surface/element/BubbleText","surface/element/stamp/Stamp","util/Color","util/Box","surface/cursor/Cursor","graphics/Space","graphics/Point","log/Logger","util/Transformer","surface/controller/KeyHandlers"],function(t){function e(){this.surface=null,this.spaces=null,this.pointerIds=[],this.pointers=[],this.gesture=null,this.previousTool=null,this.tools=null,this.defaultTool=null,this.activePointer=null,this.activePointerId=null,this.activeTool=null,this.activeColor=null,this.activeSize=null,this.activeElement=null,this.activePoint=null,this.activeScale=null,this.eventsEnabled=!0,this.history={undo:null,redo:null},this.boundControl=null,this.moved=!1,this.highlighterColorOverriden=!1,this.lastRememberedColorBeforeSelection=null,this.lastRememberedSizeBeforeSelection=null,this.autoresize=!0,this.shiftKey=!1,this.ctrlKey=!1,this.altKey=!1,this.metaKey=!1,this.copied=[],this.allowZoom=!0,this.keyHandlers=null,this.isShiftDown=!1,this.startPoint=null,this.selectionChanged=!1,this.editingOnLastPointerDown=!1,this.registerEvents("elementsdeleted","toolchanged","toolstarted","toolupdated","toolstopped","toolaction","requestUndoEnable","requestUndoDisable","requestRedoEnable","requestRedoDisable","requestTrashEnable","requestTrashDisable","requestSizeChange","requestColorChange","keyesc","keybackspace")}t("util/Obj");var n=t("util/Class");t("util/Img");var i=t("env/Settings");t("surface/action/DeleteAction"),t("surface/action/StyleAction"),t("surface/tool/Tool");var o=t("surface/tool/CropTool"),r=t("surface/tool/ZoomTool"),s=t("surface/tool/SelectTool"),a=t("surface/tool/ArrowTool"),l=t("surface/tool/EllipseTool"),c=t("surface/tool/HighlighterTool"),h=t("surface/tool/LineTool"),u=t("surface/tool/PenTool"),p=t("surface/tool/PixelateTool"),d=t("surface/tool/RectangleTool"),f=t("surface/tool/RoundedRectangleTool"),g=t("surface/tool/TextTool"),m=t("surface/tool/StampTool");t("surface/tool/MeasurementTool");var y=t("surface/element/Arrow"),v=t("surface/element/stamp/ApproveStamp"),x=t("surface/element/stamp/ExclaimStamp"),w=t("surface/element/stamp/PerfectStamp"),b=t("surface/element/stamp/QuestionStamp"),A=t("surface/element/stamp/RejectStamp"),T=t("surface/element/Text"),C=t("surface/element/BubbleText"),E=t("surface/element/stamp/Stamp"),S=t("util/Color");t("util/Box");var k=t("surface/cursor/Cursor"),D=t("graphics/Space"),L=t("graphics/Point");t("log/Logger").instance("surface.Controller");var B=i.EVENTS,M=t("util/Transformer"),R=t("surface/controller/KeyHandlers");return e.prototype={initialize:function(){this.initSpaces(),this.initHistory(),this.initGesture(),this.initTools(),this.initEvents(),this.initKeyHandlers()},initSpaces:function(){function t(t){L.spaces[t.name]=new D(t)}t({name:"dom"}),t({name:"surface",transformable:this.surface}),t({name:"background",transformable:this.surface.background}),t({name:"foreground",transformable:this.surface.foreground}),t({name:"active",transformable:this.surface.active}),t({name:"buffer",transformable:this.surface.buffer}),t({name:"document"}),this.surface.background.on("boxchanged",function(t,e){var n=this.surface.background.transformation.concat();M.translateBy(n,e.left,e.top),L.spaces.document.transformation=n},this),this.surface.background.on("transformed",function(t){var e=t.concat(),n=this.surface.background.getBox();M.translateBy(e,n.left,n.top),L.spaces.document.transformation=e},this),t({name:"content"}),this.surface.on("boxchanged",function(t){var e=this.surface.transformation.concat();M.translateBy(e,t.left,t.top),L.spaces.content.transformation=e},this),this.surface.on("transformed",function(t){var e=t.concat(),n=this.surface.getBox();M.translateBy(e,n.left,n.top),L.spaces.content.transformation=e},this),t({name:"clip"}),this.surface.on("clipchanged",function(t){var e=this.surface.background.transformation.concat(),n=this.surface.background.getBox();M.translateBy(e,n.left,n.top),L.spaces.document.transformation=e;var i=L.spaces.document.transformation.concat();M.translateBy(i,t.left,t.top),L.spaces.clip.transformation=i},this),this.surface.on("transformed",function(){var t=L.spaces.document.transformation.concat(),e=this.surface.getClip();M.translateBy(t,e.left,e.top),L.spaces.clip.transformation=t},this)},initHistory:function(){this.history.undo=[],this.history.redo=[]},initGesture:function(){this.gesture="undefined"!=typeof MSGesture?new MSGesture:{pointers:[],addPointer:function(){}}},initTools:function(){var t=this.surface;this.tools={zoom:new r({name:"zoom",surface:t,cursor:new k({cssValue:"move"})}),pan:new r({name:"pan",surface:t,cursor:new k({cssValue:"move"})}),crop:new o({name:"crop",surface:t,cursor:new k({cssValue:"default"})}),select:new s({name:"select",surface:t,cursor:new k({cssValue:"default"})}),pen:new u({name:"marker",surface:t,cursor:new k(k.imagePromises("marker"))}),highlighter:new c({name:"highlighter",surface:t,cursor:new k(k.imagePromises("highlighter"))}),text:new g({name:"text",surface:t,cursor:new k(k.imagePromises("text"))}),arrow:new a({name:"arrow",surface:t,cursor:new k(k.imagePromises("arrow"))}),ellipse:new l({name:"ellipse",surface:t,cursor:new k(k.imagePromises("ellipse"))}),pixelate:new p({name:"pixelate",surface:t,cursor:new k(k.imagePromises("pixelate",!0))}),line:new h({name:"line",surface:t,cursor:new k(k.imagePromises("line"))}),rectangle:new d({name:"rectangle",surface:t,cursor:new k(k.imagePromises("rect"))}),roundedRectangle:new f({name:"roundedRectangle",surface:t,cursor:new k(k.imagePromises("rrect"))}),stampAccept:new m({type:v,name:"stampAccept",surface:t,icon:"green",cursor:new k(k.imagePromises("stamp_accept",!0))}),stampExclaim:new m({type:x,name:"stampExclaim",surface:t,icon:"orange",cursor:new k(k.imagePromises("stamp_exclaim",!0))}),stampQuestion:new m({type:b,name:"stampQuestion",surface:t,icon:"blue",cursor:new k(k.imagePromises("stamp_question",!0))}),stampReject:new m({type:A,name:"stampReject",surface:t,icon:"red",cursor:new k(k.imagePromises("stamp_reject",!0))}),stampPerfect:new m({type:w,name:"stampPerfect",surface:t,icon:"pink",cursor:new k(k.imagePromises("stamp_perfect",!0))})},this.tools.marker=this.tools.pen,this.defaultTool=this.tools.arrow},initEvents:function(){var t=this.surface,e=i.USE_HAMMER?Hammer:$;this.boundControl=this.control.bind(this),this.boundOnDragOver=this.onDragOver.bind(this),this.boundOnDrop=this.onDrop.bind(this),t.foreground.on("elementselectionschanged",this.onForegroundElementSelectionsChanged,this),t.foreground.on("elementremoved",this.onForegroundElementRemoved,this),$(window).on(B.resize,this.boundControl),t.dom.addEventListener(B.drop,this.boundOnDrop,!1),t.dom.addEventListener(B.dragover,this.boundOnDragOver,!1),$(t.dom).attr("touch-action","none").on([B.pointerdown,B.pointerup,B.pointermove,B.pointerout,B.pointerover,B.doubleclick,B.contextmenu].join(" "),this.boundControl),$(document).on([B.mousewheel,B.keydown,B.keyup,B.keypress].join(" "),this.boundControl),e(t.dom,{drag_min_distance:1}).on([B.tap,B.doubletap,B.inertiastart,B.hold,B.dragstart,B.drag,B.dragend,B.gesturestart,B.gesturechange,B.gestureend].join(" "),this.boundControl)},initKeyHandlers:function(){this.keyHandlers=new R({surface:this.surface,tools:this.tools,controller:this})},getStampToolFromElement:function(t){return t instanceof v?this.tools.stampAccept:t instanceof x?this.tools.stampExclaim:t instanceof w?this.tools.stampPerfect:t instanceof b?this.tools.stampQuestion:t instanceof A?this.tools.stampReject:void 0},onForegroundElementRemoved:function(t,e){this.tools.select.unselect(e)},destroy:function(){var t=this.surface,e=i.USE_HAMMER?Hammer:$;$(window).off(B.resize,this.boundControl),t.dom.removeEventListener(B.drop,this.boundOnDrop),t.dom.removeEventListener(B.dragover,this.boundOnDragOver),$(t.dom).off([B.pointerdown,B.pointerup,B.pointermove,B.pointerout,B.pointerover,B.doubleclick,B.contextmenu].join(" "),this.boundControl),$(document).off([B.mousewheel,B.keydown,B.keyup,B.keypress].join(" "),this.boundControl),e(t.dom).off([B.tap,B.doubletap,B.inertiastart,B.hold,B.dragstart,B.drag,B.dragend,B.gesturestart,B.gesturechange,B.gestureend].join(" "),this.boundControl)},onDragOver:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy"},onDrop:function(t){t.preventDefault();var e=t.dataTransfer&&t.dataTransfer.files[0];e&&(this.surface.reset(),this.surface.importAsync(e).done(function(){this.surface.fit()}.bind(this)))},reset:function(){this.history.undo.splice(0),this.history.redo.splice(0),this.fire("requestUndoDisabled"),this.fire("requestRedoDisabled")},setColor:function(t){t in i.COLORS?(this.activeColor=i.COLORS[t],this.activeColorName=t,this.lastRememberedColorBeforeSelection=t):(this.activeColor=t,this.activeColorName=t,this.lastRememberedColorBeforeSelection=t),this.activeTool&&(this.activeTool.color=this.activeColor),this.activeTool===this.tools.highlighter&&(this.highlighterColorOverriden=!0),this.activeTool&&this.activeTool.cursor&&(this.activeTool.cursor.color=new S(this.activeColor),this.activeTool.cursor.attach(this.surface.dom))},setSize:function(t){this.activeSize=t,this.lastRememberedSizeBeforeSelection=t,this.activeTool&&(this.activeTool.size=this.activeSize)},saveAction:function(t){this.history.undo.push(t),this.history.redo.splice(0),this.fire("requestUndoEnable"),this.fire("requestRedoDisable")},undo:function(){if(!this.tools.crop.isCropping){var t,e;e=this.history.undo,e.length>0&&(t=e.pop(),this.history.redo.push(t),t.undo()),0===this.history.undo.length&&this.fire("requestUndoDisable"),this.history.redo.length>0&&this.fire("requestRedoEnable"),0==this.tools.select.elements.length&&this.fire("requestTrashDisable"),this.adjustForInfiniteCanvas()}},redo:function(){if(!this.tools.crop.isCropping){var t,e;e=this.history.redo,e.length>0&&(t=e.pop(),this.history.undo.push(t),t.run()),0===this.history.redo.length&&this.fire("requestRedoDisable"),this.history.undo.length>0&&this.fire("requestUndoEnable"),this.adjustForInfiniteCanvas()}},useTool:function(t){var e=this.surface.active;return"string"==typeof t&&this.tools[t]&&(t=this.tools[t]),t&&this.activeTool!==t?(this.activeTool&&this.activeTool.started&&(this.activeTool.stop(this.activePoint),this.activeTool.afterStop()),this.activeTool&&(this.activeTool.off("started",e.onActiveToolStarted),this.activeTool.off("updated",e.onActiveToolUpdated),this.activeTool.off("stopped",e.onActiveToolStopped),this.activeTool.off("action",this.onActiveToolAction)),this.using("select")||this.using("pan")||this.using("zoom")||(this.previousTool=this.activeTool),this.activeTool=t,null!=this.previousTool&&(this.activeTool.isShiftDown=this.previousTool.isShiftDown,this.previousTool.isShiftDown=!1),this.activeTool.color=this.activeColor,this.activeTool.size=this.activeSize,this.activeTool.cursor?(this.activeTool.cursor.color=new S(this.activeTool.color||"#000000"),this.activeTool.cursor.cssValue?k.attachDefault(this.surface.dom,this.activeTool.cursor.cssValue):this.activeTool.cursor.attach(this.surface.dom)):this.activeTool===this.tools.select?k.attachDefault(this.surface.dom,"move"):k.attachDefault(this.surface.dom),t.on("started",this.onActiveToolStarted,this),t.on("updated",this.onActiveToolUpdated,this),t.on("stopped",this.onActiveToolStopped,this),t.on("action",this.onActiveToolAction,this),this.fire("toolchanged",t),t===this.tools.highlighter?(this.previousTool!==this.tools.select&&this.previousTool!==this.tools.zoom&&(this.lastHighlighterColor=this.activeColorName),this.highlighterColorOverriden===!1&&(this.setColor("yellow"),this.fire("requestColorChange","yellow"),this.highlighterColorOverriden=!1)):t!==this.tools.select&&t!==this.tools.zoom&&this.lastHighlighterColor&&(this.setColor(this.lastHighlighterColor),this.fire("requestColorChange",this.lastHighlighterColor),this.highlighterColorOverriden=!1,this.lastHighlighterColor=null),this.previousTool&&this.previousTool.release(this.activePoint,this.activeScale),this.activeTool&&this.activeTool.use(this.activePoint,this.activeScale),t):this.activeTool},usePreviousTool:function(){this.previousTool?this.useTool(this.previousTool):this.useTool(this.defaultTool)},using:function(t){return"string"==typeof t&&this.tools[t]&&(t=this.tools[t]),this.activeTool===t},processStampHit:function(t,e){if(t.selected&&!this.activeHandle){if(t.label.hitTestHandle(this.activePoint))return t.label.deleteLabel(),!1;t.label.hitTest(this.activePoint)?(this.useTool("text"),this.once("toolstopped",this.useTool.bind(this,this.previousTool.name),this),this.activeTool.element=t.label.text):e&&this.useTool("select")}else e&&this.useTool("select")},switchTool:function(){var t,e=!this.activeTool.started||this.activeTool.started&&this.activeElement!==this.activeTool.element;if(!this.using("pan"))if(this.activeElement){if(this.activeElement instanceof E)return this.processStampHit(this.activeElement,e);e&&this.useTool("select")}else if(t=this.tools.select.elements.length,this.tools.select.unselectAll(),this.selectionChanged=this.tools.select.elements.length!==t,this.using("select")&&(this.usePreviousTool(),this.selectionChanged))return!1},switchCursor:function(){this.activeTool instanceof g&&this.activeTool.started?k.attachDefault(this.surface.dom):this.activeHandle?k.attachDefault(this.surface.dom):this.activeElement?k.attachDefault(this.surface.dom,"move"):this.using("select")?this.previousTool.cursor.attach(this.surface.dom):this.activeTool.cursor.attach(this.surface.dom)},onActiveToolStarted:function(t){this.fire("toolstarted",t)},onActiveToolUpdated:function(t){this.fire("toolupdated",t)},onActiveToolStopped:function(t){this.fire("toolstopped",t)},onActiveToolAction:function(t,e){this.saveAction(e),this.adjustForInfiniteCanvas()},adjustForInfiniteCanvas:function(){i.ENABLE_INFINITE_CANVAS?this.surface.expandClip():this.surface.removeElementsOutsideClip(this.surface.getClip()),this.surface.render()},control:function(){this.eventsEnabled&&(this.updateState.apply(this,arguments),this.handleNativeEvent.apply(this,arguments))},updateState:function(t){var e=t.originalEvent||t;8!=e.detail&&10!=e.detail&&(this.updatePointerState(t),this.updateGestureState(t),e instanceof KeyboardEvent||"resize"==e.type||(this.activePoint=this.calculateActivePoint(e,$(this.surface.dom).offset())),(!this.activeTool.started||this.using("text"))&&(this.activeElement=this.surface.foreground.getElement(this.activePoint),this.activeHandle=this.activeElement&&this.activeElement.selected&&this.activeElement.getHandle(this.activePoint)))},updatePointerState:function(t){var e,n=t.originalEvent||t,i=this.pointers,o=this.pointerIds,r=n.pointerId;this.previousPointers=i.concat(),t.type===B.pointerdown&&(o.push(r),i.push(n)),e=o.indexOf(r),e>-1&&(this.activePointer=i[e],this.activePointerId=r,t.type===B.pointerup||t.type===B.pointerout?(o.splice(e,1),i.splice(e,1)):i[e]=n)},updateGestureState:function(t){var e=t.originalEvent||t,n=this.pointers;if("number"!=typeof e.pageX&&e.gesture&&(e.pageX=e.gesture.center.pageX,e.pageY=e.gesture.center.pageY),0===n.length?this.prevGestureScale=null:n.length>1&&e.gesture&&e.gesture.scale&&t.type===B.gesturechange?(this.activeScale=this.prevGestureScale?e.gesture.scale/this.prevGestureScale:1,this.prevGestureScale=e.gesture.scale):this.activeScale=e.scale,t.type===B.pointerdown&&(this.gesture.target||(this.gesture.target=this.surface.active.dom),t.target===this.gesture.target&&(1===this.pointers.length||this.pointers.length<=i.MAX_POINTERS_FOR_GESTURE&&this.activeTool===this.tools.zoom)))try{this.gesture.addPointer(e.pointerId)}catch(o){}},calculateActivePoint:function(t,e){var n={left:"number"==typeof t.pageX?t.pageX:t.clientX+$(document.body).scrollLeft(),top:"number"==typeof t.pageY?t.pageY:t.clientY+$(document.body).scrollTop()},i=L(n.left-e.left,n.top-e.top,"dom");return i.relativeTo("surface")},handleNativeEvent:function(t){return t.type===B.pointerdown?this.onPointerDown.apply(this,arguments):t.type===B.pointermove?this.onPointerMove.apply(this,arguments):t.type===B.pointerup?this.onPointerUp.apply(this,arguments):t.type===B.pointerout?this.onPointerOut.apply(this,arguments):t.type===B.pointerover?this.onPointerOver.apply(this,arguments):t.type===B.doubleclick?this.onDoubleClick.apply(this,arguments):t.type===B.contextmenu?this.onContextMenu.apply(this,arguments):t.type===B.tap?this.onTap.apply(this,arguments):t.type===B.doubletap?this.onDoubleTap.apply(this,arguments):t.type===B.hold?this.onHold.apply(this,arguments):t.type===B.dragstart?this.onDragStart.apply(this,arguments):t.type===B.drag?this.onDrag.apply(this,arguments):t.type===B.dragend?this.onDragEnd.apply(this,arguments):t.type===B.gesturestart?this.onGestureStart.apply(this,arguments):t.type===B.gesturechange?this.onGestureChange.apply(this,arguments):t.type===B.gestureend?this.onGestureEnd.apply(this,arguments):t.type===B.inertiastart?this.onInertiaStart.apply(this,arguments):t.type===B.mousewheel?this.onMouseWheel.apply(this,arguments):t.type===B.keydown?this.onKeyDown.apply(this,arguments):t.type===B.keyup?this.onKeyUp.apply(this,arguments):t.type===B.keypress?this.onKeyPress.apply(this,arguments):t.type===B.resize?this.onResize.apply(this,arguments):void 0},onPointerDown:function(t){this.pointers.length>0&&this.pointers[0].pointerId===this.activePointer.pointerId&&t.target===this.surface.active.dom&&(this.startPoint=this.activePoint,this.moved=!1,this.editingOnLastPointerDown=this.activeTool.element&&this.activeTool.element.editing,this.selectionChanged=!1,this.switchTool()!==!1&&this.activeTool.onPointerDown(this.activePoint,this.activeScale)),t.preventDefault()},onPointerMove:function(t){0===this.pointers.length?this.switchCursor():this.pointers.length>0&&this.pointers[0].pointerId===this.activePointer.pointerId&&this.activeTool.onPointerMove(this.activePoint,this.activeScale),t.preventDefault()},onPointerUp:function(t){0===this.pointers.length&&t.target===this.surface.active.dom&&(this.moved=this.activePoint&&this.startPoint&&(Math.abs(this.activePoint.x-this.startPoint.x)>1||Math.abs(this.activePoint.y-this.startPoint.y)>1),this.activeTool.onPointerUp(this.activePoint,this.activeScale)),t.preventDefault()},onPointerOut:function(t){this.previousPointers.length>this.pointers.length&&this.onPointerUp(t)},onPointerOver:function(){},onDoubleClick:function(){this.activeElement instanceof T&&this.useTool("text"),this.activeTool.onDoubleClick(this.activePoint,this.activeScale)},onContextMenu:function(t){t.preventDefault()},onTap:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onGestureStart:function(){},onGestureChange:function(){},onGestureEnd:function(){},onInertiaStart:function(){},onMouseWheel:function(t,e,n,o){var r;t.preventDefault(),this.allowZoom&&!n&&(this.activeTool.started||t.target===this.surface.active.dom&&(r=1+o/Math.abs(o)*i.ZOOM_STEP,this.surface.zoom(r,this.activePoint)))},onKeyDown:function(t){var e=t.which,n=t.shiftKey,o=t.ctrlKey,r=t.altKey,s=t.metaKey;return i.ENABLE_KEY_HANDLERS?(this.shiftKey!==n&&this.keyHandlers.onShiftKeyDown(t),this.ctrlKey!==o&&this.keyHandlers.onControlKeyDown(t),this.altKey!==r&&this.keyHandlers.onAltKeyDown(t),this.metaKey!==s&&this.keyHandlers.onMetaKeyDown(t),this.activeTool.isShiftDown=n,this.shiftKey=n,this.ctrlKey=o,this.altKey=r,this.metaKey=s,46===e?this.keyHandlers.onDeleteKeyDown(t):48===e||96===e?this.keyHandlers.onZeroKeyDown(t):49===e?this.keyHandlers.onOneKeyDown(t):107===e||187===e?this.keyHandlers.onPlusKeyDown(t):109===e||189===e?this.keyHandlers.onMinusKeyDown(t):37===e?this.keyHandlers.onLeftArrowKeyDown(t):38===e?this.keyHandlers.onUpArrowKeyDown(t):39===e?this.keyHandlers.onRightArrowKeyDown(t):40===e?this.keyHandlers.onDownArrowKeyDown(t):27===e?this.keyHandlers.onEscapeKeyDown(t):13===e?this.keyHandlers.onEnterKeyDown(t):8===e?this.keyHandlers.onBackspaceKeyDown(t):32===e?this.keyHandlers.onSpacebarKeyDown(t):89===e?this.keyHandlers.onYKeyDown(t):90===e?this.keyHandlers.onZKeyDown(t):65===e?this.keyHandlers.onAKeyDown(t):83===e?this.keyHandlers.onSKeyDown(t):67===e?this.keyHandlers.onCKeyDown(t):86===e?this.keyHandlers.onVKeyDown(t):82===e?this.keyHandlers.onRKeyDown(t):85===e?this.keyHandlers.onUKeyDown(t):79===e?this.keyHandlers.onOKeyDown(t):76===e?this.keyHandlers.onLKeyDown(t):75===e?this.keyHandlers.onKKeyDown(t):77===e?this.keyHandlers.onMKeyDown(t):72===e?this.keyHandlers.onHKeyDown(t):88===e?this.keyHandlers.onXKeyDown(t):84===e?this.keyHandlers.onTKeyDown(t):void 0):void 0},onKeyUp:function(t){var e=t.which,n=t.shiftKey,o=t.ctrlKey,r=t.altKey,s=t.metaKey;i.ENABLE_KEY_HANDLERS&&(this.shiftKey!==n&&this.keyHandlers.onShiftKeyUp(t),this.ctrlKey!==o&&this.keyHandlers.onControlKeyUp(t),this.altKey!==r&&this.keyHandlers.onAltKeyUp(t),this.metaKey!==s&&this.keyHandlers.onMetaKeyUp(t),this.activeTool.isShiftDown=n,this.shiftKey=n,this.ctrlKey=o,this.altKey=r,this.metaKey=s,32===e&&this.keyHandlers.onSpacebarKeyUp(t))},onKeyPress:function(){},onResize:function(){if(this.autoresize){var t=$(window).height(),e=$(window).width();this.surface.resize(e,t),this.surface.fit()}},setAutoResize:function(t){this.autoresize=t},onForegroundElementSelectionsChanged:function(){for(var t=0,e=0;e<this.surface.foreground.elements.length;e++){var n=this.surface.foreground.elements[e];n.selected&&t++}if(1==t)for(var e=0;e<this.surface.foreground.elements.length;e++){var n=this.surface.foreground.elements[e];if(n.selected){var i,o=new S(this.activeColor),r=S.getOfficialColorName(o),s=this.activeSize;i=n instanceof y||n instanceof C?new S(n.fill.color):new S(n.stroke.color);var a=S.getOfficialColorName(i),l=n.getSizeLevel();null!=l&&(this.lastRememberedSizeBeforeSelection=s,this.fire("requestSizeChange",l,s)),a&&(null==this.lastRememberedColorBeforeSelection&&(this.lastRememberedColorBeforeSelection=r),this.fire("requestColorChange",a));
break}}else 0==t&&(null!=this.lastRememberedSizeBeforeSelection&&(this.fire("requestSizeChange",this.lastRememberedSizeBeforeSelection),this.setSize(this.lastRememberedSizeBeforeSelection),this.lastRememberedSizeBeforeSelection=null),null!=this.lastRememberedColorBeforeSelection&&(this.fire("requestColorChange",this.lastRememberedColorBeforeSelection),this.setColor(this.lastRememberedColorBeforeSelection),this.lastRememberedColorBeforeSelection=null))}},e=n.define(e)}),define("file/File",["require","async/Promise","util/Binary","util/Security","util/Img","util/Class","util/Security","log/Logger"],function(t){function e(){this.name=null,this.source=null,this.bytes=null,this.offset=null,this.saving=!1,this.mime="application/octet-stream",this.extension="file",this.manifest=null,this.registerEvents("presave","saved","loaded")}var n=t("async/Promise"),i=t("util/Binary"),o=t("util/Security"),r=(t("util/Img"),t("util/Class")),o=t("util/Security"),s=t("log/Logger").instance("file.File");return e.supportedTypes=[],e.openAsync=function(t){var i,o=new n;return Windows.Storage.StorageFile.getFileFromPathAsync(t).then(function(t){e.readAsync(t).done(function(t){var n=e.getFileClass(t);i=new n({bytes:t}),o.resolve(i)})},function(t){o.reject(t)}),o},e.isUnsupported=function(t){for(var n=0;n<e.supportedTypes.length;n++)if(e.supportedTypes[n].isOfFileType(t))return!1;return!0},e.getFileClass=function(t){for(var n=e,i=0;i<e.supportedTypes.length;i++)e.supportedTypes[i].isOfFileType(t)&&(n=e.supportedTypes[i]);return n},e.isSkitch=function(t){for(var n,i=0;i<e.supportedTypes.length;i++)if(e.supportedTypes[i].isOfFileType(t))return n=e.supportedTypes[i],n.isSkitchFile(t);return!1},e.uint32ToBytes=function(t){var e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t,!1),e},e.bytesToUint32=function(t){return t.buffer||(t=new Uint8Array(t)),new DataView(t.buffer).getUint32(t.byteOffset,!1)},e.slice=function(t,e,n){return e||"number"==typeof e?"number"==typeof n&&n>=0?t.subarray(e,e+n):t.subarray(e):t},e.crc=function(){return 0},e.readAsync=function(t){var i=new n,o=new FileReader;return t instanceof e?i.resolve(t.bytes):("undefined"!=typeof Windows&&t instanceof Windows.Storage.StorageFile?Windows.Storage.FileIO.readBufferAsync(t).then(function(t){var e=Windows.Storage.Streams.DataReader.fromBuffer(t),n=new Uint8Array(t.length);e.readBytes(n),e.close(),i.resolve(n)}):(o.onload=function(t){i.resolve(new Uint8Array(t.target.result))},o.onerror=function(){i.reject.bind(i,arguments)},o.readAsArrayBuffer(t)),i)},e.prototype={initialize:function(){this.setBytes(this.bytes)},MD5:function(){return o.MD5(this.bytes)},setBytes:function(t){this.bytes=t;var e=Array.prototype.concat.call(t||[]);try{this.source=new Blob(e)}catch(n){s.error("Cannot construct Blob"),s.error(n)}this.processNewBytes()},toText:function(t,e){return i.toText(this.bytes,t,e)},toInt:function(t,e){return i.toUint32(this.bytes,t,e)},toHex:function(t,e){return i.toHex(this.bytes,t,e)},slice:function(t,n){return e.slice(this.bytes,t,n)},processNewBytes:function(){},save:function(t,e,i){var o=this,r=new n;if(!this.saving)return this.saving=!0,t.getFileAsync(o.name,{create:!0}).then(function(t){return t.writeBytesAsync(o.bytes)}).done(function(){o.saving=!1,o.fire("saved",o,e,i),r.resolve(o)}).fail(function(t){s.error("File Save Error ["+o.name+"]: "+t.description),o.saving=!1,r.reject(t)}),r},reset:function(){this.seek(0)},seek:function(t){this.offset=t},forward:function(t){this.seek(this.offset+t)},onError:function(t){},insertManifest:function(t){this.manifest=t},updateManifest:function(t){this.manifest=t},addResource:function(){}},e=r.define(e)}),define("file/Image",["require","util/Binary","util/Img","async/Promise","env/Settings","file/File","util/Class","graphics/CanvasGraphics","log/Logger"],function(t){function e(){this.extracted=!1,this.resources=null,this.registerEvents("extracted","thumbnailcreated")}var n=t("util/Binary"),i=t("util/Img"),o=t("async/Promise"),r=t("env/Settings"),s=t("file/File"),a=t("util/Class"),l=t("graphics/CanvasGraphics"),c=t("log/Logger").instance("file.Image");return e.CHUNK_FIELDS={LENGTH:0,CHUNK_TYPE:4,CHUNK_DATA:8},e.CHUNK_TYPES={MANIFEST:"skMf",RESOURCE:"skRf",THUMBNAIL:"skTf"},e.prototype={save:function(t){var n=this,i=new o,r=arguments;return this.createThumbnail(t).then(function(){return e.parent.prototype.save.apply(n,r)}).done(function(t){i.resolve(t)}).fail(function(){i.reject.apply(i,arguments)}),i},deleteAsync:function(t,e){var n,i=this,r=new o;return t?(n=new o,Windows.Storage.StorageFolder.getFolderFromPathAsync(t).then(function(t){n.resolve(t)},function(){n.reject.apply(n,arguments)})):e&&(n=n.resolve(e)),n.done(function(t){t.getFileAsync(i.name).then(function(t){return t.deleteAsync()}).then(function(){return t.getFileAsync(i.name+".thumbnail."+i.extension)}).then(function(t){return t.deleteAsync()}).then(function(){r.resolve()},function(){r.reject.apply(r,arguments)})}).fail(function(){r.reject.apply(r,arguments)}),r},convertAsync:function(t){var e,n,r=new o;return i.convertAsync(this.getFlatImageBytes(),destImage.definition.properties.mime).done(function(i){n=new t({name:this.name,bytes:i}),this.manifest&&(this.resources&&(e=Object.getOwnPropertyNames(this.resources)[0]),e&&n.addResource(e,this.resources[e]),n.insertManifest(this.manifest),n.processNewBytes()),r.resolve(n)}.bind(this)),r},updateResource:function(t,i){var o,r,s,a=this.chunks;for(o=0;o<a.length;o++)if(a[o].type===e.CHUNK_TYPES.RESOURCE){var l=this.getResourceId(a[o].offset+8);l===t&&(s=a[o]);break}if(s){var c,r;c=n.fromHex(l.replace(/-/g,"")),r=new Uint8Array(i.length+c.length),r.set(c,0),r.set(i,c.length),this.updateChunk(s,e.CHUNK_TYPES.RESOURCE,r)}},updateManifest:function(t){var i,o,t,r,s=this.chunks;for(i=0;i<s.length;i++)if(s[i].type===e.CHUNK_TYPES.MANIFEST){r=s[i];break}if(r){var o=n.fromText(JSON.stringify(t));this.updateChunk(r,e.CHUNK_TYPES.MANIFEST,o)}},insertManifest:function(t){var i;i=n.fromText(JSON.stringify(t)),this.addChunk(e.CHUNK_TYPES.MANIFEST,i)},addResource:function(t,i){var o,r;return o=n.fromHex(t.replace(/-/g,"")),r=new Uint8Array(i.length+o.length),r.set(o,0),r.set(i,o.length),this.addChunk(e.CHUNK_TYPES.RESOURCE,r),t},getFirstSkitchChunkOffset:function(){var t;for(this.reset(),t=this.getNextChunk();t&&!/^sk/i.test(t.type);)t=this.getNextChunk();return t&&t.offset},processNewBytes:function(){e.parent.prototype.processNewBytes.apply(this,arguments),this.extract()},extract:function(){this.offset=null,this.manifest=null,this.resources=null,this.image=null,this.thumbnail=null,this.chunks=null,this.extracted=!1,this.extractChunks(),this.extractManifest(),this.extractResources(),this.extracted=!0,this.fire("extracted",this)},isExtracted:function(){return this.extracted},extractChunks:function(){var t=this.getNextChunk();for(this.chunks=[];t;)this.chunks.push(t),t=this.getNextChunk()},getChunk:function(t){var i,o;return o=this.toInt(t+e.CHUNK_FIELDS.LENGTH,4),i={offset:t,size:o,type:n.toText(this.slice(t+e.CHUNK_FIELDS.CHUNK_TYPE,4)),data:this.slice(t+e.CHUNK_FIELDS.CHUNK_DATA,o),crc:this.toInt(t+e.CHUNK_FIELDS.CHUNK_DATA+o,4)}},extractManifest:function(){var t,i=this.chunks;for(t=0;t<i.length;t++)if(i[t].type===e.CHUNK_TYPES.MANIFEST){this.manifest=JSON.parse(n.toText(i[t].data));break}},extractResources:function(){var t,n,i,o=this.chunks;for(this.resources={},t=0;t<o.length;t++)o[t].type===e.CHUNK_TYPES.RESOURCE&&(n=this.getResourceId(o[t].offset+8),i=s.slice(o[t].data,16),this.resources[n]=i)},getResourceId:function(t){var e=[this.toHex(t,4),this.toHex(t+4,2),this.toHex(t+6,2),this.toHex(t+8,2),this.toHex(t+10,6)];return e.join("-").toUpperCase()},hasManifest:function(){return!!this.manifest},createThumbnail:function(t){var e,n,s,a,h,u,p=this,d=new o,f=new l,g=f.context.canvas;return i.toImageElementAsync(this.source).done(function(o){n=o,f.setWidth(r.THUMBNAIL_WIDTH),f.setHeight(r.THUMBNAIL_HEIGHT),n.width<n.height?(h=n.width,u=h,s=0,a=0):(u=n.height,h=u,s=(n.width-n.height)/2,a=0),f.drawImage(n,s,a,h,u,0,0,f.getWidth(),f.getHeight()),i.toBytesAsync(g,p.mime).then(function(n){return e=n,t.getFileAsync(p.name+".thumbnail."+p.extension,{create:!0,exclusive:!1})}).then(function(t){return t.writeBytesAsync(e)}).done(function(){p.fire("thumbnailcreated",g),d.resolve()}).fail(function(t){c.error(t.description),d.reject(t)})}),d},flattenAsync:function(t){var e=this,n=t.buffer.graphics.context.canvas;return i.toBytesAsync(n,e.mime).then(function(t){return o.wrap(e.updateFlattenedImage(t))})},getDocumentBytes:function(){return this.resources&&this.resources.skRf}},e=a.define(e,s)}),define("file/JPG",["require","util/Class","util/Binary","util/Img","file/Image","file/File"],function(t){function e(){this.manifest=null,this.resources=null,this.richDataSize=0,this.image=null,this.thumbnail=null,this.chunks=null,this.extracted=!1,this.useLargeIcon=!1,this.mime="image/jpeg",this.extension="jpg"}var n=t("util/Class"),i=t("util/Binary"),o=(t("util/Img"),t("file/Image")),r=t("file/File");return e.SKITCH_MARKER="skitch",e.createdBySkitch=function(t){return e.isSkitchFile(t)},e.isOfFileType=function(t){var e=i.toHex(t,6,5).toUpperCase();return"4A46494600"===e||"4578696600"===e},e.isSkitchFile=function(t){var e="skitch",n=String.fromCharCode.apply(String,i.slice(t,t.length-e.length,e.length));return n.toLowerCase()===e.toLowerCase()},e.prototype={insertManifest:function(){e.createdBySkitch(this.bytes)||this.insertMarker(),e.parent.prototype.insertManifest.apply(this,arguments)},insertMarker:function(){var t;t=this.bytes.subarray(0),this.bytes=new Uint8Array(t.length+4+e.SKITCH_MARKER.length),this.bytes.set(t,0),this.bytes.set(r.uint32ToBytes(this.richDataSize),t.length),this.bytes.set(i.fromText(e.SKITCH_MARKER),t.length+4)},getFlatImageBytes:function(){var t,e,n;return t=this.getFirstSkitchChunkOffset(),t?(n=t,e=new Uint8Array(n),e.set(r.slice(this.bytes,0,n)),e):this.bytes},updateFlattenedImage:function(t){var e,n,i;n=this.slice(this.getFirstSkitchChunkOffset()),i=t,e=new Uint8Array(i.length+n.length),e.set(i,0),e.set(n,i.length),this.setBytes(e)},updateChunk:function(t,e,n){var o,s,a,l,c,h,u,p;return s=n.length,a=t.offset,c=this.bytes.subarray(0,a),h=this.bytes.subarray(a+t.size+12),u=new Uint8Array(n.length+e.length),u[0]=e[0].charCodeAt(0),u[1]=e[1].charCodeAt(0),u[2]=e[2].charCodeAt(0),u[3]=e[3].charCodeAt(0),u.set(n,4),l=r.crc(u),o=new Uint8Array(s+12),o.set(r.uint32ToBytes(s),0),o.set(n,8),o.set(r.uint32ToBytes(l),s+8),p=i.fromText(e),o.set(p,4),this.bytes=new Uint8Array(c.length+o.length+h.length),this.bytes.set(c,0),this.bytes.set(o,a),this.bytes.set(h,o.length+a),this.setRichDataSize(this.richDataSize-t.size+s),this.processNewBytes(),this.getChunk(a)},setRichDataSize:function(t){this.bytes.set(r.uint32ToBytes(t),this.bytes.length-e.SKITCH_MARKER.length-4),this.richDataSize=t},addChunk:function(t,n){var o,s,a,l,c,h,u;return e.createdBySkitch(this.bytes)||this.insertMarker(),s=n.length,a=this.bytes.length-e.SKITCH_MARKER.length-4,h=this.slice(0,a),u=this.slice(a+4),c=new Uint8Array(n.length+t.length),c[0]=t[0].charCodeAt(0),c[1]=t[1].charCodeAt(0),c[2]=t[2].charCodeAt(0),c[3]=t[3].charCodeAt(0),c.set(n,4),l=r.crc(c),o=new Uint8Array(s+12),o.set(r.uint32ToBytes(s),0),o.set(i.fromText(t),4),o.set(n,8),o.set(r.uint32ToBytes(l),s+8),this.setRichDataSize(this.richDataSize+o.length),this.bytes=new Uint8Array(h.length+o.length+4+u.length),this.bytes.set(h,0),this.bytes.set(o,a),this.bytes.set(r.uint32ToBytes(this.richDataSize),o.length+a),this.bytes.set(u,o.length+a+4),this.processNewBytes(),this.getChunk(a)},getNextChunk:function(){var t;if(this.bytes&&!(this.offset>=this.bytes.length-e.SKITCH_MARKER.length-4)){if(!this.offset){if(!e.createdBySkitch(this.bytes))return;if(this.setRichDataSize(r.bytesToUint32(this.slice(this.bytes.length-e.SKITCH_MARKER.length-4,4))),this.offset=this.bytes.length-e.SKITCH_MARKER.length-4-this.richDataSize,this.seek(this.offset),this.offset>=this.bytes.length-e.SKITCH_MARKER.length-4)return}return t=this.getChunk(this.offset),this.forward(t.size+12),t}}},e=n.define(e,o),r.supportedTypes.push(e),e}),define("file/PNG",["require","util/Class","util/Binary","util/Img","file/File","file/Image"],function(t){function e(){this.manifest=null,this.resources=null,this.image=null,this.thumbnail=null,this.chunks=null,this.extracted=!1,this.useLargeIcon=!1,this.mime="image/png",this.extension="png"}var n=t("util/Class"),i=t("util/Binary"),o=(t("util/Img"),t("file/File")),r=t("file/Image");return e.createdBySkitch=function(t){return e.isSkitchFile(t)},e.isOfFileType=function(t){return"89504E470D0A1A0A"===i.toHex(t,0,8).toUpperCase()},e.isSkitchFile=function(t){var n=new e({bytes:t});return n.hasManifest()},e.prototype={updateFlattenedImage:function(t){var e,n,i;n=this.slice(this.getFirstSkitchChunkOffset()),i=o.slice(t,0,-12),e=new Uint8Array(i.length+n.length),e.set(i,0),e.set(n,i.length),this.setBytes(e)},getFlatImageBytes:function(){var t,e,n,i;for(this.reset(),n=new Uint8Array(this.bytes.length),n.set(o.slice(this.bytes,0,8),0),i=8,t=this.getNextChunk();t;)/^sk/.test(t.type)||(n.set(o.slice(this.bytes,t.offset,t.size+12),i),i+=t.size+12),t=this.getNextChunk();return e=new Uint8Array(i),e.set(o.slice(n,0,i)),e},updateChunk:function(t,e,n){var r,s,a,l,c,h,u,p;return s=n.length,a=t.offset,c=this.bytes.subarray(0,a),h=this.bytes.subarray(a+t.size+12),u=new Uint8Array(n.length+e.length),u[0]=e[0].charCodeAt(0),u[1]=e[1].charCodeAt(0),u[2]=e[2].charCodeAt(0),u[3]=e[3].charCodeAt(0),u.set(n,4),l=o.crc(u),r=new Uint8Array(s+12),r.set(o.uint32ToBytes(s),0),r.set(n,8),r.set(o.uint32ToBytes(l),s+8),p=i.fromText(e),r.set(p,4),this.bytes=new Uint8Array(c.length+r.length+h.length),this.bytes.set(c,0),this.bytes.set(r,a),this.bytes.set(h,r.length+a),this.processNewBytes(),this.getChunk(a)},addChunk:function(t,e){var n,r,s,a,l,c,h;r=e.length;var u=this.getEndChunk();return s=u.offset,c=this.bytes.subarray(0,s),h=this.bytes.subarray(s),l=new Uint8Array(e.length+t.length),l[0]=t[0].charCodeAt(0),l[1]=t[1].charCodeAt(0),l[2]=t[2].charCodeAt(0),l[3]=t[3].charCodeAt(0),l.set(e,4),a=o.crc(l),n=new Uint8Array(r+12),n.set(o.uint32ToBytes(r),0),n.set(i.fromText(t),4),n.set(e,8),n.set(o.uint32ToBytes(a),r+8),this.bytes=new Uint8Array(c.length+n.length+h.length),this.bytes.set(c,0),this.bytes.set(n,s),this.bytes.set(h,n.length+s),this.processNewBytes(),this.getChunk(s)},getEndChunk:function(){this.reset();for(var t=this.getNextChunk();t;){if("IEND"==t.type)return t;t=this.getNextChunk()}throw"There is no IEND chunk"},getNextChunk:function(){var t;if(this.bytes&&!(this.offset>=this.bytes.length))return this.offset||this.seek(8),t=this.getChunk(this.offset),this.forward(t.size+12),t}},e=n.define(e,r),o.supportedTypes.push(e),e}),define("util/Svg",["util/Num"],function(){function t(){}var e=require("util/Num");return t.absolute=function(t){var e={x:0,y:0},n=!1;return t=t.slice(0),t.forEach(function(i,o){i=i.slice(0),n=/^(m|l|c|q)$/.test(i[0]),i[0]=i[0].toUpperCase();for(var r=2;r<i.length;r+=2)i[r-1]=parseFloat(i[r-1])+(n?e.x:0),i[r]=parseFloat(i[r])+(n?e.y:0),r==i.length-1&&(e={x:i[r-1],y:i[r]});t[o]=i}),t},t.quadraticToCubic=function(t,n){var i={x:n[1],y:n[2]},o={x:n[3],y:n[4]},r=["C"];return r.push(e.fixed(t.x+2/3*(i.x-t.x))),r.push(e.fixed(t.y+2/3*(i.y-t.y))),r.push(e.fixed(o.x+2/3*(i.x-o.x))),r.push(e.fixed(o.y+2/3*(i.y-o.y))),r.push(e.fixed(o.x)),r.push(e.fixed(o.y)),r},t}),define("buffer/ByteBuffer",["require","util/Class","util/Binary"],function(t){function e(){this.buffer=null,this.size=32,this.pos=0}var n=t("util/Class"),i=t("util/Binary");return e.prototype={initialize:function(){null==this.buffer&&(this.buffer=new Uint8Array(this.size))},write:function(t){var e=1;"string"==typeof t&&(t=i.fromText(t)),null!=t.byteLength&&(e=t.byteLength),e+this.pos>this.buffer.byteLength&&this.resize(2*(this.pos+e)),null!=t.byteLength?this.buffer.set(t,this.pos):this.buffer[this.pos]=t,this.pos+=e},writeLine:function(t){return null==t&&(t=""),"string"==typeof t?this.write(t+"\n"):(this.write(t),this.write("\n"),void 0)},resize:function(t){var e=new Uint8Array(t);e.set(this.buffer.byteLength<=t?this.buffer:this.buffer.subarray(0,t)),this.buffer=e},bytes:function(){return this.buffer.subarray(0,this.pos)},text:function(){return i.toText(this.bytes())}},e=n.define(e)}),define("pdf/PdfSerializer",["require","util/Class","util/Num","util/Text","util/Svg","util/Color","buffer/ByteBuffer","log/Logger"],function(t){function e(){this.buffer=null}var n=t("util/Class"),i=t("util/Num"),o=t("util/Text"),r=t("util/Svg"),s=t("util/Color"),a=t("buffer/ByteBuffer"),l=t("log/Logger").instance("pdf.PdfSerializer");return window.PDFJS&&PDFJS.Objects&&(PDFJS.Objects.Obj.prototype.serialize=function(t){t.obj(this)},PDFJS.Objects.Dict.prototype.serialize=function(t){t.dict(this)},PDFJS.Objects.Name.prototype.serialize=function(t){t.pdfname(this)},PDFJS.Objects.Page.prototype.serialize=function(t){t.page(this)},PDFJS.Objects.Ref.prototype.serialize=function(t){t.ref(this)},PDFJS.Objects.Stream.prototype.serialize=function(t){t.stream(this)},PDFJS.Objects.WritableTextStream.prototype.serialize=function(t){t.textstream(this)},PDFJS.Objects.XRef.prototype.serialize=function(t){t.xref(this)}),e.prototype={initialize:function(){this.buffer=this.buffer||new a},elements:function(t,e){var n=this;return t.forEach(function(t){n.element(t,e)}),this},element:function(t,e){var n=e.buffer.length;return e.save(),t.initGraphics(e),t.draw(e),e.restore(),this.buffer.writeLine(e.buffer.slice(n).join("\n")),this},vector:function(t){var e=t.stroke,n=t.fill;return this.buffer.writeLine("q"),n&&this.color(n.color,"rg"),e&&(this.color(e.color,"RG"),null!=e.width&&this.buffer.writeLine(e.width+" w")),this.path(t.operations),this.buffer.writeLine("S"),this.buffer.writeLine("Q"),this},color:function(t,e){var n,o;return null==t?"":(n=new s(t),n.a>0&&(o=n.toRGBArray().map(function(t){return i.fixed(t/255,2)}),o.push(e),this.buffer.writeLine(o.join(" "))),this)},lineWidth:function(t){return null!=t&&this.buffer.writeLine(i.fixed(t)+" w"),this},lineCap:function(t){var e=["butt","round","square"].indexOf(t);return-1!=e&&this.buffer.writeLine(e+" J"),this},lineJoin:function(t){var e=["miter","round","bevel"].indexOf(t);return-1!=e&&this.buffer.writeLine(e+" j"),this},miterLimit:function(t){return null!=t&&this.buffer.writeLine(i.fixed(t)+" M"),this},path:function(t){var e,n=[],o=[],s={x:0,y:0};return Array.isArray(t)?(t=r.absolute(t),t.forEach(function(t){"Q"==t[0]?t=r.quadraticToCubic(s,t):"Z"==t[0]&&(t[0]="h"),e=t[0].toLowerCase(),o=t.slice(1),o.forEach(function(t,e){t!==Math.round(t)&&(t=i.fixed(t)),o[e]=t}),n.push(o.concat(e).join(" ")),o.length>1&&(s={y:o.pop(),x:o.pop()})}),this.buffer.writeLine(n.join(" ")),this):(l.error("Unable to serialize path because operations is not an array"),this)},obj:function(t){return this.buffer.writeLine([t.ref.num,t.ref.gen,"obj"].join(" ")),this.serialize(t.data),this.buffer.writeLine("endobj"),this},page:function(t){return this.buffer.writeLine([t.ref.num,t.ref.gen,"obj"].join(" ")),this.serialize(t.pageDict),this.buffer.writeLine("endobj"),this},stream:function(t){return t.dict=t.dict||new Dict,t.dict.set("Length",t.bytes.byteLength),this.dict(t.dict),this.buffer.writeLine("stream"),this.buffer.writeLine(t.bytes),this.buffer.writeLine("endstream"),this},textstream:function(t){var e=[],n=t.textbuffer.join("\n");return t.dict=t.dict||new Dict,t.dict.set("Length",n.length),this.dict(t.dict),this.buffer.writeLine("stream"),this.buffer.writeLine(n),this.buffer.writeLine("endstream"),this.buffer.write(e.join("\n")),this},dict:function(t){var e=this;return this.buffer.writeLine("<<"),t.keys().forEach(function(n){e.pdfname(n),e.buffer.write(" "),e.serialize(t.getRaw(n)),e.buffer.writeLine()}),this.buffer.writeLine(">>"),this},array:function(t){var e=this;return this.buffer.write("[ "),t.forEach(function(t){e.serialize(t),e.buffer.write(" ")}),this.buffer.write("]"),this},pdfname:function(t){return this.buffer.write("/"+(t.name||t)),this},ref:function(t){return this.buffer.write([t.num,t.gen,"R"].join(" ")),this},text:function(t){return this.buffer.write("("+t+")"),this},xref:function(t){var e=["xref"],n=-2,i=null,r=0;return t.entries.forEach(function(t,s){s>n+1&&(null!=i&&(e[i]=e[i]+" "+r),r=0,i=e.length,e.push(s)),e.push([o.lpad(t.offset,10,"0"),o.lpad(t.gen,5,"0"),t.free?"f":"n"].join(" ")),n=s,r++}),e[i]=e[i]+" "+r,e.push("trailer"),this.buffer.writeLine(e.join("\n")),this.dict(t.trailer),this},startxref:function(t){var e=["startxref"];return e.push(t),e.push("%%EOF"),this.buffer.writeLine(e.join("\n")),this},serialize:function(t){return t.serialize?t.serialize(this):Array.isArray(t)?this.array(t):"string"==typeof t?this.text(t):this.buffer.write(t+""),this}},e=n.define(e)}),define("pdf/RunLengthEncoder",["require","util/Class","buffer/ByteBuffer"],function(t){function e(){this.buffer=new i,this.prev=null,this.unique=[],this.run=0}var n=t("util/Class"),i=t("buffer/ByteBuffer");return e.prototype={write:function(t){127==this.run||127==this.unique.length?this.flush():this.prev!=t&&this.run>0?this.flush():this.prev==t&&(this.unique.length>1&&(this.unique.pop(),this.flush(),this.prev=t),this.run++),this.prev!=t&&this.unique.push(t),this.prev=t},flush:function(){var t=this;this.unique.length>1?(this.buffer.write(this.unique.length-1),this.unique.forEach(function(e){t.buffer.write(e)})):null!=this.prev&&(this.buffer.write(256-this.run),this.buffer.write(this.prev)),this.prev=null,this.unique=[],this.run=0},end:function(){this.flush(),this.buffer.write(128)},bytes:function(){return this.buffer.bytes()}},e=n.define(e)}),define("graphics/PdfGraphics",["require","util/Class","util/Num","util/Color","util/Img","util/Text","util/Transformer","pdf/PdfSerializer","log/Logger","pdf/RunLengthEncoder","graphics/CanvasGraphics"],function(t){function e(){this.buffer=[],this.pos=null,this.context=null,this.$span=$("<span/>"),this.extgstates={},this.shadows=[],this.path=[],this.matrices=[],this.matrix=[1,0,0,1,0,0],this.incomplete=!1}var n=t("util/Class"),i=t("util/Num"),o=t("util/Color"),r=t("util/Img"),s=t("util/Text"),a=t("util/Transformer"),l=t("pdf/PdfSerializer"),c=t("log/Logger").instance("pdf.PdfGraphics"),h=t("pdf/RunLengthEncoder"),u=t("graphics/CanvasGraphics");return e.prototype={initialize:function(){this.context=this.context||u.create(300,150).context},setWidth:function(){},setHeight:function(){},save:function(){this.context.save(),this.buffer.push("q"),this.matrices.push(this.matrix.concat())},restore:function(){this.context.restore(),this.buffer.push("Q"),this.matrix=this.matrices.length>0?this.matrices.pop():[1,0,0,1,0,0]},scale:function(t,e){this.context.scale(t,e),t=i.fixed(t),e=i.fixed(e),this.buffer.push([t,0,0,e,0,0,"cm"].join(" ")),a.scaleBy(this.matrix,t,e)},rotate:function(t){this.context.rotate(t),this.buffer.push([i.fixed(Math.cos(t)),i.fixed(Math.sin(t)),i.fixed(-Math.sin(t)),i.fixed(Math.cos(t)),"cm"].join(" ")),a.rotateBy(this.matrix,t)},translate:function(t,e){this.context.translate(t,e),t=i.fixed(null!=t?t:0),e=i.fixed(null!=e?e:0),this.buffer.push([1,0,0,1,t,e,"cm"].join(" ")),a.translateBy(this.matrix,t,e)},transform:function(t,e,n,o,r,s){this.context.transform(t,e,n,o,r,s);var l=[t,e,n,o,r,s].map(function(t){return i.fixed(t)});this.buffer.push(l.join(" ")+" cm"),this.matrix=a.transformBy(this.matrix,[t,e,n,o,r,s])},setTransform:function(){var t="Cannot reset transformation matrix for PDF context";throw c.error(t),Error(t)},globalAlpha:function(){throw c.error("globalAlpha not yet implemented in pdf/PdfGraphics"),Error(msg)},globalCompositeOperation:function(){throw c.error("globalCompositeOperation not yet implemented in pdf/PdfGraphics"),Error(msg)},strokeStyle:function(t){this.context.strokeStyle=t;var e=s.rtrim((new l).color(this.context.strokeStyle,"RG").buffer.text());return e&&e.length>0&&this.buffer.push(e),this.context.strokeStyle},fillStyle:function(t){this.context.fillStyle=t;var e=s.rtrim((new l).color(this.context.fillStyle,"rg").buffer.text());return e&&e.length>0&&this.buffer.push(e),this.context.fillStyle},createLinearGradient:function(){var t="createLinearGradient not yet implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},createRadialGradient:function(){var t="createRadialGradient not yet implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},createPattern:function(){var t="createPattern not yet implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},lineWidth:function(t){this.context.lineWidth=t;var e=s.rtrim((new l).lineWidth(this.context.lineWidth).buffer.text());return e&&e.length>0&&this.buffer.push(e),this.context.lineWidth},lineCap:function(t){this.context.lineCap=t;var e=s.rtrim((new l).lineCap(this.context.lineCap).buffer.text());return e&&e.length>0&&this.buffer.push(e),this.context.lineCap},lineJoin:function(t){this.context.lineJoin=t;var e=s.rtrim((new l).lineJoin(this.context.lineJoin).buffer.text());return e&&e.length>0&&this.buffer.push(e),this.context.lineJoin},miterLimit:function(t){this.context.miterLimit=t;var e=s.rtrim((new l).lineWidth(this.context.miterLimit).buffer.text());return e&&e.length>0&&this.buffer.push(e),this.context.miterLimit},shadowOffsetX:function(t){return this.context.shadowOffsetX=t},shadowOffsetY:function(t){return this.context.shadowOffsetY=t},shadowBlur:function(t){return this.context.shadowBlur=t},shadowColor:function(t){return this.context.shadowColor=t},clearRect:function(){var t="clearRect not yet implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},fillRect:function(t,e,n,i){this.rect(t,e,n,i),this.fill()},strokeRect:function(t,e,n,i){this.rect(t,e,n,i),this.stroke()},beginPath:function(){this.pos=[0,0],this.buffer.push("n"),this.context.beginPath(),this.incomplete=!1,this.path=[]},closePath:function(){this.pos=[0,0],this.buffer.push("h"),this.context.closePath(),this.path.push("h")},moveTo:function(t,e){this.pos=[t,e],this.buffer.push([i.fixed(t),i.fixed(e),"m"].join(" ")),this.context.moveTo(t,e);var n=a.transformPoint(this.matrix,{x:this.pos[0],y:this.pos[1]});this.path.push([i.fixed(n.x),i.fixed(n.y),"m"].join(" "))},lineTo:function(t,e){this.pos=[t,e],this.buffer.push([i.fixed(t),i.fixed(e),"l"].join(" ")),this.context.lineTo(t,e);var n=a.transformPoint(this.matrix,{x:this.pos[0],y:this.pos[1]});this.path.push([i.fixed(n.x),i.fixed(n.y),"l"].join(" "))},quadraticCurveTo:function(t,e,n,i){var o=this.pos[0],r=this.pos[1],s=n,a=i;this.bezierCurveTo(o+2/3*(t-o),r+2/3*(e-r),s+2/3*(t-s),a+2/3*(e-a),s,a)},bezierCurveTo:function(t,e,n,o,r,s){var l=this,c=[t,e,n,o,r,s].map(function(t){return i.fixed(t)});this.buffer.push(c.join(" ")+" c"),this.pos=[r,s],this.context.bezierCurveTo.apply(this.context,arguments);var h=[{x:t,y:e},{x:n,y:o},{x:r,y:s}].reduce(function(t,e){var n=a.transformPoint(l.matrix,e);return t.push(i.fixed(n.x),i.fixed(n.y)),t},[]);this.path.push(h.join(" ")+" c")},arcTo:function(){var t="arcTo not implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},rect:function(t,e,n,o){var r=[t,e,n,o].map(function(t){return i.fixed(t)});this.buffer.push(r.join(" ")+" re"),this.context.rect.apply(this.context,arguments);var s=a.transformPoint(this.matrix,{x:t,y:e});this.path.push([s.x,s.y,n*this.matrix[0],o*this.matrix[3]," re"].join(" "))},arc:function(){var t="arc not implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},alphaState:function(t){var e,n,r,s,a;"stroke"==t?(e="StrokeAlpha",n=this.context.strokeStyle,r="CA"):(e="FillAlpha",n=this.context.fillStyle,r="ca"),s=new o(n).a,1>s&&(a=e+Math.round(255*s),this.buffer.push("/"+a+" gs"),this.extgstates[a]={},this.extgstates[a][r]=i.fixed(s))},clear:function(t){t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.setTransform.apply(t,this.matrix)},shadow:function(){var t=this.context;if((0!=t.shadowBlur||0!=t.shadowOffsetX||0!=t.shadowOffsetY)&&1!=new o(t.shadowColor).a){var e=r.getBox(t.getImageData(0,0,t.canvas.width,t.canvas.height)),n=t.getImageData(e.left,e.top,Math.max(e.width,1),Math.max(e.height,1));if(0!=e.width&&0!=e.height){for(var s={width:e.width,height:e.height,alias:"Shadow"+this.shadows.length,bytes:null},l=e.width*e.height,c=new h,u=0;l>u;u++)c.write(Math.min(n.data[4*u+3],153));c.end(),s.bytes=c.bytes(),this.shadows.push(s),this.save();var p=[e.width,0,0,-e.height,e.left,e.height+e.top];p=a.transformBy(p,a.inverse(this.matrix)),p=p.map(function(t){return i.fixed(t)}),this.buffer.push(p.join(" ")+" cm"),this.buffer.push("/"+s.alias+" Do"),this.restore()}}},ensurePath:function(){if(this.incomplete){var t=a.inverse(this.matrix).map(function(t){return i.fixed(t)});this.buffer.push("q"),this.buffer.push("n % Delete existing path and rebuild"),this.buffer.push(t.join(" ")+" cm"),this.buffer=this.buffer.concat(this.path)}},fill:function(t){if(null!=t){var e="fill with path argument not yet implemented in pdf/PdfGraphics";throw c.error(e),Error(e)}this.alphaState("fill"),this.clear(this.context),this.context.fill(),this.shadow(),this.ensurePath(),this.buffer.push("f"),this.incomplete&&this.buffer.push("Q"),this.incomplete=!0},stroke:function(t){if(null!=t){var e="stroke with path argument not yet implemented in pdf/PdfGraphics";throw c.error(e),Error(e)}this.alphaState("stroke");var n=this.context;this.clear(n),n.fill();var i=n.lineWidth;n.lineWidth=Math.max(n.lineWidth-1,.1),n.stroke(),n.lineWidth=i,this.shadow(),this.ensurePath(),this.buffer.push("S"),this.incomplete&&this.buffer.push("Q"),this.incomplete=!0},clip:function(){var t="clip not yet implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},isPointInPath:function(){var t="isPointInPath not yet implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},drawFocusRing:function(){var t="drawFocusRing not yet implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},font:function(t){return this.context.font=t,this.context.font},textAlign:function(t){return this.context.textAlign=t,this.context.textAlign},textBaseline:function(t){return this.context.textBaseline=t,this.context.textBaseline},fillText:function(t,e,n,i){var o=0;this.clear(this.context),this.context.fillText(t,e,n,i),this.shadow(),this.text(t,e,n,i,o)},strokeText:function(t,e,n,i){var o=1,r=this.context;r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,r.canvas.width,r.canvas.height);var s=r.lineWidth;r.lineWidth=Math.max(r.lineWidth-1,.1),r.strokeText.apply(r,arguments),r.lineWidth=s,r.setTransform.apply(r,this.matrix),this.shadow(),this.text(t,e,n,i,o)},measureText:function(t){return this.context.measureText(t)},text:function(t,e,n,i,o){o=o||0,t=t.replace("\\","\\\\").replace("(","\\(").replace(")","\\)");var r=this.$span;r.css("font",this.context.font);var s=parseFloat(r.css("fontSize").match(/\d+/)[0]);this.buffer.push(["BT",o,"Tr","/HelveticaBold",s,"Tf",1,0,0,-1,e,n,"Tm","("+t+")","Tj","ET"].join(" "))},drawImage:function(){var t="drawImage not implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},createImageData:function(){var t="createImageData not implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},getImageData:function(){var t="getImageData not implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},putImageData:function(){var t="putImageData not implemented in pdf/PdfGraphics";throw c.error(t),Error(t)},serialize:function(){return this.buffer.join("\n")}},e=n.define(e)}),define("pdf/Caecilia",["require"],function(){function t(){}if(window.PDFJS){var e=PDFJS.Objects.Dict,n=PDFJS.Objects.Stream,i=PDFJS.Objects.Name;return t.font=function(){var t=new e;return t.set("Type",new i("Font")),t.set("Subtype",new i("TrueType")),t.set("BaseFont",new i("GVHQMO+CaeciliaLTStd-Roman")),t.set("Encoding",new i("WinAnsiEncoding")),t.set("FirstChar",32),t.set("LastChar",122),t.set("Widths",[278,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,741,630,685,759,574,556,722,778,334,315,704,556,926,796,760,574,760,648,593,668,759,722,1074,704,722,648,0,0,0,0,0,0,574,593,519,630,556,370,556,667,314,314,593,314,1e3,667,594,630,630,426,500,389,648,574,870,593,574,537]),t.set("FontDescriptor",null),t
},t.descriptor=function(){var t=new e;return t.set("Type",new i("FontDescriptor")),t.set("FontName",new i("GVHQMO+CaeciliaLTStd-Roman")),t.set("FontFile2",null),t.set("StemV",80),t.set("Ascent",769),t.set("Flags",32),t.set("Descent",-231),t.set("ItalicAngle",0),t.set("FontBBox",[-167,-270,1136,926]),t.set("CapHeight",700),t},t.fontfile=function(){var t=new Uint8Array([120,156,237,89,121,124,84,213,189,255,157,115,111,102,203,158,73,50,147,101,146,89,146,153,36,147,100,194,172,89,32,151,108,38,100,95,73,34,75,144,29,10,200,86,164,40,180,2,174,184,87,16,145,82,138,130,178,72,213,82,159,109,169,40,173,8,86,121,106,65,173,218,24,106,75,213,23,23,210,64,176,190,220,121,191,115,230,78,8,202,123,127,189,207,123,255,52,195,111,238,185,119,206,111,255,254,126,231,55,3,16,0,80,195,100,160,80,52,103,233,13,203,223,254,225,182,191,227,147,91,0,68,213,130,37,63,152,255,185,233,62,182,222,12,160,63,179,112,222,13,115,229,196,205,135,0,140,61,184,199,191,16,31,168,183,138,59,241,254,1,188,207,90,184,116,245,218,53,107,75,126,142,247,71,0,84,11,151,220,56,231,134,231,94,59,220,14,144,153,14,32,248,151,222,176,118,57,249,24,186,0,172,157,184,223,140,36,40,148,14,204,14,32,255,137,119,132,223,139,100,0,175,171,209,178,8,240,194,6,8,146,9,164,146,116,144,27,200,90,178,129,60,68,95,165,167,232,159,133,253,194,81,225,37,115,162,57,213,156,97,182,154,237,230,34,115,169,185,218,124,200,162,183,88,45,118,75,161,149,90,85,214,88,107,130,53,201,154,106,205,176,58,173,117,214,89,214,121,217,175,13,72,151,26,47,117,94,10,142,88,70,236,35,210,200,186,145,159,141,60,53,242,243,145,35,35,47,140,28,27,185,52,18,252,134,6,131,220,194,221,168,181,130,180,147,89,168,117,61,106,61,129,90,223,83,180,234,205,70,115,186,217,204,181,150,92,67,107,60,106,77,25,211,58,23,181,194,165,170,75,29,151,134,21,173,179,174,210,58,48,114,249,27,18,12,6,63,14,30,15,62,24,220,24,92,21,92,16,108,11,54,5,75,101,181,172,26,189,60,90,48,154,54,106,28,56,49,240,187,129,227,3,47,15,188,56,240,203,129,167,7,158,24,152,244,209,187,31,157,250,232,196,71,199,250,7,251,63,237,63,215,63,208,223,223,255,65,255,123,253,175,247,63,211,255,104,255,182,15,220,230,81,221,63,117,195,186,46,157,87,87,164,51,106,47,107,223,214,190,174,61,161,61,174,61,166,253,149,246,81,237,118,213,35,161,200,255,159,255,169,168,142,103,28,190,163,159,32,22,67,127,20,254,231,191,16,167,0,34,98,68,133,40,214,128,22,116,16,9,81,16,13,49,16,11,113,16,15,9,160,135,68,72,130,100,48,128,17,82,32,21,210,16,93,38,200,128,76,204,175,5,172,96,131,44,200,6,59,56,32,7,114,33,15,156,144,15,5,80,8,46,40,130,9,224,6,15,226,207,7,126,8,64,49,148,64,41,148,193,68,152,4,229,32,33,54,43,160,18,170,160,26,106,224,58,168,133,58,152,2,245,208,0,141,208,4,205,208,2,173,208,6,237,208,1,157,136,249,169,208,13,61,208,11,215,195,52,152,14,51,96,38,244,193,44,184,1,237,191,29,238,128,187,96,11,252,24,182,195,46,120,28,246,192,19,176,15,246,194,147,176,31,14,194,1,56,4,79,195,207,225,48,60,3,207,194,47,224,151,112,4,158,135,23,224,223,224,40,252,6,126,11,47,194,57,88,9,115,97,30,44,130,143,97,45,252,12,150,195,247,224,63,96,13,44,134,175,225,78,216,1,151,96,21,252,19,190,129,5,112,19,124,1,23,224,43,120,15,70,96,9,214,248,59,240,20,252,26,110,133,57,176,12,46,194,235,112,25,190,132,165,176,30,254,10,179,97,35,220,6,143,192,43,112,2,254,4,239,67,63,124,4,31,192,135,240,43,248,79,120,25,78,193,39,240,41,156,135,191,147,237,228,81,248,11,252,0,254,12,3,240,55,216,12,247,192,38,184,23,238,134,251,225,1,120,16,238,131,173,176,13,61,124,24,118,194,79,224,49,56,14,111,192,25,88,1,111,194,91,240,54,172,131,179,240,71,56,141,159,71,240,100,14,211,163,152,75,21,230,48,10,115,7,19,226,45,241,130,222,162,55,196,19,75,36,137,215,147,225,127,30,144,15,157,60,32,223,71,58,15,156,60,64,143,142,86,147,45,16,148,207,4,137,60,122,22,251,67,190,76,33,136,152,137,68,224,188,143,178,212,152,113,32,30,135,221,97,83,169,137,207,67,60,122,79,146,205,231,113,216,212,158,36,162,61,221,169,141,160,17,90,121,223,100,34,78,31,172,26,172,111,24,237,232,36,29,159,166,24,12,41,163,191,151,232,250,209,77,146,116,246,172,196,17,86,136,50,75,81,166,14,145,84,128,189,80,237,113,251,188,133,130,45,146,120,220,229,130,207,107,19,244,40,217,109,72,78,74,84,169,147,252,120,137,17,108,22,223,25,234,126,46,57,173,48,53,177,155,86,216,114,42,178,211,95,56,36,182,14,207,45,236,105,152,52,101,105,122,97,197,117,14,121,144,174,191,180,193,58,193,16,69,229,63,200,35,52,38,213,107,191,13,175,229,82,114,222,226,170,78,29,37,51,90,243,171,157,166,72,137,227,221,29,28,166,55,211,147,136,96,32,232,139,221,102,85,37,37,38,123,220,18,241,168,99,136,205,106,247,121,203,169,199,77,111,110,46,157,178,113,199,143,239,245,77,22,155,69,211,77,190,103,95,41,156,182,181,239,70,186,119,247,178,248,109,91,30,120,44,118,245,129,232,184,35,207,54,108,92,80,198,235,204,137,111,175,160,127,145,88,35,160,23,60,238,128,223,231,117,20,18,238,151,197,205,220,66,119,222,18,151,108,175,111,110,203,157,215,248,170,216,74,202,30,63,250,135,231,229,191,99,160,142,215,55,63,120,127,109,86,218,232,113,180,251,224,254,35,71,36,102,43,147,25,135,50,245,0,1,38,5,237,101,145,183,9,158,128,71,109,241,221,132,34,254,84,255,41,253,240,67,250,15,85,189,74,182,72,200,188,103,206,37,73,30,89,122,72,82,248,9,242,199,43,252,6,155,3,121,147,184,12,206,253,71,161,94,248,152,94,184,64,123,191,97,188,123,231,203,65,73,150,164,112,156,142,97,156,44,0,217,73,227,2,147,108,24,31,181,128,15,147,150,68,87,240,0,229,247,62,52,83,90,151,86,95,56,251,214,135,126,124,111,149,123,234,208,208,185,112,140,140,209,187,22,26,182,222,131,113,59,40,141,249,246,17,218,150,22,178,141,121,101,81,174,28,99,1,75,216,202,161,70,74,150,80,188,240,165,252,48,46,153,177,146,28,36,68,146,70,143,227,74,177,25,49,70,204,60,7,99,50,153,140,117,98,136,153,115,177,253,184,45,120,50,88,79,210,113,111,20,102,139,239,140,33,106,135,63,160,119,94,168,23,201,162,141,169,135,169,72,215,163,232,170,173,123,36,169,227,47,228,152,98,243,30,228,73,13,243,16,174,68,75,184,197,36,100,184,222,201,12,46,234,26,42,151,79,145,73,229,114,187,252,39,110,60,151,118,145,68,226,251,87,242,219,146,68,140,242,39,18,154,164,200,141,66,185,209,227,236,14,103,248,139,58,241,75,150,220,108,197,122,150,89,230,171,13,139,234,102,228,177,113,91,244,201,6,15,26,143,156,161,10,213,99,193,10,54,193,238,80,162,169,183,253,246,28,209,81,29,57,247,242,52,85,215,80,3,165,58,245,153,198,119,133,72,74,187,6,219,84,104,219,232,91,52,55,151,82,23,15,16,37,217,241,163,151,104,172,42,91,142,80,108,204,64,27,101,212,151,162,216,72,80,163,98,171,141,132,245,220,36,206,120,146,172,143,76,166,98,247,96,131,88,43,175,142,137,166,98,207,39,204,116,25,98,179,201,69,244,96,19,141,73,52,50,177,161,243,137,225,236,4,226,44,146,245,26,189,215,239,9,149,138,213,238,79,204,32,238,114,226,45,36,86,149,251,240,206,93,135,24,77,119,45,219,179,204,197,222,72,251,190,55,95,125,4,233,31,187,111,237,234,186,149,189,141,213,161,145,99,62,93,177,52,212,83,156,132,227,137,85,166,82,152,24,220,11,11,75,166,221,220,251,125,132,255,62,58,179,182,89,50,184,10,152,173,102,247,234,249,171,255,204,28,151,251,91,170,174,183,69,171,194,182,182,10,85,188,38,176,131,69,168,153,149,216,27,11,169,205,90,72,125,97,211,213,73,201,6,172,12,63,88,99,136,226,130,93,168,18,18,242,156,189,91,210,98,163,253,89,17,238,121,211,75,153,51,43,110,76,255,97,159,39,202,42,223,163,248,228,114,45,148,180,22,41,74,173,74,141,207,107,189,167,135,121,184,233,119,102,26,49,57,87,164,131,33,39,241,141,219,194,250,233,102,222,163,243,67,253,198,239,181,59,177,71,187,51,132,144,17,153,36,131,148,97,139,179,218,93,164,144,40,238,123,244,103,104,71,221,212,238,230,175,62,115,86,212,185,50,102,85,23,20,148,217,210,76,153,185,129,162,244,170,9,133,5,1,218,246,15,134,85,249,114,245,125,126,73,149,108,175,114,181,207,85,83,218,52,191,44,85,50,58,87,117,20,140,112,64,112,12,86,98,238,50,49,30,104,75,0,145,144,204,67,91,136,205,188,92,184,170,81,100,136,216,205,89,148,72,101,123,254,140,198,235,91,86,172,104,137,206,42,158,57,49,111,85,102,115,65,93,229,204,146,174,185,93,37,5,77,211,125,158,246,90,195,142,190,212,234,114,79,153,201,214,89,147,238,9,228,164,232,99,238,237,214,151,74,185,254,228,76,91,251,196,226,142,34,67,116,82,72,127,34,198,224,78,140,1,158,117,217,122,155,218,22,24,235,112,62,146,41,30,195,178,161,11,241,237,152,216,253,53,218,188,228,224,193,37,161,234,103,188,102,180,253,93,228,181,242,115,128,117,51,67,178,59,80,78,194,5,136,49,196,252,34,78,124,222,0,138,75,104,160,49,73,57,253,5,137,58,66,187,135,154,168,193,92,254,200,190,201,198,88,218,70,143,74,191,127,188,166,41,213,93,150,218,222,69,166,96,121,223,86,217,235,104,236,182,116,79,187,235,29,41,60,141,209,55,81,23,154,109,17,184,120,125,6,49,120,174,40,35,101,35,149,67,205,47,10,106,66,137,90,56,218,57,88,57,194,218,197,232,69,77,170,40,166,106,104,36,171,155,177,201,78,44,66,89,57,223,149,229,184,150,104,246,34,182,247,107,135,90,14,42,226,119,228,52,12,54,252,84,185,121,190,119,176,226,179,217,235,233,79,185,190,207,67,250,200,214,13,87,110,168,158,41,39,59,229,185,92,63,246,62,186,47,212,119,2,250,144,1,8,181,128,63,16,82,23,106,63,8,57,181,138,3,174,247,253,87,235,228,246,4,205,143,182,104,99,59,206,87,190,254,102,245,229,150,104,237,61,219,52,49,109,231,37,98,37,233,146,164,143,62,250,82,116,44,198,109,80,126,71,146,98,163,223,248,119,93,92,168,159,107,80,215,107,168,203,168,244,219,241,138,66,112,14,8,154,161,41,177,218,167,247,171,146,166,158,159,252,165,208,242,197,20,225,34,115,37,54,250,171,65,173,1,133,62,251,165,36,125,65,90,185,237,94,148,215,25,58,15,61,62,226,199,35,6,33,147,68,84,106,11,118,91,47,217,41,166,202,7,25,104,4,121,177,54,153,44,192,101,25,53,171,210,23,61,37,141,158,143,50,46,222,207,234,78,66,220,24,105,28,78,198,1,140,128,187,156,250,242,72,76,4,194,71,64,123,148,22,144,196,108,67,216,176,99,147,117,134,114,209,227,243,98,41,12,25,11,39,152,50,51,3,25,121,6,131,46,224,172,159,211,190,96,158,170,254,97,29,53,182,87,165,78,240,153,13,69,254,182,186,9,197,229,149,158,184,236,230,128,16,161,137,77,76,79,200,115,145,187,90,111,201,153,58,55,238,109,159,148,148,235,150,38,69,153,164,124,155,207,154,172,19,179,235,202,249,140,143,54,57,4,130,61,52,155,77,86,161,58,100,165,199,103,42,33,81,141,120,224,150,241,34,20,247,139,53,185,125,125,173,147,165,238,30,177,251,0,213,209,184,185,85,243,23,167,79,92,209,148,148,157,98,139,207,39,137,191,55,254,104,198,180,233,221,242,83,116,175,36,95,200,13,4,106,239,89,234,158,117,125,64,16,181,170,216,16,14,93,193,97,242,30,198,129,205,7,172,82,184,159,56,31,40,85,31,131,93,40,3,187,0,57,43,118,84,78,89,90,150,238,106,238,46,156,57,165,222,226,115,86,56,140,26,33,217,222,226,119,117,213,165,20,180,76,247,95,183,116,82,70,234,29,109,81,169,185,197,158,244,56,75,85,145,29,125,242,163,79,173,232,83,52,67,26,241,225,164,168,140,28,122,86,223,222,128,67,153,73,48,228,6,86,160,191,16,12,241,89,201,211,231,215,215,110,235,20,155,126,138,78,117,95,55,227,7,247,111,154,98,165,11,72,252,19,68,167,82,173,94,210,180,128,158,26,45,151,252,110,234,170,189,117,237,166,221,134,83,18,139,31,243,101,20,125,81,177,105,68,111,225,161,139,176,176,241,70,125,69,75,134,112,27,177,54,148,87,116,146,213,242,157,170,23,91,26,5,211,124,199,250,45,235,87,150,78,45,76,85,147,82,169,103,234,143,126,231,168,141,73,190,107,243,77,219,115,75,59,38,41,113,194,183,35,130,150,213,13,81,179,192,80,19,78,154,99,199,178,15,145,129,81,58,34,164,149,228,23,167,105,110,35,155,105,231,224,117,180,171,235,116,21,29,173,142,74,42,116,101,231,73,242,58,28,23,110,151,220,127,196,57,218,47,127,77,189,104,107,17,126,119,106,228,189,11,219,170,45,116,102,178,0,177,182,207,111,120,231,242,177,169,141,4,124,172,41,179,72,233,29,188,31,179,153,27,243,101,23,148,152,50,184,80,111,161,42,205,44,78,184,101,102,106,85,182,247,238,170,186,135,23,85,126,111,202,198,22,139,217,148,144,229,50,173,157,233,44,140,188,59,105,122,77,181,45,205,231,183,184,238,154,212,210,28,168,104,169,161,162,68,133,162,198,206,185,41,70,125,156,198,16,89,92,218,217,155,86,89,52,219,68,227,165,20,75,148,134,138,9,217,53,133,109,139,163,70,63,76,244,59,179,243,117,218,36,167,41,211,68,70,106,138,125,245,13,129,130,38,140,17,214,55,253,62,230,218,174,156,216,97,196,134,75,201,227,229,231,10,115,144,151,253,90,113,238,243,56,205,196,45,158,244,172,216,56,80,41,210,232,100,151,101,114,175,208,136,147,198,38,14,216,146,154,227,5,191,113,72,82,206,222,188,36,83,145,201,208,51,235,44,111,252,148,205,49,36,29,243,161,13,79,197,30,158,138,4,175,223,157,156,168,178,174,21,103,62,35,182,95,10,100,187,179,179,221,44,232,114,25,158,119,171,216,93,54,227,15,158,146,191,134,243,200,31,203,231,21,54,53,170,216,220,24,106,184,126,69,202,7,34,113,216,39,174,141,154,58,33,205,72,197,190,201,89,222,172,44,47,21,229,245,235,54,229,215,26,43,13,101,230,21,179,73,141,116,56,44,86,137,129,36,240,254,26,178,42,52,90,219,212,6,30,1,159,99,204,115,250,74,221,128,239,157,79,139,7,202,223,162,213,3,220,99,243,30,42,73,135,223,67,75,95,61,37,73,97,121,232,39,65,63,199,121,201,216,197,246,47,24,15,150,1,239,177,185,56,71,30,71,60,85,176,158,200,1,153,24,75,66,253,194,224,241,150,107,190,149,5,86,26,177,228,59,183,254,74,177,99,175,160,97,41,169,106,209,81,181,24,165,139,79,72,73,203,210,135,18,228,170,40,235,33,180,254,92,120,213,192,34,155,155,228,45,169,169,242,147,56,109,98,180,62,58,86,171,10,165,204,116,216,85,213,202,243,53,182,82,236,164,223,71,59,17,35,150,239,0,226,42,187,67,246,146,173,99,184,160,13,3,87,204,67,131,174,70,69,216,18,174,61,52,231,97,63,160,54,212,21,194,8,203,41,202,100,19,105,50,155,178,172,174,219,63,185,29,255,77,237,218,213,213,181,107,120,195,174,251,87,32,189,251,204,202,149,207,172,12,241,103,4,35,104,45,242,167,50,107,13,252,32,190,186,7,135,146,57,190,83,175,18,123,15,140,107,196,126,47,157,58,180,123,172,79,31,165,183,74,9,87,218,112,2,78,49,228,77,165,73,243,94,25,65,91,81,95,52,235,255,227,123,165,128,39,164,210,42,149,9,213,192,128,48,190,89,182,52,224,1,16,59,167,204,126,93,101,206,131,155,171,122,50,197,22,98,218,30,110,151,242,27,210,81,236,150,1,201,232,91,80,115,251,79,210,71,91,217,247,202,44,212,178,159,70,95,249,238,198,188,227,35,159,250,10,62,214,138,61,7,34,5,93,188,189,162,64,147,43,104,146,173,245,45,248,181,96,136,197,59,61,119,186,61,191,204,20,33,212,107,214,52,189,28,194,161,15,123,240,49,244,193,129,55,56,197,41,223,48,13,74,51,195,129,194,99,80,162,197,103,50,118,210,146,199,197,122,209,80,93,84,91,62,121,78,247,162,197,249,203,12,120,95,84,227,170,43,245,172,158,54,103,161,101,30,185,112,203,20,125,118,158,35,43,50,190,74,170,159,166,143,218,220,100,112,58,109,182,200,148,178,218,234,110,61,175,19,59,234,189,153,222,193,250,2,206,24,18,31,147,85,161,179,43,192,207,53,1,27,168,207,222,33,182,139,123,30,23,137,38,46,211,224,241,8,69,213,185,165,233,177,148,8,228,21,105,67,196,38,233,80,183,201,228,76,138,75,170,48,26,51,253,230,226,101,119,176,31,78,32,19,113,52,155,138,252,84,70,124,50,177,148,253,218,49,137,40,5,233,149,136,45,124,194,248,50,247,138,154,228,162,44,231,36,83,60,109,219,43,214,61,138,128,77,152,89,190,160,69,68,37,249,175,150,155,39,20,165,102,23,53,230,155,119,179,166,132,152,245,52,44,159,19,120,78,153,133,117,8,60,108,49,236,183,2,62,43,41,223,8,195,67,160,238,76,249,77,17,42,170,138,88,87,117,186,228,185,246,95,160,72,73,254,101,76,70,70,12,105,192,85,25,121,5,101,32,218,133,46,148,145,51,94,134,68,148,185,242,42,129,252,55,161,88,98,19,226,207,148,223,168,19,169,24,213,103,42,57,83,179,148,45,117,171,106,78,151,61,61,181,141,63,158,217,126,144,235,58,150,97,52,100,14,55,133,86,198,12,82,193,180,126,158,97,76,54,127,206,117,179,254,87,130,186,29,138,238,164,208,176,119,117,19,12,205,149,161,110,20,112,100,14,84,170,116,115,231,233,84,117,167,203,118,60,81,62,80,163,210,45,91,170,83,85,157,46,123,114,7,211,73,133,168,13,27,162,4,108,141,47,156,230,119,119,223,205,239,78,190,200,226,197,207,81,17,76,215,138,23,203,137,195,199,127,21,18,116,239,87,220,28,242,106,202,233,146,93,37,203,250,172,105,105,153,139,252,241,191,13,187,165,56,211,244,147,91,180,213,218,141,121,228,67,158,15,15,190,157,71,249,113,108,62,178,176,105,211,22,154,54,113,216,36,231,53,114,23,201,140,112,14,35,96,201,110,249,93,7,206,186,219,182,77,36,61,42,103,199,67,37,242,99,142,110,229,183,89,162,155,52,178,229,169,250,190,216,137,23,33,82,248,132,165,250,141,109,105,235,195,215,96,175,60,36,46,23,118,225,173,102,236,183,94,228,19,72,48,5,78,138,247,7,123,131,189,226,242,111,255,62,76,118,144,97,101,213,132,148,140,84,10,125,228,40,116,210,124,72,68,74,23,42,32,87,208,65,29,126,54,3,63,107,64,18,73,31,164,210,30,112,225,179,106,242,8,212,227,181,137,172,12,254,21,247,91,145,38,34,21,33,5,144,98,144,42,145,10,144,74,145,242,216,154,239,71,94,38,35,76,104,71,159,96,6,59,253,27,68,210,53,80,72,159,6,55,29,1,39,126,193,116,34,143,147,190,13,110,180,195,73,154,161,144,148,5,79,210,151,66,207,209,99,155,144,14,25,244,50,238,103,123,217,245,78,228,111,67,189,59,209,135,17,48,35,47,21,221,64,145,39,21,215,26,252,220,139,126,204,39,43,65,131,87,51,234,239,101,113,96,190,161,12,9,121,129,170,209,174,53,224,71,29,46,220,231,194,171,159,62,6,70,220,147,65,74,131,167,112,15,91,27,49,19,185,248,60,151,182,243,253,25,140,135,28,128,44,148,231,35,183,161,63,119,66,38,202,212,9,243,33,158,241,176,53,77,1,15,242,218,160,31,227,128,87,212,95,19,142,61,234,41,65,50,34,165,33,169,216,30,188,214,162,206,139,44,62,4,117,160,236,18,30,51,140,61,127,86,10,113,228,1,140,47,123,182,8,63,95,4,102,124,86,207,117,247,64,9,143,119,41,76,196,231,118,178,24,98,24,191,80,9,102,133,242,241,190,158,199,253,26,36,156,13,142,242,92,148,43,185,80,8,243,16,195,115,209,28,252,6,41,200,114,53,150,135,111,83,15,212,241,43,203,197,120,98,185,96,242,94,66,220,176,184,95,131,48,110,94,158,139,252,171,137,227,48,148,139,11,44,54,60,254,225,60,124,155,122,148,43,139,199,120,98,185,88,131,118,224,149,201,66,185,113,60,167,223,128,79,216,130,88,69,12,177,60,134,49,195,242,70,243,131,178,162,243,2,143,123,105,112,4,175,179,145,74,144,90,241,254,51,164,163,244,77,152,192,117,148,129,150,97,139,85,44,175,151,100,158,235,106,172,177,0,82,9,82,49,234,181,49,194,125,13,184,111,145,120,63,100,146,28,196,17,18,60,25,236,197,207,98,201,223,192,36,244,163,127,40,87,88,132,241,178,162,125,76,254,175,17,211,121,96,96,62,178,189,44,215,168,211,42,104,16,99,243,32,154,122,176,22,60,104,119,136,188,116,34,214,229,28,136,194,186,142,98,215,107,17,218,193,106,203,193,105,13,174,213,215,32,124,78,206,225,117,46,238,121,12,215,101,97,10,14,33,93,194,117,4,201,9,126,138,242,248,62,70,136,15,39,98,169,128,19,242,161,13,110,206,127,13,226,178,231,224,58,5,121,135,161,152,17,117,130,137,63,191,19,227,245,109,154,131,189,106,11,196,97,206,12,184,190,66,44,103,72,76,183,112,28,233,19,30,239,116,164,141,72,213,72,147,88,124,149,43,195,86,142,66,46,101,95,73,40,199,99,57,159,205,242,203,253,65,251,67,57,199,61,204,70,204,189,82,219,125,24,31,47,235,105,188,167,140,143,169,18,207,239,196,110,92,172,198,226,116,141,56,176,24,92,211,95,69,47,171,133,16,46,177,47,179,154,103,181,253,223,228,153,99,128,217,244,173,220,242,220,141,203,37,183,89,177,231,154,244,221,92,24,20,187,13,200,107,197,103,86,60,98,236,255,75,175,86,120,24,94,130,207,136,142,228,144,30,178,145,108,39,207,145,126,114,153,22,209,233,116,51,125,142,94,22,74,133,117,194,118,225,180,48,44,122,197,197,226,67,226,145,171,94,114,68,113,196,194,136,93,17,175,71,12,171,102,170,30,86,29,81,13,168,53,234,116,245,114,245,62,245,9,181,172,241,107,102,105,118,106,94,195,47,134,86,237,44,237,118,237,73,237,103,255,122,253,235,245,255,241,82,254,83,127,7,180,131,122,236,127,241,9,159,226,38,135,230,182,255,2,115,242,22,216]),o=new e;return o.set("Filter",new i("FlateDecode")),new n(t,null,null,o)},t}}),define("util/Pdf",["require","async/Promise","pdf/PdfSerializer","graphics/PdfGraphics","buffer/ByteBuffer","graphics/CanvasGraphics","pdf/Caecilia","pdf/RunLengthEncoder"],function(t){function e(){}if(window.PDFJS){var n=t("async/Promise"),i=t("pdf/PdfSerializer"),o=t("graphics/PdfGraphics"),r=t("buffer/ByteBuffer"),s=t("graphics/CanvasGraphics"),a=t("pdf/Caecilia"),l=t("pdf/RunLengthEncoder"),c=PDFJS.Objects.Obj,h=PDFJS.Objects.Dict,u=PDFJS.Objects.Name,p=PDFJS.Objects.Ref,d=PDFJS.Objects.XRef,f=PDFJS.Objects.Stream,g=PDFJS.Objects.WritableTextStream;return e.runLengthEncode=function(t){for(var e=t.byteLength||t.length,n=new l,i=0;e>i;i++)n.write(t[i]);return n.end(),n.bytes()},e.createAsync=function(t){var e=new n;return n.wrap(PDFJS.getDocument(t)).done(function(t){e.resolve(t)}).fail(function(t){e.reject(t)}),e},e.getPageAsync=function(){var t=new n;return t},e.addElement=function(t,e){var n=t.pageInfo.$page;null==n.elements&&(n.elements=[]),n.elements.push(e)},e.toStreamObj=function(t){return new c(new p(0,0),e.toStream(t))},e.toStream=function(t){var e=new g;return e.write(t),e.flush(),e},e.toDictObj=function(t){return new c(new p(0,0),e.toDict(t))},e.toDict=function(t){var e=new h;return Object.keys(t).forEach(function(n){e.set(n,t[n])}),e},e.nextObjNum=function(t){return null==t.nextObjNum&&(t.nextObjNum=parseInt(t.pdfInfo.$doc.xref.trailer.get("Size"))),t.nextObjNum++},e.incrementalUpdate=function(t,n){var l=new r,g=[],m=e.toStreamObj("q");m.ref.num=e.nextObjNum(t),g.push(m);var y=e.toStreamObj("Q");y.ref.num=e.nextObjNum(t),g.push(y);var v=e.toDictObj({Type:new u("Font"),BaseFont:new u("Helvetica-Bold"),Subtype:new u("Type1")});v.ref.num=e.nextObjNum(t),g.push(v),g.push(new c(new p(e.nextObjNum(t),0),a.fontfile())),g.push(new c(new p(e.nextObjNum(t),0),a.descriptor())),g[g.length-1].data.set("FontFile2",g[g.length-2].ref);var x=new c(new p(e.nextObjNum(t),0),a.font());if(g.push(x),g[g.length-1].data.set("FontDescriptor",g[g.length-2].ref),t.pdfInfo.$doc.catalog.getCachedPages().forEach(function(n){if(null!=n.elements&&0!=n.elements.length){g.push(n);var r=n.pageDict.ensureArray("Contents");r.unshift(m.ref),r.push(y.ref);var a=new o({context:s.create(n.mediaBox[2],n.mediaBox[3]).context}),l=new i;l.buffer.writeLine("q"),l.buffer.writeLine("1  0  0  -1  0 "+n.mediaBox[3]+" cm"),l.elements(n.elements,a),l.buffer.writeLine("Q");var d=e.toStreamObj(l.buffer.text());d.ref.num=e.nextObjNum(t),r.push(d.ref),g.push(d),Object.keys(a.extgstates).forEach(function(t){var i=n.pageDict.ensureDict("Resources",g),o=i.ensureDict("ExtGState",g);o.set(t,e.toDict(a.extgstates[t]))}),a.shadows.forEach(function(i){var o=e.toDict({Type:new u("XObject"),Subtype:new u("Image"),ColorSpace:new u("DeviceGray"),BitsPerComponent:8,Filter:new u("RunLengthDecode"),Width:i.width,Height:i.height}),r=new f(i.bytes,null,null,o),s=new c(new p(e.nextObjNum(t),0),r);g.push(s);var a=e.toStreamObj(" ");a.data.dict=a.data.dict||new h,a.data.dict.set("Type",new u("XObject")),a.data.dict.set("Subtype",new u("Image")),a.data.dict.set("ColorSpace",new u("DeviceGray")),a.data.dict.set("BitsPerComponent",1),a.data.dict.set("Width",1),a.data.dict.set("Height",1),a.data.dict.set("SMask",s.ref),a.ref.num=e.nextObjNum(t),g.push(a);var l=n.pageDict.ensureDict("Resources",g),d=l.ensureDict("XObject",g);d.set(i.alias,a.ref)});var w=n.pageDict.ensureDict("Resources",g),b=w.ensureDict("Font",g);b.set("HelveticaBold",v.ref),b.set("Caecilia",x.ref)}}),null!=n){var w=e.toStreamObj(JSON.stringify(n));w.ref.num=e.nextObjNum(t),g.push(w),t.pdfInfo.$doc.catalog.catDict.set("SkitchManifest",w.ref),g.push(new c(t.pdfInfo.$doc.xref.trailer.getRaw("Root"),t.pdfInfo.$doc.catalog.catDict))}g.sort(function(t,e){return t.ref.num-e.ref.num});var b=t.pdfInfo.$doc.stream.bytes.byteLength;g.forEach(function(t){var e=new i,n=e.serialize(t).buffer.bytes();l.write(n),t.offset=b,b+=n.byteLength});var A=b;A+=1;var T=new d;g.forEach(function(t){T.entries[t.ref.num]={offset:t.offset,gen:t.ref.gen}}),T.trailer.set("Size",t.nextObjNum),T.trailer.set("Root",t.pdfInfo.$doc.xref.trailer.getRaw("Root")),T.trailer.set("Prev",t.pdfInfo.$doc.startXRef);var C=new i({buffer:l});return C.serialize(T),C.startxref(A),l.bytes()},e}}),define("file/PdfDoc",["require","util/Binary","async/Promise","env/Settings","file/File","util/Class","util/Pdf","log/Logger","graphics/CanvasGraphics","util/Img"],function(t){function e(){this.pdf=null,this.manifest=null,this.mime="application/pdf",this.extension="pdf",this.flattenedImage=null}var n=t("util/Binary"),i=t("async/Promise"),o=t("env/Settings"),r=t("file/File"),s=t("util/Class"),a=t("util/Pdf"),l=t("log/Logger").instance("doc.PdfDoc"),c=t("graphics/CanvasGraphics"),h=t("util/Img");return e.isOfFileType=function(t){if(!window.PDFJS)return!1;var e={stream:new PDFJS.Objects.Stream(t),pdfFormatVersion:null};return PDFJS.Objects.Document.prototype.checkHeader.call(e),null!=e.pdfFormatVersion},e.prototype={flattenAsync:function(t){var e=this;return this.manifest,h.toBytesAsync(t.buffer.graphics.context.canvas,"image/png").then(function(t){return e.flattenedImage=t,a.createAsync(e.bytes)}).then(function(t){return e.pdf=t,i.wrap(e.pdf.getPage(1))}).then(function(o){t.foreground.elements.forEach(function(t){a.addElement(o,t)});var r=a.incrementalUpdate(e.pdf,e.manifest);return e.bytes=n.concat(e.bytes,r),i.wrap()})},save:function(t){var n=this,o=new i,r=arguments;return this.createThumbnail(t).then(function(){return e.parent.prototype.save.apply(n,r)}).done(function(t){o.resolve(t)}).fail(function(){o.reject.apply(o,arguments)}),o},createThumbnail:function(t){var e,n,r,s,a,u,p=this,d=new i,f=new c,g=f.context.canvas;return h.toImageElementAsync(this.flattenedImage).then(function(e){return n=e,g.setWidth(o.THUMBNAIL_WIDTH),g.setHeight(o.THUMBNAIL_HEIGHT),n.width<n.height?(a=n.width,u=a,r=0,s=0):(u=n.height,a=u,r=(n.width-n.height)/2,s=0),f.drawImage(n,r,s,a,u,0,0,f.getWidth(),f.getHeight()),i.wrap(t.createFileAsync(p.name+".thumbnail."+p.extension,Windows.Storage.CreationCollisionOption.replaceExisting))}).then(function(t){return i.wrap(t.openAsync(Windows.Storage.FileAccessMode.readWrite))}).then(function(t){return e=new Windows.Storage.Streams.DataWriter(t),e.writeBuffer(Windows.Security.Cryptography.CryptographicBuffer.decodeFromBase64String(g.toDataURL(p.mime,o.JPEG_QUALITY).split(",").pop())),i.wrap(e.storeAsync())}).then(function(){return i.wrap(e.flushAsync())}).done(function(){e.close(),p.fire("thumbnailcreated",g),d.resolve()}).fail(function(t){l.error(t.description),d.reject(t)}),d}},e=s.define(e,r),r.supportedTypes.push(e),e}),define("surface/Surface",["require","util/Class","util/Obj","mixin/Transformable","util/Transformer","env/Settings","async/Promise","surface/layer/Buffer","surface/layer/Layer","surface/layer/Background","surface/layer/Foreground","surface/layer/Tool","surface/element/ElementFactory","util/Img","util/Box","util/Num","surface/controller/Controller","surface/Serializer","util/Binary","file/File","file/JPG","file/PNG","file/PdfDoc","surface/element/Bitmap","util/Security","util/Mime","surface/element/Pixelate","surface/element/LabelText","graphics/CanvasGraphics","graphics/Point","surface/action/DeleteAction","log/Logger","util/Pdf","util/Include"],function(t){function e(){this.margin=r.SKITCH_MARGIN,this.size={width:0,height:0},this.position={x:0,y:0},this.mode={},this.file=null,this.style={},this.dom=null,this.layers={},this.foreground=null,this.background=null,this.active=null,this.buffer=null,this.coordinateSystem=e.coordinateSystem.UPPER_LEFT,this.contentScaleFactor=1,this.userAgentHistory=null,this.clipRect={top:0,left:0,width:0,height:0},this.doRender=!0,this.ready=!1,this.ZOOM_RESET_TEXT="Reset",this.ZOOM_TIP_TEXT="Tip: Hold Ctrl and move to pan",this.registerEvents("layeradded","layerremoved","updated","select","selected","boxchanged","clipchanged","presave","resize")}var n=t("util/Class");t("util/Obj");var i=t("mixin/Transformable"),o=t("util/Transformer"),r=t("env/Settings"),s=t("async/Promise"),a=t("surface/layer/Buffer"),l=t("surface/layer/Layer"),c=t("surface/layer/Background"),h=t("surface/layer/Foreground"),u=t("surface/layer/Tool"),p=t("surface/element/ElementFactory"),d=t("util/Img"),f=t("util/Box"),g=t("util/Num"),m=t("surface/controller/Controller"),y=t("surface/Serializer"),v=t("util/Binary"),x=t("file/File");t("file/JPG"),t("file/PNG"),t("file/PdfDoc");var w=t("surface/element/Bitmap");t("util/Security"),t("util/Mime");var b=t("surface/element/Pixelate"),A=t("surface/element/LabelText"),T=t("graphics/CanvasGraphics"),C=t("graphics/Point"),E=t("surface/action/DeleteAction"),S=t("log/Logger").instance("surface.Surface"),k=t("util/Pdf"),D=t("util/Include");return e.Settings=r,e.coordinateSystem={UNKNOWN:0,UPPER_LEFT:1,CENTER:2},e.prototype.initialize=function(){this.initDOM(),this.buffer=this.addLayer("buffer",new a({surface:this}),!1),this.background=this.addLayer("background",new c({surface:this})),this.foreground=this.addLayer("foreground",new h({surface:this})),this.active=this.addLayer("active",new u({surface:this})),this.controller=new m({surface:this}),this.initEvents(),this.controller.useTool("arrow"),this.controller.setColor("pink"),this.controller.setSize("size-3"),D.CSS("toast.css")},e.prototype.initEvents=function(){this.background.on("loaded",this.onBackgroundLoaded,this),this.foreground.on("elementadded",this.onForegroundElementAdded,this),this.foreground.on("elementremoved",this.onForegroundElementRemoved,this),this.foreground.on("elementmoved",this.onForegroundElementMoved,this),this.foreground.on("elementmanipulated",this.onForegroundElementManipulated,this)},e.prototype.initDOM=function(){var t,e;this.dom=document.createElement("div"),t=this.size&&this.size.width>0&&this.size.width||$(window).width(),e=this.size&&this.size.height>0&&this.size.height||$(window).height(),this.size={width:t,height:e},this.clipRect.width=t,this.clipRect.height=e,$(this.dom).attr("touch-action","none").addClass("skitch-surface").css({display:"block",position:"fixed",top:this.position.y+"px",left:this.position.x+"px",height:e+"px",width:t+"px","border-width":"0px",padding:"0px",margin:"0px",overflow:"hidden","background-color":r.DEFAULT_SURFACE_BACKGROUND_COLOR,"background-image":"none"}).css(this.style),this.dom.surface=this},e.prototype.importAsync=function(t,e){var n,i=this.background.bgcolor;switch(e||("string"==typeof t?e="url":t instanceof HTMLElement?e="element":t.type&&"application/pdf"===t.type?e="pdf":t.name&&/\.pdf$/i.test(t.name)&&(e="pdf")),this.disableRender(),this.setBackgroundColor(r.COLORS.transparent),e){case"url":n=this.importURLAsync(t);break;case"base64":n=this.importBase64Async(t);break;case"map":case"clipboard":case"element":n.resolve(t);break;case"pdf":n=this.importPDFAsync(t);break;default:n=this.importFileAsync(t)}return n.done(function(t){this.enableRender(),this.setBackgroundColor(i),t&&this.addToBackground(new w({dom:t})),this.fit(),this.initContentScaleFactor(),t&&setImmediate(function(){this.controller.tools.pixelate.generatePixelatedImages()}.bind(this));this.ready=true;}.bind(this)),n},e.prototype.reset=function(){this.controller.reset(),this.clearLayer(this.buffer),this.clearLayer(this.background),this.clearLayer(this.foreground),this.clearLayer(this.active),this.file=null,this.coordinateSystem=e.coordinateSystem.UPPER_LEFT,this.contentScaleFactor=1,this.userAgentHistory=null,this.clipRect={top:0,left:0,width:0,height:0},this.doRender=!0},e.prototype.importURLAsync=function(t){return d.loadAsync(t)},e.prototype.importBase64Async=function(t){return v.fromBase64Async(t).then(function(t){return this.importBytesAsync(t)}.bind(this))},e.prototype.importFileAsync=function(t){return x.readAsync(t).then(function(t){return this.importBytesAsync(t)}.bind(this))},e.prototype.importBytesAsync=function(t){if(x.isSkitch(t))return this.importSkitchImageAsync({bytes:t});var e=v.toObjectURL(t)||v.toDataURL(t);return this.importURLAsync(e)},e.prototype.importSkitchImageAsync=function(t){var e=this.createFile(t);return this.importDataAsync(e)},e.prototype.importPDFAsync=function(t){var e,n=this,i=new s,o=1;if(t.url){var r={};r.url=t.url,t.page&&(o=t.page),e=v.loadAsync(r.url)}else{if(t.pdf)return n.importPDFPageAsync(i,t.page,t.pdf,t.file,t.manifest),i;e=x.readAsync(t)}return e.then(function(t){return k.createAsync(t)}).done(function(t){return n.importPDFPageAsync(i,o,t)}).fail(function(){i.reject.apply(i,arguments)
}),i},e.prototype.importPDFPageAsync=function(t,e,n,i){var o,r,a=this;return i&&(this.file=i),n.getPage(e).then(function(t){var e,l=1,c=t.getViewport(l),h=new s;r=T.create(c.width,c.height),r.save(),r.fillStyle("#ffffff"),r.fillRect(0,0,r.getWidth(),r.getHeight()),r.restore(),e={canvasContext:r.context,viewport:c},t.render(e).then(function(){d.toBytesAsync(r.context.canvas).then(function(){return o=new w,o.setSrcAsync(r.context.canvas.toDataURL())}).then(function(){return a.importDataAsync(i)}).done(function(){h.resolve(a,n,i)}).fail(function(){h.reject.apply(h,arguments)})})}),t},e.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e,$(this.dom).css("top",t+"px"),$(this.dom).css("left",e+"px")},e.prototype.setSize=function(t,e){this.size.width=t,this.size.height=e,this.resize(t,e),this.controller.autoresize&&this.fit()},e.prototype.onForegroundElementAdded=function(){},e.prototype.onForegroundElementRemoved=function(){},e.prototype.onForegroundElementMoved=function(){},e.prototype.onForegroundElementManipulated=function(){},e.prototype.expandClip=function(){var t=r.INFINITE_CANVAS_GUTTER,e=r.INFINITE_CANVAS_PADDING,n=this.background.getBox(),i=this.foreground.getBox(),o=n,s={};if(this.background.hasBitmap()){var a=this.background.getBitmap();o=f.intersection(a.clipRect,n)}s.left=i.left<o.left-t?i.left-e:o.left,s.top=i.top<o.top-t?i.top-e:o.top,s.width=i.left+i.width>o.left+o.width+t?i.left+i.width+e-s.left:o.left+o.width-s.left,s.height=i.top+i.height>o.top+o.height+t?i.top+i.height+e-s.top:o.top+o.height-s.top,this.setClip(s)},e.prototype.serialize=function(){var t=o.identity(),e=this.getClip();o.translateBy(t,-e.left,-e.top);var n=f.transform(e,t),i=[this.background.serialize(t,l.id.BACKGROUND),this.foreground.serialize(t,l.id.ANNOTATION),this.foreground.serialize(t,l.id.TEXT)],s=i[2].children;s.forEach(function(e){if("Stamp"==e.type&&e.labelGuid){var n=new A({guid:e.labelGuid,labelParent:e.guid,value:e.text,position:e.textPosition});delete e.text,delete e.textPosition;var i=n.serialize(t);i.guid=e.labelGuid,i.labelParent=e.guid,s.push(i)}});var a={key:r.MANIFEST_KEY,creator:r.MANIFEST_CREATOR,creatorVersion:r.VERSION,version:"1.1",userAgentHistory:this.userAgentHistory},c={type:"Document",metadata:a,frame:y.serializeBox(n),deviceScale:1,contentScaleFactor:g.fixed(this.contentScaleFactor),coordinateSystem:this.coordinateSystem,children:i};return c},e.prototype.destroy=function(){this.controller.destroy(),$(this.dom).remove()},e.prototype.updateUserAgentHistory=function(){var t=r.USER_AGENT;this.userAgentHistory?this.userAgentHistory.length>0&&this.userAgentHistory[0]!==t&&this.userAgentHistory.unshift(t):this.userAgentHistory=[t]},e.prototype.getLayerById=function(t,e){var n;return t.children&&t.children.forEach(function(t){t.layerId===e&&(n=t)}),n},e.prototype.getBackgroundLayerNode=function(t){return this.getLayerById(t,l.id.BACKGROUND)},e.prototype.getAnnotationLayerNode=function(t){return this.getLayerById(t,l.id.ANNOTATION)},e.prototype.getTextLayerNode=function(t){return this.getLayerById(t,l.id.TEXT)},e.prototype.importDataAsync=function(t){var n,i=t.manifest,r=this.getBackgroundLayerNode(i),a=this.getAnnotationLayerNode(i),l=this.getTextLayerNode(i),c=new s;if(i.coordinateSystem===e.coordinateSystem.CENTER&&(n=o.identity(),o.scaleBy(n,1,-1),e.transform(n,i),r&&Node.transform(n,r.children),a&&Node.transform(n,a.children),l&&Node.transform(n,l.children)),this.clipRect.left=i.frame.x,this.clipRect.top=i.frame.y,this.clipRect.width=i.frame.width,this.clipRect.height=i.frame.height,i.metadata&&i.metadata.userAgentHistory&&(this.userAgentHistory=i.metadata.userAgentHistory),this.updateUserAgentHistory(),l&&l.children){var h={},u=[];l.children.forEach(function(t,e){"Text"==t.type&&t.labelParent&&u.push(l.children.splice(e,1)[0]),"Stamp"==t.type&&(h[t.guid]=t)}),u.forEach(function(t){h[t.labelParent].text=t.text})}return this.contentScaleFactor=i.contentScaleFactor,a&&this.importToLayer(t,a.children,this.addToForeground),l&&this.importToLayer(t,l.children,this.addToForeground),r&&r.children&&r.children.length>0?(this.importToLayer(t,r.children,this.addToBackground),this.background.once("loaded",function(){c.resolve()})):c.resolve(),c},e.prototype.fit=function(t){var e,n,i,o,r,s;return t||(t=1),o=this.getWidth(),r=this.getHeight(),e=this.getClip(),this.disableRender(),this.resetZoomPan(),(e.width>=o||e.height>=r)&&(n=this.getCenter(),i=C(n.x,n.y,"dom").relativeTo("surface"),s=Math.min(o/e.width,r/e.height)*(r-2*this.margin*t)/r,this.zoom(s*T.pixelRatio,i)),this.enableRender(),this.render(),this},e.prototype.getCenter=function(){return C(this.graphics.getWidth()/2,this.graphics.getHeight()/2,"dom")},e.prototype.importToLayer=function(t,e,n){var i,o,r;if(e)for(r=0;r<e.length;r++){o=e[r];try{i=p.createFrom(o),n.call(this,i,!0)===!0&&i.deserialize(t,o)}catch(s){S.error("Error importing element ["+(i&&i.toString())+"] to layer: "+s)}}},e.prototype.setBackgroundColor=function(t){this.background.bgcolor=t},e.prototype.resize=function(t,e){$(this.dom).width(t).height(e);for(var n in this.layers)null!=this.layers[n]&&this.layers[n].resize(t,e);this.fire("resize",t,e)},e.prototype.moveTo=function(t,e){var n=$(this.dom).offset({left:t,top:e}).offset();this.position={x:n.left,y:n.top}},e.prototype.initContentScaleFactor=function(){this.contentScaleFactor=this.contentScaleFactor||Math.max(1,1/this.scaling.x)},e.prototype.updateBufferLayer=function(){var t=this.layers.buffer,e=this.getClip();t.resize(e.width/T.pixelRatio,e.height/T.pixelRatio),t.fillWithColor(r.COLORS.white),t.paste(this.background,e.left,e.top),t.paste(this.foreground,e.left,e.top),this.fire("updated",t)},e.prototype.onBackgroundLoaded=function(t){var e,n,i,o;t.elements.length>0&&(e=t.elements[0],this.setClip({left:e.left,top:e.top,width:e.width,height:e.height}),n=this.getWidth(),i=this.getHeight(),o=this.getClip(),this.contentScaleFactor=Math.max(1,1/(Math.min(n/o.width,i/o.height)*(i-2*this.margin)/i)))},e.prototype.isEmpty=function(){return this.background.isEmpty()&&this.foreground.isEmpty()},e.prototype.isDirty=function(){return this.foreground.isDirty()},e.prototype.getBox=function(){var t=this.foreground.getBox(),e=this.background.getBox(),n=f.union(t,e);return n},e.prototype.getClip=function(){var t=this.clipRect;return{left:t.left,top:t.top,width:t.width,height:t.height}},e.prototype.setClip=function(t){var e;this.background.hasBitmap()&&(e=this.background.getBitmap(),e.clipRect=f.intersection(e.clipRect,t)),this.clipRect=t,this.fire("clipchanged",t),this.foreground.isEmpty()&&this.initContentScaleFactor()},e.prototype.removeElementsOutsideClip=function(t){var e,n=this.foreground,i=[];n.elements.forEach(function(e){f.intersectsBox(t,e.box)||(i.push(e),n.removeElement(e))}),i.length>0&&(e=new E({elements:i}),this.controller.activeTool.fire("action",this.controller.activeTool,e))},e.prototype.getWidth=function(){return $(this.dom).width()},e.prototype.getHeight=function(){return $(this.dom).height()},e.prototype.getCenter=function(){return C(this.getWidth()/2,this.getHeight()/2,"dom")},e.prototype.resetZoomPan=function(){this.resetTransformation(),this.scaleBy(1/T.pixelRatio,1/T.pixelRatio),this.center()},e.prototype.center=function(){var t=this.getClip(),e=this.getCenter(),n=e.relativeTo("surface"),i=C(t.left+t.width/2,t.top+t.height/2,"surface");this.translateBy(Math.floor(n.x-i.x),Math.floor(n.y-i.y)),this.render(),this.updateZoomToolbox()},e.prototype.zoom=function(t,e){var n=t*this.scaling.x;n<r.ZOOM_MIN?t=r.ZOOM_MIN/this.scaling.x:n>r.ZOOM_MAX&&(t=r.ZOOM_MAX/this.scaling.x),e=e||this.getCenter(),this.scaleBy(t,t,e.x,e.y),this.render(),this.updateZoomToolbox()},e.prototype.zoomTo=function(t){var e=t/100,n=this.getCenter().relativeTo("surface");this.disableRender(),this.zoom(1/this.scaling.x,n),this.enableRender(),this.zoom(e,n)},e.prototype.toast=function(t,e,n){e||(e=200);n||(n=16);var i=$('<div class="skitchToastBoxContainer skitchVisible"><span class="skitchToastBox skitchVisible"><div class="skitchToast skitchVisible">'+t+"</div></span></div>").get(0);e&&$(".skitchToastBox",i).css("width",e+"px"),$(".skitchToastBox",i).css("height",n+"px"),$(".skitchToast",i).css("width",e-40+"px"),$(".skitchToast",i).css("height",n+"px"),$(i).hide(),$(this.dom).append(i),$(i).fadeIn(100,function(){setTimeout(function(){$(i).fadeOut(500,function(){$(i).remove()})},3e3)})},e.prototype.localize=function(t){this.ZOOM_RESET_TEXT=t.ZOOM_RESET_TEXT,this.ZOOM_TIP_TEXT=t.ZOOM_TIP_TEXT,this.zoomToolbox&&($(".skitchZoomToolboxReset",this.zoomToolbox).html(this.ZOOM_RESET_TEXT),$(".skitchZoomToolboxTip",this.zoomToolbox).html(this.ZOOM_TIP_TEXT))},e.prototype.updateZoomToolbox=function(){var t=this;this.controller.activeTool!=this.controller.tools.crop&&(this.lastZoomTime=Date.now(),!this.zoomToolbox&&this.ready&&(this.zoomToolbox=$('<div class="skitchToastBoxContainer skitchVisible"><span class="skitchZoomToolbox skitchVisible"><div class="skitchZoomToolboxPercent skitchVisible">100%</div><div class="skitchZoomToolboxReset skitchVisible">'+this.ZOOM_RESET_TEXT+'</div><div class="skitchZoomToolboxTip skitchVisible">'+this.ZOOM_TIP_TEXT+"</div></span></div>").get(0),$(".skitchZoomToolboxReset",this.zoomToolbox).click(function(){t.resetZoomPan()}),$(this.dom).append(this.zoomToolbox),$(this.zoomToolbox).mousemove(function(){t.lastZoomTime=Date.now()}),$(this.zoomToolbox).hide(),setInterval(function(){var e=Date.now()-t.lastZoomTime;e>3e3&&$(t.zoomToolbox).fadeOut(500)},500)),this.zoomToolbox&&($(".skitchZoomToolboxPercent",this.zoomToolbox).html(Math.floor(100*this.scaling.x*T.pixelRatio)+"%"),$(this.zoomToolbox).fadeIn(100)))},e.prototype.constrainPan=function(t){var e=t.x,n=t.y,i=this.getClip(),o=.333,r=f.transform({left:i.left+e,top:i.top+n,width:i.width,height:i.height},this.active.transformation),s={left:0,top:0,width:this.getWidth(),height:this.getHeight()};return r.left+(1-o)*r.width<s.left&&(e=0),r.top+(1-o)*r.height<s.top&&(n=0),r.left+o*r.width>s.left+s.width&&(e=0),r.top+o*r.height>s.top+s.height&&(n=0),{x:e,y:n}},e.prototype.pan=function(t){var e=this.constrainPan(t);this.translateBy(e.x,e.y),this.render()},e.prototype.addLayerAfter=function(t,e,n,i){return this.layers[t]=e,n!==!1&&$(e.dom).insertAfter(this.layers[i].dom),this.fire("layeradded",e,this),e.fire("added",this),e},e.prototype.addLayer=function(t,e,n){return this.layers[t]=e,n!==!1&&$(this.dom).append(e.dom),e.on("boxchanged",this.onLayerBoxChanged,this),this.fire("layeradded",e,this),e.fire("added",this),e},e.prototype.onLayerBoxChanged=function(){this.fire("boxchanged",this.getBox())},e.prototype.removeLayer=function(t){this.layers[t]&&($(this.layers[t].dom).remove(),this.layers[t]=null)},e.prototype.render=function(){this.doRender&&(this.background.render(),this.layers.pixelate&&this.layers.pixelate.render(),this.foreground.render(),this.active.render())},e.prototype.disableRender=function(){this.doRender=!1,this.background.doRender=!1,this.foreground.doRender=!1,this.active.doRender=!1},e.prototype.enableRender=function(){this.doRender=!0,this.background.doRender=!0,this.foreground.doRender=!0,this.active.doRender=!0},e.prototype.addToLayer=function(t,e){return t.addElement(e)},e.prototype.addToForeground=function(t){return this.addToLayer(this.foreground,t)},e.prototype.addToBackground=function(t){return this.addToLayer(this.background,t)},e.prototype.clearLayer=function(t){t.empty()},e.prototype.clear=function(t){var e=this.foreground.empty(t);return this.fire("clear",this),e},e.prototype.createManifest=function(t,e,n){var i;return n&&this.file.addResource(n.uuid,e.subarray(0)),i=this.serialize(),t.insertManifest(i),i},e.prototype.createFile=function(t){var e;return e=x.getFileClass(t.bytes),this.file=new e(t),this.fire("filecreated",this,this.file),this.file.on("saved",this.onFileSaved,this),this.file},e.prototype.updateManifest=function(){return this.file.updateManifest(this.serialize()),this.file.manifest},e.prototype.exportAsync=function(){var t,e,n,i=this,o=this.file,r=!!o,a=(new s).resolve();return this.fire("presave",this),this.updateBufferLayer(),t=d.toBytesAsync(this.buffer.graphics),t.then(function(t){return(i.isPixelated()||i.isCropped())&&i.background.hasBitmap()?(n=i.background.getBitmap(),e=n.clipRect,a=i.background.getBitmap().toBytesAsync(e.left,e.top,e.width,e.height)):!r&&i.background.hasBitmap()&&(a=d.toBytesAsync(i.background.getBitmap().dom)),r?o.updateFlattenedImage(t):o=i.createFile({bytes:t}),a}).then(function(t){var e=i.serialize();return r?(t&&o.updateResource(i.background.getBitmap().uuid,t),o.updateManifest(e)):i.createManifest(o,t,i.background.getBitmap()),s.wrap(o)})},e.prototype.isCropped=function(){var t=this.clipRect,e=this.getBox();return t.left!=e.left||t.top!=e.top||t.width!=e.width||t.height!=e.height},e.prototype.isPixelated=function(){for(var t=!1,e=0;e<this.foreground.elements.length;e++){var n=this.foreground.elements[e];if(n instanceof b){t=!0;break}}return t},e.prototype.setTransformation=function(t){return this.background.setTransformation(t),this.foreground.setTransformation(t),this.active.setTransformation(t),i.prototype.setTransformation.call(this,t)},e.prototype.resetTransformation=function(){return this.background.resetTransformation(),this.foreground.resetTransformation(),this.active.resetTransformation(),i.prototype.resetTransformation.call(this)},e.prototype.transformBy=function(t){return this.background.transformBy(t),this.foreground.transformBy(t),this.active.transformBy(t),i.prototype.transformBy.call(this,t)},e.prototype.translateBy=function(t,e){return this.background.translateBy(t,e),this.foreground.translateBy(t,e),this.active.translateBy(t,e),i.prototype.translateBy.call(this,t,e)},e.prototype.scaleBy=function(t,e,n,o){return this.background.scaleBy(t,e,n,o),this.foreground.scaleBy(t,e,n,o),this.active.scaleBy(t,e,n,o),i.prototype.scaleBy.call(this,t,e,n,o)},e.prototype.rotateBy=function(t){return this.background.rotateBy(t),this.foreground.rotateBy(t),this.active.rotateBy(t),i.prototype.rotateBy.call(this,t)},e=n.define(e,Object,[i])}),define("surface/SurfaceAPI",["require","util/Class","util/Obj","util/Box","surface/Surface","env/Settings","graphics/Point","surface/action/StyleAction","util/Binary","surface/action/DrawAction"],function(t){function e(){this.surface=new r,this.registerEvents("toolChanged","toolStarted","toolUpdated","toolStopped","requestUndoEnable","requestUndoDisable","requestRedoEnable","requestRedoDisable","requestTrashDisable","requestTrashEnable","requestSizeChange","requestColorChange"),this.surface.controller.on("toolchanged",this.onToolChanged,this),this.surface.controller.on("toolstarted",this.onToolStarted,this),this.surface.controller.on("toolupdated",this.onToolUpdated,this),this.surface.controller.on("toolstopped",this.onToolStopped,this),this.surface.controller.on("requestUndoEnable",this.onUndoEnabled,this),this.surface.controller.on("requestRedoEnable",this.onRedoEnabled,this),this.surface.controller.on("requestUndoDisable",this.onUndoDisabled,this),this.surface.controller.on("requestRedoDisable",this.onRedoDisabled,this),this.surface.controller.on("requestTrashDisable",this.onTrashDisabled,this),this.surface.controller.on("requestTrashEnable",this.onTrashEnabled,this),this.surface.controller.on("requestColorChange",this.onColorChanged,this),this.surface.controller.on("requestSizeChange",this.onSizeChanged,this)}var n=t("util/Class"),i=t("util/Obj"),o=t("util/Box"),r=t("surface/Surface"),s=t("env/Settings"),a=t("graphics/Point"),l=t("surface/action/StyleAction"),c=t("util/Binary"),h=t("surface/action/DrawAction");return e.prototype.onUndoEnabled=function(){this.fire.apply(this,["requestUndoEnable"].concat(arguments))},e.prototype.onTrashEnabled=function(){this.fire.apply(this,["requestTrashEnable"].concat(arguments))},e.prototype.onTrashDisabled=function(){this.fire.apply(this,["requestTrashDisable"].concat(arguments))},e.prototype.onRedoEnabled=function(){this.fire.apply(this,["requestRedoEnable"].concat(arguments))},e.prototype.onUndoDisabled=function(){this.fire.apply(this,["requestUndoDisable"].concat(arguments))},e.prototype.onRedoDisabled=function(){this.fire.apply(this,["requestRedoDisable"].concat(arguments))},e.prototype.onColorChanged=function(t){this.fire.apply(this,["requestColorChange",t])},e.prototype.onSizeChanged=function(t){this.fire.apply(this,["requestSizeChange",t])},e.prototype.onToolChanged=function(t){this.fire("toolChanged",t.name)},e.prototype.onToolStarted=function(t){this.fire("toolStarted",t.name)},e.prototype.onToolUpdated=function(t){this.fire("toolUpdated",t.name)},e.prototype.onToolStopped=function(t){this.fire("toolStopped",t.name)},e.prototype.destroy=function(){this.surface.destroy()},e.prototype.updateSelectedElementsColor=function(t){for(var e in s.COLORS)if(e==t){t=s.COLORS[e];break}if(this.surface.controller.tools.select.hasSelection()){var n={stroke:{color:t},fill:{color:t}},i=new l({oldStyles:this.surface.controller.tools.select.getSelectedElementStyles(),newStyle:n}),o=this.surface.controller.tools.select.updateSelectedElementStyles(n);o&&this.surface.controller.saveAction(i)}},e.prototype.updateSelectedElementsSize=function(t){"small"==t&&(t="size-1"),"medium"==t&&(t="size-3"),"large"==t&&(t="size-5");var e=this.surface.contentScaleFactor;if(this.surface.controller.tools.select.hasSelection()){var n={size:s.ARROW_SIZES[t]*e,stroke:{width:s.STROKE_SIZES[t]*e},font:{size:s.FONT_SIZES[t]*e}},i=new l({oldStyles:this.surface.controller.tools.select.getSelectedElementStyles(),newStyle:n});this.surface.controller.tools.select.updateSelectedElementStyles(n),this.surface.controller.saveAction(i)}},e.prototype.loadFromURL=function(t){return this.surface.importAsync(t,"url")},e.prototype.loadFromFile=function(t){return this.surface.importAsync(t)},e.prototype.loadFromImage=function(t){return this.surface.importAsync(t,"element")},e.prototype.loadFromBase64=function(t){return this.surface.importAsync(t,"base64")},e.prototype.getFile=function(t){return this.surface.exportAsync().done(t)},e.prototype.getBase64=function(t){var e=this;return this.surface.fileUID=t,this.surface.exportAsync().done(function(t){t.mime,c.toBase64Async(t.bytes).done(function(t){Evernote.updateImageWithBase64(e.surface.fileUID,t)})})},e.prototype.undo=function(){this.surface.controller.undo()},e.prototype.redo=function(){this.surface.controller.redo()},e.prototype.getElement=function(){return this.surface.dom},e.prototype.setAutoResize=function(t){this.surface.controller.setAutoResize(t)},e.prototype.setPosition=function(t,e){this.surface.setPosition(t,e)},e.prototype.setSize=function(t,e){this.surface.setSize(t,e)},e.prototype.setBackgroundColor=function(t){this.surface.setBackgroundColor(t)},e.prototype.setAllowZoom=function(t){this.surface.controller.allowZoom=t},e.prototype.setMargin=function(t){this.surface.margin=t},e.prototype.useTool=function(t){this.surface.controller.useTool(t)},e.prototype.useColor=function(t){this.surface.controller.setColor(t),this.fire.apply(this,["requestColorChange",t])},e.prototype.crop=function(){this.useTool("crop")},e.prototype.applyCrop=function(){this.surface.controller.activeTool==this.surface.controller.tools.crop&&this.surface.controller.tools.crop.applyCrop()},e.prototype.cancelCrop=function(){this.surface.controller.activeTool==this.surface.controller.tools.crop&&this.surface.controller.tools.crop.cancelCrop()},e.prototype.localize=function(t){t.CROP_APPLY_TEXT&&(this.surface.controller.tools.crop.CROP_APPLY_TEXT=t.CROP_APPLY_TEXT),t.CROP_CANCEL_TEXT&&(this.surface.controller.tools.crop.CROP_CANCEL_TEXT=t.CROP_CANCEL_TEXT),(t.ZOOM_RESET_TEXT||t.ZOOM_TIP_TEXT)&&this.surface.localize(t)},e.prototype.useSize=function(t){"small"==t&&(t="size-1"),"medium"==t&&(t="size-3"),"large"==t&&(t="size-5"),this.surface.controller.setSize(t),this.fire.apply(this,["requestSizeChange",t])},e.prototype.themeOverride=function(t){t.TOOLTIP_BACKGROUND_COLOR},e.prototype.toast=function(t,e,n){this.surface.toast(t,e,n)},e.prototype.fit=function(){return this.surface.fit()},e.prototype.pan=function(t,e){return this.surface.pan({x:t,y:e})},e.prototype.zoom=function(t,e){var n=e&&this.surface.inverseTransformPoint(e);return this.surface.zoom(t,n)},e.prototype.zoomTo=function(t){return this.surface.zoomTo(t)},e.prototype.zoomIn=function(){var t="10",e=this.surface.getCenter();return this.surface.zoom(1+t/100,a(e.x,e.y,"dom").relativeTo("surface"))},e.prototype.zoomOut=function(){var t="10",e=this.surface.getCenter();return this.surface.zoom(1/(1+t/100),a(e.x,e.y,"dom").relativeTo("surface"))},e.prototype.resetZoomPan=function(){return this.surface.resetZoomPan()},e.prototype.getZoomLevel=function(){return this.surface.scaling.x},e.prototype.selectAll=function(){return this.surface.controller.tools.select.selectAll()},e.prototype.unselectAll=function(){return this.surface.controller.tools.select.unselectAll()},e.prototype.clearAll=function(){this.surface.clear(),this.surface.expandClip(),this.surface.render()},e.prototype.cutSelectedElements=function(){this.copySelectedElements(),this.deleteSelectedElements()},e.prototype.copySelectedElements=function(){this.surface.controller.tools.select.hasSelection()&&(this.surface.controller.copied.splice(0),this.surface.controller.tools.select.elements.forEach(function(t){var e=t.clone();this.surface.controller.copied.push(e)}.bind(this)))},e.prototype.pasteElements=function(){if(this.surface.controller.copied){this.surface.controller.tools.select.unselectAll();for(var t in this.surface.controller.copied){var e=this.surface.controller.copied[t];e.move({x:40,y:40});var n=this.surface.getBox(),i=e.calculateBox(this.surface);o.containsBox(n,i)||(e.move({x:-40,y:-40}),e.move({x:0,y:40}),i=e.calculateBox(this.surface),o.containsBox(n,i)||(e.move({x:0,y:-40}),e.move({x:40,y:0}),o.containsBox(n,i)||e.move({x:-40,y:0}))),this.surface.layers.foreground.addElement(e),this.surface.controller.activeTool.fire("action",this.surface.controller.activeTool,new h({element:e})),this.surface.controller.tools.select.select(e),this.surface.controller.copied[t]=e.clone()}}},e.prototype.deleteSelectedElements=function(){this.surface.controller.tools.select.deleteSelectedElements()},e.prototype.center=function(){return this.surface.center()},e.prototype.getBox=function(){var t=this.surface.getClip();return o.transform(t,this.surface.transformation)},e.prototype.enableEvents=function(){this.surface.controller.eventsEnabled=!0},e.prototype.disableEvents=function(){this.surface.controller.eventsEnabled=!1},e.prototype.startActiveTool=function(t,e){var n=a(t.x,t.y,"dom").relativeTo("surface"),o=this.surface.controller.activeTool;o.once("started",function(t){i.merge(!0,t.element,e||{})}),o.start(n)},e.prototype.disableRender=function(){this.surface.disableRender()},e.prototype.enableRender=function(){this.surface.enableRender()},e.prototype.disable=function(){$(document.createElement("div")).attr("id","skitch-disabled").appendTo(document.body).css({position:"fixed","z-index":"9999",width:"100%",height:"100%",top:"0px",left:"0px","background-color":"rgba(0,0,0,0.3)",cursor:"not-allowed"}),s.ENABLE_KEY_HANDLERS=!1},e.prototype.enable=function(){$("#skitch-disabled").remove(),s.ENABLE_KEY_HANDLERS=!0},e=n.define(e)}),define("appbar/ColorPicker",["require","util/Class","env/Settings","util/Include"],function(t){"use strict";function e(t){this.container=$(t).get(0),this.context=null,this.element=null,this.width=null,this.height=null,this.hRingPosition=null,this.sLRingPosition=null,this.HSL=[0,1,.5],this.activeColor=null}var n=t("util/Class"),i=t("env/Settings"),o=t("util/Include");return e.prototype.initialize=function(){var t=this;o.CSS("color-picker.css"),$(this.container).html('<canvas class="skitch-custom-color-picker" width="180" height="180"></canvas>').on(i.EVENTS.pointerdown,this.onPointerDown.bind(this)),this.context=$(this.container).children().get(0).getContext("2d"),this.element=$(".skitch-custom-color-picker",this.container),this.width=this.element.get(0).width,this.height=this.element.get(0).height,this.backgroundImage=new Image,this.triangleGradient=new Image,this.backgroundImage.onload=function(){t.triangleGradient.onload=function(){t.setColor(),t.drawColorPicker()}},this.backgroundImage.src="data:image/png;base64,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",this.triangleGradient.src="data:image/png;base64,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"
},e.prototype.onPointerDown=function(t){var e=this,n=this.getPointerCoords(t);this.dragging||($(document).bind(i.EVENTS.pointermove,e.onPointerMove.bind(e)).bind(i.EVENTS.pointerup,e.onPointerUp.bind(e)),this.dragging=!0),this.outterRingClicked=Math.sqrt(n.x*n.x+n.y*n.y)>59,this.onPointerMove(t)},e.prototype.onPointerMove=function(t){var e=this.getPointerCoords(t);this.setActiveColor(e),this.outterRingClicked?this.setHRingPosition():this.setSLRingPosition(t),this.drawColorPicker(),this.callback.call(this,this.activeColor)},e.prototype.onPointerUp=function(){$(document).unbind(i.EVENTS.pointermove),$(document).unbind(i.EVENTS.pointerup),this.dragging=!1},e.prototype.getPointerCoords=function(t){var e={x:t.originalEvent.clientX,y:t.originalEvent.clientY},n={x:this.element.offset().left+this.width/2,y:this.element.offset().top+this.height/2},i={x:e.x-n.x,y:e.y-n.y};return{x:i.x,y:i.y}},e.prototype.setActiveColor=function(t){if(this.outterRingClicked){var e;e=Math.atan2(t.x,-t.y)/6.28,0>e&&(e+=1),e+=.17,this.HSL[0]=e}else{var n=Math.max(0,Math.min(1,t.x/83+.5)),i=Math.max(0,Math.min(1,-(t.y/96)+.5));this.HSL[1]=n,this.HSL[2]=i}this.activeColor=this.hslToRgb(this.HSL[0],this.HSL[1],this.HSL[2])},e.prototype.drawColorPicker=function(){var t=this.context;t.clearRect(0,0,this.width,this.height),t.fillStyle="rgb(253,253,253)",t.beginPath(),t.drawImage(this.backgroundImage,0,0),t.rect(0,0,180,180),t.arc(90,90,90,0,2*Math.PI,!0),t.arc(90,90,64,0,2*Math.PI),t.fill(),t.fillStyle=this.hslToRgb(this.HSL[0],1,.5),t.beginPath(),t.moveTo(61,41),t.lineTo(144,88),t.lineTo(61,137),t.fill(),t.drawImage(this.triangleGradient,61,41),this.hRingPosition&&this.drawHRing(),this.sLRingPosition&&this.drawSLRing()},e.prototype.setHRingPosition=function(){var t=6.28*(this.HSL[0]-.17);this.hRingPosition={x:Math.round(76.5*Math.sin(t)+this.width/2),y:Math.round(76.5*-Math.cos(t)+this.height/2)}},e.prototype.drawHRing=function(){var t=this.context,e=this.hRingPosition.x,n=this.hRingPosition.y;t.strokeStyle="rgb(0,0,0)",t.beginPath(),t.arc(e,n,12,0,2*Math.PI),t.lineWidth=.5,t.stroke(),t.strokeStyle="rgb(255,255,255)",t.beginPath(),t.arc(e,n,10,0,2*Math.PI),t.lineWidth=2,t.stroke(),t.fillStyle=this.hslToRgb(this.HSL[0],1,.5),t.beginPath(),t.arc(e,n,9,0,2*Math.PI),t.fill()},e.prototype.setSLRingPosition=function(t){t.originalEvent.offsetX&&t.originalEvent.offsetY&&(this.sLRingPosition={x:t.originalEvent.clientX-this.element.offset().left,y:t.originalEvent.clientY-this.element.offset().top})},e.prototype.drawSLRing=function(){var t=this.context,e={x:61,y:41},n=83,i=95,o=this.sLRingPosition.x-e.x,r=this.sLRingPosition.y-e.y,s=Math.abs(r-i/2),a=1*n+n*(s/-(i/2));o>a&&(o=a),0>o&&(o=0),0>r&&(r=0),o>n&&(o=n),r>i&&(r=i),o+=e.x,r+=e.y,t.strokeStyle="rgb(0,0,0)",t.beginPath(),t.arc(o,r,9,0,2*Math.PI),t.lineWidth=.5,t.stroke(),t.strokeStyle="rgb(255,255,255)",t.beginPath(),t.arc(o,r,7,0,2*Math.PI),t.lineWidth=2,t.stroke(),t.fillStyle=this.activeColor,t.beginPath(),t.arc(o,r,6,0,2*Math.PI),t.fill()},e.prototype.setCallback=function(t){this.callback=t},e.prototype.setColor=function(t){this.activeColor=t},e.prototype.hue2rgb=function(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+6*(e-t)*(2/3-n):t},e.prototype.hslToRgb=function(t,e,n){var i,o,r;if(0==e)i=o=r=n;else{var s=.5>n?n*(1+e):n+e-n*e,a=2*n-s;i=this.hue2rgb(a,s,t+1/3),o=this.hue2rgb(a,s,t),r=this.hue2rgb(a,s,t-1/3)}return"rgb("+parseInt(255*i)+","+parseInt(255*o)+","+parseInt(255*r)+")"},e.prototype.componentToHex=function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},e.prototype.rgbToHex=function(t,e,n){var i="#"+this.componentToHex(t)+this.componentToHex(e)+this.componentToHex(n);return i},e=n.define(e)}),define("appbar/AppBarController",["require","util/Class","env/Settings","appbar/ColorPicker"],function(t){"use strict";function e(){this.surface=null}var n=t("util/Class"),i=t("env/Settings"),o=t("appbar/ColorPicker");return e.prototype.initialize=function(){$(document.body).on(i.EVENTS.pointerdown,this.onDocumentPointerDown.bind(this)),$(document.body).on(i.EVENTS.pointermove,this.onDocumentPointerMove.bind(this)),$(document.body).on(i.EVENTS.pointerup,this.onDocumentPointerUp.bind(this)),this.view.on("toolSelected",this.onToolSelected,this),this.view.on("sizeSelected",this.onSizeSelected,this),this.view.on("colorSelected",this.onColorSelected,this),this.view.on("undoRequested",this.onUndoRequested,this),this.view.on("redoRequested",this.onRedoRequested,this),this.view.on("exportRequested",this.onExportRequested,this),this.view.on("deleteRequested",this.onDeleteRequested,this),this.view.on("menuSelected",this.onMenuSelected,this),this.surface.on("toolChanged",this.onToolChanged,this),this.surface.on("requestUndoEnable",this.onUndoEnabled,this),this.surface.on("requestRedoEnable",this.onRedoEnabled,this),this.surface.on("requestUndoDisable",this.onUndoDisabled,this),this.surface.on("requestRedoDisable",this.onRedoDisabled,this),this.surface.on("requestTrashEnable",this.onTrashEnabled,this),this.surface.on("requestTrashDisable",this.onTrashDisabled,this),this.surface.on("requestColorChange",this.onColorChanged,this),this.surface.on("requestSizeChange",this.onSizeChanged,this),this.surface.surface.foreground.on("elementselectionschanged",this.onSurfaceForegroundElementSelectionsChanged,this),this.onSurfaceForegroundElementSelectionsChanged(),this.registerEvents("export","info","menuSelected"),this.surface.surface.controller.activeTool&&this.onToolChanged(this.surface.surface.controller.activeTool.name),this.initColorPicker()},e.prototype.initColorPicker=function(){var t=this;this.view.colorPicker=new o(".skitch-custom-color-dialog"),this.view.colorPicker.setCallback(function(e){t.view.fire("colorSelected",{color:e})})},e.prototype.onDocumentPointerDown=function(){this.surface.surface.controller.pointers.length>0&&($(".skitch-app-bar-wrapper").get(0).style.pointerEvents="none")},e.prototype.onDocumentPointerMove=function(t){this.surface.surface.controller.pointers.length>0&&(t.originalEvent.clientX<="55"?$(".skitch-app-bar-wrapper").css("opacity","0.3"):$(".skitch-app-bar-wrapper").css("opacity","1"))},e.prototype.onDocumentPointerUp=function(){this.surface.surface.controller.pointers.length<=0&&($(".skitch-app-bar-wrapper").get(0).style.pointerEvents="",$(".skitch-app-bar-wrapper").css("opacity","1"))},e.prototype.onToolChanged=function(t){"select"==t||("pan"==t||"zoom"==t?this.view.unselectAllButtons():this.view.onButtonClicked(t,!0))},e.prototype.onUndoRequested=function(){this.surface.undo()},e.prototype.onRedoRequested=function(){this.surface.redo()},e.prototype.onExportRequested=function(){this.fire("export")},e.prototype.onSurfaceForegroundElementSelectionsChanged=function(){},e.prototype.onDeleteRequested=function(){this.surface.surface.controller.tools.select.deleteSelectedElements()},e.prototype.onMenuSelected=function(t){this.fire("menuSelected",t)},e.prototype.onSizeSelected=function(t){this.surface.useSize(t.size),this.surface.updateSelectedElementsSize(t.size)},e.prototype.onToolSelected=function(t){this.view.currentTool=t.tool,this.surface.useTool(t.tool)},e.prototype.onColorSelected=function(t){this.surface.useColor(t.color),this.surface.updateSelectedElementsColor(t.color)},e.prototype.onTrashEnabled=function(){},e.prototype.onTrashDisabled=function(){},e.prototype.onUndoEnabled=function(){},e.prototype.onUndoDisabled=function(){},e.prototype.onRedoEnabled=function(){},e.prototype.onRedoDisabled=function(){},e.prototype.onColorChanged=function(t){this.view.currentColor=this.surface.surface.controller.activeColor,this.view.setColor(t)},e.prototype.onSizeChanged=function(t){this.view.setSize(t)},e.prototype.destroy=function(){this.view.destroy()},e.prototype.getElement=function(){return this.view.dom},e.prototype.setResourceStrings=function(t){return this.view.setResourceStrings(t)},e=n.define(e)}),define("text!appbar/AppBar.html",[],function(){return'<div class="skitch-app-bar-wrapper">\n\n    <div class="skitch-app-bar-border">\n        <div class="skitch-app-bar-hitarea">\n            <div class="skitch-app-bar">\n                <div class="skitch-app-bar-main">\n\n\n                    <div class="skitch-app-bar-button skitch-arrow-button" draggable="false">\n                        <svg class="skitch-icon" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <path fill="#3F4040" d="M31.898,12.532C26.066,19.158,21.544,24.479,21.03,26.58c0.965,0.484,1.926,0.965,2.891,1.443\n                            C19.945,29.354,15.974,30.677,12,32c1.323-3.977,2.649-7.945,3.974-11.92c0.481,0.964,0.963,1.928,1.443,2.889\n                            c2.104-0.513,7.422-5.035,14.05-10.866C31.829,11.821,32.182,12.171,31.898,12.532z"/>\n                        </svg>\n                        <div class="skitch-icon-text" draggable="false"></div>\n                    </div>\n\n                    <div class="skitch-app-bar-button skitch-text-button" draggable="false">\n                        <svg class="skitch-icon" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <path fill="#3F4040" d="M13.979,16.31c0.539-0.81,1.227-1.461,2.061-1.952c0.831-0.488,1.77-0.839,2.812-1.046\n                            C19.893,13.104,20.939,13,21.993,13c0.956,0,1.925,0.068,2.903,0.203c0.979,0.135,1.875,0.396,2.685,0.788\n                            c0.81,0.392,1.472,0.938,1.985,1.636c0.515,0.701,0.771,1.623,0.771,2.775v9.892c0,0.856,0.05,1.681,0.146,2.464\n                            c0.1,0.785,0.271,1.373,0.517,1.764h-5.294c-0.1-0.293-0.18-0.592-0.238-0.896c-0.062-0.312-0.104-0.621-0.129-0.938\n                            c-0.835,0.856-1.812,1.457-2.941,1.797C21.27,32.829,20.118,33,18.939,33c-0.904,0-1.75-0.109-2.535-0.331\n                            c-0.785-0.222-1.471-0.563-2.059-1.028c-0.589-0.467-1.049-1.053-1.379-1.766c-0.33-0.713-0.496-1.555-0.496-2.537\n                            c0-1.079,0.188-1.966,0.568-2.668c0.381-0.697,0.87-1.252,1.473-1.671c0.598-0.418,1.285-0.73,2.059-0.937\n                            c0.771-0.207,1.548-0.374,2.334-0.498c0.785-0.119,1.557-0.218,2.316-0.293c0.76-0.074,1.434-0.184,2.021-0.332\n                            c0.588-0.146,1.054-0.359,1.396-0.645c0.344-0.278,0.502-0.689,0.479-1.23c0-0.564-0.093-1.011-0.275-1.342\n                            c-0.184-0.33-0.43-0.588-0.735-0.77c-0.307-0.187-0.66-0.31-1.064-0.369c-0.402-0.059-0.841-0.093-1.306-0.093\n                            c-1.028,0-1.838,0.222-2.426,0.661c-0.588,0.444-0.933,1.177-1.029,2.205h-5.221C13.133,18.134,13.439,17.116,13.979,16.31z\n                             M24.29,23.68c-0.331,0.111-0.685,0.202-1.063,0.275c-0.383,0.072-0.781,0.135-1.193,0.186c-0.418,0.047-0.836,0.109-1.25,0.185\n                            c-0.393,0.071-0.778,0.172-1.159,0.294c-0.38,0.124-0.712,0.288-0.993,0.499c-0.279,0.206-0.51,0.473-0.679,0.784\n                            c-0.173,0.32-0.259,0.726-0.259,1.217c0,0.465,0.086,0.855,0.259,1.178c0.169,0.32,0.403,0.57,0.696,0.751\n                            c0.295,0.188,0.639,0.312,1.031,0.392c0.393,0.071,0.795,0.107,1.213,0.107c1.028,0,1.826-0.17,2.391-0.52\n                            c0.562-0.34,0.979-0.752,1.25-1.229c0.268-0.478,0.434-0.957,0.494-1.446c0.062-0.49,0.094-0.886,0.094-1.18v-1.945\n                            C24.896,23.418,24.621,23.568,24.29,23.68z"/>\n                        </svg>\n                        <div class="skitch-icon-text" draggable="false"></div>\n                    </div>\n\n\n                    <div class="skitch-app-bar-button skitch-shape-button skitch-rectangle" draggable="false">\n                        <svg class="skitch-icon skitch-rectangle" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n                             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                                    <path fill="#3F4040" d="M32,14.961v14.078H13V14.961h18.775 M35,12H10v20h25V12L35,12z"/>\n                        </svg>\n\n                        <svg class="skitch-icon skitch-roundedRectangle" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n                             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                                <path fill="#3F3F3F" d="M27,15c2.757,0,5,2.243,5,5v4c0,2.757-2.243,5-5,5h-9c-2.757,0-5-2.243-5-5v-4c0-2.757,2.243-5,5-5H27\n                                     M27,12h-9c-4.4,0-8,3.6-8,8v4c0,4.4,3.6,8,8,8h9c4.4,0,8-3.6,8-8v-4C35,15.6,31.4,12,27,12L27,12z"/>\n                        </svg>\n\n                        <svg class="skitch-icon skitch-ellipse" style="display: none" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <path fill="#3F3F3F" d="M22,15c4.688,0,8.5,3.14,8.5,7c0,3.859-3.812,7-8.5,7c-4.687,0-8.5-3.141-8.5-7C13.5,18.14,17.313,15,22,15\n                             M22,12c-6.352,0-11.5,4.477-11.5,10c0,5.523,5.148,10,11.5,10c6.352,0,11.5-4.477,11.5-10C33.5,16.477,28.352,12,22,12L22,12z"/>\n                        </svg>\n\n                        <svg class="skitch-icon skitch-line" style="display: none" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <rect x="20" y="7.858" transform="matrix(0.7071 0.7071 -0.7071 0.7071 22.0002 -9.1128)" fill="#3F3F3F" width="4" height="28.284"/>\n                        </svg>\n\n                        <div class="skitch-icon-text" draggable="false"></div>\n                        <svg class="skitch-more-icon" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <polygon id="disclosure_x5F_arrow" fill="#BFBFBF" points="41,35 35,41 41,41 "/>\n                        </svg>\n                    </div>\n\n\n                    <div class="skitch-app-bar-button skitch-pen-button skitch-marker" draggable="false">\n                        <svg class="skitch-icon skitch-marker" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <path fill="#3F4040" d="M16.193,25.99c0,0,1.354,1.863,3.193,3.236l-1.55,1.592c0,0-1.897-0.742-3.188-3.238L16.193,25.99z\n                             M15.73,24.369c1.834,3.17,5.242,5.318,5.242,5.318L33,17.322C30.939,14.195,27.758,12,27.758,12L15.73,24.369z M14.682,28.934\n                            l-1.633,1.685c0,0-0.096,0.062-0.02,0.159L15.328,32l1.178-1.213C16.506,30.787,15.295,30.02,14.682,28.934z"/>\n                        </svg>\n\n                        <svg class="skitch-icon skitch-highlighter" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <g id="highlighter_x5F_parent_x5F_off">\n                            <g>\n                                <g>\n                                    <path fill="#3F4040" d="M22.805,21.441c-0.207,0.039-0.421,0.072-0.646,0.101c-0.226,0.024-0.45,0.059-0.675,0.098\n                                        c-0.212,0.04-0.42,0.093-0.625,0.158c-0.205,0.067-0.385,0.156-0.537,0.27c-0.15,0.111-0.274,0.255-0.365,0.425\n                                        c-0.094,0.173-0.141,0.39-0.141,0.655c0,0.25,0.047,0.463,0.141,0.636c0.091,0.173,0.217,0.308,0.376,0.405\n                                        c0.158,0.101,0.344,0.168,0.557,0.211c0.211,0.039,0.429,0.059,0.655,0.059c0.555,0,0.984-0.092,1.289-0.279\n                                        c0.305-0.184,0.529-0.406,0.675-0.664c0.144-0.258,0.233-0.518,0.269-0.783c0.031-0.265,0.05-0.477,0.05-0.634v-1.051\n                                        c-0.119,0.105-0.269,0.188-0.447,0.246C23.201,21.353,23.01,21.401,22.805,21.441z"/>\n                                </g>\n                                <g>\n                                    <g>\n                                        <path fill="#3F4040" d="M34.438,17.01l-9.603-1.164l6.962-0.696L31.482,12l-21.202,2.119l-0.032,3.146l6.581,0.798\n                                            c-0.779,0.049-1.512,0.095-2.177,0.137c-1.085,0.069-1.989,0.127-2.622,0.169c-0.262,0.018-0.537,0.036-0.808,0.073\n                                            c-0.026-0.001-0.048-0.001-0.063-0.001v0.011c-0.86,0.131-1.633,0.472-1.598,1.618l1.565,1.535\n                                            c0.322,0.014,2.539,0.221,5.625,0.519l-7.18,0.651l0.049,3.156l12.13,0.735l-10.573,2.235L11.833,32l22.021-4.656l-0.23-3.128\n                                            l-2.951-0.179l2.998-0.273l0.016-3.149c-0.678-0.067-1.556-0.155-2.572-0.257c1.119-0.068,2.207-0.134,3.232-0.196L34.438,17.01\n                                            z M24.143,26.064c-0.053-0.157-0.094-0.319-0.129-0.485c-0.033-0.167-0.055-0.335-0.068-0.506\n                                            c-0.45,0.463-0.979,0.786-1.587,0.971c-0.608,0.188-1.23,0.279-1.866,0.279c-0.489,0-0.944-0.06-1.368-0.179\n                                            c-0.424-0.121-0.794-0.305-1.111-0.557c-0.316-0.252-0.566-0.566-0.744-0.952C17.091,24.251,17,23.798,17,23.268\n                                            c0-0.582,0.102-1.062,0.307-1.439c0.205-0.377,0.471-0.676,0.795-0.902c0.322-0.225,0.693-0.394,1.11-0.505\n                                            c0.417-0.112,0.836-0.202,1.261-0.269c0.424-0.064,0.84-0.118,1.25-0.158c0.41-0.041,0.773-0.1,1.091-0.18\n                                            c0.316-0.078,0.568-0.193,0.754-0.348c0.185-0.15,0.271-0.372,0.259-0.664c0-0.305-0.05-0.546-0.147-0.725\n                                            c-0.101-0.178-0.232-0.317-0.398-0.415c-0.164-0.101-0.355-0.167-0.575-0.199c-0.218-0.032-0.453-0.05-0.704-0.05\n                                            c-0.556,0-0.992,0.119-1.31,0.356c-0.317,0.239-0.503,0.636-0.556,1.19h-2.817c0.039-0.66,0.206-1.21,0.495-1.646\n                                            c0.291-0.437,0.662-0.788,1.112-1.054c0.449-0.264,0.955-0.453,1.519-0.564c0.562-0.111,1.127-0.168,1.695-0.168\n                                            c0.518,0,1.04,0.037,1.568,0.109c0.528,0.073,1.013,0.214,1.448,0.426c0.438,0.212,0.794,0.506,1.072,0.883\n                                            c0.275,0.379,0.416,0.876,0.416,1.498v5.339c0,0.463,0.025,0.905,0.078,1.329s0.146,0.742,0.277,0.953H24.143L24.143,26.064z"/>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                        </svg>\n\n                        <div class="skitch-icon-text" draggable="false"></div>\n                        <svg class="skitch-more-icon" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <polygon id="disclosure_x5F_arrow" fill="#BFBFBF" points="41,35 35,41 41,41 "/>\n                        </svg>\n                    </div>\n\n                    <div class="skitch-app-bar-button skitch-pixelate-button" draggable="false">\n                        <svg class="skitch-icon" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                             <rect x="13" y="12" fill="#231F20" width="5" height="5"/>\n                             <rect x="23" y="17" fill="#231F20" width="5" height="5"/>\n                             <rect x="18" y="22" fill="#231F20" width="5" height="5"/>\n                             <rect x="13" y="27" opacity="0.75" fill="#231F20" enable-background="new    " width="5" height="5"/>\n                             <rect x="18" y="17" opacity="0.6" fill="#231F20" enable-background="new    " width="5" height="5"/>\n                             <rect x="23" y="12" opacity="0.6" fill="#231F20" enable-background="new    " width="5" height="5"/>\n                             <rect x="28" y="27" opacity="0.75" fill="#231F20" enable-background="new    " width="5" height="5"/>\n                             <rect x="23" y="22" opacity="0.4" fill="#231F20" enable-background="new    " width="5" height="5"/>\n                             <rect x="28" y="17" opacity="0.4" fill="#231F20" enable-background="new    " width="5" height="5"/>\n                             <rect x="18" y="27" opacity="0.4" fill="#231F20" enable-background="new    " width="5" height="5"/>\n                        </svg>\n                        <div class="skitch-icon-text" draggable="false"></div>\n                    </div>\n\n                    <div class="skitch-app-bar-button skitch-stamp-button skitch-accept" draggable="false">\n                        <svg class="skitch-icon skitchAccept" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <g id="stamp_x5F_check_x5F_parent_x5F_off">\n                            <g>\n                                <g>\n                                    <g>\n                                        <path fill="#3F4040" d="M26.4,12c-3.377,0-6.362,1.674-8.171,4.236c-1.395,0-4.566,0-5.619,0c-1.367,0-5.012,5.562-5.012,5.562\n                                            s3.645,6.029,5.012,6.029c1.061,0,4.295,0,5.666,0C20.091,30.352,23.05,32,26.4,32c5.521,0,10-4.479,10-10\n                                            C36.4,16.479,31.923,12,26.4,12z M26.4,29.197c-3.979,0-7.205-3.223-7.205-7.197c0-3.977,3.225-7.197,7.205-7.197\n                                            c3.976,0,7.197,3.221,7.197,7.197C33.6,25.975,30.376,29.197,26.4,29.197z"/>\n                                    </g>\n                                </g>\n                                <g>\n                                    <g>\n                                        <g id="check_mark">\n                                            <path fill="#3F4040" d="M25.141,25.188c-0.219,0-0.428-0.088-0.576-0.246l-2.217-2.325c-0.304-0.319-0.292-0.824,0.026-1.128\n                                                c0.318-0.304,0.822-0.291,1.127,0.027l1.639,1.719l3.979-4.173c0.304-0.318,0.808-0.331,1.127-0.027\n                                                c0.317,0.304,0.331,0.808,0.026,1.126l-4.556,4.781C25.564,25.098,25.357,25.188,25.141,25.188z"/>\n                                        </g>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                        </svg>\n\n                        <svg class="skitch-icon skitchExclaim" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <g id="stamp_x5F_exclaim_x5F_parent_x5F_off">\n                            <g>\n                                <g>\n                                    <g>\n                                        <path fill="#3F4040" d="M26.4,12c-3.377,0-6.362,1.674-8.171,4.236c-1.395,0-4.566,0-5.619,0c-1.367,0-5.012,5.562-5.012,5.562\n                                            s3.645,6.029,5.012,6.029c1.061,0,4.295,0,5.666,0C20.091,30.352,23.05,32,26.4,32c5.521,0,10-4.479,10-10\n                                            C36.4,16.479,31.923,12,26.4,12z M26.4,29.197c-3.979,0-7.205-3.223-7.205-7.197c0-3.977,3.225-7.197,7.205-7.197\n                                            c3.976,0,7.197,3.221,7.197,7.197C33.6,25.975,30.376,29.197,26.4,29.197z"/>\n                                    </g>\n                                </g>\n                                <g id="XMLID_15_">\n                                    <g>\n                                        <g>\n                                            <path fill="#3F4040" d="M27.441,21.725c-0.135,1.151-0.53,2.093-0.879,2.093c-0.348,0-0.742-0.942-0.879-2.093l-0.351-2.98\n                                                c-0.136-1.151,0.418-2.094,1.229-2.094c0.811,0,1.364,0.942,1.229,2.094L27.441,21.725z"/>\n                                        </g>\n                                        <circle fill="#3F4040" cx="26.562" cy="25.505" r="0.843"/>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                        </svg>\n\n                        <svg class="skitch-icon skitchQuestion" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <g id="stamp_x5F_question_x5F_parent_x5F_off">\n                            <g>\n                                <g>\n                                    <path fill="#3F4040" d="M26.4,12c-3.377,0-6.362,1.674-8.171,4.236c-1.395,0-4.566,0-5.619,0c-1.367,0-5.012,5.562-5.012,5.562\n                                        s3.645,6.029,5.012,6.029c1.061,0,4.295,0,5.666,0C20.091,30.352,23.05,32,26.4,32c5.521,0,10-4.479,10-10\n                                        C36.4,16.479,31.923,12,26.4,12z M26.4,29.197c-3.979,0-7.205-3.223-7.205-7.197c0-3.977,3.225-7.197,7.205-7.197\n                                        c3.976,0,7.197,3.221,7.197,7.197C33.6,25.975,30.376,29.197,26.4,29.197z"/>\n                                </g>\n                                <g>\n                                    <g>\n                                        <g>\n                                            <path fill="#3F4040" d="M26.325,25.102c-0.528,0-0.955,0.438-0.955,0.977c0,0.539,0.427,0.977,0.955,0.977\n                                                c0.526,0,0.956-0.438,0.956-0.977S26.854,25.102,26.325,25.102z M26.325,17.291c-1.022,0-1.974,0.396-2.608,1.089\n                                                c-0.359,0.392-0.34,1.01,0.045,1.38c0.385,0.369,0.989,0.35,1.35-0.044c0.271-0.296,0.728-0.474,1.215-0.474\n                                                c0.763,0,1.434,0.457,1.434,0.977c0,0.521-0.671,0.977-1.434,0.977c-0.528,0-0.955,0.437-0.955,0.976v0.977\n                                                c0,0.537,0.427,0.976,0.955,0.976c0.527,0,0.956-0.438,0.956-0.976v-0.123c1.374-0.358,2.393-1.48,2.393-2.807\n                                                C29.674,18.604,28.169,17.291,26.325,17.291z"/>\n                                        </g>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                        </svg>\n\n                        <svg class="skitch-icon skitchReject" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <g id="stamp_x5F_x_x5F_parent_x5F_off">\n                            <g>\n                                <g>\n                                    <g>\n                                        <path fill="#3F4040" d="M26.4,12c-3.377,0-6.362,1.674-8.171,4.236c-1.395,0-4.566,0-5.619,0c-1.367,0-5.012,5.562-5.012,5.562\n                                            s3.645,6.029,5.012,6.029c1.061,0,4.295,0,5.666,0C20.091,30.352,23.05,32,26.4,32c5.521,0,10-4.479,10-10\n                                            C36.4,16.479,31.923,12,26.4,12z M26.4,29.197c-3.979,0-7.205-3.223-7.205-7.197c0-3.977,3.225-7.197,7.205-7.197\n                                            c3.976,0,7.197,3.221,7.197,7.197C33.6,25.975,30.376,29.197,26.4,29.197z"/>\n                                    </g>\n                                </g>\n                                <g>\n                                    <g>\n                                        <g>\n                                            <g id="cross_mark">\n                                                <path fill="#3F4040" d="M27.861,22l2.189-2.19c0.373-0.373,0.373-0.979,0-1.351c-0.373-0.374-0.978-0.374-1.352,0l-2.19,2.19\n                                                    l-2.19-2.19c-0.373-0.374-0.979-0.374-1.352,0c-0.373,0.373-0.373,0.978,0,1.351l2.19,2.19l-2.19,2.189\n                                                    c-0.373,0.373-0.373,0.979,0,1.352c0.188,0.188,0.432,0.279,0.676,0.279s0.489-0.092,0.676-0.279l2.19-2.189l2.19,2.189\n                                                    c0.188,0.188,0.432,0.279,0.677,0.279c0.242,0,0.487-0.092,0.674-0.279c0.373-0.373,0.373-0.979,0-1.352L27.861,22z"/>\n                                            </g>\n                                        </g>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                        </svg>\n\n                        <svg class="skitch-icon skitchPerfect" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n	 width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n<g id="stamp_x5F_heart_x5F_parent_x5F_off">\n	<g>\n		<g>\n			<path fill="#3F4040" d="M26.4,12c-3.377,0-6.362,1.674-8.171,4.236c-1.395,0-4.566,0-5.619,0c-1.367,0-5.012,5.562-5.012,5.562\n				s3.645,6.029,5.012,6.029c1.061,0,4.295,0,5.666,0C20.091,30.352,23.05,32,26.4,32c5.521,0,10-4.479,10-10\n				C36.4,16.479,31.923,12,26.4,12z M26.4,29.197c-3.979,0-7.205-3.223-7.205-7.197c0-3.977,3.225-7.197,7.205-7.197\n				c3.976,0,7.197,3.221,7.197,7.197C33.6,25.975,30.376,29.197,26.4,29.197z"/>\n		</g>\n		<path fill="#3F4040" d="M23.922,20.085c0.227,0.003,0.412-0.053,0.566-0.174c0.18-0.142,0.354-0.295,0.502-0.47\n			c0.687-0.809,1.478-1.466,2.535-1.717s2.258,0.27,2.759,1.186c0.241,0.441,0.263,0.917,0.19,1.405\n			c-0.084,0.556-0.306,1.057-0.629,1.51c-0.279,0.391-0.584,0.765-0.867,1.153c-0.438,0.601-0.799,1.242-0.998,1.965\n			c-0.07,0.257-0.078,0.517-0.057,0.779c0.008,0.08,0.006,0.162-0.009,0.242c-0.033,0.217-0.188,0.352-0.41,0.369\n			c-0.229,0.02-0.453-0.025-0.667-0.104c-0.882-0.318-1.738-0.688-2.54-1.181c-0.633-0.389-1.213-0.844-1.702-1.405\n			c-0.469-0.541-0.811-1.147-0.885-1.871c-0.095-0.95,0.163-1.788,0.879-2.446c0.398-0.368,0.87-0.514,1.409-0.372\n			c0.069,0.018,0.14,0.046,0.204,0.078c0.182,0.087,0.305,0.224,0.32,0.432c0.018,0.215-0.105,0.357-0.271,0.461\n			C24.157,19.989,24.046,20.027,23.922,20.085z"/>\n	</g>\n</g>\n</svg>\n\n                        <div class="skitch-icon-text" draggable="false"></div>\n                        <svg class="skitch-more-icon" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <polygon id="disclosure_x5F_arrow" fill="#BFBFBF" points="41,35 35,41 41,41 "/>\n                        </svg>\n                    </div>\n\n                    <div class="skitch-app-bar-button skitch-crop-button" draggable="false">\n                        <svg class="skitch-icon" version="1.1" draggable="false" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                        <g id="crop_x5F_off">\n                            <g>\n                                <polygon fill="#3F4040" points="17,20 14,20 14,28 14,31 17,31 25,31 25,28 17,28 		"/>\n                                <polygon fill="#3F4040" points="34,28 32,28 32,26 29,26 29,28 27,28 27,31 29,31 29,33 32,33 32,31 34,31 		"/>\n                                <polygon fill="#3F4040" points="29,24 32,24 32,16 32,13 29,13 21,13 21,16 29,16 		"/>\n                                <polygon fill="#3F4040" points="14,18 17,18 17,16 19,16 19,13 17,13 17,11 14,11 14,13 12,13 12,16 14,16 		"/>\n                            </g>\n                        </g>\n                        </svg>\n                        <div class="skitch-icon-text" draggable="false"></div>\n                    </div>\n\n                    <hr>\n\n                    <div class="skitch-app-bar-button skitch-color-button" draggable="false">\n                        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                            <path fill="#D8D8D8" d="M22,10c6.617,0,12,5.383,12,12s-5.383,12-12,12s-12-5.383-12-12S15.383,10,22,10 M22,8\n                                C14.266,8,8,14.266,8,22c0,7.734,6.266,14,14,14c7.734,0,14-6.266,14-14C36,14.266,29.734,8,22,8L22,8z"/>\n                            <path fill="#000000" d="M22,31c-4.964,0-9-4.036-9-9s4.036-9,9-9s9,4.036,9,9S26.964,31,22,31z"/>\n                            <g opacity="0.25">\n                                <path d="M22,14c4.411,0,8,3.589,8,8s-3.589,8-8,8s-8-3.589-8-8S17.589,14,22,14 M22,13c-4.964,0-9,4.036-9,9s4.036,9,9,9\n                                    s9-4.036,9-9S26.964,13,22,13L22,13z"/>\n                            </g>\n                            <polygon id="disclosure_x5F_arrow" fill="#BFBFBF" points="41,35 35,41 41,41 "/>\n                        </svg>\n                        <div class="skitch-icon-text" draggable="false"></div>\n                    </div>\n\n                    <div class="skitch-app-bar-button skitch-size-button" draggable="false">\n                        <svg class="skitch-icon skitch-size-1" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n                             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                                <path fill="#D7D7D7" d="M22,10c6.617,0,12,5.383,12,12c0,6.617-5.383,12-12,12s-12-5.383-12-12C10,15.383,15.383,10,22,10 M22,8\n                                    C14.266,8,8,14.266,8,22s6.266,14,14,14s14-6.266,14-14S29.734,8,22,8L22,8z"/>\n                                <rect x="21.502" y="14.014" transform="matrix(0.7086 0.7056 -0.7056 0.7086 21.9362 -9.1127)" fill="#231F20" width="0.998" height="15.973"/>\n                                <polygon id="disclosure_x5F_arrow" fill="#BFBFBF" points="41,35 35,41 41,41 "/>\n                        </svg>\n\n                        <svg class="skitch-icon skitch-size-2" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n                             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                                    <path fill="#D7D7D7" d="M22,10c6.617,0,12,5.383,12,12c0,6.617-5.383,12-12,12s-12-5.383-12-12C10,15.383,15.383,10,22,10 M22,8\n                                        C14.266,8,8,14.266,8,22s6.266,14,14,14s14-6.266,14-14S29.734,8,22,8L22,8z"/>\n                            <rect x="21" y="14.001" transform="matrix(0.7076 0.7066 -0.7066 0.7076 21.9792 -9.1124)" fill="#231F20" width="2" height="16"/>\n                            <polygon id="disclosure_x5F_arrow" fill="#BFBFBF" points="41,35 35,41 41,41 "/>\n                        </svg>\n\n                        <svg class="skitch-icon skitch-size-3" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n                             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                            <path fill="#D7D7D7" d="M22,10c6.617,0,12,5.383,12,12c0,6.617-5.383,12-12,12s-12-5.383-12-12C10,15.383,15.383,10,22,10 M22,8\n                                C14.266,8,8,14.266,8,22s6.266,14,14,14s14-6.266,14-14S29.734,8,22,8L22,8z"/>\n                            <rect x="20.5" y="14.002" transform="matrix(0.7073 0.7069 -0.7069 0.7073 21.994 -9.1122)" fill="#231F20" width="3" height="15.999"/>\n                            <polygon id="disclosure_x5F_arrow" fill="#BFBFBF" points="41,35 35,41 41,41 "/>\n                        </svg>\n\n                        <svg class="skitch-icon skitch-size-4" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n                             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                                        <path fill="#D7D7D7" d="M22,10c6.617,0,12,5.383,12,12c0,6.617-5.383,12-12,12s-12-5.383-12-12C10,15.383,15.383,10,22,10 M22,8\n                                            C14.266,8,8,14.266,8,22s6.266,14,14,14s14-6.266,14-14S29.734,8,22,8L22,8z"/>\n                                    <rect x="20" y="14.002" transform="matrix(0.7072 0.707 -0.707 0.7072 21.9958 -9.1122)" fill="#231F20" width="4" height="15.999"/>\n                            <polygon id="disclosure_x5F_arrow" fill="#BFBFBF" points="41,35 35,41 41,41 "/>\n                        </svg>\n\n                        <svg class="skitch-icon skitch-size-5" style="display: none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n                             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                                    <path fill="#D7D7D7" d="M22,10c6.617,0,12,5.383,12,12c0,6.617-5.383,12-12,12s-12-5.383-12-12C10,15.383,15.383,10,22,10 M22,8\n                                        C14.266,8,8,14.266,8,22s6.266,14,14,14s14-6.266,14-14S29.734,8,22,8L22,8z"/>\n                                <rect x="19.5" y="14.003" transform="matrix(0.7071 0.7071 -0.7071 0.7071 22.0017 -9.112)" fill="#231F20" width="5.001" height="15.999"/>\n                            <polygon id="disclosure_x5F_arrow" fill="#BFBFBF" points="41,35 35,41 41,41 "/>\n                        </svg>\n\n                        <div class="skitch-icon-text" draggable="false"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'
}),define("text!appbar/ShapeDialog.html",[],function(){return'<div class="skitch-shape-dialog">\n    <div class="skitch-app-bar-button skitch-rectangle-button">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                    <path fill="#3F4040" d="M32,14.961v14.078H13V14.961h18.775 M35,12H10v20h25V12L35,12z"/>\n        </svg>\n    </div>\n\n    <div class="skitch-app-bar-button skitch-roundedRectangle-button">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                <path fill="#3F3F3F" d="M27,15c2.757,0,5,2.243,5,5v4c0,2.757-2.243,5-5,5h-9c-2.757,0-5-2.243-5-5v-4c0-2.757,2.243-5,5-5H27\n                     M27,12h-9c-4.4,0-8,3.6-8,8v4c0,4.4,3.6,8,8,8h9c4.4,0,8-3.6,8-8v-4C35,15.6,31.4,12,27,12L27,12z"/>\n        </svg>\n    </div>\n\n    <div class="skitch-app-bar-button skitch-ellipse-button">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n        <path fill="#3F3F3F" d="M22,15c4.688,0,8.5,3.14,8.5,7c0,3.859-3.812,7-8.5,7c-4.687,0-8.5-3.141-8.5-7C13.5,18.14,17.313,15,22,15\n             M22,12c-6.352,0-11.5,4.477-11.5,10c0,5.523,5.148,10,11.5,10c6.352,0,11.5-4.477,11.5-10C33.5,16.477,28.352,12,22,12L22,12z"/>\n        </svg>\n    </div>\n\n    <div class="skitch-app-bar-button skitch-line-button">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n        <rect x="20" y="7.858" transform="matrix(0.7071 0.7071 -0.7071 0.7071 22.0002 -9.1128)" fill="#3F3F3F" width="4" height="28.284"/>\n        </svg>\n    </div>\n</div>'}),define("text!appbar/PenDialog.html",[],function(){return'<div class="skitch-pen-dialog">\n    <div class="skitch-app-bar-button skitch-marker-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n        <path fill="#3F4040" d="M16.193,25.99c0,0,1.354,1.863,3.193,3.236l-1.55,1.592c0,0-1.897-0.742-3.188-3.238L16.193,25.99z\n             M15.73,24.369c1.834,3.17,5.242,5.318,5.242,5.318L33,17.322C30.939,14.195,27.758,12,27.758,12L15.73,24.369z M14.682,28.934\n            l-1.633,1.685c0,0-0.096,0.062-0.02,0.159L15.328,32l1.178-1.213C16.506,30.787,15.295,30.02,14.682,28.934z"/>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-highlighter-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n        <g id="highlighter_x5F_parent_x5F_off">\n            <g>\n                <g>\n                    <path fill="#3F4040" d="M22.805,21.441c-0.207,0.039-0.421,0.072-0.646,0.101c-0.226,0.024-0.45,0.059-0.675,0.098\n                        c-0.212,0.04-0.42,0.093-0.625,0.158c-0.205,0.067-0.385,0.156-0.537,0.27c-0.15,0.111-0.274,0.255-0.365,0.425\n                        c-0.094,0.173-0.141,0.39-0.141,0.655c0,0.25,0.047,0.463,0.141,0.636c0.091,0.173,0.217,0.308,0.376,0.405\n                        c0.158,0.101,0.344,0.168,0.557,0.211c0.211,0.039,0.429,0.059,0.655,0.059c0.555,0,0.984-0.092,1.289-0.279\n                        c0.305-0.184,0.529-0.406,0.675-0.664c0.144-0.258,0.233-0.518,0.269-0.783c0.031-0.265,0.05-0.477,0.05-0.634v-1.051\n                        c-0.119,0.105-0.269,0.188-0.447,0.246C23.201,21.353,23.01,21.401,22.805,21.441z"/>\n                </g>\n                <g>\n                    <g>\n                        <path fill="#3F4040" d="M34.438,17.01l-9.603-1.164l6.962-0.696L31.482,12l-21.202,2.119l-0.032,3.146l6.581,0.798\n                            c-0.779,0.049-1.512,0.095-2.177,0.137c-1.085,0.069-1.989,0.127-2.622,0.169c-0.262,0.018-0.537,0.036-0.808,0.073\n                            c-0.026-0.001-0.048-0.001-0.063-0.001v0.011c-0.86,0.131-1.633,0.472-1.598,1.618l1.565,1.535\n                            c0.322,0.014,2.539,0.221,5.625,0.519l-7.18,0.651l0.049,3.156l12.13,0.735l-10.573,2.235L11.833,32l22.021-4.656l-0.23-3.128\n                            l-2.951-0.179l2.998-0.273l0.016-3.149c-0.678-0.067-1.556-0.155-2.572-0.257c1.119-0.068,2.207-0.134,3.232-0.196L34.438,17.01\n                            z M24.143,26.064c-0.053-0.157-0.094-0.319-0.129-0.485c-0.033-0.167-0.055-0.335-0.068-0.506\n                            c-0.45,0.463-0.979,0.786-1.587,0.971c-0.608,0.188-1.23,0.279-1.866,0.279c-0.489,0-0.944-0.06-1.368-0.179\n                            c-0.424-0.121-0.794-0.305-1.111-0.557c-0.316-0.252-0.566-0.566-0.744-0.952C17.091,24.251,17,23.798,17,23.268\n                            c0-0.582,0.102-1.062,0.307-1.439c0.205-0.377,0.471-0.676,0.795-0.902c0.322-0.225,0.693-0.394,1.11-0.505\n                            c0.417-0.112,0.836-0.202,1.261-0.269c0.424-0.064,0.84-0.118,1.25-0.158c0.41-0.041,0.773-0.1,1.091-0.18\n                            c0.316-0.078,0.568-0.193,0.754-0.348c0.185-0.15,0.271-0.372,0.259-0.664c0-0.305-0.05-0.546-0.147-0.725\n                            c-0.101-0.178-0.232-0.317-0.398-0.415c-0.164-0.101-0.355-0.167-0.575-0.199c-0.218-0.032-0.453-0.05-0.704-0.05\n                            c-0.556,0-0.992,0.119-1.31,0.356c-0.317,0.239-0.503,0.636-0.556,1.19h-2.817c0.039-0.66,0.206-1.21,0.495-1.646\n                            c0.291-0.437,0.662-0.788,1.112-1.054c0.449-0.264,0.955-0.453,1.519-0.564c0.562-0.111,1.127-0.168,1.695-0.168\n                            c0.518,0,1.04,0.037,1.568,0.109c0.528,0.073,1.013,0.214,1.448,0.426c0.438,0.212,0.794,0.506,1.072,0.883\n                            c0.275,0.379,0.416,0.876,0.416,1.498v5.339c0,0.463,0.025,0.905,0.078,1.329s0.146,0.742,0.277,0.953H24.143L24.143,26.064z"/>\n                    </g>\n                </g>\n            </g>\n        </g>\n        </svg>\n    </div>\n</div>'}),define("text!appbar/StampDialog.html",[],function(){return'<div class="skitch-stamp-dialog">\n    <div class="skitch-app-bar-button skitch-stampAccept-button" draggable="false">\n        <svg class="skitch-stamp-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n        <g id="stamp_x5F_check_x5F_child_x5F_off">\n            <g>\n                <circle fill="#FFFFFF" cx="26.35" cy="22" r="8"/>\n                <g>\n                    <path fill="#1CBC2F" d="M26.4,32.5c-3.282,0-6.396-1.555-8.376-4.172H12.61c-1.488,0-4.3-4.385-5.439-6.271l-0.163-0.27\n                        l0.173-0.264c1.14-1.74,3.952-5.788,5.43-5.788h5.364c1.977-2.657,5.106-4.236,8.427-4.236c5.789,0,10.5,4.71,10.5,10.5\n                        S32.191,32.5,26.4,32.5z M26.4,15.303c-3.696,0-6.705,3.004-6.705,6.697c0,3.693,3.008,6.697,6.705,6.697\n                        c3.693,0,6.697-3.004,6.697-6.697C33.098,18.307,30.096,15.303,26.4,15.303z"/>\n                    <path fill="#FFFFFF" d="M26.4,12c5.521,0,10,4.479,10,10c0,5.521-4.479,10-10,10c-3.352,0-6.311-1.648-8.125-4.172\n                        c-1.371,0-4.605,0-5.666,0c-1.367,0-5.012-6.029-5.012-6.029s3.645-5.562,5.012-5.562c1.053,0,4.225,0,5.619,0\n                        C20.038,13.674,23.023,12,26.4,12 M26.4,29.197c3.976,0,7.197-3.223,7.197-7.197c0-3.977-3.223-7.197-7.197-7.197\n                        c-3.979,0-7.205,3.221-7.205,7.197C19.196,25.975,22.421,29.197,26.4,29.197 M26.4,11c-3.393,0-6.597,1.574-8.674,4.236H12.61\n                        c-1.576,0-4.051,3.271-5.849,6.015l-0.345,0.526l0.326,0.539c2.611,4.32,4.586,6.512,5.867,6.512h5.169\n                        C19.86,31.45,23.045,33,26.4,33c6.065,0,11-4.936,11-11C37.4,15.935,32.467,11,26.4,11L26.4,11z M26.4,28.197\n                        c-3.422,0-6.205-2.78-6.205-6.197s2.783-6.197,6.205-6.197c3.418,0,6.197,2.78,6.197,6.197S29.818,28.197,26.4,28.197\n                        L26.4,28.197z"/>\n                </g>\n                <g>\n                    <g>\n                        <g id="check_mark_2_">\n                            <path fill="#1CBC2F" d="M25.141,25.188c-0.219,0-0.428-0.088-0.576-0.246l-2.217-2.325c-0.304-0.318-0.292-0.824,0.026-1.127\n                                c0.318-0.305,0.822-0.291,1.127,0.026l1.639,1.719l3.979-4.173c0.304-0.318,0.808-0.331,1.127-0.027\n                                c0.317,0.303,0.331,0.808,0.026,1.126l-4.556,4.781C25.564,25.098,25.357,25.188,25.141,25.188z"/>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-stampExclaim-button" draggable="false">\n        <svg class="skitch-stamp-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n        <g id="stamp_x5F_exclaim_x5F_child_x5F_off">\n            <g>\n                <circle fill="#FFFFFF" cx="26.6" cy="22" r="8"/>\n                <g>\n                    <path fill="#FD8224" d="M26.4,32.5c-3.282,0-6.396-1.555-8.376-4.172H12.61c-1.488,0-4.3-4.385-5.439-6.271l-0.163-0.27\n                        l0.173-0.264c1.14-1.74,3.952-5.788,5.43-5.788h5.364c1.977-2.657,5.106-4.236,8.427-4.236c5.789,0,10.5,4.71,10.5,10.5\n                        S32.191,32.5,26.4,32.5z M26.4,15.303c-3.696,0-6.705,3.004-6.705,6.697c0,3.693,3.008,6.697,6.705,6.697\n                        c3.693,0,6.697-3.004,6.697-6.697C33.098,18.307,30.096,15.303,26.4,15.303z"/>\n                    <path fill="#FFFFFF" d="M26.4,12c5.521,0,10,4.479,10,10c0,5.521-4.479,10-10,10c-3.352,0-6.311-1.648-8.125-4.172\n                        c-1.371,0-4.605,0-5.666,0c-1.367,0-5.012-6.029-5.012-6.029s3.645-5.562,5.012-5.562c1.053,0,4.225,0,5.619,0\n                        C20.038,13.674,23.023,12,26.4,12 M26.4,29.197c3.976,0,7.197-3.223,7.197-7.197c0-3.977-3.223-7.197-7.197-7.197\n                        c-3.979,0-7.205,3.221-7.205,7.197C19.196,25.975,22.421,29.197,26.4,29.197 M26.4,11c-3.393,0-6.597,1.574-8.674,4.236H12.61\n                        c-1.576,0-4.051,3.271-5.849,6.015l-0.345,0.526l0.326,0.539c2.611,4.32,4.586,6.512,5.867,6.512h5.169\n                        C19.86,31.45,23.045,33,26.4,33c6.065,0,11-4.936,11-11C37.4,15.935,32.467,11,26.4,11L26.4,11z M26.4,28.197\n                        c-3.422,0-6.205-2.78-6.205-6.197s2.783-6.197,6.205-6.197c3.418,0,6.197,2.78,6.197,6.197S29.818,28.197,26.4,28.197\n                        L26.4,28.197z"/>\n                </g>\n                <g id="XMLID_1_">\n                    <g>\n                        <g>\n                            <path fill="#FD8224" d="M27.441,21.725c-0.135,1.152-0.53,2.093-0.879,2.093c-0.348,0-0.742-0.94-0.879-2.093l-0.351-2.979\n                                c-0.136-1.151,0.418-2.094,1.229-2.094c0.811,0,1.364,0.942,1.229,2.094L27.441,21.725z"/>\n                        </g>\n                        <circle fill="#FD8224" cx="26.562" cy="25.505" r="0.843"/>\n                    </g>\n                </g>\n            </g>\n        </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-stampQuestion-button" draggable="false">\n        <svg class="skitch-stamp-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n        <g id="stamp_x5F_question_x5F_child_x5F_off">\n            <g>\n                <circle fill="#FFFFFF" cx="26.4" cy="22" r="8"/>\n                <g>\n                    <path fill="#367BD9" d="M26.4,32.5c-3.282,0-6.396-1.555-8.376-4.172H12.61c-1.488,0-4.3-4.385-5.439-6.271l-0.163-0.27\n                        l0.173-0.264c1.14-1.74,3.952-5.788,5.43-5.788h5.364c1.977-2.657,5.106-4.236,8.427-4.236c5.789,0,10.5,4.71,10.5,10.5\n                        S32.191,32.5,26.4,32.5z M26.4,15.303c-3.696,0-6.705,3.004-6.705,6.697c0,3.693,3.008,6.697,6.705,6.697\n                        c3.693,0,6.697-3.004,6.697-6.697C33.098,18.307,30.096,15.303,26.4,15.303z"/>\n                    <path fill="#FFFFFF" d="M26.4,12c5.521,0,10,4.479,10,10c0,5.521-4.479,10-10,10c-3.352,0-6.311-1.648-8.125-4.172\n                        c-1.371,0-4.605,0-5.666,0c-1.367,0-5.012-6.029-5.012-6.029s3.645-5.562,5.012-5.562c1.053,0,4.225,0,5.619,0\n                        C20.038,13.674,23.023,12,26.4,12 M26.4,29.197c3.976,0,7.197-3.223,7.197-7.197c0-3.977-3.223-7.197-7.197-7.197\n                        c-3.979,0-7.205,3.221-7.205,7.197C19.196,25.975,22.421,29.197,26.4,29.197 M26.4,11c-3.393,0-6.597,1.574-8.674,4.236H12.61\n                        c-1.576,0-4.051,3.271-5.849,6.015l-0.345,0.526l0.326,0.539c2.611,4.32,4.586,6.512,5.867,6.512h5.169\n                        C19.86,31.45,23.045,33,26.4,33c6.065,0,11-4.936,11-11C37.4,15.935,32.467,11,26.4,11L26.4,11z M26.4,28.197\n                        c-3.422,0-6.205-2.78-6.205-6.197s2.783-6.197,6.205-6.197c3.418,0,6.197,2.78,6.197,6.197S29.818,28.197,26.4,28.197\n                        L26.4,28.197z"/>\n                </g>\n                <g>\n                    <g>\n                        <g>\n                            <path fill="#367BD9" d="M26.325,25.102c-0.528,0-0.955,0.438-0.955,0.977c0,0.539,0.427,0.977,0.955,0.977\n                                c0.526,0,0.956-0.438,0.956-0.977S26.854,25.102,26.325,25.102z M26.325,17.291c-1.022,0-1.974,0.396-2.608,1.09\n                                c-0.359,0.391-0.34,1.01,0.045,1.379c0.385,0.369,0.989,0.351,1.35-0.043c0.271-0.297,0.728-0.475,1.215-0.475\n                                c0.763,0,1.434,0.457,1.434,0.978c0,0.521-0.671,0.978-1.434,0.978c-0.528,0-0.955,0.437-0.955,0.976v0.978\n                                c0,0.537,0.427,0.976,0.955,0.976c0.527,0,0.956-0.438,0.956-0.976v-0.123c1.374-0.358,2.393-1.48,2.393-2.806\n                                C29.674,18.604,28.169,17.291,26.325,17.291z"/>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-stampReject-button" draggable="false">\n        <svg class="skitch-stamp-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n        <g id="stamp_x5F_x_x5F_child_x5F_off">\n            <g>\n                <circle fill="#FFFFFF" cx="26.6" cy="22" r="8"/>\n                <g>\n                    <path fill="#ED1E1E" d="M26.4,32.5c-3.282,0-6.396-1.555-8.376-4.172H12.61c-1.488,0-4.3-4.385-5.439-6.271l-0.163-0.27\n                        l0.173-0.264c1.14-1.74,3.952-5.788,5.43-5.788h5.364c1.977-2.657,5.106-4.236,8.427-4.236c5.789,0,10.5,4.71,10.5,10.5\n                        S32.191,32.5,26.4,32.5z M26.4,15.303c-3.696,0-6.705,3.004-6.705,6.697c0,3.693,3.008,6.697,6.705,6.697\n                        c3.693,0,6.697-3.004,6.697-6.697C33.098,18.307,30.096,15.303,26.4,15.303z"/>\n                    <path fill="#FFFFFF" d="M26.4,12c5.521,0,10,4.479,10,10c0,5.521-4.479,10-10,10c-3.352,0-6.311-1.648-8.125-4.172\n                        c-1.371,0-4.605,0-5.666,0c-1.367,0-5.012-6.029-5.012-6.029s3.645-5.562,5.012-5.562c1.053,0,4.225,0,5.619,0\n                        C20.038,13.674,23.023,12,26.4,12 M26.4,29.197c3.976,0,7.197-3.223,7.197-7.197c0-3.977-3.223-7.197-7.197-7.197\n                        c-3.979,0-7.205,3.221-7.205,7.197C19.196,25.975,22.421,29.197,26.4,29.197 M26.4,11c-3.393,0-6.597,1.574-8.674,4.236H12.61\n                        c-1.576,0-4.051,3.271-5.849,6.015l-0.345,0.526l0.326,0.539c2.611,4.32,4.586,6.512,5.867,6.512h5.169\n                        C19.86,31.45,23.045,33,26.4,33c6.065,0,11-4.936,11-11C37.4,15.935,32.467,11,26.4,11L26.4,11z M26.4,28.197\n                        c-3.422,0-6.205-2.78-6.205-6.197s2.783-6.197,6.205-6.197c3.418,0,6.197,2.78,6.197,6.197S29.818,28.197,26.4,28.197\n                        L26.4,28.197z"/>\n                </g>\n                <g>\n                    <g>\n                        <g>\n                            <g id="cross_mark_2_">\n                                <path fill="#ED1E1E" d="M27.861,22l2.189-2.19c0.373-0.373,0.373-0.979,0-1.351c-0.373-0.375-0.978-0.375-1.352,0l-2.19,2.189\n                                    l-2.19-2.189c-0.373-0.375-0.979-0.375-1.352,0c-0.373,0.372-0.373,0.978,0,1.351l2.19,2.19l-2.19,2.189\n                                    c-0.373,0.373-0.373,0.979,0,1.352c0.188,0.188,0.432,0.279,0.676,0.279s0.489-0.092,0.676-0.279l2.19-2.189l2.19,2.189\n                                    c0.188,0.188,0.432,0.279,0.677,0.279c0.242,0,0.487-0.092,0.674-0.279c0.373-0.373,0.373-0.979,0-1.352L27.861,22z"/>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-stampPerfect-button" draggable="false">\n        <svg class="skitch-stamp-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n        <g id="stamp_x5F_heart_x5F_child_x5F_off">\n            <g>\n                <circle fill="#FFFFFF" cx="26.35" cy="22" r="8"/>\n                <g>\n                    <path fill="#FF1E64" d="M26.4,32.5c-3.282,0-6.396-1.555-8.376-4.172H12.61c-1.488,0-4.3-4.385-5.439-6.271l-0.163-0.27\n                        l0.173-0.264c1.14-1.74,3.952-5.788,5.43-5.788h5.364c1.977-2.657,5.106-4.236,8.427-4.236c5.789,0,10.5,4.71,10.5,10.5\n                        S32.191,32.5,26.4,32.5z M26.4,15.303c-3.696,0-6.705,3.004-6.705,6.697c0,3.693,3.008,6.697,6.705,6.697\n                        c3.693,0,6.697-3.004,6.697-6.697C33.098,18.307,30.096,15.303,26.4,15.303z"/>\n                    <path fill="#FFFFFF" d="M26.4,12c5.521,0,10,4.479,10,10c0,5.521-4.479,10-10,10c-3.352,0-6.311-1.648-8.125-4.172\n                        c-1.371,0-4.605,0-5.666,0c-1.367,0-5.012-6.029-5.012-6.029s3.645-5.562,5.012-5.562c1.053,0,4.225,0,5.619,0\n                        C20.038,13.674,23.023,12,26.4,12 M26.4,29.197c3.976,0,7.197-3.223,7.197-7.197c0-3.977-3.223-7.197-7.197-7.197\n                        c-3.979,0-7.205,3.221-7.205,7.197C19.196,25.975,22.421,29.197,26.4,29.197 M26.4,11c-3.393,0-6.597,1.574-8.674,4.236H12.61\n                        c-1.576,0-4.051,3.271-5.849,6.015l-0.345,0.526l0.326,0.539c2.611,4.32,4.586,6.512,5.867,6.512h5.169\n                        C19.86,31.45,23.045,33,26.4,33c6.065,0,11-4.936,11-11C37.4,15.935,32.467,11,26.4,11L26.4,11z M26.4,28.197\n                        c-3.422,0-6.205-2.78-6.205-6.197s2.783-6.197,6.205-6.197c3.418,0,6.197,2.78,6.197,6.197S29.818,28.197,26.4,28.197\n                        L26.4,28.197z"/>\n                </g>\n                <path fill="#FF1E64" d="M23.922,20.086c0.227,0.003,0.412-0.053,0.566-0.174c0.18-0.143,0.354-0.296,0.502-0.471\n                    c0.687-0.809,1.478-1.467,2.535-1.717c1.058-0.251,2.258,0.27,2.759,1.186c0.241,0.441,0.263,0.918,0.19,1.404\n                    c-0.084,0.557-0.306,1.057-0.629,1.51c-0.279,0.391-0.584,0.766-0.867,1.152c-0.438,0.602-0.799,1.243-0.998,1.967\n                    c-0.07,0.256-0.078,0.516-0.057,0.779c0.008,0.079,0.006,0.161-0.009,0.241c-0.033,0.218-0.188,0.353-0.41,0.369\n                    c-0.229,0.021-0.453-0.024-0.667-0.104c-0.882-0.317-1.738-0.688-2.54-1.18c-0.633-0.389-1.213-0.844-1.702-1.406\n                    c-0.469-0.541-0.811-1.146-0.885-1.87c-0.095-0.95,0.163-1.788,0.879-2.446c0.398-0.367,0.87-0.514,1.409-0.371\n                    c0.069,0.018,0.14,0.046,0.204,0.078c0.182,0.088,0.305,0.225,0.32,0.432c0.018,0.215-0.105,0.357-0.271,0.462\n                    C24.157,19.988,24.046,20.027,23.922,20.086z"/>\n            </g>\n        </g>\n        </svg>\n    </div>\n</div>'}),define("text!appbar/ColorDialog.html",[],function(){return'<div class="skitch-color-dialog">\n    <div class="skitch-app-bar-button skitch-red-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <path fill="#D8D8D8" d="M22,10c6.617,0,12,5.383,12,12s-5.383,12-12,12s-12-5.383-12-12S15.383,10,22,10 M22,8\n                C14.266,8,8,14.266,8,22c0,7.734,6.266,14,14,14c7.734,0,14-6.266,14-14C36,14.266,29.734,8,22,8L22,8z"/>\n            <path fill="#000000" d="M22,31c-4.964,0-9-4.036-9-9s4.036-9,9-9s9,4.036,9,9S26.964,31,22,31z"/>\n            <g opacity="0.25">\n                <path d="M22,14c4.411,0,8,3.589,8,8s-3.589,8-8,8s-8-3.589-8-8S17.589,14,22,14 M22,13c-4.964,0-9,4.036-9,9s4.036,9,9,9\n                    s9-4.036,9-9S26.964,13,22,13L22,13z"/>\n            </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-orange-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <path fill="#D8D8D8" d="M22,10c6.617,0,12,5.383,12,12s-5.383,12-12,12s-12-5.383-12-12S15.383,10,22,10 M22,8\n                C14.266,8,8,14.266,8,22c0,7.734,6.266,14,14,14c7.734,0,14-6.266,14-14C36,14.266,29.734,8,22,8L22,8z"/>\n            <path fill="#000000" d="M22,31c-4.964,0-9-4.036-9-9s4.036-9,9-9s9,4.036,9,9S26.964,31,22,31z"/>\n            <g opacity="0.25">\n                <path d="M22,14c4.411,0,8,3.589,8,8s-3.589,8-8,8s-8-3.589-8-8S17.589,14,22,14 M22,13c-4.964,0-9,4.036-9,9s4.036,9,9,9\n                    s9-4.036,9-9S26.964,13,22,13L22,13z"/>\n            </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-yellow-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <path fill="#D8D8D8" d="M22,10c6.617,0,12,5.383,12,12s-5.383,12-12,12s-12-5.383-12-12S15.383,10,22,10 M22,8\n                C14.266,8,8,14.266,8,22c0,7.734,6.266,14,14,14c7.734,0,14-6.266,14-14C36,14.266,29.734,8,22,8L22,8z"/>\n            <path fill="#000000" d="M22,31c-4.964,0-9-4.036-9-9s4.036-9,9-9s9,4.036,9,9S26.964,31,22,31z"/>\n            <g opacity="0.25">\n                <path d="M22,14c4.411,0,8,3.589,8,8s-3.589,8-8,8s-8-3.589-8-8S17.589,14,22,14 M22,13c-4.964,0-9,4.036-9,9s4.036,9,9,9\n                    s9-4.036,9-9S26.964,13,22,13L22,13z"/>\n            </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-green-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <path fill="#D8D8D8" d="M22,10c6.617,0,12,5.383,12,12s-5.383,12-12,12s-12-5.383-12-12S15.383,10,22,10 M22,8\n                C14.266,8,8,14.266,8,22c0,7.734,6.266,14,14,14c7.734,0,14-6.266,14-14C36,14.266,29.734,8,22,8L22,8z"/>\n            <path fill="#000000" d="M22,31c-4.964,0-9-4.036-9-9s4.036-9,9-9s9,4.036,9,9S26.964,31,22,31z"/>\n            <g opacity="0.25">\n                <path d="M22,14c4.411,0,8,3.589,8,8s-3.589,8-8,8s-8-3.589-8-8S17.589,14,22,14 M22,13c-4.964,0-9,4.036-9,9s4.036,9,9,9\n                    s9-4.036,9-9S26.964,13,22,13L22,13z"/>\n            </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-blue-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <path fill="#D8D8D8" d="M22,10c6.617,0,12,5.383,12,12s-5.383,12-12,12s-12-5.383-12-12S15.383,10,22,10 M22,8\n                C14.266,8,8,14.266,8,22c0,7.734,6.266,14,14,14c7.734,0,14-6.266,14-14C36,14.266,29.734,8,22,8L22,8z"/>\n            <path fill="#000000" d="M22,31c-4.964,0-9-4.036-9-9s4.036-9,9-9s9,4.036,9,9S26.964,31,22,31z"/>\n            <g opacity="0.25">\n                <path d="M22,14c4.411,0,8,3.589,8,8s-3.589,8-8,8s-8-3.589-8-8S17.589,14,22,14 M22,13c-4.964,0-9,4.036-9,9s4.036,9,9,9\n                    s9-4.036,9-9S26.964,13,22,13L22,13z"/>\n            </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-pink-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <path fill="#D8D8D8" d="M22,10c6.617,0,12,5.383,12,12s-5.383,12-12,12s-12-5.383-12-12S15.383,10,22,10 M22,8\n                C14.266,8,8,14.266,8,22c0,7.734,6.266,14,14,14c7.734,0,14-6.266,14-14C36,14.266,29.734,8,22,8L22,8z"/>\n            <path fill="#000000" d="M22,31c-4.964,0-9-4.036-9-9s4.036-9,9-9s9,4.036,9,9S26.964,31,22,31z"/>\n            <g opacity="0.25">\n                <path d="M22,14c4.411,0,8,3.589,8,8s-3.589,8-8,8s-8-3.589-8-8S17.589,14,22,14 M22,13c-4.964,0-9,4.036-9,9s4.036,9,9,9\n                    s9-4.036,9-9S26.964,13,22,13L22,13z"/>\n            </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-white-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <path fill="#D8D8D8" d="M22,10c6.617,0,12,5.383,12,12s-5.383,12-12,12s-12-5.383-12-12S15.383,10,22,10 M22,8\n                C14.266,8,8,14.266,8,22c0,7.734,6.266,14,14,14c7.734,0,14-6.266,14-14C36,14.266,29.734,8,22,8L22,8z"/>\n            <path fill="#000000" d="M22,31c-4.964,0-9-4.036-9-9s4.036-9,9-9s9,4.036,9,9S26.964,31,22,31z"/>\n            <g opacity="0.25">\n                <path d="M22,14c4.411,0,8,3.589,8,8s-3.589,8-8,8s-8-3.589-8-8S17.589,14,22,14 M22,13c-4.964,0-9,4.036-9,9s4.036,9,9,9\n                    s9-4.036,9-9S26.964,13,22,13L22,13z"/>\n            </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-black-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <path fill="#D8D8D8" d="M22,10c6.617,0,12,5.383,12,12s-5.383,12-12,12s-12-5.383-12-12S15.383,10,22,10 M22,8\n                C14.266,8,8,14.266,8,22c0,7.734,6.266,14,14,14c7.734,0,14-6.266,14-14C36,14.266,29.734,8,22,8L22,8z"/>\n            <path fill="#000000" d="M22,31c-4.964,0-9-4.036-9-9s4.036-9,9-9s9,4.036,9,9S26.964,31,22,31z"/>\n            <g opacity="0.25">\n                <path d="M22,14c4.411,0,8,3.589,8,8s-3.589,8-8,8s-8-3.589-8-8S17.589,14,22,14 M22,13c-4.964,0-9,4.036-9,9s4.036,9,9,9\n                    s9-4.036,9-9S26.964,13,22,13L22,13z"/>\n            </g>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-custom-color-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="44px" height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <path fill="#D8D8D8" d="M22,10c6.617,0,12,5.383,12,12s-5.383,12-12,12s-12-5.383-12-12S15.383,10,22,10 M22,8\n                C14.266,8,8,14.266,8,22c0,7.734,6.266,14,14,14c7.734,0,14-6.266,14-14C36,14.266,29.734,8,22,8L22,8z"/>\n            <image overflow="visible" enable-background="new    " width="18" height="18" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsSAAALEgHS3X78AAAA\n            GXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAqRJREFUeNp0lEtPE1EYht8zUwtF\n            wBHBCwSlEY1xY2OMS1MWLtzBypiYWH4BIa6N8AMM8gvgHwC6cVeiC3eAWyIgURSl4HCd1l4+33Pm\n            I1JTJnnSmXN5z/tdTg3+e8RHgGprDuh9BlzLAH0cPUd6yc15oH8O6Jo2aAtP7vPqRLoxiCaswZQm\n            gCOKlOwoMSRJWrNAG+dSaxXIYEMheYQcOjCDFB35FY4ckIiUdVk76bBiqMEPODqzC8nVCckLOunG\n            FHp0bYouzCFfjkiNnCFtblJo2R5jve4BU8vqzJN3dJDGBK7zK61YsaRduq+ObFiXXK4qDNPKb5Nf\n            5Dsw8RYSJHCRISWZ0XbNaUrTciQhCtuTkCoTnODA+WwZyRFKB1Zgk/wkRVaDR+WMbCHPVGSxy9GC\n            zi4gxEcMmA9YOplQ5iSzAuTXKPaD3781kwx1yUiZ59c0gqJbDXzFuMliDA2e15Cxz8DLAw38UANA\n            KJB9ckiiGqTEupZLdHjKcxeS7YfIVXKFdJHLJFHQBdaUsF2qPq36OPVZuKM2ojgmZ4ebE7Y9/2g5\n            i3FJsQznaL6h0hPOrZ9IUDXebN4IFhlrZlfnNmKh8BMwsGXqk40NyWCFxVlly2xqm5Wcw/nEKjDJ\n            npja4fcWWY8JduDlIbcngcd0doujD7PcNMIwAjTbblChyBVozjwXBBRY5AF9tvLHZS27prpPHpAb\n            8XuNFzhiIne0ZHuOkA7S3iuD8Asw+i3uUoROxF6JLtKpXV2OE+Ixjia+BsoFxzCemtDdtfcGs+zW\n            4T23xdN71am/ntY0isvlSyx21jGMe2a27vYXDKZZvSFBcxgfZ0Nr0SWVf0KG7z6NJzGEHjPd+P+I\n            zijCa9s+Spbio402i22SiGOlUe5KoyV2cvz8FWAAOucDJuRJTqAAAAAASUVORK5CYII=" transform="matrix(1 0 0 1 13.001 13)">\n            </image>\n            <polygon id="disclosure_x5F_arrow" fill="#BFBFBF" points="41,35 35,41 41,41 "/>\n        </svg>\n    </div>\n</div>'}),define("text!appbar/CustomColorDialog.html",[],function(){return'<div class="skitch-custom-color-dialog" draggable="false" style="display: none">\n    <div id="picker"></div>\n</div>'}),define("text!appbar/SizeDialog.html",[],function(){return'<div class="skitch-size-dialog">\n    <div class="skitch-app-bar-button skitch-size-1-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <rect x="21" y="8" transform="matrix(0.7071 0.7071 -0.7071 0.7071 22 -9.1127)" fill="#231F20" width="2" height="28"/>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-size-2-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n            <rect x="20" y="8" transform="matrix(0.7071 0.7071 -0.7071 0.7071 22 -9.1127)" fill="#231F20" width="4" height="28"/>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-size-3-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n             <rect x="19" y="8" transform="matrix(0.7071 0.7071 -0.7071 0.7071 21.9999 -9.1124)" fill="#231F20" width="5.999" height="27.999"/>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-size-4-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n             <rect x="18" y="8.001" transform="matrix(0.7071 0.7071 -0.7071 0.7071 22.0005 -9.1125)" fill="#231F20" width="8.001" height="27.999"/>\n        </svg>\n    </div>\n    <div class="skitch-app-bar-button skitch-size-5-button" draggable="false">\n        <svg class="skitch-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="44px"\n             height="44px" viewBox="0 0 44 44" enable-background="new 0 0 44 44" xml:space="preserve">\n                <rect x="17" y="8.002" transform="matrix(0.7071 0.7071 -0.7071 0.7071 22.0007 -9.1124)" fill="#231F20" width="10" height="27.998"/>\n        </svg>\n    </div>\n</div>'
}),define("appbar/AppBarView",["require","util/Class","env/Settings","text!appbar/AppBar.html","text!appbar/ShapeDialog.html","text!appbar/PenDialog.html","text!appbar/StampDialog.html","text!appbar/ColorDialog.html","text!appbar/CustomColorDialog.html","text!appbar/SizeDialog.html","util/Include"],function(t){"use strict";function e(){this.dom=null,this.currentTool=null,this.currentShape="rectangle",this.currentPen="marker",this.currentStamp="stampAccept",this.currentColor="red",this.currentSize="size-3",this.registerEvents("toolSelected","sizeSelected","colorSelected","undoRequested","redoRequested","exportRequested","deleteRequested","menuSelected")}var n=t("util/Class"),i=t("env/Settings"),o=t("text!appbar/AppBar.html"),r=t("text!appbar/ShapeDialog.html"),s=t("text!appbar/PenDialog.html"),a=t("text!appbar/StampDialog.html"),l=t("text!appbar/ColorDialog.html"),c=t("text!appbar/CustomColorDialog.html"),h=t("text!appbar/SizeDialog.html"),u=t("util/Include");return e.prototype.initialize=function(){this.container||(this.container=document.body),u.CSS("appbar.css"),this.dom=$(o).get(0),this.stampDialogDom=$(a).get(0),this.shapeDialogDom=$(r).get(0),this.penDialogDom=$(s).get(0),this.colorDialogDom=$(l).get(0),this.customColorDialogDom=$(c).get(0),this.sizeDialogDom=$(h).get(0),$(this.dom).attr("touch-action","none"),$(this.stampDialogDom).attr("touch-action","none"),$(this.shapeDialogDom).attr("touch-action","none"),$(this.penDialogDom).attr("touch-action","none"),$(this.colorDialogDom).attr("touch-action","none"),$(this.sizeDialogDom).attr("touch-action","none"),$(this.container).append(this.dom),$(".skitch-app-bar").append(this.shapeDialogDom),$(".skitch-app-bar").append(this.penDialogDom),$(".skitch-app-bar").append(this.stampDialogDom),$(".skitch-app-bar").append(this.colorDialogDom),$(".skitch-app-bar").append(this.sizeDialogDom),$(".skitch-app-bar-hitarea").append(this.customColorDialogDom),$(".skitch-app-bar",this.dom).on(i.EVENTS.pointerup,this.onAppbarWhiteSpace.bind(this)),$(".skitch-app-bar-hitarea").on("mouseleave",this.onAppbarOut.bind(this)),$(".skitch-arrow-button",this.dom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"arrow")),$(".skitch-text-button",this.dom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"text")),$(".skitch-shape-button",this.dom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"shape")),$(".skitch-pen-button",this.dom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"pen")),$(".skitch-pixelate-button",this.dom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"pixelate")),$(".skitch-stamp-button",this.dom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"stamp")),$(".skitch-crop-button",this.dom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"crop")),$(".skitch-color-button",this.dom).on(i.EVENTS.pointerup,this.onColorButtonClicked.bind(this)),$(".skitch-size-button",this.dom).on(i.EVENTS.pointerup,this.onSizeButtonClicked.bind(this)),$(".skitch-rectangle-button",this.shapeDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"rectangle")),$(".skitch-line-button",this.shapeDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"line")),$(".skitch-ellipse-button",this.shapeDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"ellipse")),$(".skitch-roundedRectangle-button",this.shapeDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"roundedRectangle")),$(".skitch-marker-button",this.penDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"marker")),$(".skitch-highlighter-button",this.penDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"highlighter")),$(".skitch-stampAccept-button",this.stampDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"stampAccept")),$(".skitch-stampExclaim-button",this.stampDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"stampExclaim")),$(".skitch-stampQuestion-button",this.stampDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"stampQuestion")),$(".skitch-stampReject-button",this.stampDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"stampReject")),$(".skitch-stampPerfect-button",this.stampDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"stampPerfect")),$(".skitch-red-button",this.colorDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"color-red")),$(".skitch-orange-button",this.colorDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"color-orange")),$(".skitch-blue-button",this.colorDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"color-blue")),$(".skitch-green-button",this.colorDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"color-green")),$(".skitch-pink-button",this.colorDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"color-pink")),$(".skitch-yellow-button",this.colorDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"color-yellow")),$(".skitch-white-button",this.colorDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"color-white")),$(".skitch-black-button",this.colorDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"color-black")),$(".skitch-custom-color-button",this.colorDialogDom).on(i.EVENTS.pointerup,this.onCustomColorClicked.bind(this)),$(".skitch-size-1-button",this.sizeDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"size-1")),$(".skitch-size-2-button",this.sizeDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"size-2")),$(".skitch-size-3-button",this.sizeDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"size-3")),$(".skitch-size-4-button",this.sizeDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"size-4")),$(".skitch-size-5-button",this.sizeDialogDom).on(i.EVENTS.pointerup,this.onButtonClicked.bind(this,"size-5")),this.setResourceStrings({BUTTON_TEXT_ARROW:"Arrow",BUTTON_TEXT_TEXT:"Text",BUTTON_TEXT_SHAPE_RECTANGLE:"Rectangle",BUTTON_TEXT_SHAPE_ROUNDED_RECTANGLE:"Rounded",BUTTON_TEXT_SHAPE_ELLIPSE:"Ellipse",BUTTON_TEXT_SHAPE_LINE:"Line",BUTTON_TEXT_PEN_MARKER:"Marker",BUTTON_TEXT_PEN_HIGHLIGHTER:"Highlighter",BUTTON_TEXT_STYLE:"Style",BUTTON_TEXT_PIXELATE:"Pixelate",BUTTON_TEXT_CROP:"Crop",BUTTON_TEXT_STAMP:"Stamp"})},e.prototype.onCustomColorClicked=function(){var t=this;t.colorPicker.activeColor?t.colorPicker.callback.call(t,t.colorPicker.activeColor):(t.colorPicker.setColor(t.currentColor),t.colorPicker.drawColorPicker()),$(".skitch-custom-color-dialog").fadeIn(150,function(){$(document.body).on(i.EVENTS.pointerdown,function t(e){-1==$(e.target).parents().index($(".skitch-custom-color-dialog"))&&$(".skitch-custom-color-dialog").is(":visible")&&e.target!==$(".skitch-custom-color-dialog").get(0)&&($(".skitch-custom-color-dialog").hide(),$(document.body).off(i.EVENTS.pointerdown,t))})}),this.resetAppbarSlide()},e.prototype.onAppbarWhiteSpace=function(t){t.target===t.currentTarget&&this.resetAppbarSlide()},e.prototype.onAppbarOut=function(){this.resetAppbarSlide()},e.prototype.resetAppbarSlide=function(t){1!=t&&($(".skitch-shape-dialog").removeClass("slide-left").addClass("slide-right"),$(".skitch-pen-dialog").removeClass("slide-left").addClass("slide-right"),$(".skitch-stamp-dialog").removeClass("slide-left").addClass("slide-right"),$(".skitch-color-dialog").removeClass("slide-left").addClass("slide-right"),$(".skitch-size-dialog").removeClass("slide-left").addClass("slide-right"),$(".skitch-app-bar-main").removeClass("slide-left").addClass("slide-right"))},e.prototype.unselectAllButtons=function(){$(".skitch-app-bar-button").removeClass("skitch-selected")},e.prototype.onButtonClicked=function(t,e){if(this.unselectAllButtons(),"arrow"==t)this.fire("toolSelected",{tool:t}),$(".skitch-arrow-button").addClass("skitch-selected");else if("text"==t)this.fire("toolSelected",{tool:t}),$(".skitch-text-button").addClass("skitch-selected");else if("shape"==t)this.menuSelected(t),this.fire("menuSelected",t),this.fire("toolSelected",{tool:this.currentShape}),this.onButtonClicked(this.currentShape,!0),$(".skitch-"+this.currentShape+"-button").addClass("skitch-selected");else if("rectangle"==t||"line"==t||"ellipse"==t||"roundedRectangle"==t)this.resetAppbarSlide(e),$(".skitch-shape-button").addClass("skitch-selected"),this.fire("toolSelected",{tool:t}),this.currentShape=t,$(".skitch-shape-button .skitch-icon").hide(),"rectangle"==t?($(".skitch-shape-button .skitch-icon.skitch-rectangle").show(),$(".skitch-shape-button .skitch-icon-text",this.dom).html(this.resources.BUTTON_TEXT_SHAPE_RECTANGLE)):"roundedRectangle"==t?($(".skitch-shape-button .skitch-icon.skitch-roundedRectangle").show(),$(".skitch-shape-button .skitch-icon-text",this.dom).html(this.resources.BUTTON_TEXT_SHAPE_ROUNDED_RECTANGLE)):"line"==t?($(".skitch-shape-button .skitch-icon.skitch-line").show(),$(".skitch-shape-button .skitch-icon-text",this.dom).html(this.resources.BUTTON_TEXT_SHAPE_LINE)):"ellipse"==t&&($(".skitch-shape-button .skitch-icon.skitch-ellipse").show(),$(".skitch-shape-button .skitch-icon-text",this.dom).html(this.resources.BUTTON_TEXT_SHAPE_ELLIPSE));else if("pen"==t)this.menuSelected(t),this.fire("menuSelected",t),this.fire("toolSelected",{tool:this.currentPen}),this.onButtonClicked(this.currentPen,!0),$(".skitch-"+this.currentPen+"-button").addClass("skitch-selected");else if("marker"==t||"highlighter"==t)this.resetAppbarSlide(e),$(".skitch-pen-button").addClass("skitch-selected"),this.fire("toolSelected",{tool:t}),this.currentPen=t,$(".skitch-pen-button .skitch-icon").hide(),"marker"==t?($(".skitch-pen-button .skitch-icon.skitch-marker").show(),$(".skitch-pen-button .skitch-icon-text",this.dom).html(this.resources.BUTTON_TEXT_PEN_MARKER)):"highlighter"==t&&($(".skitch-pen-button .skitch-icon.skitch-highlighter").show(),$(".skitch-pen-button .skitch-icon-text",this.dom).html(this.resources.BUTTON_TEXT_PEN_HIGHLIGHTER));else if("pixelate"==t)this.fire("toolSelected",{tool:t}),$(".skitch-pixelate-button").addClass("skitch-selected");else if("stamp"==t)this.menuSelected(t),this.fire("menuSelected",t),this.fire("toolSelected",{tool:this.currentStamp}),this.onButtonClicked(this.currentStamp,!0),$(".skitch-"+this.currentStamp+"-button").addClass("skitch-selected");else if("stampAccept"==t||"stampExclaim"==t||"stampQuestion"==t||"stampReject"==t||"stampPerfect"==t)this.resetAppbarSlide(e),$(".skitch-stamp-button").addClass("skitch-selected"),this.fire("toolSelected",{tool:t}),this.currentStamp=t,$(".skitch-stamp-button .skitch-icon").hide(),"stampAccept"==t?$(".skitch-stamp-button .skitch-icon.skitchAccept").show():"stampExclaim"==t?$(".skitch-stamp-button .skitch-icon.skitchExclaim").show():"stampQuestion"==t?$(".skitch-stamp-button .skitch-icon.skitchQuestion").show():"stampReject"==t?$(".skitch-stamp-button .skitch-icon.skitchReject").show():"stampPerfect"==t&&$(".skitch-stamp-button .skitch-icon.skitchPerfect").show();else if("crop"==t)this.fire("toolSelected",{tool:t}),$(".skitch-crop-button").addClass("skitch-selected");else if("color"==t.split("-").shift()){var n=t.split("-").pop();this.resetAppbarSlide(e),this.fire("colorSelected",{color:n}),this.fire("menuSelected",n),this.onButtonClicked(this.currentTool)}else if("size"==t.split("-").shift()){var i=t;this.resetAppbarSlide(e),this.currentSize=i,this.fire("sizeSelected",{size:i}),this.fire("menuSelected",i),this.onButtonClicked(this.currentTool)}},e.prototype.onColorButtonClicked=function(){$(".skitch-color-dialog").removeClass("slide-right").addClass("slide-left"),$(".skitch-app-bar-main").removeClass("slide-right").addClass("slide-left"),this.fire("menuSelected","colorMenu")},e.prototype.onSizeButtonClicked=function(){$(".skitch-size-dialog").removeClass("slide-right").addClass("slide-left"),$(".skitch-app-bar-main").removeClass("slide-right").addClass("slide-left"),$(".skitch-"+this.currentSize+"-button").addClass("skitch-selected"),this.fire("menuSelected","sizeMenu")},e.prototype.menuSelected=function(t){$(".skitch-app-bar-main").removeClass("slide-right").addClass("slide-left"),$(".skitch-"+t+"-dialog").removeClass("slide-right").addClass("slide-left")},e.prototype.setSize=function(t){t="skitch-"+t.toLowerCase(),$(".skitch-size-button .skitch-icon").hide(),$(".skitch-size-button .skitch-icon."+t).show()},e.prototype.setColor=function(t){if("#"===t.substr(0,1)||"rgb"===t.substr(0,3)||"rgba"===t.substr(0,4)){var e=t;t="custom"}t="skitch-"+t.toLowerCase(),$(".skitch-color-button",this.dom).removeClass("skitch-red"),$(".skitch-color-button",this.dom).removeClass("skitch-orange"),$(".skitch-color-button",this.dom).removeClass("skitch-yellow"),$(".skitch-color-button",this.dom).removeClass("skitch-green"),$(".skitch-color-button",this.dom).removeClass("skitch-blue"),$(".skitch-color-button",this.dom).removeClass("skitch-pink"),$(".skitch-color-button",this.dom).removeClass("skitch-white"),$(".skitch-color-button",this.dom).removeClass("skitch-black"),$(".skitch-color-button",this.dom).removeClass("skitch-custom"),$(".skitch-color-button",this.dom).addClass(t),$(".skitch-color-button .skitch-icon :nth-child(2)").get(0).style.fill="skitch-custom"===t?e:""},e.prototype.setResourceStrings=function(t){this.resources=t,$(".skitch-undo-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_UNDO),$(".skitch-redo-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_REDO),$(".skitch-arrow-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_ARROW),$(".skitch-text-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_TEXT),$(".skitch-shape-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_SHAPE_RECTANGLE),$(".skitch-pen-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_PEN_MARKER),$(".skitch-color-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_STYLE),$(".skitch-size-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_STYLE),$(".skitch-pixelate-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_PIXELATE),$(".skitch-crop-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_CROP),$(".skitch-stamp-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_STAMP),$(".skitch-export-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_EXPORT),$(".skitch-info-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_INFO),$(".skitch-trash-button .skitch-icon-text",this.dom).html(t.BUTTON_TEXT_TRASH)},e.prototype.getDom=function(){return this.dom},e.prototype.destroy=function(){$(this.dom).remove(),this.dom=null},e=n.define(e)}),define("API",["require","surface/SurfaceAPI","appbar/AppBarController","appbar/AppBarView","env/Settings","async/Promise"],function(t){var e=t("surface/SurfaceAPI"),n=t("appbar/AppBarController"),i=t("appbar/AppBarView"),o=t("env/Settings"),r=t("async/Promise"),s={};return s.createSurface=function(t){t||(t={});var n,i=640,s=480,a=new e;if(a.disableRender(),a.setAutoResize(!1),t.autoresize===!0&&a.setAutoResize(!0),t.fullscreen&&(a.setAutoResize(!0),a.setPosition(0,0),i=$(window).width(),s=$(window).height()),(t.allowZoom===!1||t.allowZoom===!0)&&a.setAllowZoom(t.allowZoom),t.backgroundColor&&a.setBackgroundColor(t.backgroundColor),void 0!==t.margin&&a.setMargin(t.margin),t.top||t.left){var l=t.top||0,c=t.left||0;a.setPosition(c,l)}return(t.width||t.height)&&(i=t.width||0,s=t.height||0),t.enableKeyboardShortcuts===!0&&(o.ENABLE_KEY_HANDLERS=!0),t.url?n=a.loadFromURL(t.url):t.file?n=a.loadFromFile(t.file):t.image?n=a.loadFromImage(t.image):t.base64?n=a.loadFromBase64(t.image):t.overlay?(a.setBackgroundColor("transparent"),a.setAllowZoom(!1)):(a.setMargin(o.SKITCH_MARGIN),n=(new r).resolve()),n.done(function(){a.enableRender(),a.surface.ready=!0,t.success&&t.success(a)}).fail(function(e){t.fail&&t.fail(a,e)}),a.setSize(i,s),a},s.createAppBar=function(t){var e=new n({view:new i({container:t.container}),surface:t.surface});return e},s}),require.config({baseUrl:"../../modules",paths:{API:"../sdk/API",appbar:"../sdk/appbar",css:"../sdk/css",pdfeditor:"../sdk/pdfeditor",surface:"../sdk/surface",text:"../lib/require/require-text"}}),require(["util/Include","API"],function(t,e){t.CSS("toast-clipper.css"),t.CSS("cropbar-clipper.css"),window.Skitch=e}),define("../app/clipper/bootstrap",function(){});