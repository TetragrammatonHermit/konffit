window.NAME=SHORTCUT_RELEASE_NOTES;var nameValue={},valueName={},charCodeCache={};function closeWindow(){port.postMessage({name:"close"})}
function msgHandlerConfig(a,d,e){/china/i.test(a.bootstrapInfo.name)&&document.body.classList.add("china");nameValue=a.options;for(var c in a.options)valueName[a.options[c]]=c;new ShortcutSetter(document.getElementById("textbox"),a.options.startWebClipperShortcut,"releaseNotes",function(a,b){if(valueName[b])return"startWebClipperShortcut"===valueName[b]?!1:{conflict:!0};if(/(\||^)27(\||$)/.test(b))return{noEsc:!0};Browser.sendToExtension({name:"main_setOption",options:{startWebClipperShortcut:b}});
Browser.sendToExtension({name:"bounceToAll",message:{name:"updateKeyboardShortcut",oldShortcut:nameValue.startWebClipperShortcut,shortcut:b}});delete valueName[nameValue.startWebClipperShortcut];valueName[b]="startWebClipperShortcut";nameValue.startWebClipperShortcut=b;return!1},null,function(){},function(){return!1},function(a){return charCodeCache[a]})}
function msgHandlerReceivePersistentValue(a,d,e){"charCodeCache"===a.key&&(charCodeCache=a.value||{},Browser.sendToExtension({name:"main_getConfig",options:{startWebClipperShortcut:!1,closeWebClipperShortcut:!1,previewArticleShortcut:!1,previewFullPageShortcut:!1,previewUrlShortcut:!1,selectionModeShortcut:!1,takeScreenshotShortcut:!1,clearlyShortcut:!1,pdfShortcut:!1,emailShortcut:!1,expandArticleShortcut:!1,contractArticleShortcut:!1,moveArticleUpShortcut:!1,moveArticleDownShortcut:!1,selectNotebookShortcut:!1,
addTagsShortcut:!1,saveShortcut:!1,selectAllMarkupShortcut:!1,arrowShortcut:!1,textShortcut:!1,rectangleShortcut:!1,roundedRectangleShortcut:!1,ellipseShortcut:!1,lineShortcut:!1,markerShortcut:!1,highlighterShortcut:!1,stampShortcut:!1,pixelateShortcut:!1,cropShortcut:!1,zoomInShortcut:!1,zoomOutShortcut:!1,zoomToFitShortcut:!1,zoomToOriginalShortcut:!1,undoShortcut:!1,redoShortcut:!1},bootstrapInfo:{name:null},returnName:"releaseNotesConfig"}))}
window.addEventListener("DOMContentLoaded",function(){GlobalUtils.localize(document.body);document.getElementById("close").addEventListener("click",closeWindow);document.getElementById("body").innerHTML=Browser.i18n.getMessage("shortcutReleaseNotesBody",Browser.extension.getURL("options.html")+"#shortcuts");document.getElementById("button").addEventListener("click",closeWindow);startSecretGeneration();Browser.sendToExtension({name:"getPersistentValue",key:"charCodeCache"})});
Browser.addMessageHandlers({receivePersistentValue:msgHandlerReceivePersistentValue,releaseNotesConfig:msgHandlerConfig});
