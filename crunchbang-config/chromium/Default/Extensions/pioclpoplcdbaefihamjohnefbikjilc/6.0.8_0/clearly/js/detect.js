function initClearlyComponent__detect(w){if(!w)return!1;$D=w;switch(!0){case !$D.callbacks:case !$D.callbacks.finished:case !$D.window:case !$D.document:case !$D.document.body:case !$D.jQuery:return $D.debug&&(console.log(!$D.callbacks),console.log(!$D.callbacks.finished),console.log(!$D.window),console.log(!$D.document),console.log(!$D.document.body),console.log(!$D.jQuery)),!1}$=$D.jQuery;$D.$window=$($D.window);$D.$document=$($D.document);$D.parseOptions={_elements_ignore:"|button|input|select|textarea|optgroup|command|datalist|--|frame|frameset|noframes|--|style|link|script|noscript|--|canvas|applet|map|--|marquee|area|base|",
_elements_ignore_tag:"|form|fieldset|details|dir|--|center|font|span|",_elements_container:"|body|--|article|section|--|div|--|td|--|li|--|dd|dt|",_elements_self_closing:"|br|hr|--|img|--|col|--|source|--|embed|param|--|iframe|",_elements_visible:"|article|section|--|ul|ol|li|dd|--|table|tr|td|--|div|--|p|--|h1|h2|h3|h4|h5|h6|--|span|",_elements_too_much_content:"|b|i|em|strong|--|h1|h2|h3|h4|h5|--|td|",_elements_link_density:"|div|--|table|ul|ol|--|section|aside|header|",_elements_floating:"|div|--|table|",
_elements_above_target_ignore:"|br|--|ul|ol|dl|--|table|",_unskippable_attribute:"clearly__unskippable_element",_unskippable_attribute_value:"yes",_use_document_title_attribute:"clearly__use_document_title_as_article_title",_use_document_title_attribute_value:"yes",_elements_keep_attributes:{a:["href","title","name"],img:["src","width","height","alt","title"],video:"src width height poster audio preload autoplay loop controls".split(" "),audio:["src","preload","autoplay","loop","controls"],source:["src",
"type"],object:"data type width height classid codebase codetype".split(" "),param:["name","value"],embed:"src type width height flashvars allowscriptaccess allowfullscreen bgcolor".split(" "),iframe:["src","width","height","frameborder","scrolling"],td:["colspan","rowspan"],th:["colspan","rowspan"]},_skip_link_from_domain:"doubleclick.net fastclick.net adbrite.com adbureau.net admob.com bannersxchange.com buysellads.com impact-ad.jp atdmt.com advertising.com serving-sys.com itmedia.jp microad.jp adplan-ds.com".split(" "),
_skip_image_from_domain:"googlesyndication.com fastclick.net .2mdn.net de17a.com content.aimatch.com bannersxchange.com buysellads.com atdmt.com advertising.com serving-sys.com impact-ad.jp itmedia.jp microad.jp adplan-ds.com".split(" "),_keep_video_from_domain:"youtube.com youtube-nocookie.com vimeo.com hulu.com flickr.com yahoo.com newsnetz.ch".split(" ")};$D.debug=$D.debug||!1;$D.debugRemembered={};$D.debugTimers=[];if($D.debug){switch(!0){case !(!$D.window.console||!$D.window.console.log):$D.writeLog=
function(a){$D.window.console.log(a)};break;case !(!$D.window.opera||!$D.window.opera.postError):$D.writeLog=function(a){$D.window.opera.postError(a)};break;default:$D.writeLog=function(a){}}$D.log=function(){if($D.debug){for(var a=0,e=arguments.length;a<e;a++)$D.writeLog(arguments[a]);$D.writeLog("-----------------------------------------")}};$D.debugRemember=function(a,e){$D.debugRemembered[a]=e};$D.debugOutline=function(a,e,b){var c="#ff5500",d="rgba(255, 85, 0, 0.5)";switch(!0){case !$D.debug:case 1!==
a.nodeType:case !(""<a.tagName):case "onject"==a.tagName.toLowerCase():case "embed"==a.tagName.toLowerCase():return}switch(!0){case "target"==e&&"first"==b:c="#00cc00";d="rgba(0, 255, 0, 0.5)";break;case "target"==e&&"second"==b:c="#0000cc";d="rgba(0, 0, 255, 0.5)";break;case "target"==e&&"next-page"==b:c="#FF80C0";d="rgba(255, 128, 192, 0.5)";break;case "target"==e&&"add-above"==b:c="#804000";d="rgba(128, 64, 0, 0.5)";break;case "clean-before"==e&&"floating"==b:c="#808080";d="rgba(128, 128, 128, 0.5)";
break;case "clean-after"==e&&"missing-density"==b:c="#C0C0C0";d="rgba(192, 192, 192, 0.5)";break;case "clean-after"==e||"clean-before"==e:c="#000000",d="rgba(0, 0, 0, 0.5)"}$(a).attr("readable__outline",e+": "+b);$(a).css({outline:"5px solid "+c,"background-color":""+d})};$D.debugTimerStart=function(a){$D.debugTimers.push({name:a,start:(new Date).getTime()})};$D.debugTimerEnd=function(){var a=$D.debugTimers.pop(),e=(new Date).getTime()-a.start;$D.log("TIMER / "+a.name+": "+e);return e}}else $D.writeLog=
function(){return!1},$D.log=function(){return!1},$D.debugRemember=function(){return!1},$D.debugOutline=function(){return!1},$D.debugTimerStart=function(){return!1},$D.debugTimerEnd=function(){return!1};$D.language="general";$D.textForlanguageDetection=$D.document.title;switch(!0){case null!=$D.textForlanguageDetection.match(/([\u3000])/gi):case null!=$D.textForlanguageDetection.match(/([\u3001])/gi):case null!=$D.textForlanguageDetection.match(/([\u3002])/gi):case null!=$D.textForlanguageDetection.match(/([\u301C])/gi):$D.language=
"cjk"}$D.rtl=!1;$D.maybeRTL=!1;$D.makeRTL=function(){$D.rtl=!0};$D.makeNotRTL=function(){$D.rtl=!1};(function(){$D.$document.find("html, body").each(function(a,e){switch(!0){case "rtl"==$(e).attr("dir"):case "rtl"==$(e).css("direction"):case "he"==$(e).attr("lang"):case "he-il"==$(e).attr("lang"):case "ar"==$(e).attr("lang"):case "ur"==$(e).attr("lang"):return $D.makeRTL(),!1}});!$D.rtl&&0<$D.$document.find("div[dir='rtl'], table[dir='rtl'], td[dir='rtl']").length&&($D.maybeRTL=!0)})();$D.measureText__getTextLength=
function(a){a=a.replace(/[\s\n\r]+/gi,"");return a.length};$D.measureText__getWordCount=function(a){a=a.replace(/[\s\n\r]+/gi," ");a=a.replace(/([.,?!:;()\[\]'""-])/gi," $1 ");a=a.replace(/([\u3000])/gi,"[=words(1)]");a=a.replace(/([\u3001])/gi,"[=words(2)]");a=a.replace(/([\u3002])/gi,"[=words(4)]");a=a.replace(/([\u301C])/gi,"[=words(2)]");a=a.replace(/([\u2026|\u2025])/gi,"[=words(2)]");a=a.replace(/([\u30FB\uFF65])/gi,"[=words(1)]");a=a.replace(/([\u300C\u300D])/gi,"[=words(1)]");a=a.replace(/([\u300E\u300F])/gi,
"[=words(1)]");a=a.replace(/([\u3014\u3015])/gi,"[=words(1)]");a=a.replace(/([\u3008\u3009])/gi,"[=words(1)]");a=a.replace(/([\u300A\u300B])/gi,"[=words(1)]");a=a.replace(/([\u3010\u3011])/gi,"[=words(1)]");a=a.replace(/([\u3016\u3017])/gi,"[=words(1)]");a=a.replace(/([\u3018\u3019])/gi,"[=words(1)]");a=a.replace(/([\u301A\u301B])/gi,"[=words(1)]");a=a.replace(/([\u301D\u301E\u301F])/gi,"[=words(1)]");a=a.replace(/([\u30A0])/gi,"[=words(1)]");var e=0,b=a.match(/([^\s\d]{3,})/gi),e=e+(null!=b?b.length:
0);a.replace(/\[=words\((\d)\)\]/,function(a,b){e+=5*parseInt(b)});return e};$D.levenshteinDistance=function(a,e){var b=a.length,c=e.length,d=0,k=0,l=[];if(0===Math.min(b,c))return Math.max(b,c);for(d=0;d<=b;d++)l[d]=[],l[d][0]=d;for(k=0;k<=c;k++)l[0][k]=k;for(d=1;d<=b;d++)for(k=1;k<=c;k++)l[d][k]=Math.min(l[d-1][k]+1,l[d][k-1]+1,l[d-1][k-1]+(a.charAt(d-1)===e.charAt(k-1)?0:1));return l[b][c]};$D.nextPage__getFirstFragment=function(a){a=a.replace(/<[^>]+?>/gi,"");a=a.replace(/\s+/gi," ");return a.substr(0,
2E3)};$D.isNodeHidden=function(a,e){switch(!0){case 0<a.offsetWidth:case 0<a.offsetHeight:break;default:switch(!0){case 0<a.offsetLeft:case 0<a.offsetTop:break;default:if("div"==e&&"inline"==(a.style.display||$.css(a,"display")))break;return!0}}return!1};$D.getContent__computePointsForCandidate__do=function(a,e,b,c){a*=c[0];var d=c[0]-a;_points_return=0>b?a:0+a+d*Math.pow(b,e);c.unshift(_points_return)};$D.getContent__computeDetailsForCandidate__first=function(a,e){var b={};if(a._is__bad)return b;
b._count__lines_of_65_characters=a._length__plain_text/65;b._count__paragraphs_of_3_lines=b._count__lines_of_65_characters/3;b._count__paragraphs_of_5_lines=b._count__lines_of_65_characters/5;b._count__paragraphs_of_50_words=a._count__plain_words/50;b._count__paragraphs_of_80_words=a._count__plain_words/80;b._ratio__length__plain_text_to_total_plain_text=a._length__plain_text/e._length__plain_text;b._ratio__count__plain_words_to_total_plain_words=a._count__plain_words/e._count__plain_words;b._ratio__length__links_text_to_plain_text=
a._length__links_text/a._length__plain_text;b._ratio__count__links_words_to_plain_words=a._count__links_words/a._count__plain_words;b._ratio__length__links_text_to_all_text=a._length__links_text/a._length__all_text;b._ratio__count__links_words_to_all_words=a._count__links_words/a._count__all_words;b._ratio__length__links_text_to_total_links_text=a._length__links_text/(e._length__links_text+1);b._ratio__count__links_words_to_total_links_words=a._count__links_words/(e._count__links_words+1);b._ratio__count__links_to_total_links=
a._count__links/(e._count__links+1);b._ratio__count__links_to_plain_words=2*a._count__links/a._count__plain_words;var c=Math.max(2,Math.ceil(0.5*a._count__above_candidates)),d=(0+1*a._count__above_plain_words+a._count__above_plain_words/c)/2;b._ratio__length__above_plain_text_to_total_plain_text=(0+1*a._length__above_plain_text+a._length__above_plain_text/c)/2/e._length__plain_text;b._ratio__count__above_plain_words_to_total_plain_words=d/e._count__plain_words;b._ratio__count__candidates_to_total_candidates=
a._count__candidates/(e._count__candidates+1);b._ratio__count__containers_to_total_containers=a._count__containers/(e._count__containers+1);return b};$D.getContent__computePointsForCandidate__first=function(a,e){var b=a.__candidate_details,c=[],d=250<e._length__plain_text/65;if(a._is__bad)return[0];c.unshift(1E3*(0+b._count__paragraphs_of_3_lines+1.5*b._count__paragraphs_of_5_lines+b._count__paragraphs_of_50_words+1.5*b._count__paragraphs_of_80_words+3*a._count__images_large-0.5*(a._count__images_skip+
a._count__images_small)));if(0>c[0])return[0];var k=Math.max(5,Math.ceil(0.25*a._count__pieces)),l=Math.max(5,Math.ceil(0.25*a._count__candidates)),f=Math.max(10,Math.ceil(0.25*a._count__containers));c.unshift((0+3*c[0]+c[0]/k+c[0]/l+c[0]/f)/6);$D.getContent__computePointsForCandidate__do(0.1,2,1-(1-b._ratio__length__plain_text_to_total_plain_text),c);$D.getContent__computePointsForCandidate__do(0.1,2,1-(1-b._ratio__count__plain_words_to_total_plain_words),c);d&&($D.getContent__computePointsForCandidate__do(0.1,
4,1-(1-b._ratio__length__plain_text_to_total_plain_text),c),$D.getContent__computePointsForCandidate__do(0.1,4,1-(1-b._ratio__count__plain_words_to_total_plain_words),c));$D.getContent__computePointsForCandidate__do(0.1,5,1-b._ratio__length__above_plain_text_to_total_plain_text,c);$D.getContent__computePointsForCandidate__do(0.1,5,1-b._ratio__count__above_plain_words_to_total_plain_words,c);d&&($D.getContent__computePointsForCandidate__do(0.1,10,1-b._ratio__length__above_plain_text_to_total_plain_text,
c),$D.getContent__computePointsForCandidate__do(0.1,10,1-b._ratio__count__above_plain_words_to_total_plain_words,c));$D.getContent__computePointsForCandidate__do(0.75,1,1-b._ratio__length__links_text_to_total_links_text,c);$D.getContent__computePointsForCandidate__do(0.75,1,1-b._ratio__count__links_words_to_total_links_words,c);$D.getContent__computePointsForCandidate__do(0.75,1,1-b._ratio__count__links_to_total_links,c);d="cjk"==$D.language?0.75:0.5;$D.getContent__computePointsForCandidate__do(d,
1,1-b._ratio__length__links_text_to_plain_text,c);$D.getContent__computePointsForCandidate__do(d,1,1-b._ratio__count__links_words_to_plain_words,c);$D.getContent__computePointsForCandidate__do(d,1,1-b._ratio__length__links_text_to_all_text,c);$D.getContent__computePointsForCandidate__do(d,1,1-b._ratio__count__links_words_to_all_words,c);$D.getContent__computePointsForCandidate__do(d,1,1-b._ratio__count__links_to_plain_words,c);$D.getContent__computePointsForCandidate__do(0.75,1,1-b._ratio__count__candidates_to_total_candidates,
c);$D.getContent__computePointsForCandidate__do(0.75,1,1-b._ratio__count__containers_to_total_containers,c);$D.getContent__computePointsForCandidate__do(0.75,1,1-b._ratio__count__pieces_to_total_pieces,c);return c};$D.getContent__processCandidates__first=function(a){a.sort(function(a,b){switch(!0){case a.__index<b.__index:return-1;case a.__index>b.__index:return 1;default:return 0}});var e=a[0];$D.debug&&$D.log("should be body",e,e.__node);for(var b=0,c=a.length;b<c;b++){for(var d=0,k=[],l=b,f=a.length;l<
f;l++)0<a[l]._count__candidates||!$.contains(a[b].__node,a[l].__node)||($D.debug&&k.push(a[l]),d++);a[b].__candidate_details=$D.getContent__computeDetailsForCandidate__first(a[b],e);a[b]._count__pieces=d;a[b]._array__pieces=k;a[b].__candidate_details._ratio__count__pieces_to_total_pieces=d/(a[0]._count__pieces+1);a[b].__points_history=$D.getContent__computePointsForCandidate__first(a[b],e);a[b].__points=a[b].__points_history[0]}a.sort(function(a,b){switch(!0){case a.__points>b.__points:return-1;case a.__points<
b.__points:return 1;default:return 0}});return a};$D.getContent__computePointsForCandidate__second=function(a,e){var b=a.__candidate_details,c=a.__candidate_details_second,d=[];if(a._is__bad)return[0];d.unshift(a.__points_history[a.__points_history.length-1]);var k=Math.max(5,Math.ceil(0.25*a._count__pieces)),l=Math.max(5,Math.ceil(0.25*a._count__candidates)),f=Math.max(10,Math.ceil(0.25*a._count__containers));d.unshift((0+3*d[0]+2*(d[0]/k)+2*(d[0]/l)+2*(d[0]/f))/9);$D.getContent__computePointsForCandidate__do(0.5,
1,1-(1-c._ratio__length__plain_text_to_total_plain_text),d);$D.getContent__computePointsForCandidate__do(0.5,1,1-(1-c._ratio__count__plain_words_to_total_plain_words),d);k="cjk"==$D.language?0.5:0.1;$D.getContent__computePointsForCandidate__do(k,1,1-c._ratio__length__above_plain_text_to_total_plain_text,d);$D.getContent__computePointsForCandidate__do(k,1,1-c._ratio__count__above_plain_words_to_total_plain_words,d);$D.getContent__computePointsForCandidate__do(k,1,1-c._ratio__length__above_plain_text_to_plain_text,
d);$D.getContent__computePointsForCandidate__do(k,1,1-c._ratio__count__above_plain_words_to_plain_words,d);$D.getContent__computePointsForCandidate__do(0.75,1,1-c._ratio__count__links_to_total_links,d);$D.getContent__computePointsForCandidate__do(0.75,1,1-c._ratio__length__links_text_to_total_links_text,d);$D.getContent__computePointsForCandidate__do(0.75,1,1-c._ratio__count__links_words_to_total_links_words,d);k="cjk"==$D.language?0.75:0.5;$D.getContent__computePointsForCandidate__do(k,1,1-b._ratio__length__links_text_to_plain_text,
d);$D.getContent__computePointsForCandidate__do(k,1,1-b._ratio__count__links_words_to_plain_words,d);$D.getContent__computePointsForCandidate__do(k,1,1-c._ratio__length__links_text_to_all_text,d);$D.getContent__computePointsForCandidate__do(k,1,1-c._ratio__count__links_words_to_all_words,d);$D.getContent__computePointsForCandidate__do(k,1,1-c._ratio__count__links_to_plain_words,d);$D.getContent__computePointsForCandidate__do(0.1,2,1-c._ratio__count__candidates_to_total_candidates,d);$D.getContent__computePointsForCandidate__do(0.1,
2,1-c._ratio__count__containers_to_total_containers,d);$D.getContent__computePointsForCandidate__do(0.1,2,1-c._ratio__count__pieces_to_total_pieces,d);return d};$D.getContent__computeDetailsForCandidate__second=function(a,e){var b={};if(a._is__bad)return b;b._ratio__length__plain_text_to_total_plain_text=a._length__plain_text/e._length__plain_text;b._ratio__count__plain_words_to_total_plain_words=a._count__plain_words/e._count__plain_words;b._ratio__length__links_text_to_all_text=a._length__links_text/
a._length__all_text;b._ratio__count__links_words_to_all_words=a._count__links_words/a._count__all_words;b._ratio__length__links_text_to_total_links_text=a._length__links_text/(e._length__links_text+1);b._ratio__count__links_words_to_total_links_words=a._count__links_words/(e._count__links_words+1);b._ratio__count__links_to_total_links=a._count__links/(e._count__links+1);b._ratio__count__links_to_plain_words=2*a._count__links/a._count__plain_words;var c=Math.max(2,Math.ceil(0.5*(a._count__above_candidates-
e._count__above_candidates))),d=(0+1*a.__second_length__above_plain_text+a.__second_length__above_plain_text/c)/2,c=(0+1*a.__second_count__above_plain_words+a.__second_count__above_plain_words/c)/2;b._ratio__length__above_plain_text_to_total_plain_text=d/e._length__plain_text;b._ratio__count__above_plain_words_to_total_plain_words=c/e._count__plain_words;b._ratio__length__above_plain_text_to_plain_text=d/a._length__plain_text;b._ratio__count__above_plain_words_to_plain_words=c/a._count__plain_words;
b._ratio__count__candidates_to_total_candidates=Math.max(0,a._count__candidates-0.25*e._count__candidates)/(e._count__candidates+1);b._ratio__count__containers_to_total_containers=Math.max(0,a._count__containers-0.25*e._count__containers)/(e._count__containers+1);b._ratio__count__pieces_to_total_pieces=Math.max(0,a._count__pieces-0.25*e._count__pieces)/(e._count__pieces+1);return b};$D.getContent__processCandidates__second=function(a){var e=a[0];a=$.map(a,function(a,b){switch(!0){case !(0<b):case !$.contains(e.__node,
a.__node):return null;default:return a}});a.unshift(e);a.sort(function(a,b){switch(!0){case a.__index<b.__index:return-1;case a.__index>b.__index:return 1;default:return 0}});for(var b=0,c=a.length;b<c;b++)a[b].__second_length__above_plain_text=a[b]._length__above_plain_text-e._length__above_plain_text,a[b].__second_count__above_plain_words=a[b]._count__above_plain_words-e._count__above_plain_words,a[b].__candidate_details_second=$D.getContent__computeDetailsForCandidate__second(a[b],e),a[b].__points_history_second=
$D.getContent__computePointsForCandidate__second(a[b],e),a[b].__points_second=a[b].__points_history_second[0];a.sort(function(a,b){switch(!0){case a.__points_second>b.__points_second:return-1;case a.__points_second<b.__points_second:return 1;default:return 0}});return a};$D.getContent__computePointsForCandidate__third=function(a,e){var b=a.__candidate_details,c=a.__candidate_details_second,d=[];if(a._is__bad)return[0];d.unshift(a.__points_history[a.__points_history.length-1]);var k=Math.max(2,Math.ceil(0.25*
a._count__pieces)),l=Math.max(2,Math.ceil(0.25*a._count__candidates)),f=Math.max(4,Math.ceil(0.25*a._count__containers));d.unshift((0+3*d[0]+2*(d[0]/k)+2*(d[0]/l)+2*(d[0]/f))/9);$D.getContent__computePointsForCandidate__do(0.75,1,1-(1-c._ratio__length__plain_text_to_total_plain_text),d);$D.getContent__computePointsForCandidate__do(0.75,1,1-(1-c._ratio__count__plain_words_to_total_plain_words),d);$D.getContent__computePointsForCandidate__do(0.5,1,1-b._ratio__length__above_plain_text_to_total_plain_text,
d);$D.getContent__computePointsForCandidate__do(0.5,1,1-b._ratio__count__above_plain_words_to_total_plain_words,d);$D.getContent__computePointsForCandidate__do(0.1,1,1-c._ratio__length__above_plain_text_to_total_plain_text,d);$D.getContent__computePointsForCandidate__do(0.1,1,1-c._ratio__count__above_plain_words_to_total_plain_words,d);$D.getContent__computePointsForCandidate__do(0.1,1,1-c._ratio__length__above_plain_text_to_plain_text,d);$D.getContent__computePointsForCandidate__do(0.1,1,1-c._ratio__count__above_plain_words_to_plain_words,
d);$D.getContent__computePointsForCandidate__do(0.5,1,1-b._ratio__length__links_text_to_all_text,d);$D.getContent__computePointsForCandidate__do(0.5,1,1-b._ratio__count__links_words_to_all_words,d);$D.getContent__computePointsForCandidate__do(0.5,1,1-b._ratio__length__links_text_to_plain_text,d);$D.getContent__computePointsForCandidate__do(0.5,1,1-b._ratio__count__links_words_to_plain_words,d);$D.getContent__computePointsForCandidate__do(0.5,1,1-b._ratio__count__links_to_plain_words,d);$D.getContent__computePointsForCandidate__do(0.5,
1,1-b._ratio__count__candidates_to_total_candidates,d);$D.getContent__computePointsForCandidate__do(0.5,1,1-b._ratio__count__containers_to_total_containers,d);$D.getContent__computePointsForCandidate__do(0.5,1,1-b._ratio__count__pieces_to_total_pieces,d);return d};$D.getContent__exploreNodeAndGetStuff=function(a,e){var b=0,c=!1,d=0,k=0,l=0,f=0,g=0,s=0,n=0,q=[],m=[],u=[],v=function(a){b++;var p=3===a.nodeType?"#text":1===a.nodeType&&a.tagName&&""<a.tagName?a.tagName.toLowerCase():"#invalid",h={__index:b,
__node:a,_is__container:-1<$D.parseOptions._elements_container.indexOf("|"+p+"|"),_is__candidate:!1,_is__text:!1,_is__link:!1,_is__link_skip:!1,_is__image_small:!1,_is__image_medium:!1,_is__image_large:!1,_is__image_skip:!1,_is__unskippable:!1,_debug__above__plain_text:"",_debug__above__links_text:"",_length__above_plain_text:k,_count__above_plain_words:l,_length__above_links_text:f,_count__above_links_words:g,_length__above_all_text:k+f,_count__above_all_words:l+g,_count__above_candidates:s,_count__above_containers:n,
_length__plain_text:0,_count__plain_words:0,_length__links_text:0,_count__links_words:0,_length__all_text:0,_count__all_words:0,_count__containers:0,_count__candidates:0,_count__links:0,_count__links_skip:0,_count__images_small:0,_count__images_medium:0,_count__images_large:0,_count__images_skip:0};(h._is__container||-1<$D.parseOptions._elements_self_closing.indexOf("|"+p+"|"))&&a.getAttribute($D.parseOptions._unskippable_attribute)==$D.parseOptions._unskippable_attribute_value&&(h._is__unskippable=
!0);switch(!0){case "#invalid"==p:case -1<$D.parseOptions._elements_ignore.indexOf("|"+p+"|"):return!1;case -1<$D.parseOptions._elements_visible.indexOf("|"+p+"|"):if($D.isNodeHidden(a,p))return!1;break;case -1<$D.parseOptions._elements_self_closing.indexOf("|"+p+"|"):switch(!0){case "img"==p:break;default:return!1}}switch(!0){case "#text"==p:return h._is__text=!0,a=a.nodeValue,h._length__plain_text=$D.measureText__getTextLength(a),h._count__plain_words=$D.measureText__getWordCount(a),c?(f+=h._length__plain_text,
g+=h._count__plain_words):(k+=h._length__plain_text,l+=h._count__plain_words),h;case "a"==p:p=a.href;if(!(""<p))break;if(!p.indexOf)break;h._is__link=!0;for(var p=0,t=$D.parseOptions._skip_link_from_domain.length;p<t;p++)if(-1<a.href.indexOf($D.parseOptions._skip_link_from_domain[p])){h._is__link_skip=!0;break}c||(c=!0,d=h.__index);u.push(h);break;case "img"==p:if(a.src&&a.src.indexOf)for(p=0,t=$D.parseOptions._skip_image_from_domain.length;p<t;p++)if(-1<a.src.indexOf($D.parseOptions._skip_image_from_domain[p])){h._is__image_skip=
!0;break}p=$(a).width();t=$(a).height();switch(!0){case 5E4<=p*t:case 350<=p&&75<=t:h._is__image_large=!0;break;case 2E4<=p*t:case 150<=p&&150<=t:h._is__image_medium=!0;break;case 5>=p&&5>=t:h._is__image_skip=!0;break;default:h._is__image_small=!0}}p=0;for(t=a.childNodes.length;p<t;p++){var r=v(a.childNodes[p]);if(r)switch(h._count__links+=r._count__links+(r._is__link?1:0),h._count__links_skip+=r._count__links_skip+(r._is__link_skip?1:0),h._count__images_small+=r._count__images_small+(r._is__image_small?
1:0),h._count__images_medium+=r._count__images_medium+(r._is__image_medium?1:0),h._count__images_large+=r._count__images_large+(r._is__image_large?1:0),h._count__images_skip+=r._count__images_skip+(r._is__image_skip?1:0),h._count__containers+=r._count__containers+(r._is__container?1:0),h._count__candidates+=r._count__candidates+(r._is__candidate?1:0),h._length__all_text+=r._length__plain_text+r._length__links_text,h._count__all_words+=r._count__plain_words+r._count__links_words,!0){case r._is__link:h._length__links_text+=
r._length__plain_text+r._length__links_text;h._count__links_words+=r._count__plain_words+r._count__links_words;break;default:h._length__plain_text+=r._length__plain_text,h._count__plain_words+=r._count__plain_words,h._length__links_text+=r._length__links_text,h._count__links_words+=r._count__links_words}}h._is__link&&d==h.__index&&(c=!1,d=0);if(h._is__container||1==h.__index&&!0==e)if(q.push(h),h._is__container&&n++,!e){switch(!0){case "cjk"!=$D.language&&2*h._count__links>=h._count__plain_words:case "cjk"!=
$D.language&&h._length__plain_text<65/3:case "cjk"!=$D.language&&5>h._count__plain_words:case "cjk"==$D.language&&10>h._length__plain_text:case "cjk"==$D.language&&2>h._count__plain_words:break;default:h._is__candidate=!0,m.push(h),s++}1!=h.__index||h._is__candidate||(h._is__candidate=!0,h._is__bad=!0,m.push(h))}return h};v(a);return e?q.pop():{_containers:q,_candidates:m,_links:u}};$D.getContent__buildHTMLForNode=function(a,e){var b=0,c="",d=$D.getContent__exploreNodeAndGetStuff(a,!0);switch(e){case "above-the-target":d=
!1}var k=function(a){b++;var f=!1,g=3===a.nodeType?"#text":1===a.nodeType&&a.tagName&&""<a.tagName?a.tagName.toLowerCase():"#invalid",s=0,n=0,q=0,m=0;switch(!0){case "#invalid"==g:case -1<$D.parseOptions._elements_ignore.indexOf("|"+g+"|"):return;case "#text"==g:c+=a.nodeValue.replace(/</gi,"&lt;").replace(/>/gi,"&gt;");return}if(!(-1<$D.parseOptions._elements_visible.indexOf("|"+g+"|")&&$D.isNodeHidden(a,g))){switch(g){case "object":case "embed":case "iframe":var u="object"==g?$(a).find("param[name='movie']").attr("value"):
$(a).attr("src"),v=""<u?!1:!0;if(!v)for(v=!0,q=0,m=$D.parseOptions._keep_video_from_domain.length;q<m;q++)if(-1<u.indexOf($D.parseOptions._keep_video_from_domain[q])){v=!1;break}if(v&&(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!f||!f._is__unskippable)){$D.debugOutline(a,"clean-before","object-embed-iframe");return}}if("a"==g||"li"==g)if(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!f||!f._is__unskippable)switch(!0){case f._is__link_skip:case 0<f._count__images_small+f._count__images_skip&&
65>f._length__plain_text:$D.debugOutline(a,"clean-before","skip-link");return}if(-1<$D.parseOptions._elements_link_density.indexOf("|"+g+"|")&&(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!f||!f._is__unskippable))switch(!0){case 390<f._length__plain_text:case "cjk"==$D.language&&195<f._length__plain_text:case !(1<f._count__links):case d&&0.5<f._length__plain_text/d._length__plain_text:case d&&0.5<f._count__plain_words/d._count__plain_words:case 0==f._length__plain_text&&1==f._count__links&&65>
f._length__links_text:case 25>f._length__plain_text&&0<f._count__images_large+f._count__images_medium:break;case 0.5>f._length__links_text/f._length__all_text:if(!(0<f._count__links))break;if(!(0<f._count__links_skip))break;if(0.25<f._count__links_skip/f._count__links&&0.05>f._length__links_text/f._length__all_text)break;default:$D.debugOutline(a,"clean-before","link-density");return}if(-1<$D.parseOptions._elements_floating.indexOf("|"+g+"|")&&(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!f||
!f._is__unskippable))switch(!0){case 390<f._length__plain_text:case "cjk"==$D.language&&195<f._length__plain_text:case d&&0.25<f._length__plain_text/d._length__plain_text:case d&&0.25<f._count__plain_words/d._count__plain_words:case 25>f._length__plain_text&&25>f._length__links_text&&0<f._count__images_large+f._count__images_medium:case a.getElementsByTagName&&195>f._length__plain_text&&0<a.getElementsByTagName("h1").length+a.getElementsByTagName("h2").length+a.getElementsByTagName("h3").length+a.getElementsByTagName("h4").length:break;
default:q=$(a).css("float");if("left"!=q&&"right"!=q)break;if(0==f._length__links_text&&0<f._count__images_large+f._count__images_medium)break;$D.debugOutline(a,"clean-before","floating");return}if("above-the-target"==e){if(-1<$D.parseOptions._elements_above_target_ignore.indexOf("|"+g+"|")&&(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!f||!f._is__unskippable)){$D.debugOutline(a,"clean-before","above-target");return}if("img"==g&&(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!(f&&f._is__unskippable||
f._is__image_large))){$D.debugOutline(a,"clean-before","above-target");return}}if(g.match(/^h(1|2|3|4|5|6)$/gi)&&(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!f||!f._is__unskippable))switch(!0){case 10>f._length__plain_text&&0<f._count__images_small+f._count__images_medium+f._count__images_large+f._count__images_skip:$D.debugOutline(a,"clean-before","skip-heading");return}if(!(-1<$D.parseOptions._elements_ignore_tag.indexOf("|"+g+"|"))){s=c.length;c+="<"+g;if(g in $D.parseOptions._elements_keep_attributes)for(q=
0,m=$D.parseOptions._elements_keep_attributes[g].length;q<m;q++)n=$D.parseOptions._elements_keep_attributes[g][q],u=a.getAttribute(n),""<u&&(c+=" "+n+'="'+u+'"');n=a.getAttribute("id");""<n&&(c+=' id="'+n+'"');"a"==g&&(c+=' target="_blank"');c=-1<$D.parseOptions._elements_self_closing.indexOf("|"+g+"|")?c+" />":c+">";n=c.length}if(!(-1<$D.parseOptions._elements_self_closing.indexOf("|"+g+"|")))for(q=0,m=a.childNodes.length;q<m;q++)k(a.childNodes[q]);switch(!0){case -1<$D.parseOptions._elements_ignore_tag.indexOf("|"+
g+"|"):return;case -1<$D.parseOptions._elements_self_closing.indexOf("|"+g+"|"):m=q=c.length;break;default:q=c.length,c+="</"+g+">",m=c.length}if("iframe"==g||"embed"==g||"object"==g)c=""+c.substr(0,s)+'<div class="readableLargeObjectContainer">'+c.substr(s,m-s)+"</div>";else{if("img"==g&&(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!f||!f._is__unskippable))switch(!0){case f._is__image_skip:$D.debugOutline(a,"clean-after","skip-img");c=c.substr(0,s);return;case f._is__image_large:c=""+c.substr(0,
s)+'<div class="readableLargeImageContainer'+(250>=$(a).width()&&250<=$(a).height()?" float":"")+'">'+c.substr(s,m-s).replace(/width="([^=]+?)"/gi,"").replace(/height="([^=]+?)"/gi,"")+"</div>";return}if("a"==g)switch(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!0){case 1==f._count__images_large:c=""+c.substr(0,n-1)+' class="readableLinkWithLargeImage">'+c.substr(n,q-n)+"</a>";return;case 1==f._count__images_medium:c=""+c.substr(0,n-1)+' class="readableLinkWithMediumImage">'+c.substr(n,q-n)+
"</a>";return}if(-1<$D.parseOptions._elements_too_much_content.indexOf("|"+g+"|")&&(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!f||!f._is__unskippable))switch(!0){case "h1"==g&&130<f._length__all_text:case "h2"==g&&390<f._length__all_text:case null!=g.match(/^h(3|4|5|6)$/)&&650<f._length__all_text:case null!=g.match(/^(b|i|em|strong)$/)&&1625<f._length__all_text:$D.debugOutline(a,"clean-after","too-much-content");c=""+c.substr(0,s)+c.substr(n,q-n);return}switch(!0){case -1<$D.parseOptions._elements_self_closing.indexOf("|"+
g+"|"):case -1<$D.parseOptions._elements_ignore_tag.indexOf("|"+g+"|"):case "td"==g:break;default:if(m=c.substr(n,q-n),m=m.replace(/(<br \/>)/gi,""),m=m.replace(/(<hr \/>)/gi,""),"tr"==g&&(m=m.replace(/<td[^>]*?>/gi,""),m=m.replace(/<\/td>/gi,"")),"table"==g&&(m=m.replace(/<tr[^>]*?>/gi,""),m=m.replace(/<\/tr>/gi,"")),m=$D.measureText__getTextLength(m),f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!f||!f._is__unskippable)switch(!0){case 0==m&&"p"==g:c=c.substr(0,s)+"<br /><br />";return;case 0==
m:case 5>m&&-1<$D.parseOptions._elements_visible.indexOf("|"+g+"|"):$D.debugOutline(a,"clean-after","blank");c=c.substr(0,s);return}}if(-1<$D.parseOptions._elements_link_density.indexOf("|"+g+"|")&&(f=f||$D.getContent__exploreNodeAndGetStuff(a,!0),!f||!f._is__unskippable))switch(m=c.substr(n,q-n).replace(/(<([^>]+)>)/gi,""),m=$D.measureText__getTextLength(m),g=0+f._length__all_text+10*f._count__images_small+10*f._count__images_skip+10*a.getElementsByTagName("iframe").length+10*a.getElementsByTagName("object").length+
10*a.getElementsByTagName("embed").length+10*a.getElementsByTagName("button").length+10*a.getElementsByTagName("input").length+10*a.getElementsByTagName("select").length+10*a.getElementsByTagName("textarea").length,!0){case !(0<m):case !(0<g):case !(0.5>m/g):case !("cjk"==$D.language&&0.1>m/g):case d&&0.25<f._length__plain_text/d._length__plain_text:case "cjk"==$D.language&&d&&0.1<f._length__plain_text/d._length__plain_text:break;default:$D.debugOutline(a,"clean-after","missing-density"),c=c.substr(0,
s)}}}};k(a);return c};$D.articleTitleMarker__start='<div id="articleHeader"><h1>';$D.articleTitleMarker__end="</h1></div>";$D.getContent__find__hasIsolatedTitleInHTML=function(a){return a.substr(0,$D.articleTitleMarker__start.length)==$D.articleTitleMarker__start};$D.getContent__find__getIsolatedTitleInHTML=function(a){return $D.getContent__find__hasIsolatedTitleInHTML(a)?(a=a.match(RegExp($D.articleTitleMarker__start+"(.*?)"+$D.articleTitleMarker__end,"i")))?a[1]:"":""};$D.getContent__find__isolateTitleInHTML=
function(a,e){if($D.$document.find("body").attr($D.parseOptions._use_document_title_attribute)==$D.parseOptions._use_document_title_attribute_value)return a;for(var b=[/<(h1)[^>]*?>([\s\S]+?)<\/\1>/gi,/<(h2)[^>]*?>([\s\S]+?)<\/\1>/gi,/<(h3|h4|h5|h6)[^>]*?>([\s\S]+?)<\/\1>/gi],c=" "+e.replace(/<[^>]+?>/gi,"").replace(/\s+/gi," ")+" ",d=0,k=b.length;d<k;d++){var l=b[d].exec(a);switch(!0){case !l:case !(-1<b[d].lastIndex):break;default:var f=b[d].lastIndex,g=f-l[0].length,s=l[1],l=l[2].replace(/<\s*br[^>]*>/gi,
"").replace(/[\n\r]+/gi,""),n=l.replace(/<[^>]+?>/gi,"").replace(/\s+/gi," ");_heading_length=$D.measureText__getTextLength(n);_heading_words=[];_to_heading_text=a.substr(0,g);_to_heading_length=$D.measureText__getTextLength(_to_heading_text.replace(/<[^>]+?>/gi,"").replace(/\s+/gi," "));switch(!0){case !(5<_heading_length):case !(195>_heading_length):case !(390>_to_heading_length):break;case -1<"|h2|h3|h4|h5|h6|".indexOf("|"+s+"|"):_heading_words=n.split(" ");for(var q=0,m=_heading_words.length,
g="";q<m;q++)-1<c.indexOf(" "+_heading_words[q]+" ")&&(g+=_heading_words[q]+" ");switch(!0){case 20<_heading_length&&-1<c.indexOf(n):case 10<_heading_length&&(1==c.indexOf(n)||c.indexOf(n)==c.length-1-n.length):}n=!1;switch(!0){case _heading_length>2*(c.length-2)&&"h2"!=s:case _heading_length<Math.ceil(0.5*(c.length-2)):case 25>_heading_length&&g.length<Math.ceil(0.75*_heading_length):case 50>_heading_length&&g.length<Math.ceil(0.65*_heading_length):case g.length<Math.ceil(0.55*_heading_length):n=
!0}if(n)break;default:return""+$D.articleTitleMarker__start+l+$D.articleTitleMarker__end+$D.getContent__find__isolateTitleInHTML__balanceDivsAtStart(a.substr(f))}}}return a};$D.getContent__find__isolateTitleInHTML__balanceDivsAtStart__substrCount=function(a,e,b,c){var d=0;a+="";e+="";isNaN(b)&&(b=0);isNaN(c)&&(c=0);if(0==e.length)return!1;for(b--;-1!=(b=a.indexOf(e,b+1));){if(0<c&&b+e.length>c)return!1;d++}return d};$D.getContent__find__isolateTitleInHTML__balanceDivsAtStart=function(a){a=a.replace(/^(\s*<\s*\/\s*[^>]+>)+/gi,
"");for(var e=-1,b=0,c=0;100>c;c++){e=a.indexOf("</div>",b);if(!(-1<e))break;var d=a.substr(0,e),k=$D.getContent__find__isolateTitleInHTML__balanceDivsAtStart__substrCount(d,"<div",b),b=0<k?1+$D.getContent__find__isolateTitleInHTML__balanceDivsAtStart__substrCount(d,"</div>",b):!1;!(0<k)||k<b?(a=""+a.substr(0,e)+a.substr(e+6),b=e):b=e+1}$D.log(a);return a};$D.getContent__findInPage=function(a){var e=!1,b=!1,c=!1;$D.debugTimerStart("ExploreAndGetStuff");a=$D.getContent__exploreNodeAndGetStuff(a.document.body);
$D.debugRemember("ExploreAndGetStuff",$D.debugTimerEnd()+"ms");$D.debugTimerStart("ProcessFirst");b=$D.getContent__processCandidates__first(a._candidates);c=e=b[0];$D.debugRemember("ProcessFirst",$D.debugTimerEnd()+"ms");if($D.debug){$D.log("First 5 Main Candidates:");for(var d in b){if(5==d)break;$D.log(b[d],b[d].__node)}$D.debugOutline(e.__node,"target","first")}$D.debugRemember("Target","first");switch(!0){case !(0<e._count__containers):case !(0<e._count__candidates):case !(0<e._count__pieces):case !(25<
e._count__containers):break;default:$D.debugTimerStart("ProcessSecond");var k=$D.getContent__processCandidates__second(b),b=k[0];$D.debugRemember("ProcessSecond",$D.debugTimerEnd()+"ms");if(e.__node==b.__node)break;if($D.debug){$D.log("First 5 Second Candidates:");for(d in k){if(5==d)break;$D.log(k[d],k[d].__node)}$D.debugOutline(b.__node,"target","second")}e.__points_history_final=$D.getContent__computePointsForCandidate__third(e,e);e.__points_final=e.__points_history_final[0];b.__points_history_final=
$D.getContent__computePointsForCandidate__third(b,e);b.__points_final=b.__points_history_final[0];$D.debug&&($D.log("The 2 Candidates:"),$D.log(e),$D.log(b));switch(!0){case 20>b.__candidate_details._count__lines_of_65_characters&&1<b.__points_final/e.__points_final:case 20<b.__candidate_details._count__lines_of_65_characters&&0.9<b.__points_final/e.__points_final:case 50<b.__candidate_details._count__lines_of_65_characters&&0.75<b.__points_final/e.__points_final:c=b,$D.debugRemember("Target","second")}$D.debug&&
($D.debugRemember("PointsFirst",e.__points_history_final[0].toFixed(2)),$D.debugRemember("PointsSecond",b.__points_history_final[0].toFixed(2)))}$D.debug&&$(c.__node).css({"box-shadow":"inset 0px 0px 50px rgba(255, 255, 0, 0.95), 0px 0px 50px rgba(255, 255, 0, 0.95)"});$D.debugTimerStart("BuildHTML");d=$D.getContent__buildHTMLForNode(c.__node,"the-target");d=d.substr(d.indexOf(">")+1);d=d.substr(0,d.lastIndexOf("<"));$D.debugRemember("BuildHTML",$D.debugTimerEnd()+"ms");$D.debugTimerStart("BuildHTMLPregs");
d=d.replace(/<(blockquote|div|p|td|li)([^>]*)>(\s*<br \/>)+/gi,"<$1$2>");d=d.replace(/(<br \/>\s*)+<\/(blockquote|div|p|td|li)>/gi,"</$2>");d=d.replace(/(<br \/>\s*)+<(blockquote|div|h\d|ol|p|table|ul|li)([^>]*)>/gi,"<$2$3>");d=d.replace(/<\/(blockquote|div|h\d|ol|p|table|ul|li)>(\s*<br \/>)+/gi,"</$1>");d=d.replace(/(<hr \/>\s*<hr \/>\s*)+/gi,"<hr />");d=d.replace(/(<br \/>\s*<br \/>\s*)+/gi,"<br /><br />");$D.debugRemember("BuildHTMLPregs",$D.debugTimerEnd()+"ms");return{_html:d,_links:a._links,
_targetCandidate:c,_firstCandidate:e}};$D.start=function(){var a=$D.getContent__findInPage($D.window),e=a._links,b=$(a._targetCandidate.__node),c=[];switch(!0){case "rtl"==b.attr("dir"):case "rtl"==b.css("direction"):$D.makeRTL()}var d=a._html,b=$D.nextPage__getFirstFragment(d),k=""<$D.document.title?$D.document.title:"",d=$D.getContent__find__isolateTitleInHTML(d,k);$D.articleTitle=$D.getContent__find__getIsolatedTitleInHTML(d);$D.debugRemember("TitleSource","target");if(!(""<$D.articleTitle)){var l=
a._targetCandidate.__node,f="",g="",s=a._firstCandidate.__node!=a._targetCandidate.__node;a:for(;;){switch(!0){case l.tagName&&"body"==l.tagName.toLowerCase():case s&&l==a._firstCandidate.__node:break a}if(l.previousSibling)switch(l=l.previousSibling,$D.debug&&$D.debugOutline(l,"target","add-above"),f=$D.getContent__buildHTMLForNode(l,"above-the-target"),g=f+g,c.unshift(l),g=$D.getContent__find__isolateTitleInHTML(g,k),!0){case 585<$D.measureText__getTextLength(g.replace(/<[^>]+?>/gi,"").replace(/\s+/gi,
" ")):case $D.getContent__find__hasIsolatedTitleInHTML(g):break a}else l=l.parentNode}switch(!0){case $D.getContent__find__hasIsolatedTitleInHTML(g):case s&&3>g.split("<a ").length&&195>$D.measureText__getTextLength(g.replace(/<[^>]+?>/gi,"").replace(/\s+/gi," ")):d=g+d;break;default:g="",c=[]}$D.articleTitle=$D.getContent__find__getIsolatedTitleInHTML(d);$D.debugRemember("TitleSource","above_HTML");""<$D.articleTitle||(function(){if(""<k){for(var a=[],b=[/( [-][-] |( [-] )|( [>][>] )|( [<][<] )|( [|] )|( [\/] ))/i,
/(([:] ))/i],c=0,e=b.length;c<e&&!(a=k.split(b[c]),1<a.length);c++);a.sort(function(a,b){switch(!0){case a.length>b.length:return-1;case a.length<b.length:return 1;default:return 0}});d=""+$D.articleTitleMarker__start+(1<a[0].split(/\s+/i).length?a[0]:k)+$D.articleTitleMarker__end+d}}(),$D.articleTitle=$D.getContent__find__getIsolatedTitleInHTML(d),$D.debugRemember("TitleSource","document_title"))}$D.debugRemember("theTarget",a._targetCandidate.__node);$D.debugRemember("firstCandidate",a._firstCandidate.__node);
$D.nextPage__firstFragment__firstPage=b;$D.nextPage__firstFragment__lastPage=$D.nextPage__getFirstFragment(d);$D.nextPage__firstLinks=e;e={_html:d,_title:$D.articleTitle,_rtl:$D.rtl};e._elements=c;e._elements.push(a._targetCandidate.__node);$D.callbacks.finished(e)};return $D};
