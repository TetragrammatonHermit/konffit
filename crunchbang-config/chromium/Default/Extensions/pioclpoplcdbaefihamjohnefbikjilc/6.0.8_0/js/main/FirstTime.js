function FirstTime(){function c(a){b=a;Persistent.set("userFlowState",a)}function d(b){var f=extension.getBootstrapInfo("marketingUrl")+"/webclipper/whats_new/";extension.msgHandlerOpenTab({url:f+"?firstlaunch"},null,function(){c(a.CURRENT);b()})}var a={CURRENT:"normal",FIRST_TIME:"first",UPGRADE:"upgrade",GUIDED_TOUR:"tour"},b=Persistent.get("userFlowState")||a.CURRENT,e=function(){var a=versionDetect.getLastVersionParsed(),b=versionDetect.getSourceVersionParsed();return a&&a[0]?b[0]>a[0]?1:0:2}();
this.isUpgraded=function(){return b===a.UPGRADE};this.msgHandlerOnAction=function(c){b!=a.FIRST_TIME&&b!=a.UPGRADE||d(c)};this.msgHandlerOnInit=function(c){b!=a.FIRST_TIME||YANDEX||d(c)};this.needToShowIntro=function(){return b==a.FIRST_TIME||b==a.UPGRADE};this.startUp=function(){b===a.GUIDED_TOUR?c(a.CURRENT):b==a.FIRST_TIME||2==e?c(a.FIRST_TIME):b!=a.UPGRADE&&1!=e||c(a.UPGRADE);Persistent.set("userFlowState",b)};Object.preventExtensions(this)}firstTime=new FirstTime;
