window.diigolet==undefined&&function(){function Kb(a){for(var c=0,d=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);){c+=a.offsetLeft;d+=a.offsetTop;a=a.offsetParent}return{left:c,top:d}}function Za(a){a=a.concat();for(var c=0;c<a.length;++c)for(var d=c+1;d<a.length;++d)a[c]===a[d]&&a.splice(d--,1);return a}function I(){var a=Array.prototype.slice.call(arguments);a.unshift("[Diigolet]");if(x.logLevel!="never")try{var c=ub.indexOf("debug"),d=ub.indexOf(x.logLevel);c>-1&&d>-1&&c>=d&&window.console&&
console.log.apply(console,a)}catch(f){}}function Lb(){var a=Array.prototype.slice.call(arguments);a.unshift("[Diigolet]");console.log(a,"info")}function V(){for(var a=[].slice.call(arguments),c=a.shift(),d=0,f=a.length,h;h=a[d],d<f;d++)for(var i in h)c[i]=h[i];return c}function Sa(a,c,d){for(var f=0,h=d.length,i;i=d[f],f<h;f++)a[i]=c[i];return a}function Pa(a,c){c=c||" ";return a.split(c)}function K(a,c,d){if(a.length!==undefined)for(var f=0,h=a.length;f<h;f++)c.call(d,a[f],f);else for(f in a)c.call(d,
a[f],f)}function $a(a,c,d){for(var f=[],h=0,i=a.length;h<i;h++)c.call(d,a[h],h)&&f.push(a[h]);return f}function ma(a,c,d){for(var f=a.length,h=Array(f),i=0;i<f;i++)h[i]=c.call(d,a[i],i);return h}function vb(a,c,d){for(var f=0,h=a.length;f<h;f++)if(c.call(d,a[f],f))return true;return false}function wb(a,c,d){for(var f=a.length,h=[],i,m=0;m<f;m++){i=c.call(d,a[m],m);i!==null&&h.push(i)}return h}function Ca(a,c,d){d=d||0;var f=typeof c=="function";d=d;for(var h=a.length,i;i=a[d],d<h;d++)if(f?c(i):i==
c)return d;return-1}function Ha(a,c,d){c=Ca(a,c,d);return c>-1?a[c]:null}function xb(a,c){for(var d=[],f=0,h=a.length,i;i=a[f],f<h;f++)if(c)Ha(d,function(m){return c(m,i)})||d.push(i);else d.indexOf(i)==-1&&d.push(i);return d}function Mb(a){for(var c=Array(a.length),d=a.length-1,f=0;d>=0;d--,f++)c[f]=a[d];return c}function Ia(a){a=a.replace(/^\s\s*/,"");for(var c=/\s/,d=a.length;c.test(a.charAt(--d)););return a.slice(0,d+1)}function Nb(a,c,d){if(!c.global)throw"string.scan: pattern is not global";
for(var f;f=c.exec(a);)d(f)}function ab(a,c,d){var f="";a=a;for(var h;a.length>0;)if(h=a.match(c)){f+=a.slice(0,h.index);f=f;var i=d(h);f=f+(i==null?"":String(i));a=a.slice(h.index+h[0].length)}else{f+=a;a=""}return f}function W(a,c){return ab(a,Ob,function(d){if(c==null)return"";var f=d[1]||"";if(f=="\\")return d[2];var h=c,i=d[3],m=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;d=m.exec(i);if(d==null)return f;for(;d!=null;){var n=d[1].indexOf("[")===0?ab(d[2],"\\\\]","]"):d[1];h=h[n];if(null==h||""==
d[3])break;i=i.substring("["==d[3]?d[1].length:d[0].length);d=m.exec(i)}return f+(h==null?"":String(h))})}function Pb(a){return $(a)}function R(a){return $("#"+a)}function Ta(a){return!a||a.length==0||(a.match?!!a.match(/^\s*$/):true)}function bb(a){var c=bb.options;a=c.parser[c.strictMode?"strict":"loose"].exec(a);for(var d={},f=14;f--;)d[c.key[f]]=a[f]||"";d[c.q.name]={};d[c.key[12]].replace(c.q.parser,function(h,i,m){if(i)d[c.q.name][i]=m});return d}function Da(a){function c(q,t){var u,y,B,E,G;
B=q&2147483648;E=t&2147483648;u=q&1073741824;y=t&1073741824;G=(q&1073741823)+(t&1073741823);if(u&y)return G^2147483648^B^E;return u|y?G&1073741824?G^3221225472^B^E:G^1073741824^B^E:G^B^E}function d(q,t,u,y,B,E,G){q=c(q,c(c(t&u|~t&y,B),G));return c(q<<E|q>>>32-E,t)}function f(q,t,u,y,B,E,G){q=c(q,c(c(t&y|u&~y,B),G));return c(q<<E|q>>>32-E,t)}function h(q,t,u,y,B,E,G){q=c(q,c(c(t^u^y,B),G));return c(q<<E|q>>>32-E,t)}function i(q,t,u,y,B,E,G){q=c(q,c(c(u^(t|~y),B),G));return c(q<<E|q>>>32-E,t)}function m(q){var t=
"",u="",y;for(y=0;y<=3;y++){u=q>>>y*8&255;u="0"+u.toString(16);t+=u.substr(u.length-2,2)}return t}var n=[],w,D,A,C,r,o,s,l;n=function(q){var t,u=q.length;t=u+8;for(var y=((t-t%64)/64+1)*16,B=Array(y-1),E=0,G=0;G<u;){t=(G-G%4)/4;E=G%4*8;B[t]|=q.charCodeAt(G)<<E;G++}t=(G-G%4)/4;E=G%4*8;B[t]|=128<<E;B[y-2]=u<<3;B[y-1]=u>>>29;return B}(a);r=1732584193;o=4023233417;s=2562383102;l=271733878;for(a=0;a<n.length;a+=16){w=r;D=o;A=s;C=l;r=d(r,o,s,l,n[a+0],7,3614090360);l=d(l,r,o,s,n[a+1],12,3905402710);s=d(s,
l,r,o,n[a+2],17,606105819);o=d(o,s,l,r,n[a+3],22,3250441966);r=d(r,o,s,l,n[a+4],7,4118548399);l=d(l,r,o,s,n[a+5],12,1200080426);s=d(s,l,r,o,n[a+6],17,2821735955);o=d(o,s,l,r,n[a+7],22,4249261313);r=d(r,o,s,l,n[a+8],7,1770035416);l=d(l,r,o,s,n[a+9],12,2336552879);s=d(s,l,r,o,n[a+10],17,4294925233);o=d(o,s,l,r,n[a+11],22,2304563134);r=d(r,o,s,l,n[a+12],7,1804603682);l=d(l,r,o,s,n[a+13],12,4254626195);s=d(s,l,r,o,n[a+14],17,2792965006);o=d(o,s,l,r,n[a+15],22,1236535329);r=f(r,o,s,l,n[a+1],5,4129170786);
l=f(l,r,o,s,n[a+6],9,3225465664);s=f(s,l,r,o,n[a+11],14,643717713);o=f(o,s,l,r,n[a+0],20,3921069994);r=f(r,o,s,l,n[a+5],5,3593408605);l=f(l,r,o,s,n[a+10],9,38016083);s=f(s,l,r,o,n[a+15],14,3634488961);o=f(o,s,l,r,n[a+4],20,3889429448);r=f(r,o,s,l,n[a+9],5,568446438);l=f(l,r,o,s,n[a+14],9,3275163606);s=f(s,l,r,o,n[a+3],14,4107603335);o=f(o,s,l,r,n[a+8],20,1163531501);r=f(r,o,s,l,n[a+13],5,2850285829);l=f(l,r,o,s,n[a+2],9,4243563512);s=f(s,l,r,o,n[a+7],14,1735328473);o=f(o,s,l,r,n[a+12],20,2368359562);
r=h(r,o,s,l,n[a+5],4,4294588738);l=h(l,r,o,s,n[a+8],11,2272392833);s=h(s,l,r,o,n[a+11],16,1839030562);o=h(o,s,l,r,n[a+14],23,4259657740);r=h(r,o,s,l,n[a+1],4,2763975236);l=h(l,r,o,s,n[a+4],11,1272893353);s=h(s,l,r,o,n[a+7],16,4139469664);o=h(o,s,l,r,n[a+10],23,3200236656);r=h(r,o,s,l,n[a+13],4,681279174);l=h(l,r,o,s,n[a+0],11,3936430074);s=h(s,l,r,o,n[a+3],16,3572445317);o=h(o,s,l,r,n[a+6],23,76029189);r=h(r,o,s,l,n[a+9],4,3654602809);l=h(l,r,o,s,n[a+12],11,3873151461);s=h(s,l,r,o,n[a+15],16,530742520);
o=h(o,s,l,r,n[a+2],23,3299628645);r=i(r,o,s,l,n[a+0],6,4096336452);l=i(l,r,o,s,n[a+7],10,1126891415);s=i(s,l,r,o,n[a+14],15,2878612391);o=i(o,s,l,r,n[a+5],21,4237533241);r=i(r,o,s,l,n[a+12],6,1700485571);l=i(l,r,o,s,n[a+3],10,2399980690);s=i(s,l,r,o,n[a+10],15,4293915773);o=i(o,s,l,r,n[a+1],21,2240044497);r=i(r,o,s,l,n[a+8],6,1873313359);l=i(l,r,o,s,n[a+15],10,4264355552);s=i(s,l,r,o,n[a+6],15,2734768916);o=i(o,s,l,r,n[a+13],21,1309151649);r=i(r,o,s,l,n[a+4],6,4149444226);l=i(l,r,o,s,n[a+11],10,3174756917);
s=i(s,l,r,o,n[a+2],15,718787259);o=i(o,s,l,r,n[a+9],21,3951481745);r=c(r,w);o=c(o,D);s=c(s,A);l=c(l,C)}return(m(r)+m(o)+m(s)+m(l)).toLowerCase()}function xa(a){var c="lhidgfaliccjjbgkabchckabpdamkphg";c=RegExp(c,"g");cb=cb.replace(c,a);yb=yb.replace(c,a);db=db.replace(c,a);zb=zb.replace(c,a);eb=eb.replace(c,a);fb=fb.replace(c,a);Ua=Ua.replace(c,a);gb=gb.replace(c,a);hb=hb.replace(c,a);Ab=Ab.replace(c,a);Bb=Bb.replace(c,a);ib=ib.replace(c,a);jb=jb.replace(c,a);kb=kb.replace(c,a);lb=lb.replace(c,a)}
function Ea(a,c){c=c===undefined?850:c;a=$(a).unbind("mouseout").unbind("mouseover");a[0]&&clearTimeout(a[0]._hideTimerId);a.bind("mouseout",function(){a[0]._hideTimerId=setTimeout(function(){a.hide()},c)}).bind("mouseover",function(){clearTimeout(a[0]._hideTimerId)})}function Va(){K([P,H,ba,da,Z,Fa,J,L,S],function(a){if(a.j){var c=function(d){return function(){Ja=d.clickedOn=true}}(a);a.j.unbind(".pay4sin").bind("mouseup.pay4sin",c).bind("mousedown.pay4sin",c).bind("keydown.pay4sin",function(d){d.stopPropagation()})}});
mb.mousedown(function(a){if(a.target.tagName=="INPUT"||a.target.tagName=="TEXTAREA")nb=true;else if(a.target.id=="diigolet-csm-dropdown"||a.target.className=="diigolet-csm-coloritem"||a.target.parentNode.id=="diigolet-panel-btnHighlight")Ja=true;window.getSelection();mousedownTop=a.pageY;mousedownLeft=a.pageX}).mouseup(Qb).mouseover(Rb).mouseout(Sb).mousemove(function(a){window.curcorX=a.pageX;window.curcorY=a.pageY});$(document.body).click(function(a){var c=$(a.target);if(c.hasClass("_diigoLink")){ob(c.attr("diigolink"));
a.preventDefault()}})}function ob(a){var c;if(a=="myLibrary")c=x.urls.getUserBookmarksPageURL();else if(a=="signIn")c=x.urls.getSignInURL()+"?referInfo="+encodeURIComponent("/images/diigo-logo.png#SIGNED_IN");else if(a=="signOut")c=x.urls.getSignOutURL();else if(a=="feedback")c=x.urls.getFeedbackURL();else if(a=="followOnTwitter")c=x.urls.getFollowOnTwitterURL();else if(a=="rating")c=x.urls.getRatingURL();c&&x.openURL(c)}function Cb(){var a=[];k.myTagsWithCount.sort(function(h,i){return h.count<=
i.count?1:-1});for(var c=k.myTagsWithCount.length,d=0;d<c;d++)a[d]=k.myTagsWithCount[d].name;a={resultsClass:"diigolet ac_results",data:a,mode:"multiple",multipleSeparator:" ,",onItemSelect:function(){P.clickedOn=true},id:"diigolet-ac"};try{new Db("#Diigo-Bookmark-Tag-Input",a)}catch(f){I(f)}}function Rb(a,c){if(!k.draggingFloatNote){var d=ha.isHighlightElement(a.target);if(d){c=M.find(d.ids[0]);c.activate(true);if(d.type==ja||d.type==Qa){ya.reset(c);Z.scheduleShow(a,c)}else if(d.type==ga||d.type==
ANNOTATION_TYPE_ICON){ya.removeEditMode();ya.ann=null;var f=H.ann!=c;if(!H.isEditing())if(f||!H.shown){H.shown&&H.hide();H.scheduleShow(a,c)}else H.cancelHide()}if(c.comments.length>0&&(d.type==ja||d.type==Qa)){ya.reset(c);ya.scheduleToggleEdit(true)}}}}function Sb(a,c){if(!k.draggingFloatNote){var d=ha.isHighlightElement(a.target);if(d){c=M.find(d.ids[0]);c.activate(false);H.aboutToShow()&&!H.isEditing()&&H.scheduleHide();ya.aboutToShow()&&c.comments.length<=0&&ya.scheduleHide();ya.scheduleToggleEdit(false);
Z.scheduleHide()}}}function Qb(a){ba.clickedOn||$("#diigolet-toolbar .dropdownMenu").hide();H.shown&&!H.clickedOn&&!H.isEditing()&&H.hide();if(!nb&&!Ja&&Wa.isTextSelected())if(k.isHighlightPen)diigolet.handle(a,"highlight");else{da.direction=a.pageX<mousedownLeft?"reverse":"normal";da.show(a,"selection")}else da.hide();ba.clickedOn=P.clickedOn=Tb.clickedOn=H.clickedOn=J.clickedOn=Ja=nb=false}function ka(){return k.signedIn||(k.notify(Ga,1E3),false)}function Ka(){Cb();J.onSignIn()}function Eb(){I("onSignOut");
k.unpaintAllAnnotations();k.reset();Fa.onSignOut();ba.onSignOut();J.onSignOut()}function Fb(){ob("signIn");N.send({name:"activateMeAfterSignIn"})}function ia(){var a=document.body.id=document.body.id||"dummybodyid";if(!/^[a-zA-Z]/.test(a))document.body.id=a="a"+a;a=function(i){var m=/[^\-_a-z0-9U+00A1-]/g;if(m.test(i))return i.replace(m,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "});return i}(a);for(var c="",d,f,h=/([^{}@]*)({[^{}]*})/g;d=h.exec(lb);){f=d[1];d=d[2].replace(/\r\n/g,"\n");
c+=$.map(f.split(","),function(i){if(/(^|\s)body([\s.\[#]|$)/.test(i))return i.replace("body","body#"+a);if(/(^|\s)html(\s|$)/.test(i))return i.replace("html","html body#"+a);return"body#"+a+" "+i.replace(/^\s+/m,"")}).join(",")+d+"\n"}if($("head").find('style[id="diigolet-chrome-css"]').length==0)document.createStyleSheet?document.createStyleSheet().cssText=c:$("head").add(document.body).eq(0).append($(document.createElement("style")).attr({type:"text/css",id:"diigolet-chrome-css"}).text(c))}function La(a){var c=
bb(a),d=c.path;if(!/^https?$/i.test(c.protocol)&&!/^ftp?$/i.test(c.protocol))return false;if(/\.?diigo\./i.test(c.host))if(/^\/annotated\//i.test(d))return false;else if(/(player|slides?)\.diigo\./i.test(c.host)&&/^\/(list|feed)/i.test(d))return false;else if(/^\/bookmark\//i.test(d))return false;else if(/^\/cached/i.test(d))return false;else{if(/^\/item\/pdf/i.test(d))return false}else if(/^https?:\/\/chrome\.google\.com\/(extensions|webstore)/i.test(a))return false;return true}function Ub(a){var c=
[];$.each(a,function(d,f){c.push(encodeURIComponent(d)+"="+encodeURIComponent(f))});return c.join("&")}function na(a,c,d){this.options=$.extend({reverse:false,whatToShow:-1,filter:function(){return true}},d||{});this.node=a;this.func=c;this.end=false}function Gb(){if($("#diigolet-csm").length==0){L.init();xa(chrome.runtime.id);ia();H.init();da.init();Va()}}function Ma(a){if(a=="true")return true;else if(a=="false")return false}function Hb(){var a=[];k.myTagsWithCount.sort(function(m,n){return m.count<=
n.count?1:-1});var c=k.myTagsWithCount.slice(0,101),d=c[0].count,f=c.length;c.sort(function(m,n){return m.name.toLowerCase()<=n.name.toLowerCase()?-1:1});for(var h=0;h<f;h++)a[h]=c[h].count;a=Za(a);f=a.length;a.sort(function(m,n){return m<n?1:-1});var i=Math.ceil(f/10);f=a.slice(1,1+i);h=a.slice(1+i,1+2*i);a=a.slice(1+2*i,1+3*i);return{topTags:c,maxCount:d,a:f,b:h,c:a}}var x=window.diigolet={debug:false,logLevel:"never",version:"3.1.1",show:function(){ba.show();J.show()},callback:function(){z.callback.apply(z,
arguments)},devil:function(a){return eval(a)}};window.diigoletrocks=function(){x.logLevel="debug";window.d=window.D=x;window.dj=$;window.devil=window.e=x.devil;window.Bookmark=la;window.Annotation=M;window.TextHighlight=Xa;window.ImageHighlight=oa;window.FloatNote=pb;window.Comment=Ya;window.PageComment=ta;window.InlineComment=qa;window.Ctx=k;window.Toolbar=ba;window.DlgBookmark=P;window.DlgIC=H;window.Utils=F};$.browser.ieBelow7=$.browser.msie&&$.browser.version<7;$.browser.ieBelow8=$.browser.msie&&
$.browser.version<8;$.browser.supportPositionFixed=!$.browser.msie||$.browser.version>=7&&$.boxModel;$.fn.extend({showHide:function(a){return a?this.show():this.hide()}});(function(a){a.toJSON=JSON.stringify;a.parseJSON=JSON.parse})(jQuery);var F={dump:function(){window.diigolet.debug&&window.console&&console.log.apply(console,[].slice.call(arguments))},fork:function(a){setTimeout(function(){a()},13)}},za=F;F.lang={isArray:function(a){if(a)return this.isNumber(a.length)&&this.isFunction(a.splice)&&
!this.hasOwnProperty(a.length);return false},isBoolean:function(a){return typeof a==="boolean"},isFunction:function(a){return typeof a==="function"},isNull:function(a){return a===null},isNumber:function(a){return typeof a==="number"&&isFinite(a)},isObject:function(a){return a&&(typeof a==="object"||this.isFunction(a))||false},isString:function(a){return typeof a==="string"},isUndefined:function(a){return typeof a==="undefined"},hasOwnProperty:function(a,c){if(Object.prototype.hasOwnProperty)return a.hasOwnProperty(c);
return!this.isUndefined(a[c])&&a.constructor.prototype[c]!==a[c]},extend:function(){for(var a=[].slice.call(arguments),c=a.shift(),d=0,f=a.length,h;h=a[d],d<f;d++)for(var i in h)c[i]=h[i];return c},protectiveExtend:function(a,c){for(var d in c)if(a[d]!==undefined)a[d]=c[d]},extendFiltered:function(){for(var a=[].slice.call(arguments),c=a.shift(),d=a.pop(),f=0,h=a.length,i;i=a[f],f<h;f++)for(var m in i){var n=d(m);if(n)c[n===true?m:n]=i[m]}return c},toArray:function(a){return[].slice.call(a)},toBoolean:function(a){return!a?
false:a!="false"&&a!="0"},each:function(a,c,d){if(a.forEach)a.forEach(c,d);else for(var f in a)c.call(d,a[f],f)}};F.lang.extend(F,F.lang);F.array={findIndex:function(a,c,d){d=d=d||0;for(var f=a.length,h;h=a[d],d<f;d++)if(c(h))return d;return-1},find:function(a,c,d){c=this.findIndex(a,c,d);return c>-1?a[c]:null},concatMe:function(a,c){[].splice.apply(a,[a.length,0].concat(c));return a},unique:function(a,c){for(var d=[],f=0,h=a.length,i;i=a[f],f<h;f++)if(c)this.find(d,function(m){return c(m,i)})||d.push(i);
else d.indexOf(i)==-1&&d.push(i);return d},reverse:function(a){for(var c=Array(a.length),d=a.length-1,f=0;d>=0;d--,f++)c[f]=a[d];return c}};F.string={md5:function(a){function c(q,t){var u,y,B,E,G;B=q&2147483648;E=t&2147483648;u=q&1073741824;y=t&1073741824;G=(q&1073741823)+(t&1073741823);if(u&y)return G^2147483648^B^E;return u|y?G&1073741824?G^3221225472^B^E:G^1073741824^B^E:G^B^E}function d(q,t,u,y,B,E,G){q=c(q,c(c(t&u|~t&y,B),G));return c(q<<E|q>>>32-E,t)}function f(q,t,u,y,B,E,G){q=c(q,c(c(t&y|
u&~y,B),G));return c(q<<E|q>>>32-E,t)}function h(q,t,u,y,B,E,G){q=c(q,c(c(t^u^y,B),G));return c(q<<E|q>>>32-E,t)}function i(q,t,u,y,B,E,G){q=c(q,c(c(u^(t|~y),B),G));return c(q<<E|q>>>32-E,t)}function m(q){var t="",u="",y;for(y=0;y<=3;y++){u=q>>>y*8&255;u="0"+u.toString(16);t+=u.substr(u.length-2,2)}return t}var n=[],w,D,A,C,r,o,s,l;n=function(q){var t,u=q.length;t=u+8;for(var y=((t-t%64)/64+1)*16,B=Array(y-1),E=0,G=0;G<u;){t=(G-G%4)/4;E=G%4*8;B[t]|=q.charCodeAt(G)<<E;G++}t=(G-G%4)/4;E=G%4*8;B[t]|=
128<<E;B[y-2]=u<<3;B[y-1]=u>>>29;return B}(a);r=1732584193;o=4023233417;s=2562383102;l=271733878;for(a=0;a<n.length;a+=16){w=r;D=o;A=s;C=l;r=d(r,o,s,l,n[a+0],7,3614090360);l=d(l,r,o,s,n[a+1],12,3905402710);s=d(s,l,r,o,n[a+2],17,606105819);o=d(o,s,l,r,n[a+3],22,3250441966);r=d(r,o,s,l,n[a+4],7,4118548399);l=d(l,r,o,s,n[a+5],12,1200080426);s=d(s,l,r,o,n[a+6],17,2821735955);o=d(o,s,l,r,n[a+7],22,4249261313);r=d(r,o,s,l,n[a+8],7,1770035416);l=d(l,r,o,s,n[a+9],12,2336552879);s=d(s,l,r,o,n[a+10],17,4294925233);
o=d(o,s,l,r,n[a+11],22,2304563134);r=d(r,o,s,l,n[a+12],7,1804603682);l=d(l,r,o,s,n[a+13],12,4254626195);s=d(s,l,r,o,n[a+14],17,2792965006);o=d(o,s,l,r,n[a+15],22,1236535329);r=f(r,o,s,l,n[a+1],5,4129170786);l=f(l,r,o,s,n[a+6],9,3225465664);s=f(s,l,r,o,n[a+11],14,643717713);o=f(o,s,l,r,n[a+0],20,3921069994);r=f(r,o,s,l,n[a+5],5,3593408605);l=f(l,r,o,s,n[a+10],9,38016083);s=f(s,l,r,o,n[a+15],14,3634488961);o=f(o,s,l,r,n[a+4],20,3889429448);r=f(r,o,s,l,n[a+9],5,568446438);l=f(l,r,o,s,n[a+14],9,3275163606);
s=f(s,l,r,o,n[a+3],14,4107603335);o=f(o,s,l,r,n[a+8],20,1163531501);r=f(r,o,s,l,n[a+13],5,2850285829);l=f(l,r,o,s,n[a+2],9,4243563512);s=f(s,l,r,o,n[a+7],14,1735328473);o=f(o,s,l,r,n[a+12],20,2368359562);r=h(r,o,s,l,n[a+5],4,4294588738);l=h(l,r,o,s,n[a+8],11,2272392833);s=h(s,l,r,o,n[a+11],16,1839030562);o=h(o,s,l,r,n[a+14],23,4259657740);r=h(r,o,s,l,n[a+1],4,2763975236);l=h(l,r,o,s,n[a+4],11,1272893353);s=h(s,l,r,o,n[a+7],16,4139469664);o=h(o,s,l,r,n[a+10],23,3200236656);r=h(r,o,s,l,n[a+13],4,681279174);
l=h(l,r,o,s,n[a+0],11,3936430074);s=h(s,l,r,o,n[a+3],16,3572445317);o=h(o,s,l,r,n[a+6],23,76029189);r=h(r,o,s,l,n[a+9],4,3654602809);l=h(l,r,o,s,n[a+12],11,3873151461);s=h(s,l,r,o,n[a+15],16,530742520);o=h(o,s,l,r,n[a+2],23,3299628645);r=i(r,o,s,l,n[a+0],6,4096336452);l=i(l,r,o,s,n[a+7],10,1126891415);s=i(s,l,r,o,n[a+14],15,2878612391);o=i(o,s,l,r,n[a+5],21,4237533241);r=i(r,o,s,l,n[a+12],6,1700485571);l=i(l,r,o,s,n[a+3],10,2399980690);s=i(s,l,r,o,n[a+10],15,4293915773);o=i(o,s,l,r,n[a+1],21,2240044497);
r=i(r,o,s,l,n[a+8],6,1873313359);l=i(l,r,o,s,n[a+15],10,4264355552);s=i(s,l,r,o,n[a+6],15,2734768916);o=i(o,s,l,r,n[a+13],21,1309151649);r=i(r,o,s,l,n[a+4],6,4149444226);l=i(l,r,o,s,n[a+11],10,3174756917);s=i(s,l,r,o,n[a+2],15,718787259);o=i(o,s,l,r,n[a+9],21,3951481745);r=c(r,w);o=c(o,D);s=c(s,A);l=c(l,C)}return(m(r)+m(o)+m(s)+m(l)).toLowerCase()},strip:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},trim:function(a){return this.strip(a)},strip2:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,
"").replace(/\s+/g," ")},trim2:function(a){return this.strip2(a)},evalTpl:function(a,c){if(c.toTemplateReplacements)c=c.toTemplateReplacements();return a.replace(/(^|.|\r|\n)(#\{(.*?)\})/g,function(d,f,h,i){if(c==null)return"";d=f||"";if(d=="\\")return h;h=c;i=i;f=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;var m=f.exec(i);if(m==null)return"";for(;m!=null;){var n=m[1][0]=="["?m[2].replace(/\\\\]/g,"]"):m[1];h=h[n];if(null==h||""==m[3])break;i=i.substring("["==m[3]?m[1].length:m[0].length);m=f.exec(i)}return d+
(h==null?"":String(h))})},parseQuery:function(a,c){var d=F.string.strip(a).match(/([^?#]*)(#.*)?$/);if(!d)return{};var f={};F.each(d[1].split(c||"&"),function(h){if((h=h.split("="))[0]){var i=decodeURIComponent(h.shift());h=h.length>1?h.join("="):h[0];if(h!=undefined)h=decodeURIComponent(h);if(i in f){F.isArray(f[i])||(f[i]=[f[i]]);f[i].push(h)}else f[i]=h}});return f},toQueryString:function(a){var c=function(f,h){f=encodeURIComponent(f);h===undefined?d.push(f):d.push(f+"="+(h==null?"":encodeURIComponent(h)))},
d=[];F.each(a,function(f,h){if(h)if(f&&typeof f=="object")F.isArray(f)&&F.each(f,function(i){c(h,i)});else c(h,f)});return d.join("&")},escapeRegexp:function(a){if(!arguments.callee.sRE)arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return a.replace(arguments.callee.sRE,"\\$1")},stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"").replace(/[<>]/g,"")},stripScripts:function(a){return a.replace(RegExp("<script[^>]*>([\\S\\s]*?)<\/script>","img"),"")},
scan:function(a,c,d){if(!c.global)throw"string.scan: pattern is not global";for(var f;f=c.exec(a);)d(f)},split:function(a,c){return(a=this.strip(a||""))?a.split(c):[]},truncate:function(a,c,d){if(a.length<=c)return a;if(typeof d!="string")d="...";return a.substr(0,c-d.length)+d}};F.url={isSubDomainOf:function(){}};F.dom={build2:function(){var a=[],c=arguments,d,f,h=0,i;for(c=c[0]instanceof Array?c[0]:c;h<c.length;h++)if(c[h+1]instanceof Object){d=a[a.length]=document.createElement(c[h]);for(i in c[++h])d.setAttribute(i,
c[h][i]);if(c[h+1]instanceof Array){f=arguments.callee(c[++h]);for(i=0;i<f.length;i++)d.appendChild(f[i])}}else a[a.length]=document.createTextNode(c[h]);return a},buildOne:function(a,c,d){return this.build2(a,c,d)[0]},isChildOf:function(a,c){for(var d=a;d&&(d=d.parentNode);)if(d==c)return true;return false},HTML_addCSS:function(a,c,d){var f=a.createElement("style");f.setAttribute("type","text/css");d&&f.setAttribute("id",d);f.appendChild(a.createTextNode(c));(a.getElementsByTagName("head")[0]||a.body).appendChild(f)}};
var ub=["debug","info","error"];if(!Array.prototype.indexOf)Array.prototype.indexOf=function(a,c){var d=this.length,f=Number(c)||0;f=f<0?Math.ceil(f):Math.floor(f);if(f<0)f+=d;for(;f<d;f++)if(f in this&&this[f]===a)return f;return-1};var Ob=/(^|.|\r|\n)(#\{(.*?)\})/;F={parseColor:function(a){var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,
0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,
128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};return c[a]?{r:c[a][0],g:c[a][1],b:c[a][2]}:(result=/^rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)$/.exec(a))?{r:parseInt(result[1]),g:parseInt(result[2]),b:parseInt(result[3])}:(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)$/.exec(a))?{r:parseFloat(result[1])*2.55,g:parseFloat(result[2])*
2.55,b:parseFloat(result[3])*2.55}:(result=/^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(a))?{r:parseInt("0x"+result[1]+result[1]),g:parseInt("0x"+result[2]+result[2]),b:parseInt("0x"+result[3]+result[3])}:(result=/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(a))?{r:parseInt("0x"+result[1]),g:parseInt("0x"+result[2]),b:parseInt("0x"+result[3])}:{r:255,g:255,b:255}},dom:{build:function(){var a=[],c=arguments,d,f,h=0,i;for(c=c[0]instanceof Array?c[0]:c;h<c.length;h++)if(c[h+1]instanceof
Object){d=a[a.length]=document.createElement(c[h]);for(i in c[++h])d.setAttribute(i,c[h][i]);if(c[h+1]instanceof Array){f=arguments.callee(c[++h]);for(i=0;i<f.length;i++)d.appendChild(f[i])}}else a[a.length]=document.createTextNode(c[h]);return a},buildOne:function(a,c,d){return this.build(a,c,d)[0]},getSelection:function(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection():document.selection.createRange().text}},content2Html:function(a){return this.safeHtml(a).replace(/\n/g,
"<br/>")},safeHtml:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}};var Vb={mixin:function(a){Sa(a,this,Pa("addEventListener removeEventListener fireEvent _resetEvents"));a._resetEvents()},addEventListener:function(a,c){this._events[a]||(this._events[a]=[]);var d=this._events[a];d.indexOf(c)==-1&&d.push(c)},removeEventListener:function(a,c){var d=this._events[a];if(d)if(arguments.length==2){var f=d.indexOf(c);f>-1&&d.splice(f)}else delete this._events[a]},_resetEvents:function(){this._supressEvents=
false;this._events={}},fireEvent:function(a,c){if(!this._supressEvents){I("[event]",a);var d=this._events[a];if(d)for(var f=0,h,i=d.length;h=d[f],f<i;f++)(typeof h=="function"?h:h["on"+a]).apply(h,c)}}};if(typeof Na=="undefined")var Na={};Na.URLParser=function(a){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Pathname:8,URL:0,Querystring:9,Fragment:10};this._values={};this._regex=null;this.version=0.1;this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/;
for(var c in this._fields)this["get"+c]=this._makeGetter(c);typeof a!="undefined"&&this._parse(a)};Na.URLParser.prototype.setURL=function(a){this._parse(a)};Na.URLParser.prototype._initValues=function(){for(var a in this._fields)this._values[a]=""};Na.URLParser.prototype._parse=function(a){this._initValues();a=this._regex.exec(a);if(!a)throw"DPURLParser::_parse -> Invalid URL";for(var c in this._fields)if(typeof a[this._fields[c]]!="undefined")this._values[c]=a[this._fields[c]]};Na.URLParser.prototype._makeGetter=
function(a){return function(){return this._values[a]}};bb.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
var ea=function(){};ea.extend=function(a,c){var d=ea.prototype.extend;ea._prototyping=true;var f=new this;d.call(f,a);delete ea._prototyping;var h=f.constructor,i=f.constructor=function(){if(!ea._prototyping)if(this._constructing||this.constructor==i){this._constructing=true;h.apply(this,arguments);delete this._constructing}else if(arguments[0]!=null)return(arguments[0].extend||d).call(arguments[0],f)};i.ancestor=this;i.extend=this.extend;i.forEach=this.forEach;i.implement=this.implement;i.prototype=
f;i.toString=this.toString;i.valueOf=function(m){return m=="object"?i:h.valueOf()};d.call(i,c);typeof i.init=="function"&&i.init();return i};ea.prototype={extend:function(a,c){if(arguments.length>1){var d=this[a];if(d&&typeof c=="function"&&(!d.valueOf||d.valueOf()!=c.valueOf())&&/\bbase\b/.test(c)){var f=c.valueOf();c=function(){var D=this.base||ea.prototype.base;this.base=d;var A=f.apply(this,arguments);this.base=D;return A};c.valueOf=function(D){return D=="object"?c:f};c.toString=ea.toString}this[a]=
c}else if(a){var h=ea.prototype.extend;if(!ea._prototyping&&typeof this!="function")h=this.extend||h;for(var i={toSource:null},m=["constructor","toString","valueOf"],n=ea._prototyping?0:1;w=m[n++];)a[w]!=i[w]&&h.call(this,w,a[w]);for(var w in a)i[w]||h.call(this,w,a[w])}return this},base:function(){}};ea=ea.extend({constructor:function(a){this.extend(a)}},{ancestor:Object,version:"1.1",forEach:function(a,c,d){for(var f in a)this.prototype[f]===undefined&&c.call(d,a[f],f,a)},implement:function(){for(var a=
0;a<arguments.length;a++)typeof arguments[a]=="function"?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}});jQuery.Draggable=function(a,c){function d(A){if(A.button==0){m=false;i(document).bind("mousemove",f).bind("mouseup",h);w=A.pageX;D=A.pageY;return false}}function f(A){m||n.beforeDrag(A);m=true;var C=parseInt(a.css("left")),r=parseInt(a.css("top")),o=A.pageX-w,s=A.pageY-D;n.onDrag(a,{ox:o,oy:s})&&a.css({left:C+o,
top:r+s});w=A.pageX;D=A.pageY;return false}function h(A){i(document).unbind("mousemove",f).unbind("mouseup",h);if(m){n.afterDrag(A);return false}else return true}var i=jQuery,m=false;a=this.ele=i(a);a[0]._draggable&&a[0]._draggable.destroy();a[0]._draggable=this;var n=this.options=i.extend({handle:"",cursor:"move",onDrag:function(){return true},beforeDrag:function(){},afterDrag:function(){}},c||{});n.handle=n.handle?i(n.handle,a):a;n.handle.css({cursor:n.cursor});var w,D;this.destroy=function(){n.handle.unbind("mousedown",
d)};n.handle.bind("mousedown",d)};var Db=function(a,c){function d(l){var q=-1,t="";$.each(o.multipleSeparator,function(u,y){var B;if((B=l.lastIndexOf(y))>q){t=y;q=B}});return[q,t]}function f(){s.hide()}function h(l){switch(l.keyCode){case 38:l.preventDefault();m(-1);break;case 40:l.preventDefault();m(1);break;case 9:case 13:if(s.is(":visible")){i()?s.hide():m(1);l.preventDefault();l.stopPropagation()}break;case 27:if(s.is(":visible")){l.preventDefault();l.stopPropagation();s.hide()}break;case 32:if(s.is(":visible")){l.stopPropagation();
s.hide()}break;default:r=-1;C&&clearTimeout(C);C=setTimeout(function(){A.val().length<o.minChars?s.hide():n(A.val())},o.delay);break}}function i(l){if(l!==undefined){r=l;m(0)}l=r;if(!(l<0)){var q=s.find("li").eq(l).html();if(q.indexOf(" ")>=0)q='"'+q+'"';if(o.mode=="multiple"){l=A.val();var t=d(l);new_value=t[0]>=1?l.substr(0,t[0]+1)+q+t[1]:q+" "}else new_value=q;A.val(new_value);A.trigger("input");s.hide();o.onItemSelect&&setTimeout(function(){o.onItemSelect(q)},1);setTimeout(function(){A[0].focus();
(function(u,y){if(u.createTextRange){var B=u.createTextRange();B.move("character",y);B.select()}else if(u.selectionStart>=0){u.focus();u.setSelectionRange(y,y)}})(A[0],A.val().length)},13);return true}}function m(l){var q=s.find("li");if(q.size()!=0){r+=l;if(r<0)r=q.size()-1;else if(r>=q.size())r=0;q.removeClass("over").eq(r).addClass("over")}}function n(l){if(o.mode=="multiple"){var q=d(l),t="";t=q[0]>0?l.substr(q[0]+1):l;if(t.length>0){tags=x.parseTags(t,true);l=tags.pop()}else{l=t;s.hide();return}}l=
l.toLowerCase();q=[];t=[];for(var u=0,y;y=o.data[u],u<o.data.length;u++)if(y.toLowerCase().indexOf(l)==0)q.push(y);else y.toLowerCase().indexOf(l)!=0&&y.toLowerCase().indexOf(l)!=-1&&t.push(y);t.sort(function(B,E){return B.indexOf(l)<=E.indexOf(l)?-1:1});q=q.concat(t);w(l,q)}function w(l,q){if(q&&q.length>0){q.length>8&&q.splice(7,99999);var t=function(u){for(var y=u.offsetLeft||0,B=u.offsetTop||0;u=u.offsetParent;){y+=u.offsetLeft;B+=u.offsetTop}if($.browser.opera&&document.compatMode!="CSS1Compat")B+=
30;return{x:y+0,y:B+0}}(A[0]);s.find("li").unbind();s.find("ul").html($.map(q,function(u){return"<li>"+u+"</li>"}).join("")).end().css({top:t.y+A[0].offsetHeight,left:t.x}).show();s.find("li").mouseover(function(u){r=s.find("li").index(u.target);m(0)}).mousedown(function(u){r=s.find("li").index(u.target);m(0);i();return false})}else s.hide()}function D(){s.hide()}var A=$(a),C,r=-1;A[0].autoCompleter&&A[0].autoCompleter.destroy();A[0].autoCompleter=this;var o=c=$.extend({inputClass:"ac_input",resultsClass:"ac_results",
minChars:1,delay:100,matchCase:0,matchSubset:1,matchContains:0,mustMatch:0,loadingClass:"ac_loading",selectFirst:false,selectOnly:false,mode:"multiple",multipleSeparator:" "},c||{});if(typeof o.multipleSeparator=="string")o.multipleSeparator=o.multipleSeparator.split("");this.destroy=function(){A.unbind("keydown",h).unbind("blur",D);$(window).unbind("scroll",f);A[0].autoCompleter=null};A.attr("autocomplete","off").addClass(o.inputClass).bind("keydown",h).bind("blur",D);$.browser.supportPositionFixed||
$(window).bind("scroll",f);var s=$("#"+c.id);if(s.size()==0){s=$('<div id="'+c.id+'"><ul></ul></div>').addClass(o.resultsClass).hide().css({position:$.browser.supportPositionFixed?"fixed":"absolute"}).appendTo(document.body).hide();$.browser.ieBelow7&&s.append(document.createElement("<iframe class=\"bgiframe\" src=\"javascript:false;document.write('');\" tabindex=\"-1\" style=\"display:block; position:absolute; top: expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)  || 0) * -1) + 'px'); left:expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth) || 0) * -1) + 'px'); z-index:-1; filter:Alpha(Opacity='0'); width:expression(this.parentNode.offsetWidth + 'px'); height:expression(this.parentNode.offsetHeight + 'px')\"/>"))}},
cb='<div id="diigolet-toolbar" class="diigolet" title="Diigolet version #{DIIGOLET_VERSION}"><div id="diigolet-tb-content"><div id="diigolet-tb-bar"><a id="diigolet-tb-btnHide" href="#" class="_hoverAndHideDropdown" onclick="return diigolet.handle(event, \'hideToolbar\');" title="Hide the toolbar"></a><a style="float:right; width:30px;height:24px;background:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletHelp.gif\') no-repeat 50% 50%" href="#" onmouseover="return diigolet.handle(event, \'showHelp\');" onclick="return diigolet.handle(event, \'showHelp\');" title="Help"></a><a id="diigolet-tb-btnMore" href="#" class="diigoletButton hover" onclick="return false;" onmouseover="return diigolet.handle(event, \'tb_showDropDownMenu\', \'#diigolet-tb-moreMenu\')"><b class="outer"><b>Diigo</b></b></a><a id="diigolet-tb-btnBookmark" href="#" class="diigoletButton" onclick="diigolet.handle(event, \'bookmark\');" title="Bookmark this page"><b class="outer"><b>Bookmark</b></b></a><a id="diigolet-button-highlight" href="#" class="diigoletButton" onmouseout="diigolet.handle(event, \'outHighlight\');" onmouseover="diigolet.handle(event, \'overHighlight\');" onmousedown="this.blur();return diigolet.handle(event, \'highlight\');" onclick="return false;" title="Selected some text to highlight"><b class="outer"><b>Highlight</b></b></a><a id="diigolet-button-highlight-dropdown" href="#" class="diigoletButton" onmouseout="diigolet.handle(event, \'outHighlight\');" onmouseover="diigolet.handle(event, \'overHighlight\');" onmousedown="this.blur();return diigolet.handle(event, \'dropDownColorMenu\');" onclick="return false;"></a><a id="diigolet-tb-btnFloatNote" href="#" class="diigoletButton" title="Add a sticky note" onclick="diigolet.handle(event, \'addStickyNote\')"><b class="outer"><b>Floating Sticky Note</b></b></a><a id="diigolet-tb-btnComment" href="#" class="diigoletButton" title="View comments" onclick="return diigolet.handle(event, \'tb_viewComments\')"><b class="outer"><b>Comment</b></b></a><span id="diigoDivInfo" style="padding-left:25px; float:left"><span style="display:none" id="diigolet-tb-forward">Annotated <a href="#" class="_forwardPageUrl" title="Go to the original page">page</a> by <a href="#" class="_forwardUserUrl" title=""></a>.\n\t\t\t</span><span class="_info"></span></span></div><div id="diigolet-tb-signInMenu" class="dropdownMenu" style="left:1px;width:80px"><a href="#" title="Sign in into Diigo.com" onclick="return diigolet.handle(event, \'tb_signIn\')">Sign in</a><a href="#{URL_DIIGO}/sign-up" title="Create a Diigo account" target="_blank">Sign up</a></div><div id="diigolet-tb-moreMenu" class="dropdownMenu" style="left:10px" onclick="this.style.display = \'none\'"><a href="#" class="_URL_MY_LIBRARY _diigomenu" title="My Library" target="_blank">My Library</a><a href="#" class="_URL_MY_LIST _diigomenu" title="My lists home" target="_blank">My lists home</a><a href="#" class="_URL_MY_GROUP _diigomenu" title="My groups home" target="_blank">My groups home</a><a href="#" class="_URL_NETWORK _diigomenu" title="My Network" target="_blank">My Network</a><a href="#" class="_URL_HOT_BOOKMARK _diigomenu" title="Hot Bookmark" target="_blank">Hot Bookmark</a><div><img style="height:2px;width:140px;" src="chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletToobarSep.png"/></div><a href="#" title="Show/hide highlight" onclick="diigolet.handle(event, \'showHideHighlight\')">Show/hide highlight</a></div><div id="diigolet-tb-colorMenu" class="dropdownMenu" style="left:329px" onclick="this.style.display = \'none\'"><a href="#" id="diigolet-colorMenu-yellow" onclick="diigolet.handle(event, \'ChangeColor\', \'yellow\')"><b class="colorItem"><b>Yellow</b></b></a><a href="#" id="diigolet-colorMenu-blue" onclick="diigolet.handle(event, \'ChangeColor\', \'blue\')"><b class="colorItem"><b>Blue</b></b></a><a href="#" id="diigolet-colorMenu-green" onclick="diigolet.handle(event, \'ChangeColor\', \'green\')"><b class="colorItem"><b>Green</b></b></a><a href="#" id="diigolet-colorMenu-pink" onclick="diigolet.handle(event, \'ChangeColor\', \'pink\')"><b class="colorItem"><b>Pink</b></b></a></div><div style="clear:both"></div></div><div id="diigolet-tb-shadow"></div><div id="diigolet-help"><div class="diigolet-closeBtn" onclick="diigolet.handle(event, \'hideHelp\')"></div><p>To highlight, select some text and click "Highlight" on the context menu.</p><p>To add a sticky note, move your mouse over highlighted text and the click \n\t"Add Sticky Notes" on the context menu.</p><p><a target="_blank" href="http://help.diigo.com/no-toolbar-simple-diigolet/use-diigolet" title="View full Help">View full help</a></p></div><div id="diigolet-notify" class="diigolet"><span></span></div><div id="diigolet-annotationSummary" style="width:360px;display:none;"></div></div>\n',
yb='<div id="diigolet-tray" class="diigolet" onmouseover="diigolet.handle(event, \'mouseOnBorder\');"></div>\n',db='<div class="diigolet" id="diigolet-tagForward"><div id="diigolet-tagForward-topBar" class="_dragHandle"><span>Save to Diigo</span><div id="diigolet-tagForward-remove" data-gtooltip="Saved on April 24,2013"><span></span></div></div><div id="diigolet-Bookmark-Form"><div id="Diigo-Bookmark-Title"><div id="link-icon" data-gtooltip="Edit url"></div><input type="text" id="Diigo-Bookmark-Title-Input" value="DISQUS - Elevating the discussion"><div class="diigo-alert-tip"><span>Please input a bookmark title</span><div class="diigo-alert-tip-arrow"></div></div></div><div id="Diigo-Bookmark-Url"><input type="text" id="Diigo-Bookmark-Url-Input" value="http://disqus.com"><div id="url-arrow"></div><div class="diigo-alert-tip"><span>Please input a valid url</span><div class="diigo-alert-tip-arrow"></div></div></div><div id="Diigo-Bookmark-Options"><div id="Diigo-Bookmark-Privacy" class="diigo-option" data-gtooltip = "private"><div class="op-checkbox-container" title="Make this bookmark private"><div class="op-checkbox"></div><div class="op-label">Private</div></div></div><div id="Diigo-Bookmark-Unread" class="diigo-option" data-gtooltip = "readlater"><div class="op-checkbox-container" title="Mark this bookmark as unread"v><div class="op-checkbox"></div><div class="op-label">Read Later</div></div></div><div id="Diigo-Bookmark-uploadCache" class="diigo-option" data-gtooltip = "cache"><div class="op-checkbox-container" title="Upload a copy of the page"><div class="op-checkbox"></div><div class="op-label">Cache</div></div></div></div><div id="Diigo-Bookmark-Description"><textarea id="Diigo-Bookmark-Description-Input" placeholder="Add description"></textarea></div><div id="Diigo-Bookmark-Tag"><div id="Diigo-Bookmark-Tag-Wrapper"><span id="Diigo-Bookmark-Tag-dropdown"></span><input type="text" id="Diigo-Bookmark-Tag-Input" placeholder="Input or select tags"></div></div><div id="Diigo-Bookmark-Tag-suggestion"><div id="diigolet-bm-tagListContainer-recent" class="diigo-su-tag"><a href="javascript:void(0)" title="Select to add all">Recent Tags:</a></div><div id="diigolet-bm-tagListContainer-recommend" class="diigo-su-tag"><a href="javascript:void(0)">Recommended:</a><!--<div class="loading"></div>--\></div><div id="diigolet-bm-tagListContainer-group" class="diigo-su-tag"><a href="javascript:void(0)">Group dictionary:</a><div class="loading"></div></div></div><div id="Diigo-Bookmark-Tag-Cloud"><div>\n                Select from your top 100 tags:\n                <a href="#" id="Diigo-Bookmark-Tag-Eidt" target="_blank">Edit tags &gt;&gt;</a></div><div id="Diigo-Bookmark-Tag-Cloud-Container"></div></div><div id="diigo-list-group"><div id="diigo-list-add"><div class="diigo-alert-tip"><span>Name exsit !</span><div class="diigo-alert-tip-arrow"></div></div><input type="text" id="diigo-list-addInput"><div id="diigo-list-addBtn"><span class=\'label\'>Add</span><span class="spinner"></span></div><a id="diigo-list-addCancel">Cancel</a></div><div id="diigo-list"><select></select></div><div id="diigo-group"><select></select></div></div></div><div id="Diigo-Bookmark-bottom"><div id="Diigo-Bookmark-checkShareExisting"><div class="op-checkbox-container checked"><div class="op-checkbox"></div><div class="op-label">Share my existing annotations</div></div></div><div id="diigolet-dlgBm-btnSave">Save</div><a id="diigolet-dlgBm-btnCancel">cancel</a></div></div>\n',
zb='<div id="diigolet-twitter" class="diigolet"><table width="100%" border="0" cellspacing="4" cellpadding="2"><tr><td><img width="210px" height="49px" src="http://assets3.twitter.com/images/twitter.png"/></td></tr><tr><td><p>Share this bookmark with friends on Twitter</p></td></tr><tr><td><fieldset><legend>Input your message</legend><textarea id="message-editor" onkeyup="diigolet.handle(event, \'OnTwitterMsgChange\')" style="margin-top:5px;margin-bottom:5px;width:361px;height:113px;"></textarea><span style="margin-right:5px" id="left-count">51</span>characters left\n\t\t      \t</fieldset></td></tr><tr><td colspan="2" style="text-align: right;"><input type="button" class="diigo-button" onclick="return diigolet.handle(event, \'TwitterPost\')" value="Post"/><input type="button" class="diigo-button" onclick="return diigolet.handle(event, \'TwitterCancel\')" value="Cancel" style="font-weight:normal"/></td></tr></table></div>\n',
eb='<div id="diigolet-dlg-sticky" style="position: absolute;left: 100px;top:100px;" class="diigolet diigoletFN yellow"><div id="diigolet-dlg-sticky-top" class="_dragHandle"><span id="diigolet-dlg-sticky-close"></span><span id="diigolet-dlg-sticky-color"><div id="diigolet-dlg-sticky-currentColor" title="change color"></div><div id="diigolet-dlg-sticky-colorPicker"><b color="yellow" id="diigolet-dlg-yellow" class="dlg-colorItem colorchecked"><b></b></b><b color="blue" id="diigolet-dlg-blue" class="dlg-colorItem"><b></b></b><b color="green" id="diigolet-dlg-green" class="dlg-colorItem"><b></b></b><b color="pink" id="diigolet-dlg-pink" class="dlg-colorItem"><b></b></b></div></span><span id="diigolet-dlg-sticky-addTab"></span></div><div id="diigolet-dlg-sticky-content" class="private"><div id="diigolet-dlg-sticky-switcher"><span class="FN-switcher" id="FN-switcher-private"><b></b>Private</span><span class="FN-switcher" id="FN-switcher-group"><b></b>Group</span></div><div class="FN-content-wrapper private"><textarea id="FN-private-editor" placeholder="Input here..."></textarea><div id="FN-content-footer"><div id="editDone"><span id="FN-private-delete"><b></b></span><span id="FN-private-datetime"></span></div><div id="editing"><a href="javascript:void(0)" id="FN-private-saveBtn">Save</a><a href="javascript:void(0)" id="FN-private-cancelBtn">Cancel</a></div></div></div><div class="FN-content-wrapper group"><div><div id="FN-group-content-nav"><span id="FN-current-group"><span>+Share to a new group</span><b></b></span><div id="FN-group-menu"><ul id="FN-group-ul"></ul><ul id="FN-group-share-new-ul"><li id="FN-group-share-new">+Share to a new group</li></ul></div></div><div id="FN-post-form" class=""><div><textarea id="FN-group-post" placeholder="write a comment..."></textarea></div><div><select id="FN-group-share"><option>Choose a group</option><option>test</option></select><button><span class="button-label">Post</span><span class="button-spinner"></span></button><a href="javascript:void(0)">Cancel</a></div></div><div id="FN-group-content"><div id="FN-group-content-container"></div><div id="FN-group-content-postform"><textarea placeholder="Write a comment..."></textarea><div class="post-action"><button><span class="button-label">Post</span><span class="button-spinner"></span></button><a href="javascript:void(0)">Cancel</a></div></div></div></div></div></div></div>\n',
jb='<div id="diigolet-dialog-share" class="diigolet"><div id="diigolet-dialog-share-title" class="_dragHandle"><a id="diigolet-dialog-share-closeBtn" href="javascript:void(0);"></a><span>Share - Diigo</span></div><div id="diigolet-diglog-tabs"><ul id="diigolet-share-shareToTabs"><li class="shareToTwitter"><a id="diigolet-share-tab-twitter" diigotab="twitter" href="javascript:void(0)"><b>&#160;</b>Twitter</a></li><li class="shareToFacebook"><a id="diigolet-share-tab-facebook" diigotab="facebook" href="javascript:void(0)"><b>&#160;</b>Facebook</a></li><li class="shareToGplus"><a id="diigolet-share-tab-gPlus" diigotab="gPlus" href="javascript:void(0)"><b>&#160;</b>Google+</a></li><li class="shareToEmail"><a id="diigolet-share-tab-email" diigotab="email" href="javascript:void(0)"><b>&#160;</b>Email</a></li><li class="getAnnotatedLink"><a id="diigolet-share-tab-annotatedLink" diigotab="annotatedLink" href="javascript:void(0)"><b>&#160;</b>Annotated Link</a></li></ul></div><div id="diigolet-dialog-share-content"><div id="diigolet-dialog-share-twitter" style="display:none;"><p class="twitterDesc"><b id="diigolet-share-twitterLeftChars">20</b>Share this bookmark with friends on Twitter</p><textarea id="diigolet-dialog-share-twitterMsg" class="inputTxt">\n                FTA - Main page | FTA - Free Technology Academy http://bit.ly/d4OiXQ via www.diigo.com/~soraya\n                </textarea><div class="buttonRow clearfloat"><div style="float:left"><a href="http://www.twitter.com/diigo"><img src="chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/follow-us.png" alt="Follow diigo on Twitter" align="absmiddle"/></a></div><span id="diigolet-dialog-share-twitter-signInStatus"><span id="diigolet-dialog-share-twitter-signedIn">Signed in as <span></span><a href="#">(not you?)</a></span><a id="diigolet-dialog-share-twitter-notSignedIn" href="#">Click here to connect to twitter</a></span><!--<input type="button" value="Cancel" /><input class="defaultAction diigoBtn" type="button" value="Send" />--\><a href="javascript:void(0)" id="diigolet-twitter-saveBtn" class="diigoBtn">Send</a><a href="javascript:void(0)" id="diigolet-twitter-cancelBtn">Cancel</a></div></div><div id="diigolet-dialog-share-facebook" style="display:none;">\n                Please finish sharing in the popup window.\n            </div><div id="diigolet-dialog-share-gPlus" style="display:none;">\n                Please finish sharing in the popup window.\n            </div><div id="diigolet-dialog-share-email" style="display: none"><table><tbody><tr><td style="width:60px"><label for="diigolet-dialog-share-email-to">To:</label></td><td><input id="diigolet-dialog-share-email-to" type="text" class="inputTxt" style="display:none" diigocomment="unused"/><div id="forwardTo" class="autocompleteContacts"></div></td></tr><tr><td><label for="diigolet-dialog-share-email-subject">Subject:</label></td><td><input id="diigolet-dialog-share-email-subject" type="text" class="inputTxt" /></td></tr></tbody></table><p><label id="diigolet-dialog-share-email-quotes-checker"><input type="checkbox" />Include Quotes</label><label for="diigolet-dialog-share-email-message">Message:</label><br/><textarea id="diigolet-dialog-share-email-message" class="inputTxt"></textarea></p><div id="diigolet-dialog-share-email-quotes"><div id="diigolet-aidlog-share-email-quotes-content"><strong>Quotes:</strong><div style="border-left: 3px solid #ddd;padding-left: 5px;margin-left: 5px;margin-top: 5px;"><p> After a 71/2-hour summit, Obama suggested Democrats may go it alone to try to pass an overhaul. By Charles Babington Associated Press WASHINGTON - Giving no ground, President Obama and Republican leaders fought forcefully for their competing visions of </p></div></div></div><div class="buttonRow clearfloat"><a href="javascript:void(0)" id="diigolet-email-saveBtn" class="diigoBtn">Send</a><a href="javascript:void(0)" id="diigolet-email-cancelBtn">Cancel</a></div></div><div id="diigolet-dialog-share-annotatedLink" style="display:none;"><div class="annotatedLinkInfo"><b>&#160;</b>An Annotated Link is a special URL provided by Diigo that allows you to share the current webpage complete with highlights and sticky notes to anyone.<br/><strong>Copy the URL below </strong>and paste it into your blog, email or IM messages...\n        \t\t\t</div><p><input id="diigolet-dialog-share-annotatedLink-value" type="text" class="inputTxt" value="http://www.diigo.com/09ijt" /></p><div class="buttonRow clearfloat"><span id="diigolet-dialog-share-annotatedLink-optLinks"><a href="javascript:void(0)" target="_blank">Preview</a></span><a href="javascript:void(0)" id="diigolet-annotatedLink-saveBtn" class="diigoBtn">Copy</a><a href="javascript:void(0)" id="diigolet-annotatedLink-cancelBtn">Cancel</a></div></div></div></div>\n',
fb='<div class="diigolet d3df themeDefault" id="d3df-sidebar"><div class="heading bgColor1 _dragHandle" style="zoom:1;border:none;"><a href="#{URL_DIIGO}" style="background: transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv1.gif) no-repeat scroll left -4px; padding-left: 20px; float:left">\n\t\tDiigo</a><a class="_signIn" href="#" title="Sign in into Diigo.com" style="float:left;margin-left:10px" onclick="return diigolet.handle(event, \'tb_signIn\')">sign in</a><div style="float: right;" title="Pop out and pin" class="popOut" onclick="diigolet.devil(\'Sidebar\').popOut();"></div><div style="clear:both"></div></div><div class="heading bgColor1 color2"><a id="d3df-togglePanelInline" class="togglePanel" href="#" onclick="diigolet.devil(\'Sidebar\').togglePanel(\'inline\');return false;"></a><a class="add" href="#" onclick="diigolet.devil(\'Sidebar\').addInlineComment();return false;">+Add</a><p><span class="_inlineCommentsTitle">Inline Comments</span>(<span class="_inlineCommentCount">0</span>)</p></div><ul id="d3df-inlineCommentBox" class="highlights bgColor2" style="overflow:auto">\n</ul><div class="heading bgColor1"><a id="d3df-togglePanelPage" class="togglePanel" href="#" onclick="diigolet.devil(\'Sidebar\').togglePanel(\'page\');return false;"></a><a class="add" href="#" onclick="diigolet.devil(\'Sidebar\').showEditPageCommentBox();return false;">Add</a><p>Page Comments(<span class="_pageCommentCount">0</span>)</p></div><div id="d3df-pageCommentBox" class=" bgColor1"><div class="addComment"><select id="diigolet-sb-selpc" style="margin-left:5px"></select><textarea id="diigolet-sb-txtpc" name="txtComment" rows="4" style="margin:5px;width:90%"></textarea><div style="margin:5px"><input class="diigo-button" type="button" value="Post" onclick="diigolet.devil(\'Sidebar\').addCommentSubmit()"/><input class="diigo-button" type="button" value="Cancel" onclick="diigolet.devil(\'Sidebar\').showEditPageCommentBox(false);"/></div></div><ul id="d3df-pageCommentList" class="comments" style="overflow:auto">\n</ul></div></div>\n',
Ua='<div id="diigolet-csm"><div id="diigolet-csm-highlight-wrapper" class="csm-btn"><a id="diigolet-csm-highlight" class="csm-action" href="javascript:void(0);"></a><div class="diigolet-csm-color small hidden"><a class="diigolet-csm-coloritem yellow" data-color="yellow"></a><a class="diigolet-csm-coloritem blue" data-color="blue"></a><a class="diigolet-csm-coloritem green" data-color="green"></a><a class="diigolet-csm-coloritem pink" data-color="pink"></a></div></div><div id="diigolet-csm-highlightAndComment-wrapper" class="csm-btn"><a id="diigolet-csm-highlightAndComment" class="csm-action" href="javascript:void(0);"></a><div class="diigolet-csm-color small hidden"><a class="diigolet-csm-coloritem yellow" data-color="yellow"></a><a class="diigolet-csm-coloritem blue" data-color="blue"></a><a class="diigolet-csm-coloritem green" data-color="green"></a><a class="diigolet-csm-coloritem pink" data-color="pink"></a></div></div><a id="diigolet-csm-search" class="csm-action" href="javascript:void(0);"></a></div>\n',
gb='<div id="diigolet-annMenu" class="diigolet diigoletContexMenu"><div id="diigolet-annMenu-color" class="diigolet-annMenu-item _onlyMy"><b id="diigolet-annMenu-currentColor" title="change color"><b></b></b><div id="diigolet-annMenu-colorPicker"><b id="diigolet-context-yellow" color="yellow" class="ann-colorItem"><b></b></b><b id="diigolet-context-blue" color="blue" class="ann-colorItem"><b></b></b><b id="diigolet-context-green" color="green" class="ann-colorItem"><b></b></b><b id="diigolet-context-pink" color="pink" class="ann-colorItem"><b></b></b></div></div><div id="diigolet-annMenu-add" class="diigolet-annMenu-item" title="add a sticky note"><b></b></div><div id="diigolet-annMenu-share" class="diigolet-annMenu-item" title="share"><b></b></div><div id="diigolet-annMenu-del" class="diigolet-annMenu-item _onlyMy" title="delete"><b></b></div><div id="diigolet-annMenu-more" class="diigolet-annMenu-item" title="more action"><b></b></div><div id="diigolet-annMenu-arrow"></div><div id="diigolet-annMenu-moreThings"><ul><li><a href="javascript:void(0)" id="diigolet-annMenu-My">View in My Library</a></li><!--<li><a href="javascript:void(0)" id="diigolet-annMenu-copy-highlights">Copy this highlight</a></li>--\><li id="diigolet-annMenu-tip"></li></ul></div></div>\n',
hb='<div class="diigolet floatNote diigoshow"><span>10</span></div>\n',Ab="",Bb="",ib='<div id="diigolet-panel-panel" class="diigolet notSignedIn"><div id="diigolet-panel-logo" title="Expand the Annotation Toolbar"></div><div id="diigolet-panel-main" class="clearfloat"><div id="diigolet-panel-fold" title="Collapse the Annotation Toolbar"></div><div id="diigolet-panel-Highlight" class="diigolet-panel-btn"><div id="diigolet-panel-hightlight-dropdown" title="Select a highlight color"><b></b></div><div id="diigolet-panel-btnHighlight" title="Select text to highlight or click to turn on a highlighter pen"><b></b></div><ul id="diigolet-panel-colorPicker"><div id="diigolet-panel-colorPicker-arrow"></div><li diigocolor=\'yellow\' class="yellow"><span><b></b></span>\n                            Yellow\n                        </li><li diigocolor=\'blue\' class="blue"><span><b></b></span>\n                            Blue\n                        </li><li diigocolor=\'green\' class="green"><span><b></b></span>\n                            Green\n                        </li><li diigocolor=\'pink\' class="pink"><span><b></b></span>\n                            Pink\n                        </li></ul></div><div id="diigolet-panel-btnStickyNote" class="diigolet-panel-btn" title="Add sticky note"><b></b></div><div id="diigolet-panel-btnBookmark" class="diigolet-panel-btn" title="Save to Diigo"><b></b></div><!--<div id="diigolet-panel-orphanHighlight" class="diigolet-panel-btn" title="Show orphan highlights"><b></b></div>--\></div><!----\><div id="diigolet-panel-space"></div></div>\n',
kb='<div class="diigolet notice" id="diigolet-notice" style="display:block;"><div><b>&#160;</b><p>Ok, done!</p><span id="close"></span></div><div class="info"><b>&#160;</b><p>Information</p></div><div class="alert"><b>&#160;</b><p>The value run-in is special, because it can make the generated box\u2019s formatting either block or inline. A run-in box that doesn\u2019t contain a block box, and is followed by a sibling block box in the normal document flow, becomes the first inline box of the sibling block box (unless the sibling is or contains a run-in).</p></div><div class="wait"><b>&#160;</b><p>Please wait...</p></div></div>\n',
lb='.diigolet,.diigolet a,.diigolet em,.diigolet span,.diigolet div,.diigolet dl,.diigolet dt,.diigolet dd,.diigolet ul,.diigolet ol,.diigolet li,.diigolet h1,.diigolet h2,.diigolet h3,.diigolet h4,.diigolet h5,.diigolet h6,.diigolet pre,.diigolet form,.diigolet fieldset,.diigolet p,.diigolet blockquote,.diigolet th,.diigolet td,.diigolet input,.diigolet textarea,.diigolet select,.diigolet *{background:transparent none;padding:0;margin:0;border:#000 0 solid;text-align:left;text-decoration:none;text-transform:none;text-indent:0;line-height:normal;word-break:normal;word-wrap:normal;width:auto;height:auto;color:inherit;font:inherit;float:none;cursor:default;position:static;overflow:visible;max-width:none;box-shadow:none;opacity:1;border-radius:0;}.diigolet{color:#000;font:normal normal normal 13px arial,helvetica,clean,sans-serif;}.diigolet input[type=text],.diigolet textarea,.diigolet select,.diigolet fieldset{background-color:#FFF;border:1px #999 solid;padding:1px;font-size:12px;display:inline;border-radius:2px;-webkit-transition:border linear .2s,box-shadow linear .2s;}.diigolet select{padding:0;height:20px;}.diigolet input[type=text],.diigolet textarea{cursor:text;}.diigolet input[type=text]{height:20px;}.diigolet input[type="button"],.diigolet input[type="submit"],.diigolet input[type="reset"],.diigolet input[type="file"]{color:buttontext;cursor:default;padding:2px 5px;text-align:center;border:1px solid #ccc;background:#fff;border-radius:2px;background-image:-webkit-gradient(linear,0% 0,0% 100%,from(#f8f8f8),to(#d2d2d2));}.diigolet input[type="button"]:active,.diigolet input[type="submit"]:active,.diigolet input[type="reset"]:active,.diigolet input[type="file"]:active{background:#ddd;}.diigolet textarea{white-space:normal!important;resize:vertical!important;padding:2px!important;}.diigolet input.diigo-check{border:none;vertical-align:middle;}.diigolet input.diigo-button{font-size:12px!important;font-weight:bold;padding:4px 8px;cursor:pointer;border-radius:4px;}.diigolet input.diigo-button#diigolet-dlgBm-btnSave{width:56px;color:white;height:25px;-webkit-border-radius:4px;background-color:rgba(237,237,237,0);-webkit-box-shadow:0 1px 1px rgba(0,0,0,.15);border:solid 1px #0388dc;background-image:-webkit-linear-gradient(top,#4eaffa,#0492f5);}.diigolet input.diigo-button#diigolet-dlgBm-btnSave:hover{background-image:-webkit-linear-gradient(top,#349ef0,#0580d6);}.diigolet input.diigo-button#diigolet-dlgBm-btnSave:active{background-image:-webkit-linear-gradient(bottom,#4eaffa,#0492f5);}.diigolet input.diigo-downlist{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/arrow-down.png) 50% 50% no-repeat,-webkit-gradient(linear,0% 0,0% 100%,from(#f8f8f8),to(#d2d2d2));width:12px;margin-left:-16px;}.diigolet input.diigo-downlist:active{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/arrow-down.png) 50% 50% no-repeat,#ddd;}.diigolet div.diigo-buttonswitchlist{padding:4px 2px;border:1px solid #ccc;position:absolute;right:72px;background:#fff;z-index:100000;}.diigolet div.diigo-buttonswitchlist ul li{padding:2px 6px;}.diigolet div.diigo-buttonswitchlist ul li:hover{background:#43658F;color:#fff;cursor:pointer;}#diigoletFNSubmit{width:50px;}.diigolet table{border-collapse:collapse;border-spacing:0;width:auto;}.diigolet label{cursor:pointer!important;display:inline;vertical-align:middle;}.diigolet fieldset,.diigolet img{border:0;}.diigolet address,.diigolet caption,.diigolet cite,.diigolet code,.diigolet dfn,.diigolet em,.diigolet strong,.diigolet th,.diigolet var{font-style:normal;font-weight:bold;}.diigolet ol,.diigolet ul,.diigolet li{list-style:none;display:block;}.diigolet caption,.diigolet th{text-align:left;}.diigolet h1,.diigolet h2,.diigolet h3,.diigolet h4,.diigolet h5,.diigolet h6{font-weight:bold;}.diigolet q:before,.diigolet q:after{content:\'\';}.diigolet abbr,.diigolet acronym{border:0;}.diigolet a:link,.diigolet a:visited,.diigolet a:hover,.diigolet a:active{text-decoration:none;color:#00F;cursor:pointer!important;}.diigolet a:hover{text-decoration:underline;}.diigolet a *{cursor:inherit;}#diigolet-tray{position:fixed;top:0;left:10;width:16px;height:16px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv3.gif") no-repeat left -4px;z-index:2147483646;}.diigolet a.diigolet-Help:link,.diigolet a.diigolet-Help:visited{color:#06F;}.diigolet a.diigolet-Help:hover,.diigo a.diigolet-Help:active{color:#00F;}.diigolet label{margin-left:3px;}.diigolet span.noComments{color:#AAA;font-size:10px;}#diigolet-toolbar{border:none;width:100%;position:absolute;top:0;left:0;z-index:2147483647;color:#333;}#diigolet-tb-content{padding:3px 5px;background:#EFEDDE url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigolet-toolbar-bg2.gif) repeat scroll 0;}#diigolet-tb-bar span,#diigolet-tb-bar div,#diigolet-tb-bar a,#diigolet-tb-bar em{line-height:24px;}#diigolet-tb-shadow{height:5px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigolet-toolbar-shadow.png) repeat-x left top;}* html #diigolet-tb-shadow.ie6{filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,sizingMethod=scale,src="chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigolet-toolbar-shadow.png");overflow:hidden;background:none;}#diigolet-help{display:none;position:absolute;top:29px;right:10px;width:200px;border:1px #ccc solid;background-color:#FFC;padding:6px 16px 6px 6px;}.diigolet a.diigoletButton{height:24px;float:left;padding-right:4px;cursor:pointer!important;}.diigolet a.diigoletButton:hover{text-decoration:none;color:#000;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3_r.png") no-repeat right top;}.diigolet a.diigoletButton:active{background-position:right bottom;}.diigolet a.diigoletButton b{font-weight:normal;color:#000;line-height:24px;float:left;padding-left:4px;height:24px;}#diigolet-button-highlight-dropdown{width:8px;height:16px;margin-right:4px;background:transparent url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/down_arrow.gif\') no-repeat scroll left 2px;}#diigolet-button-highlight-dropdown.mouseovered{border-left:1px solid #888;margin-right:0;text-decoration:none;width:11px;height:24px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn4.png") no-repeat left top!important;}#diigolet-button-highlight-dropdown.mouseoveredIe{border-left:1px solid #888;margin-right:1px;text-decoration:none;width:11px;height:24px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn4.png") no-repeat left top!important;}#diigolet-button-highlight-dropdown.checked{border-left:1px solid #888;margin-right:0;text-decoration:none;width:11px;height:24px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn4_s.png") no-repeat left top!important;}#diigolet-button-highlight.mouseovered{text-decoration:none;color:#000;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3_r.png") no-repeat right top!important;}#diigolet-button-highlight.mouseoveredIe{text-decoration:none;color:#000;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3_r.png") no-repeat right top!important;}#diigolet-button-highlight.mouseovered b.outer{background:transparent url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3.png\') no-repeat left top;}#diigolet-button-highlight.mouseoveredIe b.outer{background:transparent url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3.png\') no-repeat left top;}a#diigolet-button-highlight b.outer{padding-right:5px;}a#diigolet-button-highlight{padding-right:0!important;}a.diigoletButton:hover b.outer{background:transparent url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3.png\') no-repeat left top;}a.diigoletButton:active b.outer{background-position:left bottom;}.diigolet a.diigoletButton b b{font-size:12px;padding-left:20px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv3.gif") no-repeat left 50%;}.diigolet a.diigoletButton:active b b{position:relative;top:1px;left:1px;}.diigolet a.diigoletButton.diigoletDisabled{cursor:default;}.diigolet a.diigoletButton.diigoletDisabled b b{color:#999;position:static;}.diigolet a.diigoletButton.diigoletDisabled:hover{background:none transparent;}.diigolet a.diigoletButton.diigoletDisabled:hover b.outer{background:none transparent;}.diigolet a.diigoletButton.checked{background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3_r.png") no-repeat right top;background-position:right bottom;}.diigolet a.diigoletButton.checked b.outer{background:transparent url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3.png\') no-repeat left top;background-position:left bottom;}.diigolet a.diigoletButton.checked b b{position:relative;top:1px;left:1px;}#diigolet-tb-btnSidebar b b{background-position:left -24px;}#diigolet-tb-btnSidebar.toClose b b{background-position:left -48px;}#diigolet-tb-btnBookmark b b{background-position:left -144px;}#diigolet-tb-btnBookmark.saved b b{background-position:left -120px;}#diigolet-button-highlight b b{background-position:left -72px;}#diigolet-button-highlight.dontShow b b{background-position:left -96px;}#diigolet-button-highlight.yellow b b{background-position:left -355px;}#diigolet-button-highlight.blue b b{background-position:left -375px;}#diigolet-button-highlight.green b b{background-position:left -395px;}#diigolet-button-highlight.pink b b{background-position:left -415px;}.diigolet .colorItem{padding-left:20px;height:16px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv3.gif") no-repeat left -440px;}#diigolet-context-yellow b,#diigolet-colorMenu-yellow b{background-position:left -440px;}#diigolet-context-blue b,#diigolet-colorMenu-blue b{background-position:left -460px;}#diigolet-context-green b,#diigolet-colorMenu-green b{background-position:left -480px;}#diigolet-context-pink b,#diigolet-colorMenu-pink b{background-position:left -500px;}#diigolet-context-yellow.colorchecked b,#diigolet-colorMenu-yellow.colorchecked b{background-position:left -520px;}#diigolet-context-blue.colorchecked b,#diigolet-colorMenu-blue.colorchecked b{background-position:left -540px;}#diigolet-context-green.colorchecked b,#diigolet-colorMenu-green.colorchecked b{background-position:left -560px;}#diigolet-context-pink.colorchecked b,#diigolet-colorMenu-pink.colorchecked b{background-position:left -580px;}#diigolet-tb-btnFloatNote b b{background-position:left -167px;}#diigolet-tb-btnTwitter b b{background:transparent url("http://twitter.com/favicon.ico") no-repeat left 50%;}#diigolet-tb-btnComment b b{background-position:left -192px;}#diigolet-tb-btnComment.commented b b{background-position:left -192px;}#diigolet-tb-btnMore b b{background-position:left 0;}#diigolet-tb-btnSignIn b b{background-position:left -264px;}#diigolet-tb-btnHide{float:right;height:24px;width:16px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv3.gif") no-repeat left -240px;}div.diigoIcon{cursor:pointer!important;margin:0;padding:0;position:absolute;display:none;width:24px!important;z-index:2147483643;height:23px!important;background:transparent url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/edit-highlight.png\') no-repeat left;-webkit-transition:-webkit-transform 150ms ease;vertical-align:text-bottom;}span.diigoHighlightCommentLocator{vertical-align:text-bottom;}div.diigoIcon span{color:#000;display:block;font-family:Helvetica,Arial,sans-serif;font-size:13px;font-weight:700;line-height:18px;text-align:center;text-shadow:0 1px 1px #FFF;text-decoration:none;text-indent:0;display:none;}div.diigoHighlightcommented{display:inline-block!important;}div.ImageIcon{background-color:transparent!important;}div.diigoIcon:hover{background-color:transparent!important;background-repeat:no-repeat!important;-webkit-transform:translate(0px,-2px);}div.diigoHighlightcommented.TextIcon{bottom:0;}div.diigoHighlightcommented.public{background:#FFF url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/public-annotation.png\') no-repeat left;}div.diigoHighlightcommented.private.yellow{background:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png\') 0 0 no-repeat;}div.diigoHighlightcommented.private.blue{background:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png\') 0 -46px no-repeat;}div.diigoHighlightcommented.private.green{background:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png\') 0 -92px no-repeat;}div.diigoHighlightcommented.private.pink{background:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png\') 0 -138px no-repeat;}div.diigoHighlightcommented.group.yellow{background:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png\') 0 -23px no-repeat;}div.diigoHighlightcommented.group.blue{background:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png\') 0 -69px no-repeat;}div.diigoHighlightcommented.group.green{background:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png\') 0 -115px no-repeat;}div.diigoHighlightcommented.group.pink{background:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png\') 0 -161px no-repeat;}#diigolet-toolbar .dropdownMenu{display:none;border:1px solid #999;font:12px arial,helvetica,clean,sans-serif;background-color:Menu;padding:2px 0;z-index:2147483647;position:absolute;top:30px;width:140px;}#diigolet-toolbar .dropdownMenu a,#diigolet-toolbar .dropdownMenu a:link,#diigolet-toolbar .dropdownMenu a:visited,#diigolet-toolbar .dropdownMenu a:hover,#diigolet-toolbar .dropdownMenu a:active{display:block;padding:2px 12px;font-weight:normal;text-decoration:none;color:#000;background:#fff;cursor:default;}#diigolet-toolbar .dropdownMenu a:hover,#diigolet-toolbar .dropdownMenu a:active{color:#fff;background:#09f;}#diigolet-notify{display:none;position:absolute;top:33px;left:0;border:1px #ccc solid;background-color:#FFC;padding:6px 16px 6px 6px;z-index:2147483647;}#diigolet-notify.right{left:auto;right:0;text-align:right;}.diigolet .tagList{margin:2px 0;float:left;}.diigolet .diigo-su-tag .tagButton{display:inline-block;height:16px;padding:0 5px;line-height:16px;background-color:#f2f2f2;border-top:1px solid rgba(0,0,0,0);border-left:1px solid rgba(0,0,0,0);border-right:1px solid #C9D7F1;border-bottom:1px solid #C9D7F1;color:#858585;border-radius:1px;cursor:pointer;margin-right:3px;}.diigolet .diigo-su-tag .tagButton:hover{border-color:#82b3f8;}.diigolet .diigo-su-tag .tagButton.inused{color:#3f99a1;}.diigolet .diigo-su-tag .tagButton.selected{border-color:#82b3f8;}.diigolet .tagLoading a{display:none;margin-bottom:10px;}.diigolet .tagList.tagLoading .loading{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/indicator.gif) no-repeat left top;height:16px;padding-left:22px;display:block;}.diigolet .tagLoading .tagListHeader{display:none;}.diigolet .tagListHeader{cursor:pointer;float:left;width:100px;line-height:23px;}.diigolet .tagListHeader:hover{text-decoration:underline;}.diigolet .tagList div{color:#666!important;font-size:12px!important;font-weight:bold!important;padding-right:5px!important;text-align:left!important;}#diigolet-twitter{background-color:threedface;font-family:Arial,sans-serif;font-size:13px;color:windowtext;padding:5px 5px;margin:0;left:0;top:30px;z-index:2147483646;width:380px;position:static;border:1px #09F solid;border-left-width:0;}#diigolet-twitter input{vertical-align:middle;}.diigolet .twitterlogo{width:210px;height:49px;FILTER:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,sizingMethod=scale,src="http://assets3.twitter.com/images/twitter.png");}#diigolet-tagForward{background-color:white;width:460px;font-family:Arial,Helvetica,sans-serif;-webkit-border-radius:0;cursor:default;position:static;right:5px;top:75px;z-index:2147483646;border:1px solid rgba(0,0,0,.25);box-shadow:0 1px 5px rgba(0,0,0,.3);-webkit-user-select:none;background-clip:content-box;-webkit-animation:fadeinScale 200ms ease;}#diigolet-tagForward.show{-webkit-animation:fadeinScale 200ms ease;}#diigolet-tagForward.hide{-webkit-animation:fadeoutScale 200ms ease;}#diigolet-tagForward *{-webkit-box-sizing:content-box!important;box-sizing:content-box!important;}#diigolet-tagForward-topBar{height:38px;vertical-align:middle;background-color:#f5f5f5;border-bottom:1px solid #ddd;}#diigolet-tagForward-topBar span{line-height:38px;display:inline-block;margin-left:15px;color:#4B4B4B;font-size:16px;cursor:move;}#diigolet-tagForward .tabContainer{text-align:center;margin:5px;}#diigolet-tagForward .tab{margin-right:8px;margin-left:8px;padding:0 8px 2px 8px;font-weight:bold;}#diigolet-tagForward .tabContainer a:link,#diigolet-tagForward .tabContainer a:visited{padding:4px;border:1px #fff solid;font-weight:bold;color:#06c;text-decoration:none;}#diigolet-tagForward .tabContainer a.active:link,#diigolet-tagForward .tabContainer a.active:visited{border:none;background-color:#09f;color:#fff;padding:5px;}#diigolet-tagForward .tabContainer a:hover,#diigolet-tagForward .tabContainer a:active{border:1px #09f solid;}#diigolet-tagForward div.tabContent{display:none;}#diigolet-tagForward div.tabContent.active{display:block;}#diigolet-tagForward-caption{text-align:center;line-height:30px;font-size:14px;font-weight:bold;}#diigolet-tagForward-remove{float:right;color:#f00;background:-webkit-linear-gradient(bottom,#ebebeb,#f5f5f5);margin-top:6px;margin-right:15px;cursor:pointer;height:24px;width:27px;border:1px solid #c4c4c4;border-radius:4px;box-shadow:0 1px 0 #fff;}#diigolet-tagForward-remove:active{background:-webkit-linear-gradient(top,#ebebeb,#f5f5f5);}#diigolet-tagForward-remove>span{float:left;background-image:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/remove.png\');height:14px;width:11px;margin-top:5px;margin-left:8px;cursor:pointer;}#diigolet-tagForward-remove:hover>span{background-position:0 -14px;}#diigolet-Bookmark-Form{padding:20px 15px 0 15px;}#diigolet-Bookmark-Form input[type="text"],#diigolet-Bookmark-Form textarea{outline:none;border:none;background-color:white;-webkit-transition:height .1s ease-in-out;}#diigolet-Bookmark-Form input[type="text"]{line-height:20px;min-height:20px;}#diigolet-tagForward .diigo-hr{width:426px;border-top:1px #ccc solid;margin:0 auto;height:1px;overflow:hidden;}.diigolet .diigo-table{margin:10px 20px;}.diigolet .diigo-table td{padding:2px 0;}.diigolet .diigo-table th{color:#666;font-weight:bold;padding-right:5px;width:62px;text-align:left;font-size:12px!important;}.diigolet .diigolet-input{width:350px;padding:1px;font-size:12px!important;height:16px!important;padding-left:3px!important;line-height:16px!important;outline:none!important;}.diigolet .diigolet-input:focus{border:solid 1px #3996ed;-webkit-box-shadow:0 0 1px rgba(77,144,254,.55);}#Diigo-Bookmark-Description,#Diigo-Forward-PS{border:1px solid #d7d7d7;background-color:white;-webkit-transition:border 400ms ease;min-height:56px;}#Diigo-Bookmark-Description.focus{border:1px solid #aaa;}#Diigo-Bookmark-Description-Input{width:413px;max-width:413px;font-family:Arial;height:45px;margin-left:6px;margin-top:3px;font-size:12px;padding:2px;}#Diigo-Bookmark-Url{border-left:1px solid #DCDCDC;border-right:1px solid #DCDCDC;background-color:white;position:relative;-webkit-transform:rotateX(-90deg);height:0;position:relative;}#Diigo-Bookmark-Url.fold{-webkit-animation:fold 400ms ease both;-webkit-animation-play-state:running;}#Diigo-Bookmark-Url.unfold{-webkit-animation:unfold 400ms ease both;-webkit-animation-play-state:running;border-bottom:1px solid #DCDCDC;}#Diigo-Bookmark-Url>div#url-arrow{height:6px;width:13px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/dp-arrow.png");position:absolute;left:11px;top:-6px;}#Diigo-Bookmark-Url-Input{margin-top:3px;width:412px;margin-left:5px;}#Diigo-Bookmark-Title{height:30px;border:1px solid #d7d7d7;background-color:white;-webkit-transition:border 400ms ease;position:relative;}.diigolet .diigo-alert-tip{background-color:rgba(255,0,0,0.8);position:absolute;left:117px;top:-29px;padding:4px 6px;display:block;font-size:12px;font-weight:bold;pointer-events:none;font-family:arial,sans-serif;color:white;display:none;line-height:16px;}.diigolet .diigo-alert-tip span{background:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/alert.png\') -6px -4px no-repeat;text-indent:17px;display:inline-block;vertical-align:middle;}.diigolet .diigo-alert-tip .diigo-alert-tip-arrow{position:absolute;border:5px solid;border-top-color:transparent;border-right-color:transparent;border-bottom-color:rgba(255,0,0,0.8);border-left-color:transparent;top:24px;height:0;width:0;line-height:0;-webkit-transform:rotate(180deg);left:91px;}.diigolet #Diigo-Bookmark-Url .diigo-alert-tip{left:136px;}.diigolet #Diigo-Bookmark-Url .diigo-alert-tip-arrow{left:71px;}#Diigo-Bookmark-Title.focus{border:1px solid #aaa;}#Diigo-Bookmark-Title-Input{margin:4px 0 0 0;width:392px;border:none;outline:none;font-size:14px;}#Diigo-Bookmark-Title #link-icon{float:left;height:30px;width:30px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/URL.png") 4px 0 no-repeat;cursor:pointer;}#Diigo-Bookmark-Title #link-icon:hover{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/URL.png") 4px -30px no-repeat;}#Diigo-Bookmark-Title #link-icon.unfold{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/URL.png") 4px -30px no-repeat;}#Diigo-Bookmark-Options .diigo-option{font-size:12px;height:inherit;width:120px;display:inline-block;padding:13px 0 15px 0;color:#555;}.diigo-option:hover{background-position:0 -20px;}.diigo-option:active{background-position:0 -40px;}.diigo-option.active{background-position:0 -40px;}.diigo-option .op-checkbox,#Diigo-Bookmark-checkShareExisting .op-checkbox{height:13px;width:15px;display:inline-block;vertical-align:middle;position:relative;cursor:pointer;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/checkbox.png");}.diigo-option .op-label{margin-left:7px;text-indent:20px;display:inline-block;vertical-align:middle;cursor:pointer;}#Diigo-Bookmark-checkShareExisting{display:none;}#Diigo-Bookmark-checkShareExisting .op-label{margin-left:7px;text-indent:-6px;display:inline-block;vertical-align:middle;cursor:pointer;}#Diigo-Bookmark-Options .op-checkbox-container{display:inline;cursor:pointer;}#Diigo-Bookmark-uploadCache{margin-left:20px;}.diigolet .op-checkbox-container:hover>.op-checkbox{background-position:0 -13px;}.diigolet .op-checkbox-container.checked .op-checkbox{background-position:0 -26px;}#Diigo-Bookmark-Privacy .op-label{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/private.png");background-repeat:no-repeat;}#Diigo-Bookmark-Unread .op-label{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/op-readlater.png");background-repeat:no-repeat;}#Diigo-Bookmark-uploadCache .op-label{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/cache.png");background-repeat:no-repeat;}#Diigo-Bookmark-Url.invalid{border:1px solid #f00;margin-top:-1px;}#Diigo-Bookmark-Url.invalid div{background-position:0 -6px;}#Diigo-Bookmark-Title.invalid{border:1px solid #f00;}#Diigo-Bookmark-Tag-Wrapper{min-height:24px;border:1px solid #d7d7d7;background-color:white;margin-top:15px;position:relative;-webkit-transition:border 400ms ease;height:30px;}#Diigo-Bookmark-Tag-Wrapper.focus{border:1px solid #aaa;}#Diigo-Bookmark-Tag-Input{margin-top:4px;margin-left:2px;width:389px;}#Diigo-Bookmark-Tag{height:30px;}.diigolet #Diigo-Bookmark-Tag{box-shadow:none;}#Diigo-Bookmark-Tag-Wrapper.active{border:solid 1px #3996ed;-webkit-box-shadow:0 0 1px rgba(77,144,254,.55);}#Diigo-Bookmark-Tag-Cloud{border:1px solid #d7d7d7;border-bottom-right-radius:3px;border-bottom-left-radius:3px;display:none;background-color:white;font-size:12px;margin-top:-1px;}#Diigo-Bookmark-Tag-Cloud>div:first-child{height:25px;width:100%;line-height:25px;font-weight:bold;border-bottom:1px solid #ccc;text-indent:2px;clear:both;}#Diigo-Bookmark-Tag-Cloud>div:first-child a{float:right;margin-right:3px;text-decoration:none;}#Diigo-Bookmark-Tag-Cloud>div:first-child a:hover{text-decoration:underline;}#Diigo-Bookmark-Tag-Cloud-Container{max-height:180px;overflow:auto;width:421px;padding:3px 5px 5px 0;}#Diigo-Bookmark-Tag-Cloud-Container::-webkit-scrollbar{width:6px;}#Diigo-Bookmark-Tag-Cloud-Container::-webkit-scrollbar-track-piece{background-color:transparent;}#Diigo-Bookmark-Tag-Cloud-Container::-webkit-scrollbar-thumb:vertical{height:20px;background-color:#CCC;}#Diigo-Bookmark-Tag-Cloud-Container::-webkit-scrollbar-thumb:hover{background-color:#aaa;}#Diigo-Bookmark-Tag-Wrapper.opened+#Diigo-Bookmark-Tag-Cloud{visibility:visible;}#Diigo-Bookmark-Tag-Cloud ul li{display:inline-block;}#Diigo-Bookmark-Tag-Cloud .Diigo-Bookmark-Tag-item{margin-left:3px;text-decoration:none;color:#04c;line-height:normal;display:inline-block;line-height:140%;cursor:pointer;padding:0 2px;}#Diigo-Bookmark-checkShare{display:none;}#Diigo-Bookmark-checkShareExisting{margin-right:3px;}#Diigo-Bookmark-checkShare input[type=checkbox]{width:14px;height:14px;margin:0;cursor:pointer;vertical-align:middle;background:#fff;border:1px solid #dcdcdc;-webkit-border-radius:1px;-moz-border-radius:1px;border-radius:1px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative!important;}#Diigo-Bookmark-checkShare input[type=checkbox]:hover{border-color:#c6c6c6;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.1);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.1);box-shadow:inset 0 1px 1px rgba(0,0,0,0.1);}#Diigo-Bookmark-checkShare input[type=checkbox]:active{border-color:#c6c6c6;background:#ebebeb;}#Diigo-Bookmark-Tag-Cloud .Diigo-Bookmark-Tag-item.selected{background-color:#09f;color:white;}#Diigo-Bookmark-Tag-Cloud>div:first-child{height:20px;width:100%;line-height:20px;font-weight:bold;border-bottom:1px solid #ccc;text-indent:2px;}#Diigo-Bookmark-Tag-Cloud .Diigo-Bookmark-Tag-item:hover{text-decoration:underline;}#Diigo-Bookmark-Tag-Eidt{float:right;margin-right:3px;}#Diigo-Bookmark-Tag-suggestion{margin-top:7px;}#diigolet-bm-tagListContainer-recommend{margin-top:3px;display:none;}#Diigo-Bookmark-Tag-suggestion .diigo-su-tag{line-height:26px;font-size:12px;min-height:26px;margin-top:5px;}#Diigo-Bookmark-Tag-suggestion .diigo-su-tag a{display:inline-block;text-decoration:none;color:#555;width:93px;}#Diigo-Bookmark-Tag-suggestion .loading{display:inline-block;height:10px;width:120px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/loading.gif");}#Diigo-Bookmark-Tag-suggestion .diigo-su-tag a:hover{text-decoration:underline;}#Diigo-Bookmark-Tag-dropdown{height:30px;width:28px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/dropdown.png");float:left;cursor:pointer;}#Diigo-Bookmark-Tag-dropdown:hover{background-position:0 -30px;}.diigo-table .diigo-invalid-input{display:none;height:16px;width:16px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/icons.png");background-position:-16px -80px;margin-left:4px;}#diigo-list-group{margin-top:17px;width:430px;height:24px;}#diigo-list-group>div{float:left;height:20px;font-size:12px;color:#04c;width:200px;font-weight:bold;line-height:20px;}#diigo-list-group #diigo-list-add{position:relative;display:none;}#diigo-list-add .diigo-alert-tip{left:7px;top:-29px;}#diigo-list-add .diigo-alert-tip .diigo-alert-tip-arrow{left:43px;}#diigo-list-group #diigo-list-addInput{width:102px;height:26px;border:1px solid #d7d7d7;-webkit-transition:border 400ms ease;padding:0 3px;font-weight:normal;color:#000;border-radius:0;}#diigo-list-group #diigo-list-addInput:focus{border:1px solid #aaa;}#diigo-list-add>*{float:left;}#diigo-list-addBtn{height:26px;min-width:38px;background-image:-webkit-linear-gradient(top,#53aaf0,#118cef);border:1px solid #066ec1;color:#fff;border-radius:2px;line-height:26px;font-weight:normal;margin-left:6px;cursor:pointer;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;}#diigo-list-addBtn:not(.processing):hover{background-image:-webkit-linear-gradient(top,#45a2ee,#037bdb);}#diigo-list-addBtn:not(.processing):active{background-image:-webkit-linear-gradient(bottom,#53aaf0,#118cef);}#diigo-list-addBtn .label{margin-left:8px;cursor:pointer;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.320,1.275) all;}#diigo-list-addBtn .spinner{left:8px;margin-left:-16px;opacity:0;height:16px;width:16px;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.320,1.275) all;display:inline-block;position:relative;top:3px;visibility:hidden;}#diigo-list-addBtn.processing+a{display:none;}#diigo-list-addBtn.processing .spinner{opacity:1;margin-left:12px;left:-7px;visibility:visible;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/addlist-processing.gif");}#diigo-list-addCancel{color:#999;cursor:pointer;font-weight:normal;line-height:26px;margin-left:5px;font-size:12px;margin-top:2px;}#diigo-list-addCancel:hover{text-decoration:underline;}#diigo-list-group>div>select:hover{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/select-arrow-hover.png"),-webkit-linear-gradient(top,#fbfbfb,#f3f3f3);}#diigo-list-group>div>select.processing{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/loading5.gif"),-webkit-linear-gradient(top,#f5f5f5,#fff);}#diigo-list-group>div>select:active{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/select-arrow-hover.png"),-webkit-linear-gradient(top,#f5f5f5,#fff);}#diigo-group{margin-left:26px;}#diigolet-bm-tagListContainer-group{display:none;}#diigo-list-group>div>select{height:28px;width:200px;display:block;-webkit-appearance:none!important;border:1px solid #d7d7d7;background-position:right;background-repeat:no-repeat;color:#333;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/select-arrow.png"),-webkit-linear-gradient(top,#fff,#f5f5f5);outline:none;cursor:pointer;font-size:12px;padding-right:22px;border-radius:0;font-weight:normal;box-sizing:border-box!important;}#Diigo-Bookmark-bottom{height:49px;padding-top:24px;}#Diigo-Bookmark-bottom>div:first-child{float:left;margin-top:3px;margin-left:15px;}#diigolet-dlgBm-btnSave{display:inline-block;height:28px;width:82px;line-height:28px;background-image:-webkit-linear-gradient(top,#53aaf0,#118cef);float:right;cursor:pointer;margin-right:15px;text-align:center;color:white;border-radius:2px;border:1px solid #066ec1;font-size:14px;}#diigolet-dlgBm-btnSave:hover{background-image:-webkit-linear-gradient(top,#45a2ee,#037bdb);}#diigolet-dlgBm-btnSave:active{background-image:-webkit-linear-gradient(bottom,#53aaf0,#118cef);}#diigolet-dlgBm-btnCancel{display:inline-block;float:right;font-size:14px;color:#999;height:12px;cursor:pointer;margin-top:8px;margin-right:19px;}#diigolet-dlgBm-btnCancel:hover{text-decoration:underline;}.diigolet .diigolet-submit{width:140px;height:25px;text-align:center;}#diigolet-txtPermalink{background-color:#eee;padding:3px;font-size:13px;}#diigolet-cross-promotion{font-family:arial,helvetica,sans-serif;font-size:12px;padding:10px;}#diigolet-cross-promotion a{background:whiteSmoke;border:1px solid #CCC;color:#06C;display:block;padding:3px 10px;text-align:center;text-decoration:none;-webkit-box-shadow:rgba(255,255,255,0.6) 0 1px 0;-webkit-border-radius:10px;-webkit-transition:all .25s linear;}#diigolet-cross-promotion a:hover{background:white;text-decoration:none;color:#04c;}.diigoletContexMenu{font:12px arial,helvetica,clean,sans-serif;z-index:2147483645;}#diigolet-csm .csm-action{display:block;height:22px!important;width:27px!important;border:1px solid rgba(0,0,0,.15);border-radius:1px 0 0 1px;opacity:.9;z-index:100000;float:left;margin:0!important;}#diigolet-csm #diigolet-csm-highlight{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/highlight-csm.png),-webkit-linear-gradient(#fff,#f5f5f5);}#diigolet-csm #diigolet-csm-highlight:active{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/highlight-csm.png),-webkit-linear-gradient(#f2f2f2,#fff);}#diigolet-csm #diigolet-csm-highlightAndComment{border-width:1px 1px 1px 0;border-style:solid;border-color:rgba(0,0,0,.15);border-radius:1px 0 0 1px;background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/stickynote-csm.png),-webkit-linear-gradient(#fff,#f5f5f5);}#diigolet-csm #diigolet-csm-highlightAndComment:active{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/stickynote-csm.png),-webkit-linear-gradient(#f2f2f2,#fff);}#diigolet-csm #diigolet-csm-search{border-width:1px 1px 1px 0;border-style:solid;border-color:rgba(0,0,0,.15);border-radius:1px 0 0 1px;background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/search-csm.png),-webkit-linear-gradient(#fff,#f5f5f5);}#diigolet-csm #diigolet-csm-search:active{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/search-csm.png),-webkit-linear-gradient(#f2f2f2,#fff);}#diigolet-csm.yellow #diigolet-csm-highlight{background-position:0 0;}#diigolet-csm.blue #diigolet-csm-highlight{background-position:0 -22px;}#diigolet-csm.green #diigolet-csm-highlight{background-position:0 -44px;}#diigolet-csm.pink #diigolet-csm-highlight{background-position:0 -66px;}#diigolet-csm.yellow #diigolet-csm-highlightAndComment{background-position:0 0;}#diigolet-csm.blue #diigolet-csm-highlightAndComment{background-position:0 -22px;}#diigolet-csm.green #diigolet-csm-highlightAndComment{background-position:0 -44px;}#diigolet-csm.pink #diigolet-csm-highlightAndComment{background-position:0 -66px;}#diigolet-csm .csm-action:not(#diigolet-csm-search).editing{opacity:1!important;}#diigolet-csm a:visited,#diigolet-csm a:link{padding:0!important;}#diigolet-csm{z-index:100000;height:22px!important;}#diigolet-csm>div{float:left;position:relative;}#diigolet-csm a:hover{opacity:1!important;}#diigolet-csm #diigolet-csm-dropdown:hover{background-position:0 -44px;}#diigolet-csm #diigolet-csm-highlight:hover+a#diigolet-csm-dropdown{background-position:0 -22px;}#diigolet-csm #diigolet-csm-dropdown:active{background-position:0 -66px;}#diigolet-csm .diigolet-csm-color{position:absolute;top:23px;left:1px;background-color:white;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.35);line-height:13px;overflow:hidden;height:0;visibility:visible!important;z-index:-1;display:block!important;}#diigolet-csm-highlightAndComment-wrapper .diigolet-csm-color{left:0;}#diigolet-csm .diigolet-csm-color.hidden{height:0;}#diigolet-csm .diigolet-csm-color.small{height:0;width:27px;display:block;}#diigolet-csm .diigolet-csm-coloritem{float:left;display:block;cursor:pointer;padding:0;margin:0;}.diigolet-csm-color.small .diigolet-csm-coloritem{height:7px;width:10px;}#diigolet-csm .diigolet-csm-coloritem.yellow{background-color:#fc6;border:1px solid #fc6;margin-right:1px;margin-bottom:1px;margin-left:1px;margin-top:1px;}#diigolet-csm .diigolet-csm-coloritem.blue{background-color:#7ccce5;border:1px solid #7ccce5;margin-bottom:1px;margin-top:1px;}#diigolet-csm .diigolet-csm-coloritem.green{background-color:#b4db66;border:1px solid #b4db66;margin-right:1px;margin-left:1px;margin-bottom:1px;}#diigolet-csm .diigolet-csm-coloritem.pink{background-color:#f98baf;border:1px solid #f98baf;margin-right:0!important;margin-bottom:1px;}#diigolet-csm .diigolet-csm-color .diigolet-csm-coloritem:hover{border-color:#36c;}#diigolet-annMenu{height:26px;border-top:2px solid #43B4EA;border-radius:2px;background-color:#fff;padding:1px;position:absolute;box-shadow:-1px 0 0 rgba(0,0,0,0.1),1px 0 0 rgba(0,0,0,0.1),0px 1px 1px rgba(0,0,0,0.2);-webkit-user-select:none;-webkit-animation:fadeIn 130ms ease-in;box-sizing:content-box!important;}#diigolet-annMenu .diigolet-annMenu-item{height:20px;width:20px;float:left;padding:1px;position:relative;cursor:pointer;-webkit-transition:background-color 200ms ease;border-radius:3px;padding:3px;box-sizing:content-box!important;}#diigolet-annMenu .diigolet-annMenu-item *{box-sizing:content-box!important;}#diigolet-annMenu .diigolet-annMenu-item>b{cursor:pointer;}#diigolet-annMenu .diigolet-annMenu-item:hover{background-color:#d8f2ff;}#diigolet-annMenu #diigolet-annMenu-currentColor{height:12px;width:12px;border:1px solid #289FE4;margin:3px 0 0 2px;}#diigolet-annMenu #diigolet-annMenu-currentColor>b{height:10px;width:10px;border:1px solid #fff;display:block;background-color:#fc6;cursor:pointer;}#diigolet-annMenu #diigolet-annMenu-currentColor.yellow>b{background-color:#fc6;}#diigolet-annMenu #diigolet-annMenu-currentColor.blue>b{background-color:#7ccce5;}#diigolet-annMenu #diigolet-annMenu-currentColor.green>b{background-color:#b4db66;}#diigolet-annMenu #diigolet-annMenu-currentColor.pink>b{background-color:#f98baf;}#diigolet-annMenu .diigolet-annMenu-item>b{display:block;height:20px;width:20px;}#diigolet-annMenu-add>b{background-image:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/ann-add.png\');}#diigolet-annMenu-share>b{background-image:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/ann-share.png\');}#diigolet-annMenu-del>b{background-image:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/ann-del.png\');}#diigolet-annMenu-more>b{background-image:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/ann-more.png\');}#diigolet-annMenu-colorPicker{height:62px;width:14px;border:1px solid #96bbd5;padding:3px 2px;background-color:#fff;position:relative;top:3px;left:-1px;display:none;-webkit-animation:diigo-dropdown .15s ease-in 1;}#diigolet-annMenu-colorPicker .ann-colorItem{height:12px;width:12px;border-width:1px;border-style:solid;display:block;margin-bottom:2px;}#diigolet-annMenu-colorPicker .ann-colorItem:hover{border-color:#06f!important;}#diigolet-annMenu-colorPicker .ann-colorItem.colorchecked b{width:4px;height:4px;background:#666;margin-top:4px;margin-left:4px;display:block;}.ann-colorItem#diigolet-context-yellow{border-color:#e9a110;background-color:#fc6;}.ann-colorItem#diigolet-context-blue{border-color:#33a5c9;background-color:#7ccce5;}.ann-colorItem#diigolet-context-green{border-color:#9ac83b;background-color:#b4db66;}.ann-colorItem#diigolet-context-pink{border-color:#da376c;background-color:#f98baf;}#diigolet-annMenu-arrow{position:absolute;top:100%;left:33px;height:8px;width:14px;background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/ann-arrow.png);}#diigolet-annMenu.onlyMy #diigolet-annMenu-arrow{left:59px;}#diigolet-annMenu-tip{padding-left:4px;border-top:1px solid #eee;margin-top:1px;color:#999;}#diigolet-annMenu-moreThings{display:none;position:absolute;top:110%;left:77%;min-width:236px;max-width:236px;padding:3px;border:1px solid #94bcd6;box-shadow:0 1px 2px rgba(0,0,0,.15);background-color:#fff;border-radius:3px;font:12px/18px arial;color:#333;}.diigoletContexMenu a:link,.diigoletContexMenu a:visited{display:block;padding:2px 3px;text-decoration:none;color:#000;cursor:default;white-space:nowrap;}.diigoletContexMenu a:hover:not(.colorItem),.diigoletContexMenu a:active{color:#fff;background:#09f;}.diigoletContexMenu div.sep{line-height:0;border-top:1px solid #AAA;margin:3px 0;}*html .diigoletContexMenu ._selection a{width:45px;}*html .diigoletContexMenu ._highlight a{width:90px;}.diigolet.diigoletFN{z-index:2147483644;width:300px;-webkit-user-select:none;}#diigolet-dlg-sticky.groupNew #FN-post-form{display:block;}#diigolet-dlg-sticky.groupNew #FN-group-content-nav{display:none;}#diigolet-dlg-sticky.groupNew #FN-group-content{display:none;}.diigolet.diigoletFN.onlyPrivate #diigolet-dlg-sticky-switcher{margin-left:29px;}.diigolet.diigoletFN.onlyGroup #diigolet-dlg-sticky-switcher{margin-left:29px;}#diigolet-dlg-sticky-top{height:30px;border-radius:2px 2px 0 0;position:relative;z-index:2;-webkit-transition:background-color 200ms ease;padding-right:5px;}#diigolet-dlg-sticky.yellow #diigolet-dlg-sticky-top{background:#f1c40f;}#diigolet-dlg-sticky.blue #diigolet-dlg-sticky-top{background:#5cc7ff;}#diigolet-dlg-sticky.green #diigolet-dlg-sticky-top{background:#47bf87;}#diigolet-dlg-sticky.pink #diigolet-dlg-sticky-top{background:#fe97bc;}#diigolet-dlg-sticky-content{background-color:#fcfbf7;border-radius:0 0 2px 2px;border-width:0 1px 1px 1px;border-color:rgba(0,0,0,.08);border-style:solid;box-shadow:0 1px 3px rgba(0,0,0,.08);position:relative;}#diigolet-dlg-sticky-logo{float:left;height:20px;width:20px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/FN-logo.png") 50% 50% no-repeat;margin:4px 5px 0 4px;}#diigolet-dlg-sticky-top>span{vertical-align:middle;line-height:28px;font-size:14px;color:#bb6602;}#diigolet-dlg-sticky-close{float:right;height:20px;width:20px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/FN-close.png") 50% 50% no-repeat;margin:5px 4px 0 0;cursor:pointer;display:none;}#diigolet-dlg-sticky-color{position:relative;float:right;margin:7px 4px 0 0;cursor:pointer;z-index:2;}#diigolet-dlg-sticky-addTab{height:12px;width:21px;margin:9px 7px 0 0;display:none;float:right;cursor:pointer;}#diigolet-dlg-sticky.onlyPrivate #diigolet-dlg-sticky-addTab{display:block;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/add-tab.png") 0 0 no-repeat;}#diigolet-dlg-sticky.onlyGroup #diigolet-dlg-sticky-addTab{display:block;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/add-tab.png") 0 -12px no-repeat;}#diigolet-dlg-sticky-currentColor{height:12px;width:12px;border:1px solid #fff;cursor:pointer;border-radius:1px;}#diigolet-dlg-sticky-colorPicker{height:62px;width:13px;padding:3px 3px 3px 2px;background-color:#fff;position:absolute;top:122%;left:-2px;display:none;-webkit-animation:diigo-dropdown .15s ease-in 1;box-shadow:0 1px 1px rgba(0,0,0,0.25);z-index:3;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem{height:12px;width:12px;border-width:1px;border-style:solid;display:block;margin-bottom:2px;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem[color="yellow"]{border-color:#e9a110;background-color:#fc6;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem[color="blue"]{border-color:#33a5c9;background-color:#7ccce5;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem[color="green"]{border-color:#9ac83b;background-color:#b4db66;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem[color="pink"]{border-color:#da376c;background-color:#f98baf;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem.colorchecked b{width:4px;height:4px;background:#666;margin-top:4px;margin-left:4px;display:block;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem:hover{border-color:#06f!important;}.FN-content-wrapper{display:none;opacity:0;-webkit-animation:fadeIn .2s ease-out;}@-webkit-keyframes fadeIn{0%{opacity:0;}100%{opacity:1;}}.FN-content-wrapper.private{min-height:120px;}#diigolet-dlg-sticky-content .FN-content-wrapper.private textarea{margin:6px 6px 0 6px;min-height:104px;width:282px;background-color:#fcfbf7;border:none;outline:none;overflow-y:visible;resize:none!important;font-size:12px;line-height:18px;word-wrap:break-word;}#diigolet-dlg-sticky-content #FN-content-footer{text-align:right;margin-top:-5px;}#diigolet-dlg-sticky-content #FN-content-footer #editing{height:30px;border-top:1px solid #ECECE7;display:none;}#diigolet-dlg-sticky-content #FN-content-footer #editing a{float:right;}#diigolet-dlg-sticky-content #FN-content-footer #editing #FN-private-saveBtn{height:20px;width:50px;border-radius:2px;border:1px solid #85a0a6;color:#85a0a6;font-size:12px;text-align:center;line-height:20px;margin:4px 4px 4px 10px;}#diigolet-dlg-sticky-content #FN-content-footer #editing #FN-private-saveBtn:active{background:#85a0a6;color:#fff;}#diigolet-dlg-sticky-content #FN-content-footer #editing #FN-private-cancelBtn{text-decoration:none;color:#A3A39E;font-size:12px;line-height:30px;}#diigolet-dlg-sticky-content #FN-content-footer #editing #FN-private-cancelBtn:hover{text-decoration:underline;}#diigolet-dlg-sticky-content #FN-content-footer #editDone{height:22px;}#FN-private-saveBtn.notify{-webkit-animation:borderNotice 600ms ease both;-webkit-animation-iteration-count:2;}#FN-content-footer #FN-private-datetime{font-family:Arial,Helvetica;font-size:12px;color:#999;line-height:22px;margin-right:10px;float:right;}#FN-content-footer #FN-private-delete{display:none;float:left;vertical-align:middle;line-height:22px;margin-left:8px;color:#999;cursor:pointer;-webkit-transition:color 200ms ease;}#FN-content-footer #FN-private-delete b{display:block;float:left;height:12px;width:11px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/private-del.png");background-repeat:no-repeat;margin:5px 3px 0 0;cursor:pointer;}#FN-content-footer #FN-private-delete:hover{color:red;}#FN-content-footer #FN-private-delete:hover b{background-position:0 -12px;}.FN-content-wrapper.group{min-height:50px;}.FN-radio{display:none;}#diigolet-dlg-sticky-switcher{position:absolute;left:82px;top:-25px;z-index:2;}#diigolet-dlg-sticky-switcher.onlyOneTab span{margin-left:28px;}#diigolet-dlg-sticky-switcher .FN-switcher{float:left;height:14px;text-align:center;font-size:12px;cursor:pointer;padding:3px 8px;color:#fff;line-height:14px;-webkit-transition:background-color 200ms ease;border-radius:2px;}#diigolet-dlg-sticky-switcher .FN-switcher b{height:12px;width:13px;float:left;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/tab-logo.png");background-repeat:no-repeat;margin:1px 1px 0 0;cursor:pointer;}#diigolet-dlg-sticky-content.private #FN-switcher-private{background-color:rgba(0,0,0,.12);}#diigolet-dlg-sticky-content #FN-switcher-private b{background-position:0 0;}#diigolet-dlg-sticky-content #FN-switcher-group b{background-position:0 -12px;}#diigolet-dlg-sticky-content.group #FN-switcher-group{background-color:rgba(0,0,0,.12);}#diigolet-dlg-sticky.onlyPrivate #FN-switcher-group{display:none;}#diigolet-dlg-sticky.onlyGroup #FN-switcher-private{display:none;}#diigolet-dlg-sticky-content.private .FN-content-wrapper.private{opacity:1;display:block;}#diigolet-dlg-sticky-content.group .FN-content-wrapper.group{opacity:1;-webkit-transition:opacity ease-out .2s .1s;display:block;}#FN-post-form{padding:10px;display:none;}#FN-post-form>div:last-child{margin-top:6px;}#FN-post-form textarea{width:272px;max-width:272px;height:54px;outline:none;line-height:18px;border:1px solid #ddd;}#FN-post-form textarea.notify,#FN-post-form select.notify{-webkit-animation:borderNotice 600ms ease both;-webkit-animation-iteration-count:2;}#FN-post-form button{float:right;margin:0;height:24px;width:50px;text-align:center;background-image:-webkit-linear-gradient(top,#fff,#f5f5f5);border:1px solid #ccc;font-size:14px;border-radius:2px;cursor:pointer;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all,10ms ease background-color;overflow:hidden;position:relative;}#FN-post-form .button-label{-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;position:relative;cursor:pointer;z-index:3;}#FN-post-form .button-spinner{position:absolute;z-index:2;display:inline-block;width:18px;height:18px;opacity:0;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;left:31px;margin-left:-16px;margin-top:-10px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/uploading.gif");}#FN-post-form textarea:disabled{color:#999;background-color:#eee;}#FN-post-form button:disabled{background-color:#ddd;background-image:none;cursor:default;}#FN-post-form button:disabled .button-label{opacity:0;top:16px;}#FN-post-form button:disabled .button-spinner{opacity:1;top:12px;}#FN-post-form a{float:right;font-size:12px;text-decoration:none;color:#aaa;margin:5px 12px 5px 5px;}#FN-post-form a:hover{text-decoration:underline;}#FN-post-form.notEdit #FN-group-share{margin-left:67px;}#FN-post-form.notEdit div:first-child{display:none;}#FN-post-form.notEdit button,#FN-post-form.notEdit a{display:none;}#FN-group-content-nav{width:100%;height:25px;border-bottom:1px solid #eee;color:#333;font-size:12px;text-align:center;position:relative;z-index:1;}#FN-current-group{line-height:25px;padding:2px 10px;cursor:pointer;}#FN-current-group b{height:0;width:0;border-width:5px;border-style:solid;border-bottom-color:transparent;border-left-color:transparent;border-right-color:transparent;border-top-color:#666;display:inline-block;margin:2px 2px 0 6px;vertical-align:middle;cursor:pointer;}#FN-current-group span{cursor:pointer;}#FN-group-menu{margin:0;position:absolute;width:196px;top:90%;left:50px;background-color:#fff;border:1px solid rgba(0,0,0,.12);text-align:left;box-shadow:0 1px 2px rgba(0,0,0,.1);-webkit-animation:diigo-dropdown .15s ease-in 1;padding:2px;display:none;}#FN-group-content-nav li{list-style:none;height:20px;width:100%;line-height:20px;font-size:12px;color:#333;cursor:pointer;text-indent:9px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}#FN-group-share-new-ul{margin-top:2px;padding-top:2px;border-top:1px solid #ccc;}#FN-group-content-nav li:hover{background-color:#aaa;color:#fff;}#FN-group-content-container{min-height:80px;max-height:200px;overflow-y:auto;padding:0 10px 10px 10px;margin-top:-1px;}#FN-group-content-container .FN-group-comment-item{border-top:1px solid #eee;padding:5px 0;position:relative;}#FN-group-content-container .FN-group-comment-item-tbar{position:relative;font-size:12px;}#FN-group-content-container .FN-group-comment-item-content{font-size:12px;line-height:18px;}#FN-group-content-container .FN-group-comment-item-tbar .FN-group-comment-name{text-decoration:none;margin-right:3px;color:#0072d6;float:left;}#FN-group-content-container .FN-group-comment-item-time{font-size:12px;color:#777;}#FN-group-content-postform{padding:10px;position:relative;}#FN-group-content-postform textarea{height:18px;width:204px;max-width:208px;border:1px solid #d7d7d7;outline:none;line-height:18px;vertical-align:bottom;-webkit-transition:background-color .1s ease-in-out;}#FN-group-content-postform.active textarea{height:36px;border-color:#aaa;}#FN-group-content-postform textarea.notify{-webkit-animation:borderNotice 600ms ease both;-webkit-animation-iteration-count:2;}#FN-group-content-postform textarea:disabled{color:#999;background-color:#eee;}#FN-group-content-postform .post-action{vertical-align:bottom;display:inline-block;width:50px;padding:0 0 0 14px;}#FN-group-content-postform .post-action a{position:relative;left:4px;top:2px;color:#aaa;display:none;}#FN-group-content-postform.active .post-action a{display:block;}#FN-group-content-postform .post-action a:hover{text-decoration:underline;}#FN-group-content-postform button{margin:0;height:24px;width:50px;text-align:center;background-image:-webkit-linear-gradient(top,#fff,#f5f5f5);border:1px solid #ccc;font-size:14px;cursor:pointer;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all,10ms ease background-color;overflow:hidden;position:relative;}#FN-group-content-postform .button-label{-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;position:relative;cursor:pointer;z-index:3;}#FN-group-content-postform .button-spinner{position:absolute;z-index:2;display:inline-block;width:18px;height:18px;opacity:0;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;left:31px;margin-left:-16px;margin-top:-10px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/uploading.gif");}#FN-group-content-postform button:disabled{background-color:#ddd;background-image:none;cursor:default;}#FN-group-content-postform button:disabled .button-label{opacity:0;top:16px;}#FN-group-content-postform button:disabled .button-spinner{opacity:1;top:12px;}#FN-group-content-container .FN-group-comment-item-delete{text-decoration:none;font-size:12px;color:#999;cursor:pointer;visibility:hidden;float:right;}#FN-group-content-container .FN-group-comment-item:hover .FN-group-comment-item-delete{visibility:visible;}#FN-group-content-container .FN-group-comment-item-delete:hover{color:red;}#diigolet-dlg-sticky-content ::-webkit-scrollbar{width:8px;}#diigolet-dlg-sticky-content ::-webkit-scrollbar-track-piece{background-color:transparent;}#diigolet-dlg-sticky-content ::-webkit-scrollbar-thumb:vertical{height:20px;background-color:#CCC;}#diigolet-dlg-sticky-content ::-webkit-scrollbar-thumb:hover{background-color:#aaa;}#diigolet-dlg-sticky-content select{-webkit-appearance:none;width:150px;height:24px;border:1px solid #ccc;background-position:right;background-repeat:no-repeat;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/FN-select-arrow.png"),-webkit-linear-gradient(top,#fff,#fafafa);outline:none;cursor:pointer;font-size:12px;border-radius:2px;padding-right:14px;}.diigolet.diigoletFN a:link,.diigolet.diigoletFN a:visited{color:#06c;}.diigolet.diigoletFN a:hover,.diigolet.diigoletFN a:active{color:#333;text-decoration:none;}.diigolet .diigoletFNL{width:23px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_l.png) no-repeat left top;}.diigolet .diigoletFNT{height:32px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_t.png) no-repeat right top;cursor:move!important;}.diigolet .diigoletFNR{width:16px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_r.png) no-repeat left bottom;overflow:hidden;vertical-align:bottom;}.diigolet .diigoletFNB{height:34px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_b.png) no-repeat left bottom;}.diigolet .diigoletFNTH{vertical-align:top;width:12px;}.diigolet .diigoletFNTH div{width:12px;height:12px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_h_rt.gif) no-repeat right top;position:relative;top:5px;left:-22px;overflow:hidden;cursor:ne-resize!important;}.diigolet .diigoletFNB{vertical-align:top;overflow:hidden;}.diigolet .diigoletFNPosN .diigoletFNXjjR,.diigolet .diigoletFNPosN .diigoletFNXjjT,.diigolet .diigoletFNPosN .diigoletFNXjjB,.diigolet .diigoletFNPosN .diigoletFNTH div,.diigolet .diigoletFNPosN .diigoletFNB div{display:none;}.diigolet .diigoletFNT h1{font:12px/19px Arial,Helvetica,sans-serif;font-weight:bold;color:#666;margin:4px 0 0 5px;padding:0;}.diigolet .diigoletFNT div.menu{margin:3px 21px 10px 0;background-color:#fff9a4;border-right:1px solid #f2e984;border-left:1px solid #c9b822;}.diigolet .diigoletFNT div.menu a{display:block;line-height:19px;float:left;color:#666;padding:0 5px;border-right:1px solid #c9b822;text-decoration:none;}.diigolet .diigoletFNT div.menu a:hover,.diigolet .diigoletFNT div.menu a:active{background-color:#fff587;color:#333;}.diigolet .diigoletFNT div.menu a.diigoletFNOpt{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_downdot.gif) no-repeat right top;padding-right:14px;}.diigolet .diigoletFNT{font:12px/32px Arial,Helvetica,sans-serif;}.diigolet .diigoletFNContent,.diigolet .diigoletFNComment{background-color:#fff89f;color:#666;font-family:Arial,Helvetica,sans-serif;font-size:11px;overflow:auto;width:355px;zoom:1;border-bottom:1px solid #E0DB9D;}.diigolet .diigoletFNContent .diigoletFNAuthorP{font-size:10px;font-weight:normal;color:#666;margin:0 11px 5px 0;padding:2px 5px;line-height:100%;}.diigolet .diigoletFNContent .diigoletFNAuthorP .diigoletFNAuthor{border-bottom:1px dotted #ccc;color:#06c;}.diigolet .diigoletFNContent .diigoletFNAuthorP .diigoletFNAuthor:hover,.diigoletFNContent .diigoletFNAuthorP .diigoletFNAuthor:active{border-bottom:1px solid #ccc;color:#333;}.diigolet .diigoletFNContent .diigoletFNAuthorP a{color:#999;}.diigolet .diigoletFNContent .diigoletFNAuthorP a:hover,.diigoletFNContent .diigoletFNAuthorP a:active{color:#666;}.diigolet.diigoletFN blockquote{display:inline-block;}.diigolet .diigoletFNComment select,.diigolet .diigoletFNComment input,.diigolet .diigoletFNComment textarea{font:11px/15px Verdana,Arial,Helvetica,sans-serif;max-width:345px;}.diigolet .diigoletFNComment p{margin:5px 0;}.diigolet .diigoletFNTDiv{height:32px;overflow:hidden;}.diigolet.diigoletFN .menu{float:right;height:19px;overflow:hidden;}.diigolet .labelList label{margin-right:2px;background-color:#eee;color:#666;white-space:nowrap;font-weight:normal;font-size:9px;}.diigolet .labelList span{padding:0 2px;}.diigolet .labelList a{padding:0 2px;background-color:#ffe76a;}.diigolet .labelList a:hover{color:#fef5c7;text-decoration:none;}.diigolet .labelList a.del{border:none;padding-right:2px;font-weight:normal;}.diigolet a.del{cursor:pointer;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv3.gif") no-repeat left -343px;}.diigolet a.del:hover{filter:alpha(opacity=100);-moz-opacity:1;background-position:1px -342px;text-decoration:none;}.diigolet ul.diigoletFNDropdown{position:absolute;display:none;left:10px;background-color:#fff89f;border:1px solid #c9b822;z-index:2147483647;}.diigolet ul.diigoletFNDropdown li{padding-left:25px;}.diigolet ul.diigoletFNDropdown a:link,.diigolet ul.diigoletFNDropdown a:visited{color:#666;display:block;width:85px;font:11px Arial,Helvetica,sans-serif;}.diigolet ul.diigoletFNDropdown a:hover,.diigolet ul.diigoletFNDropdown a:active{background-color:#fff567;color:#333;}.diigolet.diigoletFNIEPatch .diigoletFNL{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_l.gif) no-repeat left top;}.diigolet.diigoletFNIEPatch .diigoletFNT{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_t.gif) no-repeat right top;}.diigolet.diigoletFNIEPatch .diigoletFNR{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_r.gif) no-repeat left bottom;}.diigolet.diigoletFNIEPatch .diigoletFNB{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_b.gif) no-repeat left bottom;}.diigolet.diigoletFNIEPatch .diigoletFNT{height:23px;}.diigolet.diigoletFNIEPatch .diigoletFNTDiv{height:23px;}.diigoletFN.editing .diigoletFNComment{display:block;}.personalText{color:#555!important;font-size:10px!important;display:inline-block;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;width:343px!important;margin-top:4px!important;}.IconFeild{float:left!important;margin-left:8px!important;margin-top:5px!important;}.IconFeild:hover .editIcon{background-position:right!important;}.multipalCol{padding-top:0!important;}.singleCol{padding-top:7px!important;}.myCommentSpan{margin-left:35px!important;}.notMyCommentSpan{margin-left:15px!important;}.footText{line-height:1.5;width:343px!important;}div.floatNote{position:absolute!important;width:34px;height:34px;text-align:center;background-image:url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_icon.png\')!important;background-repeat:no-repeat;z-index:2147483643;}div.floatNote.private.yellow{background-position:0 0;}div.floatNote.private.blue{background-position:0 -68px;}div.floatNote.private.green{background-position:0 -136px;}div.floatNote.private.pink{background-position:0 -204px;}div.floatNote.group.yellow{background-position:0 -34px;}div.floatNote.group.blue{background-position:0 -102px;}div.floatNote.group.green{background-position:0 -170px;}div.floatNote.group.pink{background-position:0 -238px;}div.floatNote.diigoshow{-webkit-animation:bounceIn 400ms ease both;-webkit-animation-play-state:running;}div.floatNote.diigoadd{-webkit-animation:flipInY 600ms ease both;-webkit-animation-play-state:running;}div.floatNote span{position:absolute;left:-4px;top:-3px;display:block;border-radius:15px;background-color:#666;padding:2px 3px;border:1px solid #fff;height:8px;font-size:11px;color:#fff;line-height:8px;}html div.floatNote{filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,sizingMethod=scale,src="chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_icon.png");overflow:hidden;background:none;overflow:visible;}em.diigoHighlight{text-align:inherit;text-decoration:inherit;line-height:inherit;font:inherit;color:inherit;display:inline;position:relative;zoom:1;}em.diigoHighlight.diigoHighlightcommented{margin-right:25px;}em.diigoHighlight.mouseOvered{background-color:#ffc62a!important;}em.diigoHighlight.yellow{background-color:#FF9;}img.diigoHighlight.yellow{cursor:pointer;outline:2px solid #FF9!important;}em.diigoHighlight.blue{background-color:#ABD5FF;}img.diigoHighlight.blue{cursor:pointer;outline:2px solid #ABD5FF!important;}em.diigoHighlight.green{background-color:#B2E57E;}img.diigoHighlight.green{cursor:pointer;outline:2px solid #B2E57E!important;}em.diigoHighlight.pink{background-color:#fcc;}img.diigoHighlight.pink{cursor:pointer;outline:2px solid #fcc!important;}img.diigoHighlight.mouseOvered{cursor:pointer;outline:2px solid #ffc62a!important;}.diigolet .diigolet-closeBtn{position:absolute;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/close1.gif);width:14px;height:14px;top:2px;right:2px;cursor:pointer!important;}.ac_results{border:1px solid #ddd;background:#fff none repeat scroll 0;cursor:pointer!important;font-size:11px!important;left:0;position:absolute;width:392px;z-index:2147483647;border-radius:1px;}.ac_results ul{margin:0;padding:0;}.ac_results li{list-style-image:none;list-style-position:outside;list-style-type:none;padding:2px 5px;border-radius:1px;}.ac_results a{width:100%;}.ac_results li.over{color:white;background:#09f none repeat scroll 0;}#gtooltip{background-color:#2a2a2a;border:1px solid #fff;color:#fff;display:block;font-size:12px!important;font-weight:bold!important;opacity:0;padding:4px 6px!important;pointer-events:none;position:absolute!important;-webkit-transition:visibility .13s,opacity .13s ease-out,left 0 linear .13s,top 0 linear .13s;-moz-transition:visibility .13s,opacity .13s ease-out,left 0 linear .13s,top 0 linear .13s;-o-transition:visibility .13s,opacity .13s ease-out,left 0 linear .13s,top 0 linear .13s;transition:visibility .13s,opacity .13s ease-out,left 0 linear .13s,top 0 linear .13s;visibility:hidden;font-family:arial,sans-serif!important;z-index:2147483647;top:-100px;left:-100px;line-height:15px!important;}#gtooltip.show{visibility:visible;opacity:1;-webkit-transition:visibility 0,opacity .13s ease-in;}#gtooltip #gtooltip-arrow{position:absolute!important;border:5px solid!important;border-top-color:transparent!important;border-right-color:transparent!important;border-bottom-color:#2a2a2a!important;border-left-color:transparent!important;height:0!important;width:0!important;line-height:0!important;}#gtooltip #gtooltip-content{white-space:nowrap!important;}.diigo-scrollmarker{height:6px;width:6px;cursor:pointer;overflow:hidden;font-size:12px;z-index:1000000;border-radius:20px;}#diigolet-highlight-share{background-color:#fcfbf7;width:402px;font-family:Arial,Helvetica,sans-serif;-webkit-border-radius:0;cursor:default;position:absolute;z-index:2147483646;box-shadow:0 1px 3px rgba(0,0,0,.08);background-clip:content-box;visibility:hidden;opacity:0;border-radius:2px;}#diigolet-highlight-share.show{opacity:1;visibility:visible;}#diigolet-highlight-share-top{height:30px;vertical-align:middle;background-color:#39baf6;line-height:30px;padding:0 10px;font-size:14px;color:white;text-align:left;border-radius:2px 2px 0 0;}.diigolet-question-mark{height:12px;width:12px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/q-mark.png");cursor:pointer;position:relative;display:inline-block;margin:9px 7px 0 6px;}.diigolet-question-mark-tip{padding:5px;position:absolute;bottom:139%;left:-82px;display:none;width:180px;color:#7f8d99;border-radius:2px;box-shadow:0 0 0 2px rgba(0,0,0,.2);background:#fff;font:normal 12px/14px Arial,helvetica,sans-serif;}#diigolet-highlight-share-close{float:right;height:16px;width:16px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/win-close.png") 50% 50% no-repeat;margin-top:7px;opacity:.5;cursor:pointer;}#diigolet-highlight-share-close:hover{opacity:1;}#diigolet-highlight-container{border-radius:0 0 2px 2px;border-width:0 1px 1px 1px;border-color:rgba(0,0,0,.08);border-style:solid;}#diigolet-highlight-main{padding:10px 10px;}#diigolet-highlight-share-textarea{border:1px solid #d7d7d7;outline:none;width:372px;height:42px;max-width:374px;line-height:18px;-webkit-transition:border-color 200ms ease;font:12px/14px Arial;min-height:42px;padding:3px 3px;resize:vertical;box-sizing:content-box;}#diigolet-highlight-share-textarea:disabled{background-color:#eee;}#diigolet-highlight-share-textarea:focus{border:1px solid #AAA;}.clearfloat:after{display:block;clear:both;content:"";visibility:hidden;height:0;}.clearfloat{zoom:1;}#diigolet-highlight-footer{padding:0 10px 10px 10px;position:relative;}#diigolet-highlight-footer a{float:right;}#diigolet-highlight-share-copybtn{height:24px;width:60px;line-height:24px;cursor:pointer;text-align:center;color:white;border-radius:2px;border:1px solid #066ec1;font-size:12px;text-decoration:none;border-radius:2px;border:1px solid #85a0a6;color:#85a0a6;font-size:12px;text-align:center;}#diigolet-highlight-share-copybtn:active{background:#85a0a6;color:#fff;}#diigolet-highlight-share-cancelbtn{color:#999;height:12px;font-size:12px;margin:6px 14px 0 0;text-decoration:none;border:none!important;}#diigolet-highlight-share-cancelbtn:hover{text-decoration:underline;}#diigolet-highlight-footer .diigolet-highlight-social-btn{float:left!important;height:26px;width:26px;margin-right:12px;}#diigolet-highlight-share-twitter{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/highlight-share.png");}#diigolet-highlight-share-facebook{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/highlight-share.png");background-position:-26px 0;}#diigolet-highlight-share-copySuccess{position:absolute;top:0;right:85px;padding:5px 10px;background:#FFF1A8;color:black;border-radius:3px;line-height:18px;font-size:12px;-webkit-transition:all .3s;opacity:0;-webkit-transform-style:preserve-3d;-webkit-transform:rotateY(-70deg);}#diigolet-highlight-share-copySuccess.show{-webkit-transform:rotateY(0deg);opacity:1;}#diigo-orphanHighlight{background-color:#fff;width:423px;font-family:Arial,Helvetica,sans-serif;-webkit-border-radius:0;cursor:default;z-index:2147483646;box-shadow:0 1px 3px rgba(0,0,0,0.08);background-clip:content-box;border-radius:2px;position:fixed;top:52px;left:0;}#diigo-orphanHighlight-btn{height:20px;width:20px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/warning-orphanHighlight.png");position:fixed;right:0;top:55px;cursor:pointer;z-index:1000001;}#diigo-orphanHighlight-top{height:30px;vertical-align:middle;background-color:#39BAF6;line-height:30px;padding:0 10px;font-size:14px;color:#FFF;text-align:left;border-radius:2px 2px 0 0;}#diigo-orphanHighlight-close{float:right;height:16px;width:16px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/win-close.png") 50% 50% no-repeat;margin-top:7px;opacity:.5;cursor:pointer;}#diigo-orphanHighlight-close:hover{opacity:1;}#diigo-orphanHighlight-box{border-radius:0 0 2px 2px;border-width:0 1px 1px 1px;border-color:rgba(0,0,0,0.08);border-style:solid;padding:5px 6px 0 6px;position:relative;max-height:300px;overflow:auto;}#diigo-orphanHighlight-box .diigo-orphanHighlight-item{padding:5px 6px;font:normal 12px/14px arial,Helvetica;color:#333;background-color:#f9f9f9;border-left-style:solid;border-left-width:4px;margin-bottom:8px;border-bottom:1px solid #eee;position:relative;word-wrap:break-word;white-space:normal;word-break:break-all;}#diigo-orphanHighlight-box .diigo-orphanHighlight-item.diigo-yellow{border-left-color:#FFBA01;}#diigo-orphanHighlight-box .diigo-orphanHighlight-item.diigo-blue{border-left-color:#6EAAF5;}#diigo-orphanHighlight-box .diigo-orphanHighlight-item.diigo-green{border-left-color:#7BBD3F;}#diigo-orphanHighlight-box .diigo-orphanHighlight-item.diigo-pink{border-left-color:#FF9C9C;}.diigo-orphanHighlight-item .diigo-orphanHighlight-item-copy{position:absolute;right:1px;bottom:1px;font:normal 10px/12px arial,Helvetica;background-color:rgba(0,0,0,0.3);padding:2px;display:none;color:#fff;cursor:pointer;z-index:1;}.diigo-orphanHighlight-item:hover .diigo-orphanHighlight-item-copy{display:block;}#diigo-orphanHighlight-main{position:relative;}#diigo-orphanHighlight-notification{height:30px;width:150px;border:2px solid rgba(0,0,0,.15);position:absolute;left:50%;top:50%;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/success.png") 5px 50% no-repeat;text-indent:26px;font:normal 12px/30px arial,Helvetica;background-color:#fff;border-radius:2px;-webkit-transform:translate(-50%,-50%);background-clip:content-box;z-index:1;display:none;}.diigo-customize-scrollbar::-webkit-scrollbar{width:6px;}.diigo-customize-scrollbar::-webkit-scrollbar-track-piece{background-color:transparent;}.diigo-customize-scrollbar::-webkit-scrollbar-thumb:vertical{height:20px;background-color:#CCC;}.diigo-customize-scrollbar::-webkit-scrollbar-thumb:hover{background-color:#aaa;}#d3df-sidebar{border:1px #ccc solid;z-index:99997;}#d3df-sidebar div.heading{padding:3px;font-size:13px;border-top:1px #E8EEF7 solid;font-weight:bold;zoom:1;}#d3df-sidebar div.popOut{width:16px;height:16px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/popout.gif) no-repeat scroll left top;cursor:pointer;}#d3df-sidebar div.popOut.popIn{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/popin.gif);}#d3df-sidebar div.popOut.close{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/close1.gif);}#d3df-sidebar div.heading a.add{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv1.gif) no-repeat scroll left -172px;padding-left:18px;display:block;float:right;font-weight:normal;}#d3df-sidebar a.togglePanel{background:transparent url(http://www.diigo.com/images/v2/eoc.gif) no-repeat scroll left top;display:block;float:right;width:16px;height:16px;}#d3df-sidebar a.togglePanel.collapsed{background-position:left bottom;}#d3df-sidebar ul,#d3df-sidebar ul li{list-style:none;overflow:hidden;zoom:1;}#d3df-sidebar li.highlight a.highlight{overflow:hidden;height:24px;zoom:1;}#d3df-sidebar ul.highlights li{margin:1px;}#d3df-sidebar ul.comments li{margin:1px;padding:2px;}#d3df-sidebar div.noComments{font-size:11px;text-align:center;padding:15px 5px;}#d3df-sidebar p.commentBody,#d3df-sidebar p.commentBody a{font-size:11px;}#d3df-sidebar a.avatar{float:left;margin-right:3px;}#d3df-sidebar a.avatar img{padding:1px;border:1px #CCC solid;width:32px;height:32px;}#d3df-sidebar .commentInfo{font-size:12px;}#d3df-sidebar .commentInfo a{border-bottom:1px dotted #999;}#d3df-sidebar a.highlight{line-height:24px;padding-left:18px;display:block;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv1.gif) no-repeat scroll left -192px;}#d3df-sidebar a.floatNote{padding-left:16px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv1.gif) no-repeat scroll left -144px;}#d3df-sidebar a.highlight .jumpTo{line-height:24px;padding-left:5px;font-size:12px;font-style:italic;}#d3df-sidebar.themeDefault .bgColor1{background-color:#C3D9FF;}#d3df-sidebar.themeDefault .bgColor2{background-color:#E8EEF7;}#d3df-sidebar.themeDefault .bgColor3{background-color:#FFF;}#d3df-sidebar.themeDefault .color1{color:#999;}#d3df-sidebar.themeDefault .color2{color:#333;}@media screen{body.diigoHiPen-yellow{cursor:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/highlighter-orange.cur) 4 15,text!important;}body.diigoHiPen-blue{cursor:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/highlighter-blue.cur) 4 15,auto!important;}body.diigoHiPen-green{cursor:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/highlighter-green.cur) 4 15,text!important;}body.diigoHiPen-pink{cursor:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/highlighter-pink.cur) 4 15,text!important;}}.diigolet.notice{font:bold 13px/1.5 Helvetica,Arial,sans-serif;position:fixed;top:5px;left:0;width:100%;text-align:center;z-index:2147483647;height:1px;}.diigolet.notice>div{border:1px solid #fad42e;background:#fea;border-radius:5px;color:#000;display:inline-block;padding:5px 10px 5px 5px;-webkit-box-shadow:rgba(0,0,0,0.3) 0 1px 1px;}.diigolet.notice>div>b{display:inline-block;height:16px;width:16px;margin:2px 3px 0 0;background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) 0 -80px no-repeat;float:left;}.diigolet.notice>div>p>a{font-size:12px;}.diigolet.notice>div>p{float:left;max-width:420px;}.diigolet.notice>div.alert{background:#fef6f3;border-color:#cd0a0a;}.diigolet.notice>div.alert p #retry{margin-left:3px;text-decoration:underline;}.diigolet.notice>div.alert>b{background-position:-16px -80px;}.diigolet.notice>div.info>b{background-position:-32px -80px;}.diigolet.notice>div.wait>b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/processing.gif) no-repeat scroll left 0 transparent;}.diigolet.notice div #close{display:block;height:12px;width:12px;background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/close.png);float:right;margin-left:10px;margin-top:3px;}.diigolet.notice div #close:hover{background-position:0 -12px;}#diigolet-panel-panel{z-index:2147483641;}#diigolet-panel-panel.notSignedIn .signedIn{display:none;}#diigolet-panel-panel.signedIn .notSignedIn{display:none;}#diigolet-panel-panel{height:36px;border-top-left-radius:19px;border-bottom-left-radius:19px;font:normal 12px/1.5 Helvetica,Arial,sans-serif;position:fixed;left:5px;top:5px;background-color:#fff;-webkit-box-shadow:rgba(0,0,0,0.3) 0 1px 3px;white-space:nowrap;border:1px solid rgba(47,95,122,.3);-webkit-user-select:none;background-clip:content-box;}#diigolet-panel-panel:hover #diigolet-panel-space{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -379px 0 no-repeat;opacity:.4;}#diigolet-panel-panel.fold #diigolet-panel-logo{opacity:1;width:28px;}#diigolet-panel-panel.fold #diigolet-panel-main{width:0;border-radius:0;}.clearfloat:after{display:block;clear:both;content:"";visibility:hidden;height:0;}.clearfloat{zoom:1;}#diigolet-panel-main{height:36px;display:inline-block;background-color:rgba(255,255,255,1);border-radius:19px 0 0 19px;overflow:hidden;-webkit-transition:left 100ms ease-in-out;}#diigolet-panel-logo{display:inline-block;width:0;height:36px;border-top-left-radius:19px;border-bottom-left-radius:19px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/di.png");background-position:0 0;background-color:#fff;opacity:0;cursor:pointer;}#diigolet-panel-logo:hover{background-position:-28px 0;}#diigolet-panel-space{width:12px;height:36px;display:inline-block;background-color:#fff;}#diigolet-panel-panel .diigolet-panel-btn{height:36px;float:left;}#diigolet-panel-panel .diigolet-panel-btn>b{height:36px;width:36px;display:block;cursor:pointer;margin:0 auto;-webkit-transition:background-color 200ms ease;}#diigolet-panel-panel .diigolet-panel-btn>b:hover{background-color:#E7F0FF;}#diigolet-panel-panel .diigolet-panel-btn>b:active{-webkit-transform:scale(.9);}#diigolet-panel-fold{height:36px;float:left;cursor:pointer;width:19px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") 0 0 no-repeat;}#diigolet-panel-fold:hover{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -38px 0 no-repeat;}#diigolet-panel-Highlight{width:48px;}#diigolet-panel-btnHighlight{width:34px;height:36px;float:right;}#diigolet-panel-btnHighlight>b{height:36px;width:36px;display:block;cursor:pointer;-webkit-transition:background-color 200ms ease,border-radius 200ms ease;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -105px 0 no-repeat;}#diigolet-panel-Highlight.pen #diigolet-panel-btnHighlight>b{height:36px;width:36px;margin:0;}#diigolet-panel-Highlight:not(.pen) #diigolet-panel-btnHighlight>b:hover{background-color:#E7F0FF!important;}#diigolet-panel-btnHighlight>b:active{-webkit-transform:scale(.9);}#diigolet-panel-Highlight.pen #diigolet-panel-btnHighlight>b{background-color:#E7F0FF;-webkit-transform:scale(0.9);}#diigolet-panel-btnHighlight.yellow>b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -73px 0 no-repeat;}#diigolet-panel-btnHighlight.blue>b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -105px 0 no-repeat;}#diigolet-panel-btnHighlight.green>b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -137px 0 no-repeat;}#diigolet-panel-btnHighlight.pink>b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -169px 0 no-repeat;}#diigolet-panel-hightlight-dropdown.yellow>b{background-color:#ffb000;}#diigolet-panel-hightlight-dropdown.blue>b{background-color:#39abed;}#diigolet-panel-hightlight-dropdown.green>b{background-color:#7c0;}#diigolet-panel-hightlight-dropdown.pink>b{background-color:#f6b;}#diigolet-panel-hightlight-dropdown{width:14px;height:36px;float:right;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -360px 0 no-repeat;cursor:pointer;}#diigolet-panel-hightlight-dropdown:hover{background-color:#E7F0FF;}#diigolet-panel-hightlight-dropdown>b{height:5px;width:5px;border-radius:12px;display:block;margin-top:16px;margin-left:5px;cursor:pointer;}#diigolet-panel-btnStickyNote{width:42px;}#diigolet-panel-btnStickyNote b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -234px -1px no-repeat;}#diigolet-panel-btnBookmark{width:42px;}#diigolet-panel-btnBookmark b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -296px -1px no-repeat;}#diigolet-panel-btnBookmark.saved b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -328px -1px no-repeat;}#diigolet-panel-orphanHighlight{width:46px;}#diigolet-panel-orphanHighlight b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -266px -1px no-repeat;}#diigolet-panel-colorPicker{display:none;position:absolute;left:15px;top:41px;width:91px;background-color:#fff;box-shadow:0 1px 4px rgba(0,0,0,.35);border-radius:2px;padding:5px 0;-webkit-animation:diigo-dropdown .15s ease-in 1;}#diigolet-panel-colorPicker.dropdownShown{display:block;}#diigolet-panel-colorPicker-arrow{border:5px solid;border-top-color:transparent;border-right-color:transparent;border-bottom-color:#fff;border-left-color:transparent;position:absolute;left:40px;top:-9px;}#diigolet-panel-colorPicker li{font-weight:normal;display:block;padding-right:10px!important;padding-left:10px!important;text-decoration:none!important;line-height:26px;height:26px;color:#434343;min-width:60px;width:71px;background:none!important;border:none!important;-webkit-transition:background-color 200ms ease;}#diigolet-panel-colorPicker li:hover{background-color:#e8e8e8!important;color:#434343!important;text-decoration:none!important;}#diigolet-panel-colorPicker li span{display:inline-block;width:12px;height:12px;border-radius:7px;margin-right:5px;vertical-align:middle;margin-bottom:3px;}#diigolet-panel-colorPicker li span b{width:4px;height:4px;background:#606060;margin-top:4px;margin-left:4px;border-radius:2px;}#diigolet-panel-colorPicker li.selected span b{display:block;}#diigolet-panel-colorPicker li.yellow span{background:#fde200;border:1px solid #b0a224;}#diigolet-panel-colorPicker li.blue span{background:#7db3f9;border:1px solid #63799a;}#diigolet-panel-colorPicker li.green span{background:#86ca25;border:1px solid #718b49;}#diigolet-panel-colorPicker li.pink span{background:#ff9b9a;border:1px solid #ae657a;}.diigolet .moreActionShare b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) 0 -96px no-repeat;}#diigolet-dialog-share{background-color:#fcfbf7;border-radius:2px;font:normal 13px/1.5 Helvetica,Arial,sans-serif;position:fixed;left:5px;top:7px;box-shadow:0 1px 3px rgba(0,0,0,.08);white-space:nowrap;width:520px;z-index:2147483646;}#diigolet-dialog-share *{white-space:normal;}#diigolet-dialog-share-title{height:30px;vertical-align:middle;background-color:#39baf6;line-height:30px;padding:0 10px;font-size:14px;color:white;text-align:left;border-radius:2px 2px 0 0;}#diigolet-dialog-share-closeBtn{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/win-close.png) 50% 50% no-repeat;float:right;height:16px;margin-left:10px;width:16px;margin-top:7px;}#diigolet-dialog-share-content{border-radius:0 0 2px 2px;border-width:1px 1px 1px 1px;border-color:rgba(0,0,0,.08);border-style:solid;}#diigolet-share-shareToTabs{background-color:#fcfbf7;list-style-type:none;padding:0 5px;margin:0;height:30px;line-height:30px;border-left:1px solid rgba(0,0,0,.08);border-right:1px solid rgba(0,0,0,.08);}#diigolet-share-shareToTabs li{display:inline-block;line-height:22px;height:24px;margin-top:6px;}#diigolet-share-shareToTabs li a{text-decoration:none;border-bottom-color:#3669a8;border-top-left-radius:5px;border-top-right-radius:5px;color:#000;opacity:.8;display:block;padding:0 5px;}#diigolet-share-shareToTabs a:hover{opacity:1;}#diigolet-share-shareToTabs a.current{border-radius:2px 2px 0 0;border-width:1px 1px 0 1px;border-color:rgba(0,0,0,.08);border-style:solid;border-bottom:1px solid #fcfbf7;color:#000;opacity:1;z-index:0;position:relative;top:1px;}#diigolet-share-shareToTabs a.current:hover{color:#222;}#diigolet-share-shareToTabs li b{display:inline-block;width:16px;height:16px;vertical-align:text-bottom;margin-right:3px;}.diigolet .shareToTwitter b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) -16px -96px no-repeat;}.diigolet .shareToFacebook b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) -32px -96px no-repeat;}.diigolet .shareToGplus b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) -48px -96px no-repeat;}.diigolet .shareToEmail b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) 0 -112px no-repeat;}.diigolet .getAnnotatedLink b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) -16px -112px no-repeat;}.diigolet .twitterDesc{color:#777;font-size:13px;line-height:20px;}#diigolet-twitter-saveBtn{display:block;line-height:24px;cursor:pointer;text-align:center;color:white;border-radius:2px;border:1px solid #066ec1;font-size:12px;text-decoration:none;border-radius:2px;border:1px solid #85a0a6;color:#85a0a6;font-size:12px;text-align:center;height:20px;width:50px;line-height:20px;float:right;}#diigolet-twitter-saveBtn:active{background:#85a0a6;color:#fff;}#diigolet-twitter-cancelBtn{color:#999;height:12px;font-size:12px;margin:1px 8px 0 6px;text-decoration:none;float:right;}#diigolet-twitter-cancelBtn:hover{text-decoration:underline;}#diigolet-email-saveBtn{display:block;line-height:24px;cursor:pointer;text-align:center;color:white;border-radius:2px;border:1px solid #066ec1;font-size:12px;text-decoration:none;border-radius:2px;border:1px solid #85a0a6;color:#85a0a6;font-size:12px;text-align:center;height:20px;width:50px;line-height:20px;float:right;margin-top:4px;}#diigolet-email-saveBtn:active{background:#85a0a6;color:#fff;}#diigolet-email-cancelBtn{color:#999;height:12px;font-size:12px;margin:6px 14px 0 0;text-decoration:none;float:right;}#diigolet-email-cancelBtn:hover{text-decoration:underline;}#diigolet-annotatedLink-saveBtn{display:block;line-height:24px;cursor:pointer;text-align:center;color:white;border-radius:2px;border:1px solid #066ec1;font-size:12px;text-decoration:none;border-radius:2px;border:1px solid #85a0a6;color:#85a0a6;font-size:12px;text-align:center;height:20px;width:50px;line-height:20px;float:right;}#diigolet-annotatedLink-saveBtn:active{background:#85a0a6;color:#fff;}#diigolet-annotatedLink-cancelBtn{color:#999;height:12px;font-size:12px;margin:2px 8px 0 6px;text-decoration:none;float:right;}#diigolet-annotatedLink-cancelBtn:hover{text-decoration:underline;}#diigolet-share-twitterLeftChars{color:#999;float:right;font-size:20px;font-weight:700;line-height:20px;}#diigolet-share-twitterLeftChars.full{color:#F00;}#diigolet-dialog-share .inputTxt{border:1px solid #7F9DB9;font:normal 12px/1.5 Arial,Helvetica,sans-serif;border:1px solid #d7d7d7;-webkit-transition:border-color 200ms ease;outline:none;}#diigolet-dialog-share .inputTxt:focus{border:1px solid #AAA;}#diigolet-dialog-share-twitterMsg{height:54px;width:492px;}#diigolet-dialog-share .buttonRow{margin-top:5px;text-align:right;}#diigolet-dialog-share .buttonRow input{margin-left:5px;padding:1px 6px;}#diigolet-dialog-share input.defaultAction{font-weight:700;}#diigolet-dialog-share-twitter{padding:10px;}#diigolet-dialog-share-facebook{padding:5px;font-size:20px;height:100px;line-height:100px;text-align:center;}#diigolet-dialog-share-gPlus{padding:5px;font-size:20px;height:100px;line-height:100px;text-align:center;}#diigolet-dialog-share-gBuzz iframe{border:none;height:340px;width:100%;overflow:hidden;}#diigolet-dialog-share-email{padding:10px;}#diigolet-dialog-share-email>table{width:100%;border-width:0;margin-bottom:5px;}#diigolet-dialog-share-email>table td{padding:2px 0;}#diigolet-dialog-share-email label{font-weight:700;}#diigolet-dialog-share-email-to,#diigolet-dialog-share-email-subject{width:100%;}#diigolet-dialog-share-email-message{height:72px;width:100%;}#diigolet-dialog-share-email-quotes-checker{font-weight:400!important;float:right;}#diigolet-dialog-share-email-quotes-checker input{margin-right:2px;vertical-align:text-bottom;}#diigolet-dialog-share-email-quotes{border:1px solid #bbb;border-radius:3px;width:100%;max-height:150px;overflow-y:scroll;}#diigolet-aidlog-share-email-quotes-content{margin:5px 10px 10px 10px;}#diigolet-dialog-share-annotatedLink{padding:10px;}.diigolet .annotatedLinkInfo{border:1px solid #fad42e;background:#fea;border-radius:5px;color:#000;display:inline-block;padding:0 0 0 20px!important;position:relative;margin-bottom:10px!important;}.diigolet .annotatedLinkInfo b{display:inline-block;height:16px;width:16px;margin-right:3px;background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) -32px -80px no-repeat;position:absolute;left:1px;top:1px;}#diigolet-dialog-share-annotatedLink-value{font-weight:700!important;font-size:13px!important;padding:2px;width:496px;}#diigolet-dialog-share-annotatedLink-value.loading{color:#ccc;font-style:italic;}#diigolet-dialog-share-annotatedLink-optLinks{float:left;}.diigolet .autocompleteContacts{border:1px solid #d9d9d9;border-top-color:#999;border-left-color:#999;width:380px;}.diigolet .recInput{font:12px verdana;border-width:0;float:left;margin:2px;padding-top:2px;}.diigolet .recItem{border:1px solid #7B9EBD;padding:0 2px;background-color:#F0F5FE;float:left;margin:2px 2px 0 0;}.diigolet .recInputSizer{position:absolute;visibility:hidden;left:0;bottom:0;font:11px verdana;}.diigolet .accTip{position:absolute;border:1px solid #ddd;border-top:none;background-color:#f5f5f5;font-size:11px;color:#777;text-align:left;padding:2px 0;text-indent:5px;z-index:8998;}.diigolet .accNotice{position:absolute;border:1px solid #ffd324;border-top:none;background-color:#fff6bf;font-size:11px;color:#600;text-align:left;padding:2px 0;text-indent:5px;z-index:8999;}.diigolet .accList{position:absolute;border:1px solid #999;border-top:none;background-color:#fff;font:10px verdana;color:#777;text-align:left;z-index:9000;line-height:18px;}.diigolet .accList .cItem{border-bottom:1px solid #ddd;background-color:#fff;cursor:pointer;padding:2px;color:#333;}.diigolet .accList .cItem b{font-size:11px;font-weight:normal;color:#000;}.diigolet .accList .cItem i,.recItem i{font-size:7pt;color:#090;font-style:normal;margin-right:2px;}.diigolet .accList div strong{background-color:#FFFADB;padding:0 2px;}.diigolet .accList div.hover{background-color:#E0ECFF;text-decoration:none;}.diigolet .recItem a{color:#999;font-family:Verdana,Arial,Helvetica,sans-serif;font-size:12px;font-weight:bold;line-height:16px;margin:0 1px 0 3px;}.diigolet .recItem a:hover{color:#333;text-decoration:none;}.diigolet .cItem span.extraDesc{float:none;font-weight:normal;color:#777;margin-left:10px;font-style:italic;}.diigolet .cItem span.extraDesc .keywordStrong{color:#000;font-style:italic;background-color:#fff;}.diigolet .cItem span.keywordStrong{float:none;font-weight:bold;}',
Ga='Please <a href="#" title="Sign in into Diigo.com" id="signIn">sign in</a> first.',ja=0,Qa=1,ga=2;ANNOTATION_TYPE_ICON=9;x.urls={getUserBookmarksPageURL:function(a){return"https://www.diigo.com/user/"+(a||k.user)},getCreateGroupURL:function(){return"https://groups.diigo.com/create"},getCreateListURL:function(){return"https://www.diigo.com/bookmark_list/new_list"},getGroupURL:function(a){return a?"https://groups.diigo.com/groups/"+a:"https://groups.diigo.com"},getGroupHome:function(){return"https://groups.diigo.com/user/"+
k.user},getListHome:function(){return"https://www.diigo.com/list/"+k.user},getNetwork:function(){return"https://www.diigo.com/network/"+k.user},getHotBookmark:function(){return"https://www.diigo.com/buzz/hot"},getUserHomepageURL:function(a){return this.getUserProfileURL(a)},getUserProfileURL:function(a){a=a||k.user;return"https://www.diigo.com/profile/"+a},getSignOutURL:function(){return"https://www.diigo.com/sign-out"},getSignInURL:function(){return"https://www.diigo.com/sign-in"},getFeedbackURL:function(){return"http://www.diigo.com/common/feedback"},
getFollowOnTwitterURL:function(){return"http://www.twitter.com/diigo"},getRatingURL:function(){return"https://chrome.google.com/extensions/detail/oojbgadfejifecebmdnhhkbhdjaphole"}};x.handlers={tb_showDropDownMenu:function(a,c){$("#diigolet-help,#diigolet-toolbar .dropdownMenu").hide();if(!(c=="#diigolet-tb-signInMenu"&&k.signedIn)){var d=$(a.target);d=d.add(d.parents("a")).filter(".diigoletButton");if($.browser.msie&&$.browser.version>=9){tbar=$("#diigolet-toolbar");Ea($(c).css({left:d.offset().left,
top:$(document).scrollTop()+25}).show())}else Ea($(c).css({left:d.offset().left}).show())}},tb_viewComments:function(){Fa.popOut({top:35,left:3})},tb_signIn:function(){k.signedIn?z.signOut():z.signIn()},hideToolbar:function(){ba.hide()},showHelp:function(){$("#diigolet-toolbar .dropdownMenu").hide();if($.browser.msie&&$.browser.version>=9){tbar=$("#diigolet-toolbar");Ea(ba.jHelpTip.css({top:tbar.offset().top+tbar.height()-5}).show())}else Ea(ba.jHelpTip.show(),500)},hideHelp:function(){$("#diigolet-help").hide()},
mouseOnBorder:function(){ba.show()},OnTwitterMsgChange:function(){},bookmark:function(){if(ka())P.shown?P.hide():P.show()},overHighlight:function(){if(!k.isHighlightPen){$("#diigolet-button-highlight").toggleClass(k.mouseClass,true);$("#diigolet-button-highlight-dropdown").toggleClass(k.mouseClass,true)}},outHighlight:function(){if(!k.isHighlightPen){$("#diigolet-button-highlight").toggleClass(k.mouseClass,false);$("#diigolet-button-highlight-dropdown").toggleClass(k.mouseClass,false)}},dropDownColorMenu:function(){$("#diigolet-help,#diigolet-toolbar .dropdownMenu").hide();
var a=$("#diigolet-button-highlight");$.each(k.defaultColors,function(c,d){R("diigolet-colorMenu-"+d).toggleClass("colorchecked",false)});k.penColor&&k.penColor.length>0?R("diigolet-colorMenu-"+k.penColor).toggleClass("colorchecked",true):R("diigolet-colorMenu-yellow").toggleClass("colorchecked",true);$.browser.msie&&$.browser.version>=9?Ea($("#diigolet-tb-colorMenu").css({left:a.offset().left,top:$(document).scrollTop()+25}).show()):Ea($("#diigolet-tb-colorMenu").css({left:a.offset().left}).show())},
diigoTwitterit:function(){ka()},bmOnSubmitAndClose:function(){P.submitAndClose()},bmCancel:function(){P.hide(true)},highlight:function(a,c,d){if(ka()){a=T.checkSelection();I("[highlight]",a);if(a.ok){I("[highlight] Making a text highlight");var f=M.add({user:k.user,realName:k.realName,content:a.html,type:ja,nth:a.nth},{},c,d);$.browser.msie&&document.selection.empty()}else a.pen?diigolet.handle(true,"TogglePen"):k.notify(a.msg);return f}},TogglePen:function(){var a=k.isHighlightPen=!k.isHighlightPen;
I("[highlight] togglePen",a);ba.onHighlightPenModeChanged(a);J.onHighlightPenModeChanged(a);var c=$(document.body);c.removeClass(ma(k.defaultColors,function(d){return"diigoHiPen-"+d}).join(" "));a&&c.addClass("diigoHiPen-"+k.penColor)},ChangeColor:function(a,c){k.penColor=c;J.onHighlightColorChanged(c,true);da.changeColor(c);ba.onHighlightColorChanged(c);chrome.extension.sendRequest({name:"changeColor",color:c});k.isHighlightPen&&$(document.body).removeClass(ma(k.defaultColors,function(d){return"diigoHiPen-"+
d}).join(" ")).addClass("diigoHiPen-"+k.penColor)},highlightAndComment:function(a,c,d){(a=x.handle(a,"highlight",c,d))&&a.jumpHere(false,true)},showHideHighlight:function(){k.toggleSilent()},addStickyNote:function(){!ka()||H.isEditing()||M.add({user:k.user,realName:k.realName,content:"",type:ga},{dontSave:true}).jumpHere(false,true)},hlmenu_mousedown:function(){return $.browser.opera},dlgIC_del_ic:function(a,c,d){H.onclick_del_ic(a,c,d)},sb_del_pc:function(a,c,d){Fa.onclick_del_pc(a,c,d)}};x.handle=
function(a,c){a=$.event.fix(a||window.event);a.preventDefault();return x.handle2.apply(null,[c,a].concat([].slice.call(arguments,2)))};x.handle2=function(a){var c=[].slice.call(arguments,1);return x.handlers[a].apply(null,c)};var la=ea.extend({constructor:function(a){V(this,{url:"",urlId:"",b_id:"",title:"",description:"",user:"",unread:false,mode:0,tags:[],alert:false,onlyInGroup:false,groups:[],lists:[],datetime:null,saved:false,toAddToBookmarkLists:null,toShareToGroups:null,toShareExistingAnnotations:false},
a||{})},getTitle:function(){return Ia(this.title||document.title||document.location.href)},addGroups:function(a){var c=this;K(a,function(d){var f=Ca(c.groups,function(h){return h.name==d.name});if(f==-1){c.groups.push(d);k.fireEvent("bm_addGroups",[c,d.name])}else if(d.user)c.groups[f].user=d.user})},getGroupNamesSharedByMe:function(){return wb(this.groups,function(a){return a.user==k.user?a.name:null})},inList:function(a){return vb(this.lists,function(c){return c.id==a})}});la.fromDocument=function(){var a=
document;return new la({url:a.location.href,title:a.title||a.location.href,mode:Q.getFromCache("prefs.bookmark.privateByDefault","b")?2:0})};la.readlater=function(){var a=document;return new la({url:a.location.href,title:a.title||a.location.href,mode:Q.getFromCache("prefs.bookmark.privateByDefault","b")?2:0,unread:true})};var Ja=false,nb=false,qb;x.openURL=function(a){N.send({name:"createTab",details:{url:a}})};var k={generated:false,chromeTabId:null,isSignedIn:false,autoLoad:false,keywords:[],orphanHighlights:[],
googleSearchSentence:"",autoShowHighlightIcon:false,chromeExtensionID:null,user:"",userId:null,realName:"",userLevel:0,isHighlightPen:false,penColor:"yellow",mouseClass:"mouseovered",defaultColors:["yellow","blue","green","pink"],signedIn:false,launchMode:{normal:diigoletLaunchMode==0,permalink:diigoletLaunchMode==3,pagePlayer:diigoletLaunchMode==5},permalinkParams:null,silent:false,bookmark:new la,groupTagsDict:{},recommendedTagsLoaded:false,recommendedTags:[],selectionResult:null,annotations:[],
pageComments:[],currentHighlight:"",myTags:[],myTagsWithCount:[],myBmLists:[],myGroups:[],myContacts:[],permissions:{capture:true,image:true,highlight:true,premium:true,snapshot:true},isCommented:function(){return this.isAnnotated()},isAnnotated:function(){return this.bookmark.annotated||this.pageComments.length>0||this.annotations.length>0},toggleSilent:function(a){a=a===undefined?!this.silent:a;if(a!=this.silent)if(this.silent=a){this.unpaintAllAnnotations();$(".diigo-scrollmarker").hide()}else{this.paintAllAnnotations();
$(".diigo-scrollmarker").show()}},notify:function(a,c){I(a);L.notifyInfo(a,{timeout:c})},resetData:function(a){this.bookmark=la.fromDocument();if(a){this.chromeExtensionID=a.extensionID;this.chromeTabId=a.tabId;V(this,a.globalData)}if(k.launchMode.permalink)k.permalinkParams={user:window.diigo_permalink_user,key:window.diigo_permalink_key,mode:diigo_permalink_mode,url:diigo_bookmark_url,legacy:diigo_permalink_legacy};if(window.diigo_bookmark_url)this.bookmark.url=window.diigo_bookmark_url},reset:function(a){this.resetData(a)},
paintAllAnnotations:function(){K(this.annotations,function(f){if(f.user==k.user||f.onlyInGroup)f.paint()});for(var a=$(".diigoHighlight"),c=[],d=0;d<a.length;d++)c[d]=a[d].className.match(/id(\w)+/g)[0];a=Za(c);for(d=0;d<=a.length;d++)if($("."+a[d]).length==1)$("."+a[d]).scrollmarker();else{c=$("."+a[d]);$(c[0]).scrollmarker()}if(k.orphanHighlights.length!=0){$("#diigolet-panel-panel").addClass("orphanHighlight");Ib.init()}else $("#diigolet-panel-orphanHighlight").hide()},unpaintAllAnnotations:function(){K(this.annotations,
function(a){a.unpaint()})}};Vb.mixin(k);var Wb={docScroll:function(){return[Jb.scrollLeft(),Jb.scrollTop()]},docSize:function(){return[mb.width(),mb.height()]}},Tb={ele:null,shown:false,init:function(){},destroy:function(){},show:function(a,c){if(k.signedIn){if(k.launchMode.threeDForum&&c=="selection")c="selection_3df";var d=this.ele;this.shown=true;d.find(">div").css({display:"none"});d.find("."+{selection:"_selection",highlight:"_highlight",selection_3df:"_selection_3df"}[c]).show();var f=k.currentHighlight;
if(f&&f.comments.length==0)d.find("a._del")[f.user==k.user?"show":"hide"]();d.css({left:a.pageX+3,top:a.pageY+3}).show()}},hide:function(){this.shown=false;this.ele.hide()},create:function(){this.ele=$(Ua).css({position:"absolute"}).hide().appendTo(document.body).hide()}};x.run=function(a,c){Q.updateCache(a.preloadedPrefs);ia();$("#diigolet-panel-panel").length==0&&K([J,P,H,Z,L,S,ra],function(d){d.init()});c&&c=="autoshow"?J.show("fold"):J.show();if(k.signedIn){I("aaaa");Ka()}if(k.generated==false){k.reset(a);
if(k.signedIn){Ka();a.shoudLoadMyStuff&&z.loadMyStuff()}if(a.loadBookmarkResult){I("[bookmark info already loaded]",a.loadBookmarkResult);z.cb_bm_loadBookmark_success(a.loadBookmarkResult,"showbar")}else a.shouldLoadBookmarkByMyself&&k.signedIn&&z.loadBookmark("showbar")}else{k.unpaintAllAnnotations();k.paintAllAnnotations();M.sort();J.adjustPosition()}if($("#diigolet-csm").length==0){da.init();Va()}K([P,H,ba,da,Z,Fa,J,L,S],function(d){if(d.j){var f=function(h){return function(){Ja=h.clickedOn=true}}(d);
d.j.unbind(".pay4sin").bind("mouseup.pay4sin",f).bind("mousedown.pay4sin",f).bind("keydown.pay4sin",function(h){h.stopPropagation()})}});rb.afterRun();if(c&&c=="stickynote"){x.stickyNoteByContextMenu=true;x.handlers.addStickyNote()}};x.chromeRun=function(a,c){function d(){if(!$.isReady){var f=chrome.i18n.getMessage("pageStillLoading");if(document.body){ia();ia=function(){};L.init();L.notify(f,"info",{timeout:3E3})}else{I("body is null. will retry");setTimeout(d,500)}}}xa(a.extensionID);if(function(){var f=
window.location.href;return f.substring(f.length-4)==".pdf"?true:false}())x.chromeActuallyRun(c);else if(x.started)$.isReady||d();else{x.started=true;if(a.logLevel)x.logLevel=a.logLevel;if(La(window.location.href))if(window.top!=window.self)I("[BUG] I don't run in a frame");else{if(!$.isReady){I("DOM not ready.");a.userClick&&d()}$(function(){I("DOM is ready.");x.chromeActuallyRun(c)})}else alert(chrome.i18n.getMessage("alertUnsupportedPage"))}};x.chromeActuallyRun=function(a){ua.makeSnapshot();x.Messenger.send({name:"initialData"},
function(c){I("initialData",c);x.run(c,a);x.ready=true})};x.runAway=function(){k.reset();K([P,H,Fa],function(){v.destroy()});delete window.diigolet};var Ra={hasCacheUpload:function(){return!!k.permissions.snapshot},onPrivilegeChange:function(){P.refreshPremium()}},ua={getDocumentSource:function(){var a=document,c=document.doctype,d="";if(c){d="<!DOCTYPE html PUBLIC";if(c.publicId)d+=' "'+c.publicId+'"';if(c.systemId)d+=' "'+c.systemId+'"';d+=">"}a=a.documentElement;a=a.outerHTML?a.outerHTML:XMLSerializer?
(new XMLSerializer).serializeToString(a):"<html>"+document.innerHTML+"</html>";return d+a},removeDiigoStuffFromHtml:function(a){a=a.replace(/<style[^<>]*id="diigolet-chrome-css"(?:.|\s)*?<\/style>/,"");a=a.replace(/<div[^<>]*id="diigolet-notice"(?:.|\s)*?<\/div>/,"");a=a.replace(/ id="dummybodyid"/,"");/"diigo/i.test(a)&&I("html still contains diigo");return a},makeSnapshot:function(){this.html=this.removeDiigoStuffFromHtml(this.getDocumentSource());this.text=document.body.innerText;if($("embed").attr("type")==
"application/pdf"){this.ispdf=true;this.pdfurl=$("embed").attr("src")}},uploadCache:function(a){if(Ra.hasCacheUpload()){x.Messenger.send({name:"uploadCache",details:{text:this.text,html:this.html,urlMD5:k.bookmark.urlId,groups:a.groups,ispdf:this.ispdf,pdfurl:this.pdfurl}});L.notifyWait(chrome.i18n.getMessage("upload_uploading"),{timeout:8E3})}else{sa.init();sa.show("Cache Pages")}},uploadDidFail:function(a){a=a||{};if(a.overQuota){k.permissions.snapshot=false;x.Messenger.send({name:"updateGlobalData",
details:{permissions:k.permissions}});Ra.onPrivilegeChange()}L.notifyAlert(a.msg||chrome.i18n.getMessage("upload_error"),{timeout:8E3})},uploadDidSucceed:function(){L.notifyOK(chrome.i18n.getMessage("upload_success"))}},rb={afterRun:function(){this.fixOpenTracker()},fixOpenTracker:function(){$("script[src*=opentracker]").length&&window.addEventListener("mousedown",function(a){a=$(a.target);a.is("a")||(a=a.parents("a").eq(0));a.is("[href*=javascript:void]")&&a.parents(".diigolet").length&&a.attr("href",
"javascript:void('ot_evt(')")},true)}};V(x,{quoteTag:function(a){a=a.replace(/"/g,"'").replace(/\s+/g," ").replace(/^\s+|\s+$/g,"");if(a.match(/\s+|,/))a='"'+a+'"';return a},parseTags:function(a,c){function d(){if(f.length>0){h.push(f.join(""));f.length=0}}for(var f=[],h=[],i=false,m=0,n=a.length,w;w=a.charAt(m),m<n;m++)if(w=='"')if(i){i=false;d()}else i=true;else if(i)f.push(w);else/\s/.test(w)||w==","?d():f.push(w);d();if(c)h=wb(xb(h),function(D){return Ia(D)||null});return h},unparseTags:function(a,
c){c=c||" ";return ma(a,function(d){return this.quoteTag(d)},this).join(c)}});var M=ea.extend({constructor:function(a){a=a||{};V(this,{id:null,user:"",mode:2,content:"",comments:[],saved:false,datetime:"",painted:false,paintedSuccessfully:false,type:null,groups:[],onlyInGroup:false,extra:{}},a);this.extra=V({nth:1},this.extra||{})},paint:function(){if(!k.silent){this.constructor.paint(this);this.painted=true}},unpaint:function(){this.paintedSuccessfully&&this.constructor.unpaint(this);this.painted=
this.paintedSuccessfully=false},del:function(a){return(this.constructor.del?this.constructor:M).del(this,a)},canDelete:function(a){return this.user==k.user&&this.getComments(a).length==0},canAddComments:function(){if(this.isPrivate()&&this.user!=k.user)return false;if(this.isPublic()&&0)return false;return true},addGroups:function(a){var c=this;K(a,function(d){if(Ca(c.groups,function(f){return f.idInGroup==d.idInGroup})==-1){c.groups.push(d);k.fireEvent("ann_add",[c,d.name])}});this.paint()},getPageOffset:function(){var a;
a=this.type==ja?$("em."+T.HIGHLIGHT_ID_CLASS+this.id):$("."+T.HIGHLIGHT_TYPE_CLASS+this.type+"."+T.HIGHLIGHT_ID_CLASS+this.id);if(a.size()<=0)return{left:0,top:0};var c=window,d={left:0,top:0},f=0,h=0;a.parents("div").filter(function(){if(c.getComputedStyle(this,null).getPropertyValue("position")=="relative"){d.left+=$(this).offset().left;d.top+=$(this).offset().top;f+=$(this).scrollLeft();h+=$(this).scrollTop()}});a=a.offset();if(!a)return{left:0,top:0};return{left:a.left-d.left+f,top:a.top-d.top+
h}},getComments:function(a){return $a(this.comments,function(c){return c.matchFilter(a)})},jumpHere:function(a,c){I("[Annotation] jump here");if(arguments.length==0)a=true;if(this.paintedSuccessfully){var d=this.type==ja?$("em."+ha.HIGHLIGHT_ID_CLASS+this.id):this.getEle();if(d.size()==0)k.notify("No corresponding text is found on the page. This page has probably been changed since you highlighted it.");else{if(a){var f=d.eq(0).offset();window.scrollTo(f.left,f.top-40)}d=d.eq(d.size()-1);f=d.offset();
e={pageX:f.left,pageY:f.top+d.height()+15};H.hide();if(c||this.comments.length>0)H.show(e,this,c?"add":"view",400)}}else k.notify("No corresponding text is found on the page. This page has probably been changed since you highlighted it.")},activate:function(){}});V(M,{add:function(a,c,d,f){I("[Annotation] add",a,c);c=V({dontPaint:false,dontSave:false,dontSort:false},c||{});var h;switch(a.type){case ja:h=Xa;break;case Qa:h=oa;break;case ga:h=pb;break;case 4:h=Xa;break;default:return null}a=new h(a);
I("[Annotation] add: new ctor(ann) returned");if(!a.saved){if(!a.id){if(!k.bookmark.urlId)k.bookmark.urlId=Da(window.location.href);a.id=d=="video"?Da(a.content):Da(a.content+a.user+k.bookmark.urlId+a.nth)}a.extra.nth=a.nth;a.extra.color=f?f:k.penColor}k.annotations.push(a);c.dontPaint||a.paint();f="id_"+a.id;if($("."+f).length!=0)if($("."+f).length>1){f=$("."+f)[0];$(f).scrollmarker()}else $("."+f).scrollmarker();a.paintedSuccessfully&&!c.dontSort&&M.sort();if(!a.saved&&!c.dontSave){I("save to server");
z.addAnnotation(a,d)}a.onlyInGroup||k.fireEvent("ann_add",[a]);a.groups&&K(a.groups,function(i){k.fireEvent("ann_add",[a,i.name])});return a},del:function(a,c){a=this.find(a);if(c){var d=Ca(a.groups,function(f){return f.name==c&&f.user==k.user});a.saved&&z.deleteAnnotation(a,a.groups[d].idInGroup);a.groups.splice(d,1);k.fireEvent("ann_del",[a,c])}else{if(a.onlyInGroup)throw"Annotation.del: onlyInGroup!";a.onlyInGroup=true;a.mode=3;a.saved&&z.deleteAnnotation(a,null);k.fireEvent("ann_del",[a])}if(a.onlyInGroup&&
a.groups.length==0){a.unpaint();k.annotations.splice(k.annotations.indexOf(a),1)}else a.paint();$("#"+("id_"+a.id)).remove();return a},find:function(a){a=a.id||a;return Ha(k.annotations,function(c){return c.id==a})},findByInlineComment:function(a){var c=a.id||a;return Ha(k.annotations,function(d){return Ha(d.comments,function(f){return f.id==c})})},sort:function(){k.annotations.sort(function(a,c){if(!a.paintedSuccessfully)return 1;if(!c.paintedSuccessfully)return-1;return a.extra.top-c.extra.top>
0?1:a.extra.top-c.extra.top==0?a.extra.left-c.extra.left:-1})}});var Xa=M.extend({constructor:function(a){this.base(a||{})}});V(Xa,{paint:function(a){a=M.find(a);Wa.paint(a)},unpaint:function(a){a=M.find(a);Wa.unpaint(a)}});var oa=M.extend({constructor:function(a){a=a||{};this.base(a);this.type=Qa;this.extra=V({},this.extra||{});a=k.bookmark.url;if(!this.content)if(this._focusedNode)this.content=W('<img src="#{0}" title="#{1}" alt="#{2}" />',[oa.makeAbsUrl(this._focusedNode.src,a),this._focusedNode.title,
this._focusedNode.alt]);else throw"Must specify either content or _focusedNode for image highlight";if(!this.extra.imageUrl)this.extra.imageUrl=oa.makeAbsUrl((this.content.match(/<img.*?\s+src=['"]?(.*?)['"]?[\s>]/im)||[])[1]||"",a);if(!this.extra.imageUrl)throw"invalid imageUrl";if(!this.saved&&this._focusedNode)for(var c=oa.makeRelUrl(this.extra.imageUrl,a),d=oa.makeAbsUrl(this.extra.imageUrl,a),f=document.getElementsByTagName("img"),h=0,i=0,m=f.length,n;n=f[i],i<m;i++)if(n.src.indexOf(c)>-1&&d==
oa.makeAbsUrl(n.src,a)){h++;if(n==this._focusedNode){this.extra.nth=h;break}}},getEle:function(){var a=null;a=$("img."+ha.HIGHLIGHT_ID_CLASS);if(a.size()==0)for(var c=oa.makeRelUrl(this.extra.imageUrl,k.bookmark.url),d=oa.makeAbsUrl(this.extra.imageUrl,k.bookmark.url),f=document.getElementsByTagName("img"),h=0,i=0,m=f.length,n;n=f[i],i<m;i++)if(n.src.indexOf(c)>-1&&d==oa.makeAbsUrl(n.src,k.bookmark.url)){h++;if(h==this.extra.nth)return $(n)}return a}});V(oa,{paint:function(a){function c(i,m){$(i).addClass(T.HIGHLIGHT_ICON_CLASS).addClass(T.HIGHLIGHT_ID_CLASS+
m.id).addClass(T.HIGHLIGHT_TYPE_CLASS+ANNOTATION_TYPE_ICON).addClass("ImageIcon").toggleClass("public",m.isPublic()&&f.length>0).toggleClass("private",m.isPrivate()&&f.length>0).toggleClass("group",m.inAnyGroups()&&f.length>0).toggleClass("diigoHighlightcommented",f.length>0);if(f.length>0){$(i).html("<span class='"+T.HIGHLIGHT_ID_CLASS+m.id+" "+T.HIGHLIGHT_ICON_CLASS+" "+T.HIGHLIGHT_TYPE_CLASS+ANNOTATION_TYPE_ICON+"'>"+f.length+"</span>");$(i).attr("title",Z.tipMsg(m));var n=m.getPageOffset();$(i).css({left:n.left,
top:n.top})}else{$(i).html("");$(i).attr("title","")}return i}a=M.find(a);var d=a.getEle();if(d){var f=a.comments;d.addClass(ha.HIGHLIGHT_CLASS).addClass(ha.HIGHLIGHT_ID_CLASS+a.id).addClass(ha.HIGHLIGHT_TYPE_CLASS+a.type).removeClass("yellow blue green pink").addClass(a.extra.color&&a.extra.color.length>0?a.extra.color:"yellow").toggleClass("diigoHighlightcommented",f.length>0);if(d.size()>0){var h=d.offset();a.extra.top=h.top;a.extra.left=h.left}a.painted=true;a.paintedSuccessfully=d.size()>0;if($("div."+
T.HIGHLIGHT_ID_CLASS+a.id).size()<=0&&d.size()>0){h=$(va.createElement("div"));h.insertBefore(d);c(h,a)}else c("div."+T.HIGHLIGHT_ID_CLASS+a.id,a)}},unpaint:function(a){a=M.find(a);var c=a.getEle();c&&c.removeClass(ha.HIGHLIGHT_ID_CLASS+a.id).removeClass(ha.HIGHLIGHT_CLASS).removeClass("diigoHighlightcommented").removeClass("public").removeClass("group")},getBaseUrl:function(a,c){var d=a,f=d.replace(/:\/\//,"123")[(c?"i":"lastI")+"ndexOf"]("/");if(f>0)d=d.slice(0,f);return d+"/"},makeRelUrl:function(a,
c){if(!/^[a-zA-Z]+:\/\/|^\//.test(a))return a;if(a.charAt(0)=="/")a=a.replace("/",this.getBaseUrl(a,true));return a.replace(this.getBaseUrl(c,false),"")},makeAbsUrl:function(a,c){if(a.indexOf("://")>0)return a;var d=a.charAt(0)=="/";return this.getBaseUrl(c,d)+(d?a.slice(1):a)}});var pb=M.extend({constructor:function(a){a=a||{};this.base(a);this.saving=false;if(!this.id)this.id=Da(Math.random()+Math.random()+(new Date).getTime().toString());this.type=ga},fixExtra:function(){var a=5*$a(k.annotations,
function(i){return i.type==ga}).length,c=$(document),d=c.scrollTop(),f=c.scrollLeft(),h=c.height();c=c.width();this.extra=V({left:a+f+10,top:a+d+50},this.extra||{},{winWidth:c,winHeight:h})},getEle:function(){return $("."+ha.HIGHLIGHT_ID_CLASS+this.id)}});V(pb,{paint:function(a){I("[FloatNote] paint: called");a=M.find(a);a.fixExtra();if(a.painted){var c=a.getEle();if(c){c.removeClass("diigoadd yellow blue green pink").addClass(a.extra.color);var d=H.getCommentsInfo(a.comments);d=="onlyPrivate"||d==
"noComment"?c.removeClass("group").addClass("private"):c.removeClass("private").addClass("group");setTimeout(function(){(H.getCommentCount("group",a.comments)||"")>0&&c.find("span").text(H.getCommentCount("group",a.comments)).show()},100)}}else{c=$(hb).addClass(ha.HIGHLIGHT_CLASS).addClass(ha.HIGHLIGHT_ID_CLASS+a.id).addClass(ha.HIGHLIGHT_TYPE_CLASS+a.type).css({left:a.extra.left,top:a.extra.top}).appendTo(document.body);if(x.stickyNoteByContextMenu==true){c.css({left:x.rightClickPos.x,top:x.rightClickPos.y});
x.stickyNoteByContextMenu=false}c.find("span").text(H.getCommentCount("group",a.comments)||"");H.getCommentCount("group",a.comments)==0&&c.find("span").hide();d=H.getCommentsInfo(a.comments);d=="onlyPrivate"||d=="noComment"?c.addClass("private"):c.addClass("group");c.addClass(a.extra.color);this.bindEvents(a);a.paintedSuccessfully=true}a.painted=true},unpaint:function(a){a=M.find(a);var c=a.getEle();if(c){c.unbind().remove();a.painted=a.paintedSuccessfully=false}},bindEvents:function(a){a=M.find(a);
var c=a.getEle();c.mouseout(function(d){if(d.relatedTarget==this.firstChild)return false});new $.Draggable(c,{cursor:"default",beforeDrag:function(){Ja=true;k.draggingFloatNote=true;I("[FloatNote] before drag: cancel show");a.saved&&!H.isEditing()&&H.hide()},afterDrag:function(){I("[FloatNote] after drag");a.extra.left=parseInt(c.css("left"));a.extra.top=parseInt(c.css("top"));k.draggingFloatNote=false;if(a.user==k.user&&a.saved){z.updateExtra(a);M.sort()}$(".id_"+a.id).scrollmarker()}})}});var Ya=
ea.extend({constructor:function(a){V(this,{id:null,user:"",mode:2,saved:false,datetime:"",groups:[],onlyInGroup:false},a||{});if(this.onlyInGroup&&!(this.id>0))this.id=Math.random().toString().substr(2)},del:function(a){return this.constructor.del(this,a)},canDelete:function(){return k.signedIn&&k.user&&k.user==this.user},addGroups:function(a){var c=this;K(a,function(d){if(Ca(c.groups,function(f){return f.idInGroup==d.idInGroup})==-1){c.groups.push(d);k.fireEvent((c instanceof ta?"pc":"ic")+"_add",
[c,d.name])}})}}),ta=Ya.extend({constructor:function(a){this.base(a)}});V(ta,{add:function(a){a instanceof this||(a=new this(a));k.pageComments.push(a);if(!a.saved)throw"[PageComment] add: adding an unsaved comment is probably and error";k.fireEvent("pc_add",[a]);return a},del:function(a,c){a=this.find(a);if(c){var d=Ca(a.groups,function(f){return f.name==c&&f.user==k.user});a.saved&&z.deletePageComment(a,a.groups[d].idInGroup);a.groups.splice(d,1);k.fireEvent("pc_del",[a,c])}else{if(a.onlyInGroup)throw"PageComment.del: onlyInGroup!";
a.onlyInGroup=true;a.mode=3;a.saved&&z.deletePageComment(a,null);k.fireEvent("pc_del",[a])}a.onlyInGroup&&a.groups.length==0&&k.pageComments.splice(k.pageComments.indexOf(a),1);return a},find:function(a){a=a.id||a;return Ha(k.pageComments,function(c){return c.id==a})}});var qa=Ya.extend({constructor:function(a){a=V({annotationId:null},a);this.base(a);if(!this.annotationId)throw"[InlineComment ctr] must specify annotationId";},getAnnotation:function(){if(!this.annotation)this.annotation=M.find(this.annotationId);
return this.annotation}});V(qa,{add:function(a){a instanceof this||(a=new this(a));ann=a.getAnnotation();if(ann.getComments("_noGroups").length>0){if(a.mode!=ann.mode&&a.mode!=3)a.mode=ann.mode}else if(a.mode!=ann.mode&&a.mode!=3){ann.mode=a.mode;k.fireEvent("ann_changeMode",[ann])}ann.comments.push(a);ann.paintedSuccessfully&&ann.paint();k.fireEvent("ic_add",[a]);return a},edit:function(a,c){var d=this.find(a);d.content=c;ann.paintedSuccessfully&&ann.paint();k.fireEvent("ic_edit",[d])},del:function(a,
c){a=this.find(a);I("[InlineComment.del]",a,c,a.onlyInGroup?"onlyInGroup":"");var d=function(){i&&i()};if(c){var f=Ca(a.groups,function(m){return m.name==c&&m.user==k.user});a.saved&&z.deleteInlineComment(a,a.groups[f].idInGroup,d);a.groups.splice(f,1);k.fireEvent("ic_del",[a,c])}else{if(a.onlyInGroup)throw"InlineComment.del: onlyInGroup!";a.onlyInGroup=true;a.mode=3;a.saved&&z.deleteInlineComment(a,null,d);k.fireEvent("ic_del",[a])}if(a.onlyInGroup&&a.groups.length==0){var h=a.getAnnotation();h.comments.splice(h.comments.indexOf(a),
1);if(h.isPublic()&&h.getComments("_smasher").length==0){h.mode=2;k.fireEvent("ann_changeMode",[h])}h.paintedSuccessfully&&h.paint();d=h.getComments(c?c:"_smasher");if(h.type==ga&&d.length==0)var i=function(){h.del(c)}}return a},find:function(a){a=a.id||a;var c=M.findByInlineComment(a);if(!c)return null;return Ha(c.comments,function(d){return d.id==a})}});K([la,M,Ya],function(a){a.implement({isPublic:function(){return this.mode==0&&!this.onlyInGroup},isPrivate:function(){return this.mode==2&&!this.onlyInGroup},
inGroup:function(c,d){return vb(this.groups,function(f){return f.name==c&&(d?f.user==d:true)})},inAnyGroups:function(){return this.groups.length>0},matchFilter:function(c){return c=="_all"?this.isPublic()||this.isPrivate()||this.inAnyGroups():c=="_smasher"?this.isPublic()||this.isPrivate():c=="_public"?this.isPublic():c=="_private"?this.isPrivate():this.inGroup(c)}})});var z={count:3,transId:1,callbacks:{},callback:function(a,c,d,f){if(a){var h=a.transId,i=a.cmd;I("[WebAPI response]",i,a.code,a,a.result)}if(a){this["cb_"+
i]&&this["cb_"+i](a);a.code==1&&this["cb_"+i+"_success"]&&this["cb_"+i+"_success"](a.result,f);a.code==0&&this["cb_"+i+"_failure"]&&this["cb_"+i+"_failure"](a.result,a.status,f)}if((c==0||c==500)&&this["cb_"+d+"_failure"])this["cb_"+d+"_failure"](c,f);this.callbacks[h]&&this.callbacks[h](a.result);delete this.callbacks[h]},invoke:function(a,c,d,f){var h=this.transId++;if(d)this.callbacks[h]=d;I("[WebAPI request]",a,c);var i=this;x.Messenger.send({name:"WebAPI",details:{cmd:a,data:c,transId:h}},function(m){i.callback(m.resp,
m.status,m.cmd,f)})},createList:function(a){this.invoke("list_create",{title:a,mode:2})},cb_list_create_success:function(a){k.myBmLists.push(a.list);k.myBmLists.sort(function(c,d){return c.title>d.title?1:-1});chrome.extension.sendRequest({name:"listCreateSuccess",data:a.list});if(P.shown){P.updateLists();$("#diigo-list").find("select").find("option[value="+a.list.id+"]").attr("selected",true);$("#diigo-list-addBtn").removeClass("processing");$("#diigo-list-addInput").val("");$("#diigo-list-add").hide();
$("#diigo-list").show()}if($("#diigosc-savepopup").length>0){wa.updateLists();$("#diigosc-lists").find("option[value="+a.list.id+"]").attr("selected",true);$("#diigosc-list-addBtn").removeClass("processing");$("#diigosc-list-addInput").val("");$("#diigosc-list-add").hide();$("#diigosc-lists-and-groups").find("select").show()}chrome.extension.sendRequest({name:"listCreateSuccessAndUpdateLists",lists:k.myBmLists,newlist:a.list.id})},cb_list_create_failure:function(a){if(a==500)L.notifyAlert(chrome.i18n.getMessage("server_error"),
{timeout:0});else a==0&&L.notifyAlert(chrome.i18n.getMessage("network_error"),{timeout:0});P.shown&&$("#diigo-list-addBtn").removeClass("processing");$("#diigosc-savepopup").length>0&&$("#diigosc-list-addBtn").removeClass("processing");chrome.extension.sendRequest({name:"listCreateFailureAndUpdateLists"})},uploadImage:function(a,c,d,f,h,i,m,n){f=a.dataURL.slice(("data:image/"+i+";base64,").length);b=atob(f);c={type:c,title:a.title,description:"",mode:a.mode,src_url:a.src_url,src_title:a.src_title,
src_description:"",src_unread:false,file_type:i,file_name:m,single_item:a.single_item,file_md5:Da(b),shareit:false,twitterit:d,tags:a.tags,extra:h};I(a.list,a.groups);if(a.list!=0&&a.list!=-1)c.lists=a.list;if(a.groups!=0&&a.list!=-1)c.groups=a.groups;c.file_content=f;this.invoke("upload_file",c,function(){},n)},cb_upload_file_success:function(a,c){L.notifyOK(chrome.i18n.getMessage("upload_success"));z.loadMyStuff("permissions");if(k.generated==false)N.send({name:"initialData"},function(f){Q.updateCache(f.preloadedPrefs);
k.reset(f);k.signedIn&&f.shoudLoadMyStuff&&z.loadMyStuff();if(c)f.loadBookmarkResult.saved=true;if(f.loadBookmarkResult){I("[bookmark info already loaded]",f.loadBookmarkResult);z.cb_bm_loadBookmark_success(f.loadBookmarkResult)}else f.shouldLoadBookmarkByMyself&&k.signedIn&&z.loadBookmark()});else if(c&&k.bookmark.saved==false){var d=k.bookmark;d.saved=true;d.url=a.src_url;d.urlId=a.src_urlId;d.datetime=a.datetime;N.send({name:"bookmarkChanged",details:{saved:true}});J.shown&&J.updateUI()}},cb_upload_file_failure:function(a){if(a==
500)L.notifyAlert(chrome.i18n.getMessage("server_error"),{timeout:0});else a==0&&L.notifyAlert(chrome.i18n.getMessage("network_error"),{timeout:0})},loadBookmark:function(a){var c={url:k.bookmark.url,what:"bookmarkInfo annotations pageComments",permalinkParams:k.launchMode.permalink?k.permalinkParams:null};if(c.permalinkParams)c.url=c.permalinkParams.url;callback=function(){};this.invoke("bm_loadBookmark",c,callback,a)},cb_bm_loadBookmark_success:function(a,c){var d=k.bookmark;if(k.generated==false){d.loaded=
true;Sa(d,a,Pa("url urlId annotated groups saved b_id"));d.saved&&a.bookmarkInfo&&Sa(d,a.bookmarkInfo,Pa("title mode tags unread alert description datetime onlyInGroup lists"));k._supressEvents=true;a.pageComments&&K(Mb(a.pageComments),function(f){ta.add(V({saved:true},f))});a.annotations&&K(a.annotations,function(f){var h=M.add(Sa({saved:true},f,Pa("id user realName mode type content datetime extra groups onlyInGroup")),{dontPaint:true,dontSort:true});K(f.comments,function(i){qa.add(V({saved:true,
annotationId:h.id},i))})});k.generated=true;N.handlers.getCtx()}k.unpaintAllAnnotations();if(c=="showbar"){k.paintAllAnnotations();M.sort()}k._supressEvents=false;c=="showbar"&&J.updateUI();P.bookmarkLoaded();c!="prepareCtx"&&N.send({name:"bookmarkChanged",details:{saved:d.saved}});k.bookmark.saved==true&&chrome.extension.sendRequest({name:"saved"})},saveBookmark:function(a,c,d){x.Messenger.send({name:"updateBrowserActionIconToDoing"});var f=k.bookmark,h={url:f.url,mode:f.mode,title:f.title,tags:f.tags,
description:f.description,unread:f.unread,groups:f.toShareToGroups,shareExistingAnnotations:f.toShareExistingAnnotations,lists:f.toAddToBookmarkLists};if(!f.url){h.url=window.location.href;h.title=document.title}var i;if(a){if(i=a.pageComment){h.pageComment={content:i.content,mode:i.mode,groups:i.groups,justForGroups:i.justForGroups};h.groups=i.groups}if(i=a.annotation){h.annotation={id:i.id,content:i.content,type:i.type,groups:i.groups,extra:i.extra};h.groups=i.groups;if(i=a.annotation.inlineComment){h.annotation.inlineComment=
{mode:i.mode,content:i.content,groups:i.groups,justForGroups:i.justForGroups};h.groups=i.groups}}}this.invoke("bm_saveBookmark",h,c,d);f.toAddToBookmarkLists=null;f.toShareToGroups=null;f.toShareExistingAnnotations=false},cb_bm_saveBookmark_success:function(a,c,d){this.count=3;var f,h=k.bookmark;h.saved=true;h.url=a.url;h.urlId=a.urlId;h.b_id=a.b_id;h.datetime=a.datetime;h.alert=a.alert;a.groups&&h.addGroups(a.groups);a.lists&&a.lists.forEach(function(m){h.lists.push(m)});if(f=a.pageComment)ta.add({id:f.id,
user:f.user,realName:f.realName,mode:f.mode,datetime:f.datetime,content:f.content,userOnline:f.userOnline,groups:f.groups,onlyInGroup:f.onlyInGroup,saved:true});if(f=a.annotation){var i=M.find(f.id);i.saved=true;f.groups&&i.addGroups(f.groups);if(f=a.annotation.inlineComment)qa.add({id:f.id,annotationId:f.annotationId,user:f.user,realName:f.realName,mode:f.mode,datetime:f.datetime,content:f.content,userOnline:f.userOnline,groups:f.groups,onlyInGroup:f.onlyInGroup,saved:true})}if(f=a.result_shareExisting){K(f.pageComments,
function(m){var n=ta.find(m.id);n&&n.addGroups(m.groups)});K(f.annotations,function(m){var n=M.find(m);if(n){n.addGroups(m.groups);m.inlineComments&&K(m.inlineComments,function(w){var D=qa.find(w.id);D&&D.addGroups(w.groups)})}})}J.shown&&J.updateUI();h.saved&&N.send({name:"bookmarkChanged",details:{saved:true}});if(c=="qsave"){k.generated=true;chrome.extension.sendRequest({name:"showToolbar",type:"qsave",tabId:d});chrome.extension.sendRequest({name:"popupclose"})}else if(c=="showbar"){J.show();k.toggleSilent(false);
k.unpaintAllAnnotations();k.paintAllAnnotations();M.sort()}else if(c=="readlater")Q.get("prefs.autoCloseReadLater",function(m){m=="true"&&chrome.extension.sendRequest({name:"closeTab"})});else if(c=="video")if(a.annotation){a=a.annotation.id;$("."+a).addClass("success").find("#diigo-video-loading-text").text("Success!");$("."+a).delay(800).fadeOut(function(){var m=$(this).data("diigo-target");$(m).attr("diigo-clipping","false");$(this).remove()})}else{$("#diigo-video-collector-loading").addClass("success").find("#diigo-video-loading-text").text("Success!");
$("#diigo-video-collector-loading").delay(800).fadeOut(function(){var m=$("#diigo-video-collector-loading").data("diigo-target");$(m).attr("diigo-clipping","false");$(this).remove()})}},cb_bm_saveBookmark_failure:function(a,c){if(this.count>0){this.saveBookmark(null,function(){},c);this.count-=1}else{if(a==500)L.notifyAlert(chrome.i18n.getMessage("bookmark_server_error"),{timeout:0});else a==0&&L.notifyAlert(chrome.i18n.getMessage("bookmark_network_error"),{timeout:0});$(".diigolet.notice>div.alert p #retry").unbind("click");
$(".diigolet.notice>div.alert p #retry").click(function(d){d.preventDefault();z.saveBookmark(null,function(){},c);L.hide()});N.send({name:"bookmarkChanged",details:{saved:k.bookmark.saved}})}},deleteBookmark:function(a,c){a.urlId||alert("a");this.invoke("bm_deleteBookmark",{urlId:a.urlId},c)},cb_bm_deleteBookmark_success:function(){var a=k.bookmark=la.fromDocument();a.loaded=true;k.fireEvent("bm_del",[a]);k.pageComments.filter(function(c){return c.user==k.user&&!c.onlyInGroup}).forEach(function(c){c.saved=
false;ta.del(c)});k.annotations.filter(function(c){return c.user==k.user&&!c.onlyInGroup}).forEach(function(c){c.saved=false;c.del()});k.annotations.forEach(function(c){c.comments.forEach(function(d){if(d.user==k.user&&!d.onlyInGroup){d.saved=false;qa.del(d)}})});J.shown&&J.updateUI();N.send({name:"bookmarkChanged",details:{saved:false}})},addAnnotation:function(a,c){var d={urlId:k.bookmark.urlId,id:a.id,content:a.content,type:a.type,extra:a.extra,groups:a.type==ga?null:k.bookmark.getGroupNamesSharedByMe()};
if(a._toAddInlineComment){d.inlineComment=a._toAddInlineComment;delete a._toAddInlineComment}if(k.bookmark.saved){c=="small"&&chrome.extension.sendRequest({name:"showToolbar"});f=function(){};this.invoke("annotation_add",d,f,c)}else{var f=function(){};c=="video"?this.saveBookmark({annotation:d},f,"video"):this.saveBookmark({annotation:d},f,"qsave")}},cb_annotation_add_success:function(a,c){I(c,a);if(c=="video"){$("."+a.id).addClass("success").find("#diigo-video-loading-text").text("Success!");$("."+
a.id).delay(800).fadeOut(function(){var f=$(this).data("diigo-target");$(f).attr("diigo-clipping","false");$(this).remove()})}var d=M.find(a.id);d.saving=false;d.saved=true;d.onlyInGroup=a.onlyInGroup;a.groups&&d.addGroups(a.groups);a.__bookmark_groups&&k.bookmark.addGroups(a.__bookmark_groups);a.inlineComment&&this.cb_ic_add_success(a.inlineComment)},deleteAnnotation:function(a,c){var d={urlId:k.bookmark.urlId};if(c)d.idInGroup=c;else d.id=a.id;this.invoke("annotation_delete",d)},cb_annotation_delete_success:function(){},
cb_annotation_add_failure:function(a,c){c=="video"&&$("."+a.id).addClass("fail").find("#diigo-video-loading-text").html('Failed!<a href="#">Retry</a>')},addPageComment:function(a){a={urlId:a.urlId,mode:a.mode,content:a.content,justForGroups:a.justForGroups,groups:a.groups};k.bookmark.saved?this.invoke("pc_add",a):this.saveBookmark({pageComment:a})},cb_pc_add_success:function(a){ta.add({id:a.id,user:a.user,realName:a.realName,mode:a.mode,datetime:a.datetime,content:a.content,userOnline:a.userOnline,
groups:a.groups,onlyInGroup:a.onlyInGroup,saved:true});(a=a.__bookmark_groups)&&k.bookmark.addGroups(a)},deletePageComment:function(a,c){var d={urlId:k.bookmark.urlId};if(c)d.idInGroup=c;else d.id=a.id;this.invoke("pc_delete",d)},addInlineComment:function(a){if(k.bookmark.urlId=="")k.bookmark.urlId=Da(window.location.href);a={urlId:k.bookmark.urlId,annotationId:a.annotationId,mode:a.mode,content:a.content,justForGroups:a.justForGroups,groups:a.groups};if(a.justForGroups)a.urlId=k.bookmark.urlId;this.invoke("ic_add",
a)},cb_ic_add_success:function(a){qa.add({id:a.id,annotationId:a.annotationId,user:a.user,realName:a.realName,mode:a.mode,datetime:a.datetime,datetime2:a.datetime2,content:a.content,userOnline:a.userOnline,groups:a.groups,onlyInGroup:a.onlyInGroup,saved:true});a.__annotation_groups&&M.find(a.annotationId).addGroups(a.__annotation_groups);a.__bookmark_groups&&k.bookmark.addGroups(a.__bookmark_groups)},deleteInlineComment:function(a,c,d){var f={urlId:k.bookmark.urlId};if(c)f.idInGroup=c;else f.id=a.id;
this.invoke("ic_delete",f,d)},cb_ic_delete_success:function(){},editInlineComment:function(a,c){if(k.bookmark.urlId=="")k.bookmark.urlId=Da(window.location.href);this.invoke("ic_edit",{id:a,urlId:k.bookmark.urlId,content:c})},cb_ic_edit_success:function(a){qa.edit(a.id,a.content)},loadMyStuff:function(a){a=a||"myTags myGroups myProfile myBookmarkLists myContacts permissions";this.invoke("user_loadMyStuff",{what:a})},cb_user_loadMyStuff_success:function(a){if(a.myTags)k.myTags=a.myTags;if(a.myTagsWithCount)k.myTagsWithCount=
a.myTagsWithCount;if(a.myGroups){k.myGroups=a.myGroups;P.updateGroups();chrome.extension.sendRequest({name:"updateGroups",data:a.myGroups})}if(a.myBookmarkLists){k.myBmLists=a.myBookmarkLists;P.updateLists();chrome.extension.sendRequest({name:"updateLists",data:a.myBookmarkLists})}if(a.myProfile)k.realName=a.myProfile.realName;if(a.myContacts){k.myContacts=a.myContacts;S.onMyContactsUpdate()}if(a.permissions){k.permissions=a.permissions;Ra.onPrivilegeChange()}x.Messenger.send({name:"updateGlobalData",
details:{myTags:k.myTags,myTagsWithCount:k.myTagsWithCount,myGroups:k.myGroups,myBmLists:k.myBmLists,realName:k.realName,myContacts:k.myContacts,permissions:k.permissions}})},updateExtra:function(a){this.invoke("annotation_updateExtra",{urlId:k.bookmark.urlId,id:a.id,idsInGroup:ma($a(a.groups,function(c){return c.user==k.user}),function(c){return c.idInGroup}),extra:a.extra})},loadRecommendedTags:function(a,c,d){this.invoke("bm_loadRecommendedTags",{url:a,title:c},d)},cb_bm_loadRecommendedTags_success:function(a){k.recommendedTagsLoaded=
true;k.recommendedTags=a.tags},loadGroupTagsDictionary:function(a,c){this.invoke("bm_loadGroupTagsDictionary",{groups:a},c)},cb_bm_loadGroupTagsDictionary_success:function(a){$.each(a,function(c,d){k.groupTagsDict[c]=d});chrome.extension.sendRequest({name:"updateGroupTag",data:k.groupTagsDict})},signIn:function(){this.invoke("user_signIn",{})},cb_user_signIn_success:function(a){a.signedIn&&z.loadBookmark()},signOut:function(){this.invoke("user_signOut",{})},cb_user_signOut_success:function(){Eb()},
makeAnnotatedLink:function(a,c,d){this.invoke("share_makeAnnotatedLink",{url:a,mode:c},d)},makeAnnotatedLinkWithHighlight:function(a,c,d,f){this.invoke("share_makeAnnotatedLink",{url:a,mode:c,annId:d},f)},shareBookmark:function(a,c){this.invoke("share_bookmark",a,c)},cb_share_bookmark_success:function(){}},ba={shown:false,j:null,init:function(){var a=this;a.create();a.j.find("a.diigoletButton,#diigolet-tb-btnHide").bind("focus",function(){this.blur()});a.jHelpTip=R("diigolet-help");a.j.find(".diigoletButton,._hoverAndHideDropdown").bind("mouseover",
function(){a.jHelpTip.hide();var c=$(this).attr("id");c=="diigolet-button-highlight"||c=="diigolet-button-highlight-dropdown"||$(this).is(".hover")||a.j.find(".dropdownMenu").hide()})},destroy:function(){},onSignIn:function(){this.updateUI()},onSignOut:function(){this.updateUI()},show:function(){if(!this.shown){this.shown=true;this.j.slideDown()}},hide:function(){if(this.shown){this.shown=false;this.jHelpTip.hide();this.j.slideUp()}},updateUsername:function(a){a=a||k.user;$("a#diigolet-tb-btnMyBookmarks").attr({href:x.urls.getUserBookmarksPageURL(a)});
this.showInfo(k.signedIn?"<em>Welcome "+a+"</em>":'<em><a href="#" title="Sign in into Diigo.com" onclick="return diigolet.handle(event, \'tb_signIn\')">Sign in</a> to add annotations or <a href="https://www.diigo.com/sign-up" title="Create a Diigo account" target="_blank">Create a Diigo account now</a> (free!)</em>',null)},updateUI:function(){!k.signedIn?$("#diigolet-tb-btnSignIn b b").show():$("#diigolet-tb-btnSignIn b b").hide();$("#diigolet-tb-btnMyBookmarks").hide();this.updateUsername();$("#diigolet-tb-btnComment").toggleClass("commented",
k.isCommented());$("#diigolet-tb-btnBookmark").toggleClass("saved",k.bookmark.saved)},create:function(){var a=W(cb,{DIIGOLET_VERSION:x.version,URL_DIIGO:"https://www.diigo.com"});try{var c=this.j=$(a).css({position:$.browser.supportPositionFixed?"fixed":"absolute"}).appendTo(document.body).hide()}catch(d){}setTimeout(function(){$("#diigolet-tb-shadow").addClass("ie6")},5E3);this.showInfo("Loading...",null);if($.browser.opera){$("#diigolet-button-highlight").hide();$("#diigolet-button-highlight-dropdown").hide()}$("._diigomenu").click(function(f){var h;
className=$(f.target).attr("class");if(className.indexOf("URL_MY_LIBRARY")>=0)h=x.urls.getUserBookmarksPageURL();else if(className.indexOf("URL_MY_LIST")>=0)h=x.urls.getListHome();else if(className.indexOf("URL_MY_GROUP")>=0)h=x.urls.getGroupHome();else if(className.indexOf("URL_NETWORK")>=0)h=x.urls.getNetwork();else if(className.indexOf("URL_HOT_BOOKMARK")>=0)h=x.urls.getHotBookmark();x.openURL(h);return false});if(k.launchMode.permalink){$("#diigolet-tb-forward").show();$("a._forwardPageUrl",c).attr({href:k.bookmark.url});
a=k.permalinkParams.user;$("a._forwardUserUrl",c).attr({href:a?"https://www.diigo.com/user/"+a:"https://www.diigo.com"}).text(a||"Diigo");$("a._myBookmarks, a._info",c).hide()}else k.launchMode.sandbox&&$("a._myBookmarks, a._info",c).hide()},showInfo:function(a,c){var d=this;this.j.find("span._info").html(a);c!=null&&setTimeout(function(){d.updateUsername()},c)},notify:function(a,c,d){c=c==undefined?4E3:c;var f;if($.browser.msie&&$.browser.version>=9){tbar=$("#diigolet-toolbar");f=$("#diigolet-notify").css({top:tbar.offset().top+
tbar.height()-5}).show()}else f=$("#diigolet-notify").show();f.find("span").html(a);f.toggleClass("right",d==1);clearTimeout(f[0].timerId);if(c)f[0].timerId=setTimeout(function(){f.fadeOut("slow")},c)},onHighlightPenModeChanged:function(a){$("#diigolet-button-highlight").find("b b").text(a?"Highlighter":"Highlight").end().add("#diigolet-button-highlight-dropdown").toggleClass("checked",a).toggleClass(k.mouseClass,!a)},onHighlightColorChanged:function(a){$("#diigolet-button-highlight").removeClass(k.defaultColors.join(" ")).addClass(a);
K(k.defaultColors,function(c){$("#diigolet-colorMenu-"+c).removeClass("colorchecked")});$("#diigolet-colorMenu-"+a).addClass("colorchecked")}};ba.refresh=ba.updateUI;var J={shown:false,j:null,init:function(){var a=this;a.create();$(window).resize(function(){a.adjustPosition()})},destroy:function(){},onSignIn:function(){this.updateUI();this.adjustPosition()},onSignOut:function(){this.updateUI()},adjustPosition:function(){var a=this.j,c=$(window),d=c.width();c=c.height();var f=parseInt(a.css("left")),
h=parseInt(a.css("top"));f=a.outerWidth();var i=a.outerHeight();a.css("left",f=d-f+1);if(c<h+i)a.css("top",h=c-i);h<0&&a.css("top",1);f<0&&a.css("left",1)},show:function(a){var c=this;if(!this.shown){this.shown=true;a=="fold"&&this.j.addClass("fold");this.j.show();this.updateUI();Q.get("prefs.lastUsedColor",function(d){k.penColor=d;J.onHighlightColorChanged(d,false);k.isHighlightPen&&$(document.body).removeClass(ma(k.defaultColors,function(f){return"diigoHiPen-"+f}).join(" ")).addClass("diigoHiPen-"+
k.penColor)});ra.diigoImageClipMode=true;$(window).on("resize",function(){c.adjustPosition()})}},hide:function(){if(this.shown){this.shown=false;$("#diigolet-panel-panel").hide();$("body").unbind("mousemove",ra.onMousmove);if(qb!=true)ra.diigoImageClipMode=false;k.isHighlightPen=false;$(document.body).removeClass(ma(k.defaultColors,function(a){return"diigoHiPen-"+a}).join(" "));ba.onHighlightPenModeChanged(false);J.onHighlightPenModeChanged(false);return false}},remove:function(){if(this.j){$("body").unbind("mousemove",
ra.onMousmove);if(qb!=true)ra.diigoImageClipMode=false;k.isHighlightPen=false;$(document.body).removeClass(ma(k.defaultColors,function(a){return"diigoHiPen-"+a}).join(" "));ba.onHighlightPenModeChanged(false);J.onHighlightPenModeChanged(false);return false}},updateUsername:function(){},updateUI:function(){var a=$("#diigolet-panel-btnBookmark").toggleClass("saved",k.bookmark.saved);k.bookmark.saved&&a.attr("title","Saved. Click to reorganize")},updateStatus:function(a){a?$("#diigolet-panel-status").text("Saving..."):
$("#diigolet-panel-status").text("Saved")},create:function(){this.j=$(ib).eq(0).appendTo(document.body);var a=this;$("#diigolet-panel-guideToHighlight").hide();$("#diigolet-panel-btnHighlightContainer").addClass("signedIn");$("#diigolet-panel-moreBtn ul li:gt(1)").hide();$("#diigolet-panel-version").text("(v"+x.version+")");$("#diigolet-panel-closeBtn").click(function(){a.hide();k.toggleSilent(true);k.isHighlightPen=false;$(document.body).removeClass(ma(k.defaultColors,function(c){return"diigoHiPen-"+
c}).join(" "));ba.onHighlightPenModeChanged(false);J.onHighlightPenModeChanged(false);return false});$("#diigolet-panel-btnBookmark>b").click(function(c){x.handle(c,"bookmark");return false});$("#diigolet-panel-btnHighlight>b").on("mousedown",function(c){c.preventDefault()});$("#diigolet-panel-btnHighlight>b").click(function(c){c.preventDefault();x.handle(c,"highlight");return false});$("#diigolet-panel-fold").on("click",function(){a.fold()});$("#diigolet-panel-logo").on("click",function(){a.unfold()});
$("#diigolet-panel-btnStickyNote>b").click(function(c){c.preventDefault();x.handle(c,"addStickyNote");return false});$("#diigolet-panel-colorPicker li").click(function(c){var d=$(this).attr("diigocolor");window.getSelection().toString().length!==0?x.handle(c,"highlight","normal",d):x.handle(c,"ChangeColor",d);c.preventDefault()});$("#diigolet-panel-btnShare").click(function(){S.show();return false});$("#diigolet-panel-moreBtn li._signIn").click(function(){k.signedIn&&k.user?ob("signOut"):Fb()});$("#diigolet-panel-signInToSave").click(function(){Fb();
return false});$("#diigolet-panel-hightlight-dropdown").mousedown(function(c){c.preventDefault()});$("#diigolet-panel-hightlight-dropdown").on("click",function(){var c=$("#diigolet-panel-colorPicker").toggleClass("dropdownShown"),d=function(){c.removeClass("dropdownShown").unbind("mouseleave",d);$(document.body).unbind("click",d)};c.hasClass("dropdownShown")?setTimeout(function(){$(document.body).one("click",d)},13):d()});$("#diigolet-panel-moreBtn").click(function(){var c=$(".optList",this).toggleClass("dropdownShown"),
d=function(){c.removeClass("dropdownShown").unbind("mouseleave",d);$(document.body).unbind("click",d)};c.hasClass("dropdownShown")?setTimeout(function(){$(document.body).one("click",d)},13):d()});$("#diigolet-panel-feedback").click(function(){var c=$(".optList",this).toggleClass("dropdownShown"),d=function(){c.removeClass("dropdownShown").unbind("mouseleave",d);$(document.body).unbind("click",d)};c.hasClass("dropdownShown")?setTimeout(function(){$(document.body).one("click",d)},13):d()});new $.Draggable(a.j,
{handle:"#diigolet-panel-space",axis:"y",cursor:"n-resize",afterDrag:function(){a.adjustPosition()}})},showInfo:function(){},notify:function(){},onHighlightColorChanged:function(a){$("#diigolet-panel-colorPicker li").each(function(){var c=$(this);c.toggleClass("selected",c.attr("diigocolor")==a)});$("#diigolet-panel-btnHighlight")[0].className=a},onHighlightPenModeChanged:function(a){$("#diigolet-panel-Highlight").toggleClass("pen",a)},notify:function(a){Lb(a)},fold:function(){var a=this,c=parseInt(this.j.css("left"));
this.j.addClass("fold").animate({left:c+121+"px"},150,function(){$("#diigolet-panel-main").css("width","0px");a.adjustPosition()});k.isHighlightPen=false;$(document.body).removeClass(ma(k.defaultColors,function(d){return"diigoHiPen-"+d}).join(" "));ba.onHighlightPenModeChanged(false);J.onHighlightPenModeChanged(false);return false},unfold:function(){var a=this,c=parseInt(this.j.css("left"));$("#diigolet-panel-main").css("width","151px");this.j.removeClass("fold").animate({left:c-121+"px"},150,function(){a.adjustPosition()})}};
J.refresh=J.updateUI;var ha,T,Wa=ha=T={HIGHLIGHT_CLASS:"diigoHighlight",HIGHLIGHT_ICON_CLASS:"diigoIcon",HIGHLIGHT_ID_CLASS:"id_",HIGHLIGHT_TYPE_CLASS:"type_",isHighlightElement:function(a){try{if(a.nodeType==1&&a.className&&(a.className.indexOf(this.HIGHLIGHT_CLASS)>-1||a.className.indexOf(this.HIGHLIGHT_ICON_CLASS)>-1)){var c={type:-1,ids:[]};c.type=Number(a.className.match(RegExp(this.HIGHLIGHT_TYPE_CLASS+"(\\d)"))[1]);Nb(a.className,RegExp(this.HIGHLIGHT_ID_CLASS+"([^\\s]+)(?:\\s|$)","img"),function(f){c.ids.push(f[1])});
c.ids=c.ids.slice(0,1);return c}return false}catch(d){I(d)}},tagBlackList:",applet,area,base,basefont,bdo,button,frame,frameset,iframe,head,hr,img,input,link,map,meta,noframes,noscript,optgroup,option,param,script,select,style,textarea,title,",docHtml:"",docTxt:"",docTxtOffsetList:[],domSnapshot:function(){var a=this;a.docTxt="";a.docTxtOffsetList=[];var c=false;(new na(document.body,function(d){if(d.nodeType==3){var f=d.nodeValue.replace(/\s+/mg," ");if(f.length!=0)if(/^\s$/m.test(f)){if(!c){a.docTxt+=
" ";c=true}}else{if(c)f=f.replace(/^\s+/m,"");a.docTxtOffsetList.push({offset:a.docTxt.length,node:d,length:f.length});a.docTxt+=f;c=/\s$/m.test(f)}}},{filter:function(d){return a.domSnapshotNodeFilter(d)}})).walk()},domSnapshotNodeFilter:function(a){if(a.nodeType==3)return true;if(a.nodeType!=1)return false;if(a.tagName&&this.tagBlackList.indexOf(","+a.tagName.toLowerCase()+",")>-1)return false;if(!a.className)return true;if(/(^|\s)diigoHighlight(\s|$)/.test(a.className))return true;if(/(^|\s)diigolet(\s|$)/.test(a.className))return false;
return true},isHighlightableNode:function(a){return a.nodeType==3||a.nodeType==1&&T.tagBlackList.indexOf(","+a.tagName.toLowerCase()+",")==-1},findOffset:function(a,c,d,f){a=a.nodeValue;var h=a.replace(/\s+/g,"");if(d){c=c.slice(0,h.length-f);for(h=a.length-c.length;h>=f;h--)if(a.slice(h).replace(/\s+/g,"").indexOf(c)>-1)return h}else{c=c.slice(Math.max(0,c.length-f-1));for(h=f;h<=a.length;h++)if(a.slice(0,h).replace(/\s+/g,"").indexOf(c)>-1)return h}return d?a.length:0},findOffset2:function(a,c,
d,f,h){var i={};if(d==h){var m=d.node.nodeValue;for(c=c-d.offset;c<m.length;c++)if(m.slice(c).replace(/\s+/mg," ").indexOf(a)==0){i.startOffset=c;break}if(i.startOffset!==undefined)for(c=i.startOffset+a.length;c<=m.length;c++)if(m.slice(i.startOffset,c).replace(/\s+/mg," ").indexOf(a)>-1){i.endOffset=c;break}}else{m=d.node.nodeValue;var n=a.slice(0,d.offset+d.length-c);for(c=c-d.offset;c<=m.length-n.length;c++)if(m.slice(c).replace(/\s+/mg," ").indexOf(n)==0){i.startOffset=c;break}if(i.startOffset!==
undefined){m=h.node.nodeValue;n=a.slice(a.length-(f-h.offset+1));for(c=f-h.offset+1;c<=m.length;c++)if(m.slice(0,c).replace(/\s+/mg," ").indexOf(n)>-1){i.endOffset=c;break}}}return i},findOccurrences:function(a,c,d){for(var f=[],h=0,i=0,m=0;(h=c.indexOf(a,i))>-1;){m++;i=h+1;f.push(h);if(d!=undefined&&m>=d)break}return f},seek:function(a,c){c=c||1;var d=this.html2txt(a),f=-1,h=0,i=this.findOccurrences(d,this.docTxt,c);if(i.length>=c)f=i[c-1];else if(i.length>0)f=i[i.length-1];if(f==-1)return null;
h=f+d.length-1;for(var m=this.docTxtOffsetList,n,w,D,A,C,r=undefined,o=0,s=m.length;i=m[o],o<s;o++){if(f==i.offset||f>i.offset&&(o+1==m.length||f<m[o+1].offset)){n=i.node;r=i}if(h==i.offset||h>i.offset&&(o+1==m.length||h<m[o+1].offset)){w=i.node;D=i;A=this.findOffset2(d,f,r,h,D);D=A.startOffset;A=A.endOffset;break}}if(n&&w){f=function(l,q){for(;l=l.parentNode;)if(l==q)return true;return false};for(r=n;r=r.parentNode;)if(f(w,r)){C=r;break}if(!C)return null}return n&&w?{startNode:n,endNode:w,startOffset:D,
endOffset:A,endIndex:h,commonAncestor:C,txt:d}:null},paint:function(a){function c(l,q){$(l).addClass(T.HIGHLIGHT_CLASS).addClass(m).addClass(T.HIGHLIGHT_TYPE_CLASS+q.type).removeClass("yellow blue green pink").addClass(q.extra.color&&q.extra.color.length>0?q.extra.color:"yellow");return l}function d(l){var q=$(l.parentNode);q.hasClass(T.HIGHLIGHT_CLASS)?q.addClass(m):$(l).wrap(c(va.createElement("em"),i))}function f(l,q){$(l).addClass(T.HIGHLIGHT_ICON_CLASS).addClass(m).addClass(T.HIGHLIGHT_TYPE_CLASS+
ANNOTATION_TYPE_ICON).addClass("TextIcon").toggleClass("public",q.isPublic()&&n.length>0).toggleClass("private",q.isPrivate()&&n.length>0).toggleClass("group",q.inAnyGroups()&&n.length>0&&(H.getCommentsInfo(q.comments)=="onlyGroup"||H.getCommentsInfo(q.comments)=="both")).toggleClass("diigoHighlightcommented",n.length>0).removeClass("diigoadd yellow blue green pink").addClass(q.extra.color).css({bottom:"0px"});if(n.length>0){$(l).html("<span class='"+m+" "+T.HIGHLIGHT_ICON_CLASS+" "+T.HIGHLIGHT_TYPE_CLASS+
ANNOTATION_TYPE_ICON+"'>"+n.length+"</span>");$(l).attr("title",Z.tipMsg(q));h.adjustIconBg(q)}else{$(l).html("");$(l).attr("title","")}return l}var h=this,i=M.find(a),m=T.HIGHLIGHT_ID_CLASS+i.id,n=i.comments;if(i.paintedSuccessfully){c("em."+m,i);f("div."+m,i);$("em."+m).filter(":last").toggleClass("diigoHighlightcommented",n.length>0)}else{i.painted=true;this.domSnapshot();var w=this.seek(i.content,i.extra.nth);if(w){i.prettyTxt=this.html2txt_pretty(i.content);if(w.startNode===w.endNode){if(w.endOffset<=
w.startOffset)w.startOffset=w.endOffset-w.txt.length;a=w.startNode.splitText(w.startOffset);w=a.splitText(w.endOffset-w.startOffset);d(w.previousSibling||a)}else{var D=w.startNode.splitText(w.startOffset),A=w.endNode.splitText(w.endOffset).previousSibling,C=false,r=[];(new na(w.commonAncestor,function(l){if(!C&&l===D)C=true;C&&l.nodeType==3&&l.nodeValue.replace(/(^\s+|\s+$)/mg,"").length>0&&r.push(l);if(C&&l===A){C=false;throw na.$end;}},{filter:this.isHighlightableNode})).walk();K(r,function(l){d(l)})}a=
$("em."+m);i.paintedSuccessfully=a.size()>0;if(i.type==ja&&$("div."+m).size()<=0&&a.size()>0){w=$(va.createElement("div"));var o=$(va.createElement("span"));o.addClass("diigoHighlightCommentLocator");var s=a.filter(":last");s.toggleClass("diigoHighlightcommented",n.length>0);o.appendTo(s);w.appendTo(o);f(w,i)}if(a.size()>0){a=a.offset();i.extra.top=a.top;i.extra.left=a.left}this.adjustColor(i);return i.paintedSuccessfully}else i.onlyInGroup||k.orphanHighlights.push(i)}},adjustIconBg:function(a){var c=
window,d;try{$("em."+T.HIGHLIGHT_ID_CLASS+a.id).parents().filter(function(){var h=c.getComputedStyle(this,null).getPropertyValue("background-color");if(h!="transparent"){d=h;throw"end";}return false})}catch(f){}$("div.diigoIcon.diigoHighlightcommented.private."+T.HIGHLIGHT_ID_CLASS+a.id).attr("style","background-color:"+d+" !important")},adjustColor:function(a){function c(d){var f=d.r/255,h=d.g/255;d=d.b/255;return 0.2126*(f<=0.03928?f/12.92:Math.pow((f+0.055)/1.055,2.4))+0.7152*(h<=0.03928?h/12.92:
Math.pow((h+0.055)/1.055,2.4))+0.0722*(d<=0.03928?d/12.92:Math.pow((d+0.055)/1.055,2.4))}a=M.find(a);$("em."+T.HIGHLIGHT_ID_CLASS+a.id).each(function(d,f){var h=$(f),i=F.parseColor(h.css("backgroundColor")),m=F.parseColor(h.css("color"));var n=c(m),w=c(i);if(n>w){m=n;n=w}else{m=w;n=n}i=(m+0.05)/(n+0.05)>2.5?null:c(i)>0.5?"#000000":"#FFFFFF";i&&h.css("color",i)})},unpaint:function(a){a=M.find(a).id;var c=T.HIGHLIGHT_ID_CLASS+a;$("em."+c).each(function(d,f){var h=$(f);h.removeClass(c);h.find("div.diigoIcon."+
c).remove();for(var i;i=f.firstChild;)f.parentNode.insertBefore(i,f);h.remove()})},isTextSelected:function(){return window.getSelection?Ia(String(window.getSelection())).length>0:$.browser.msie?document.selection.type=="Text"&&Ia(document.selection.createRange().text).length>0:false},checkSelection:function(){var a,c,d={ok:false,txt:"",html:"",msg:"",pen:false},f=null;if(!this.isTextSelected()){d.msg="The number of highlighted non white space characters needs to be between 5 and 2000. Please select some text and try again.";
d.pen=true;return d}if(window.getSelection){a=window.getSelection();if(a.removeAllRanges){d.html=this.range2html(c=a.getRangeAt(0));if(!function(m){if(m.collapsed)return false;m=[m.startContainer,m.endContainer];for(var n=0;n<m.length;n++){var w=$(m[n]);if(w.is(".diigoHighlight,.diigolet")||w.parents(".diigoHighlight,.diigolet").length>0)return false}return true}(c)){I("[H] checkRange returned false. selection not highlightable");d.msg="Selection cannot be highlighted.";return d}f=c.endContainer}else d.html=
String(a)}else d.html=$.browser.msie?this.range2html(document.selection.createRange()):document.getSelection();d.txt=this.html2txt(d.html);if(d.txt.length<5||d.txt.length>2E3){d.msg="The number of highlighted non white space characters needs to be between 5 and 2000. Please select some text and try again.";return d}if($("<div></div>").html(d.html).find(".diigoHighlight,.diigolet").size()>0){d.msg="Selection cannot be highlighted.";return d}d.ok=true;if(f){var h=this,i="";(new na(document.body,function(m){if(m.nodeType==
3){var n=m.nodeValue;if(m==f)n=n.slice(0,c.endOffset);i+=n}if(m==f)throw na.$end;},{filter:function(m){return h.domSnapshotNodeFilter(m)}})).walk();i=i.replace(/\s+/mg," ");a=h.findOccurrences(d.txt,i);d.nth=a.length}else d.nth=1;return d},range2html:function(a){return this.stripScripts(a.htmlText==undefined?$("<div></div>").append(a.cloneContents()).html():a.htmlText)},stripScripts:function(a){return a.replace(RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)","img"),"")},html2txt:function(a){a=
$("<div></div>").html(this.stripScripts(a));var c=this,d="";(new na(a[0],function(f){if(f.nodeType==3)d+=f.nodeValue},{filter:function(f){return f.nodeType==3||f.nodeType==1&&c.tagBlackList.indexOf(","+f.tagName.toLowerCase()+",")==-1}})).walk();a.remove();return d.replace(/\s+/mg," ").replace(/^\s|\s$/mg,"")},html2txt_pretty:function(a){a=$("<div></div>").html(this.stripScripts(a)).appendTo(document.body);var c,d;if(window.getSelection&&window.getSelection().removeAllRanges){c=document.createRange();
c.selectNode(a[0]);d=this.range2txt(c);c.detach()}else if($.browser.msie){a.hide().appendTo(document.body);c=document.body.createTextRange();c.moveToElementText(a[0]);d=this.range2txt(c)}else d=this.node2txt(a[0]);a.remove();return d},node2txt:function(a){var c="",d=3;(new na(a,function(f){if(f.nodeType==3&&$(f).parents("script,style,noscript").size()==0)c+=(d==3?"":"\n")+f.nodeValue;d=f.nodeType})).walk();return this.normalizeTxt(c)},range2txt:function(a){if(window.getSelection){var c=window.getSelection();
c.removeAllRanges?c.removeAllRanges():c.collapse();c.addRange(a);a=c.toString();c.removeAllRanges?c.removeAllRanges():c.collapse()}else if($.browser.msie)a=a.text;else{a="";alert("Browser not supported!")}return this.normalizeTxt(a)},normalizeTxt:function(a){return ab(Ia(a),/\s+/,function(c){return c[0].match(/[\r\n]/)?"\n":" "}).replace(/[\r\n]+/g,"\n")}};na.$end=Error("end walking");na.prototype.walk=function(){this._walk(this.node,this.func)};na.prototype._walk=function(a,c){var d=this.options;
if(!this.end)if(d.filter(a)){try{c(a)}catch(f){if(f===na.$end){this.end=true;return}throw f;}for(a=d.reverse?a.lastChild:a.firstChild;a;){this._walk(a,c);a=d.reverse?a.previousSibling:a.nextSibling}}};var H={j:null,shown:false,showMode:"view",dragging:false,backupContent:"",editInterval:null,tempObj:{},saveInterval:null,privateEditing:false,filterMode:"_all",ann:null,init:function(){if($("#diigolet-dlg-sticky").length===0){var a=this;a.create();a.groupEditor.init();setTimeout(function(){a.j.bind("mouseleave",
function(){a.dragging||k.draggingFloatNote||a.isEditing()||a.scheduleHide()}).bind("mouseenter",function(){a.dragging||k.draggingFloatNote||a.cancelHide()})},13);$(".IconFeild").mouseover(function(){a.showActionDropdown()}).click(function(){return false});R("diigolet-dlg-sticky-close").click(function(){if(a.privateEditing){var c=$("#FN-private-saveBtn");c.addClass("notify");setTimeout(function(){c.removeClass("notify")},600)}else{a.hide();return false}});$(".FN-switcher").on("click",function(c){if(c.target.id==
"FN-switcher-private"||c.target.parentNode.id=="FN-switcher-private")a.switchTab("private");else if(c.target.id=="FN-switcher-group"||c.target.parentNode.id=="FN-switcher-group")a.switchTab("group")});$("#diigolet-dlg-sticky-addTab").on("click",function(){if(!($("#FN-group-content-postform").find("button").prop("disabled")==true||$("#FN-group-post").prop("disabled")==true))if(a.j.hasClass("onlyPrivate")){if($("#FN-content-footer").find("#editing").is(":visible"))if($("#FN-private-editor").val().match(/^\s*$/)){$("#FN-private-cancelBtn").trigger("click");
a.j.removeClass("onlyPrivate").addClass("groupNew");a.switchTab("group")}else{var c=$("#FN-private-saveBtn");c.addClass("notify");setTimeout(function(){c.removeClass("notify")},600)}else{a.j.removeClass("onlyPrivate").addClass("groupNew");a.switchTab("group")}$("#FN-current-group").find("span").text("+Share to a new group")}else{a.j.removeClass("onlyGroup");a.switchTab("private");var d=document.querySelector("#FN-private-editor");sb.init(d,200)}});$("#diigolet-dlg-sticky-currentColor").on("click",
function(c){c.stopPropagation();$("#diigolet-dlg-sticky-colorPicker").toggle()});$("#FN-current-group").on("click",function(c){c.stopPropagation();$("#FN-group-content-postform").find("button").prop("disabled")==true||$("#FN-group-post").prop("disabled")==true||$("#FN-group-menu").toggle()});$(document).on("click",function(){$("#diigolet-dlg-sticky-colorPicker").hide();$("#FN-group-menu").hide()});$("#diigolet-dlg-sticky-color").find(".dlg-colorItem").on("click",function(){var c=$(this).attr("color");
a.updateColor(c,"click")});$("#FN-group-menu").on("click","li",function(c){if(c.target.id=="FN-group-share-new"){a.j.addClass("groupNew");var d=$("#FN-group-share").empty();d.append(F.dom.buildOne("option",{value:0},["Choose a group"]));d.append(F.dom.buildOne("option",{value:-1},[Array(20).join("-")]));K(k.myGroups,function(f){$("#FN-group-ul").find('li[data-dgroupname="'+f.name+'"]').length==0&&d.append(F.dom.buildOne("option",{value:f.name},[f.displayName]))});$("#FN-current-group").find("span").text("+Share to a new group");
$("#FN-group-post").focus()}else{c={name:$(this).attr("data-dGroupName"),displayName:$(this).text()};a.j.removeClass("groupNew");a.switchGroup(c)}});$("#FN-group-share").empty().unbind().change(function(){$("#FN-post-form").removeClass("notEdit")});$("#FN-post-form").find("button").on("click",function(){a.shareToNewGroup()});$("#FN-post-form").find("a").on("click",function(){if($("#FN-group-content-container").find(".FN-group-content-section").length>0){a.j.removeClass("groupNew");$("#FN-group-ul").find("li").eq(0).trigger("click");
$("#FN-group-post").val("");$("#FN-group-share").val(0)}else a.hide()});$("#FN-group-content-container").on("click",".FN-group-comment-item-delete",function(){var c=$(this).parent().parent().attr("data-cid"),d=$("#FN-current-group").find("span").attr("data-group");x.handle(event,"dlgIC_del_ic",c,d)});$("#FN-private-delete").on("click",function(c){var d=$(this).attr("data-cid");x.handle(c,"dlgIC_del_ic",d);if(a.j.hasClass("onlyPrivate")){a.ann.type==ga&&a.ann.unpaint();a.hide()}});$("#FN-private-editor").on("input propertychange",
function(){var c=$("#FN-private-editor").val();if(a.backupContent!=c){a.privateEditing=true;a.privateEditOn(true)}}).focus(function(){a.backupContent=$("#FN-private-editor").val()});$("#FN-private-saveBtn").on("click",function(){if(!$("#FN-private-editor").val().match(/^\s*$/)){a.ann.onlyInGroup||!a.ann.saved||a.getCommentCount("private",a.ann.comments)==0?a.addPrivateComment():a.uploadPrivateComment();a.privateEditOn(false);a.privateEditing=false}});$("#FN-private-cancelBtn").on("click",function(){$("#FN-private-editor").val(a.backupContent);
a.privateEditOn(false);a.privateEditing=false});$("#FN-group-content-postform").find("textarea").focus(function(){$("#FN-group-content-postform").addClass("active")});$("#FN-group-content-postform").find("a").on("click",function(){$("#FN-group-content-postform").removeClass("active");$("#FN-group-content-postform").find("textarea").val("")});k.addEventListener("ic_add",a);k.addEventListener("ic_del",a);k.addEventListener("ann_del",a);k.addEventListener("ic_edit",a);new $.Draggable(a.j,{handle:"._dragHandle"})}},
destroy:function(){},create:function(){this.j=$(eb).css({position:"absolute"}).appendTo(va.body).hide();$.browser.ieBelow7&&this.j.addClass("diigoletFNIEPatch")},updateColor:function(a,c){$("#diigolet-dlg-sticky-color").find(".dlg-colorItem").removeClass("colorchecked");this.j.removeClass("yellow blue green pink").addClass(a);$("#diigolet-dlg-"+a).addClass("colorchecked");if(c=="click"){if(!this.ann.extra||this.ann.extra=="undefined")this.ann.extra={color:a};else this.ann.extra.color=a;z.updateExtra(this.ann);
this.ann.paint()}},showEditSticky:function(){this.groupEditor.show()},show:function(a,c,d,f){return this.show_(a.pageX,a.pageY,c,d,f)},show_:function(a,c,d,f,h){var i=this;i.ann=d;i.updateColor(d.extra.color||"yellow");f=f||"view";i.cancelHide();i.cancelShow();I("[IC] showing...");i.j.find("ul.diigoletFNDropdown").hide();if(f===undefined)f=i.showMode;else i.showMode=f;var m=i.getCommentsInfo(d.comments);if(m=="onlyPrivate"){i.switchTab("private");i.j.removeClass("onlyGroup").addClass("onlyPrivate")}else if(m==
"onlyGroup"){i.switchTab("group");i.j.removeClass("onlyPrivate").addClass("onlyGroup")}else if(m=="both"){i.j.removeClass("onlyPrivate onlyGroup");i.switchTab("private")}da.hide();Z.j&&Z.hide();var n=i.j.toggleClass("editing",f!="view");n.find("._menuItem_deleteSticky").showHide(d.canDelete(i.filterMode));setTimeout(function(){i.refreshComments();var w=i.getGroups(d.comments);if(w.length>0){$("#FN-current-group>span").text(w[0].displayName);i.switchGroup(w[0])}w=Z.tipMsg(i.ann);i.j.find("span.personalText").text(w);
i.j.find("span.personalText").attr("title",w);if(w.length>80){$(".footText").addClass("multipalCol");$(".footText").removeClass("singleCol")}else{$(".footText").addClass("singleCol");$(".footText").removeClass("multipalCol")}if(d.user==k.user){$(".IconFeild").show().hide();$(".footText").addClass("myCommentSpan");$(".footText").removeClass("notMyCommentSpan")}else{$(".IconFeild").hide();$(".footText").addClass("notMyCommentSpan");$(".footText").removeClass("myCommentSpan")}i.shown&&f!="view"||i.updatePos({pageX:a,
pageY:c});n.show();i.shown=true;if(f==="add"){$("#FN-private-editor").focus();i.switchTab("private");i.j.removeClass("onlyGroup").addClass("onlyPrivate").addClass("groupNew");$("#FN-group-ul").empty();$("#FN-current-group").find("span").text("+Share to a new group");i.privateEditing=true;i.privateEditOn(true)}$("#diigolet-dlg-sticky-color").show();w=document.querySelector("#FN-private-editor");sb.init(w,200);if(i.ifMoreThanOnePrivateComment(d.comments)){w=$("#FN-private-editor").val();i.mergePrivateComments(w)}var D=
$("#FN-group-share").empty();D.append(F.dom.buildOne("option",{value:0},["Choose a group"]));D.append(F.dom.buildOne("option",{value:-1},[Array(20).join("-")]));K(k.myGroups,function(A){$("#FN-group-ul").find('li[data-dgroupname="'+A.name+'"]').length==0&&D.append(F.dom.buildOne("option",{value:A.name},[A.displayName]))});i.j.hasClass("onlyPrivate")?$("#diigolet-dlg-sticky-addTab").attr("title","Add a group note"):$("#diigolet-dlg-sticky-addTab").attr("title","Add a private note")},h)},mergePrivateComments:function(a){for(var c=
this.ann,d=c.comments.length,f=[],h=0;h<d;h++)c.comments[h].mode===2&&f.push(c.comments[h].id);a={annotationId:c.id,mode:2,content:a};if(c.type==ga&&!c.saved){c._toAddInlineComment=a;c.saving=true;z.addAnnotation(c)}else if(c.type==ja&&!c.saved){c._toAddInlineComment=a;c.saving=true;z.addAnnotation(c)}else z.addInlineComment(a);setTimeout(function(){for(var i=0;i<f.length;i++){var m=qa.find(f[i]),n=m.getAnnotation();n.comments.splice(n.comments.indexOf(m),1);z.deleteInlineComment(m)}},200)},shareToNewGroup:function(){var a=
$("#FN-post-form"),c=a.find("textarea"),d=c.val(),f=a.find("select"),h=f.val();if(d.match(/^\s*$/)){c.addClass("notify");setTimeout(function(){c.removeClass("notify")},600)}else if(h==0||h==-1){f.addClass("notify");setTimeout(function(){f.removeClass("notify")},600)}else{d={annotationId:H.ann.id,mode:void 0,content:d};if(h){d.justForGroups=true;d.groups=[h]}h=M.find(d.annotationId);if(h.type==ga&&!h.saved){h._toAddInlineComment=d;h.saving=true;z.addAnnotation(h)}else if(h.type==ja&&!h.saved){h._toAddInlineComment=
d;h.saving=true;z.addAnnotation(h)}else z.addInlineComment(d);a.find("button").prop("disabled",true);a.find("textarea").prop("disabled",true)}},addPrivateComment:function(){var a=$("#FN-private-editor").val();if(!a.match(/^\s*$/)){a={annotationId:H.ann.id,mode:2,content:a};var c=M.find(a.annotationId);if(c.type==ga&&(!c.saved||c.onlyInGroup)){c._toAddInlineComment=a;c.saving=true;z.addAnnotation(c)}else if(c.type==ja&&(!c.saved||c.onlyInGroup)){c._toAddInlineComment=a;c.saving=true;z.addAnnotation(c)}else z.addInlineComment(a)}},
hide:function(){this.cancelHide();this.cancelShow();if(this.shown){this.reSetIcWindow();this.j.hide();this.shown=false;var a=this.ann;a.activate(false);a&&a.type==ga&&!a.saved&&!a.saving&&!a.deleted&&a.del();this.ann=null;this.backupContent=""}},reSetIcWindow:function(){$("#diigolet-dlg-sticky-colorPicker").hide();$("#FN-private-editor").blur();$("#FN-private-editor").val("");$("#FN-private-datetime").text("");$("#FN-private-delete").hide();this.switchTab("private");$("#FN-group-menu").hide();$("#FN-group-content-postform").find("textarea").val("");
this.j.removeClass("groupNew");$("#FN-group-content-postform").find("textarea,button").prop("disabled",false);$("#FN-post-form").find("textarea,button").prop("disabled",false);$("#FN-group-post").val("");$("#FN-group-ul").empty();$("#FN-group-content-container").empty()},showActionDropdown:function(){var a=this.j.find("div.IconFeild").offset(),c=R("diigolet-annMenu");c.find("#diigolet-annMenu-add").hide();c.find("#diigolet-annMenu-del").hide();c.find("#diigolet-annMenu-tip").hide();var d=Z.ann=this.ann;
if(d.type==ga){c.find("._onlyMy").hide();c.find("#diigolet-annMenu-My").show()}else{c.find("._onlyMy").show();$.each(k.defaultColors,function(f,h){R("diigolet-context-"+h).toggleClass("colorchecked",false)});d.extra&&d.extra.color&&d.extra.color.length>0?R("diigolet-context-"+d.extra.color).toggleClass("colorchecked",true):R("diigolet-context-yellow").toggleClass("colorchecked",true)}c.find("#diigolet-annMenu-tip-before").hide();c.css({top:a.top+20,left:a.left});Ea(c.show(),13)},uploadPrivateComment:function(){var a=
$("#FN-private-editor").val(),c=$("#FN-private-delete").attr("data-cid");a!=this.backupContent&&z.editInlineComment(c,a)},switchGroup:function(a){$("#FN-group-content-container").find(".FN-group-content-section").hide();$('.FN-group-content-section[data-dgroup="'+a.name+'"]').show();$("#FN-current-group").find("span").text(a.displayName).attr("data-group",a.name)},switchTab:function(a){var c=$("#diigolet-dlg-sticky-content");if(a==="private")c.removeClass("group").addClass("private");else{c.removeClass("private").addClass("group");
$("#FN-group-post").focus()}},privateEditOn:function(a){if(a===true)$("#FN-content-footer").find("#editDone").hide().end().find("#editing").show();else a===false&&$("#FN-content-footer").find("#editing").hide().end().find("#editDone").show()},refreshComments:function(){var a=this.ann.getComments(this.filterMode);this.updatePrivateComments(a);this.updateGroupComments(a)},showNoComments:function(){this.ann.getComments(this.filterMode).length==0&&this.j.find("div.diigoletFNContent").html('<span class="noComments">There are no sticky notes yet.</span>')},
updatePos:function(a){this.j.css("display")=="none"&&this.j.css({left:-999,top:-999,display:"block"});var c=this.ann,d=this.j.find("div.diigoletFNContent");d.css({height:""});d.height()>214?d.height(214):d.css({height:""});var f=c.type!=2?a.pageX-8:parseInt(c.getEle().css("left"))+20;a=c.type!=2?a.pageY-8:parseInt(c.getEle().css("top"))+20;d=this.j;c=$(document).scrollLeft();var h=$(document).scrollTop(),i=c+$(window).width()-d.width()-10,m=h+$(window).height()-d.height()-10;if(f>i)f=i;if(f<c)f=c;
if(a>m)a=m;if(a<h)a=h;d.css({left:f,top:a})}};V(H,{showDelay:200,showTimer:null,hideDelay:300,hideTimer:null,cancelShow:function(){clearTimeout(this.showTimer);this.showTimer=null},cancelHide:function(){clearTimeout(this.hideTimer);this.hideTimer=null},aboutToShow:function(){return this.shown||this.showTimer},aboutToHide:function(){return!this.shown||this.hideTimer},scheduleShow:function(a,c){var d=this,f={pageX:a.pageX-10,pageY:a.pageY-10};d.cancelHide();d.cancelShow();d.showTimer=setTimeout(function(){d.show(f,
c)},d.showDelay)},scheduleHide:function(){var a=this;a.cancelHide();a.cancelShow();a.hideTimer=setTimeout(function(){a.hide()},a.hideDelay)}});V(H,{eleId_ic:function(a){return"diigolet-dlgIC-ic_"+a.id},_labelsHtml:function(a){var c=this.filterMode,d="",f="";if(a.canDelete())f='<a href="javascript:void(0)" class="del"><img diigoonclick="#{ONCLICK}" title="Delete" src="https://www.diigo.com/client/ietoolbar/spacer.gif" style="width:12px;height:12px;cursor:pointer" alt="" /></a>';if(a.isPublic()&&(c==
"_all"||c=="_public")&&a.user==k.user)d+='<label class="_public"><span>Public</span>DEL</label>'.replace("DEL",W(f,{ONCLICK:"diigolet.handle(event, 'dlgIC_del_ic', '"+a.id+"')"}));if(a.isPrivate()&&(c=="_all"||c=="_private"))d+='<label class="_private"><span>Private</span>DEL</label>'.replace("DEL",W(f,{ONCLICK:"diigolet.handle(event, 'dlgIC_del_ic', '"+a.id+"')"}));K(a.groups,function(h){if(c==h.name||c=="_all")d+=W('<label class="_#{GROUP_NAME}"><a href="#{GROUP_URL}" class="link">#{GROUP_DISPLAY_NAME}</a>#{DEL}</label>',
{GROUP_NAME:h.name,GROUP_DISPLAY_NAME:h.displayName,GROUP_URL:x.urls.getGroupURL(h.name),DEL:W(f,{ONCLICK:"diigolet.handle(event, 'dlgIC_del_ic', '"+a.id+"', '"+h.name+"')"})})});return d},addInlineComment:function(a){if(a.mode==2){/minute|day|hour/.test(a.datetime)?$("#FN-private-datetime").text(""):$("#FN-private-datetime").text(a.datetime.replace("on ",""));$("#FN-private-delete").attr("data-cid",a.id).show()}else{var c=a.groups[0].name,d=a.groups[0].displayName;a=this.generateGroupItem(a);if(this.j.hasClass("groupNew")){$("#FN-group-content-container").append('<div class="FN-group-content-section" data-dgroup="'+
c+'"></div>');$("#FN-group-ul").append('<li data-dGroupName="'+c+'" title="'+d+'">'+d+"</li>");this.j.removeClass("groupNew");this.switchGroup({name:c,displayName:d});$("#FN-group-post").val("");$("#FN-post-form").find("button,textarea").prop("disabled",false);$("#FN-group-share").val(0);this.ann.paint()}else{$("#FN-group-content-container")[0].scrollTop=$("#FN-group-content-container")[0].scrollHeight;H.groupEditor.remove()}$('.FN-group-content-section[data-dgroup="'+c+'"]').append(a)}},editInlineComment:function(a){/minute|day|hour/.test(a.datetime)?
$("#FN-private-datetime").text(""):$("#FN-private-datetime").text(a.datetime.replace("on ",""))},getCommentsInfo:function(a){var c=0,d=0,f=a.length,h;for(h=0;h<f;h++)if(a[h].mode==2)c++;else a[h].mode==3&&d++;return c==0&&d==0?"noComment":c>0&&d==0?"onlyPrivate":c==0&&d>0?"onlyGroup":"both"},ifMoreThanOnePrivateComment:function(a){var c=0,d=a.length,f;if(d===0)return false;for(f=0;f<d;f++)a[f].mode==2&&c++;return c>1?true:false},updatePrivateComments:function(a){var c=a.length,d="",f="",h,i=this.getCommentCount("private",
a),m;if(i>=1)for(m=0;m<c;m++){if(a[m].mode===2){d+=a[m].content.replace(/\n$/,"");if(i>1)d+="["+a[m].datetime+"]\n";f=a[m].datetime;h=a[m].id}}else if(i==0)return;$("#FN-private-editor").val(d);this.backupContent=d;if(f!=""&&h){/minute|day|hour/.test(f)||$("#FN-private-datetime").text(f.replace("on ",""));$("#FN-private-delete").attr("data-cid",h).show()}},updateGroupComments:function(a){var c={},d="",f=[];if(a.length!=0){for(var h=0;h<a.length;h++)if(a[h].mode===3){f.push(a[h]);for(var i=0;i<a[h].groups.length;i++)c[a[h].groups[i].name]=
a[h].groups[i].displayName}a=$("#FN-group-ul").empty();for(g in c){a.append('<li data-dGroupName="'+g+'" title="'+c[g]+'">'+c[g]+"</li>");d+='<div class="FN-group-content-section" data-dgroup="'+g+'"></div>'}$("#FN-group-content-container").empty().append(d);for(c=0;c<f.length;c++){d=f[c].groups;for(a=0;a<d.length;a++){h=this.generateGroupItem(f[c]);$('.FN-group-content-section[data-dgroup="'+d[a].name+'"]').append(h)}}}},generateGroupItem:function(a){return W('<div class="FN-group-comment-item" data-cid="#{ID}"><div class="FN-group-comment-item-tbar"><a href="#" class="FN-group-comment-name">#{USERNAME}</a><span class="FN-group-comment-item-time">#{DATETIME}</span>#{DELETE}</div><div class="FN-group-comment-item-content">#{CONTENT}</div></div>',
{ID:a.id,USERNAME:a.realName,CONTENT:a.content,DATETIME:a.datetime,DELETE:k.user==a.user?'<a class="FN-group-comment-item-delete">delete</a>':""})},getGroups:function(a){for(var c=[],d=0;d<a.length;d++)if(a[d].mode==3)for(var f=0;f<a[d].groups.length;f++){var h={};h.displayName=a[d].groups[f].displayName;h.name=a[d].groups[f].name;c.push(h)}a=c.concat();for(c=0;c<a.length;++c)for(d=c+1;d<a.length;++d)JSON.stringify(a[c])===JSON.stringify(a[d])&&a.splice(d--,1);return c=a},getCommentCount:function(a,
c){var d=c.length,f=0,h;if(a==="private")var i=2;else if(a==="group")i=3;for(h=0;h<d;h++)c[h].mode===i&&f++;return f},privateCommentAddSuccessful:function(){},removeInlineComment:function(a,c){if($("#diigolet-dlg-sticky-content").hasClass("private")){this.switchTab("group");this.j.removeClass("onlyPrivate").addClass("onlyGroup");$("#FN-private-editor").val("");$("#FN-private-delete").hide();$("#FN-private-datetime").text("")}$('.FN-group-comment-item[data-cid="'+a.id+'"]').remove();if($('.FN-group-content-section[data-dgroup="'+
c+'"]').find(".FN-group-comment-item").length==0){$('.FN-group-content-section[data-dgroup="'+c+'"]').remove();$("#FN-group-ul").find('li[data-dgroupname="'+c+'"]').remove()}if($("#FN-group-content-container").find(".FN-group-content-section").length==0){this.j.removeClass("onlyGroup").addClass("onlyPrivate");this.switchTab("private")}$("#FN-group-ul").find("li").length!=0&&$("#FN-group-ul").find("li").trigger("click")},onclick_del_ic:function(a,c,d){qa.del(c,d);if(a){a.stopPropagation();a.preventDefault()}},
onic_add:function(a,c){this.addInlineComment(a,c)},onic_del:function(a,c){this.removeInlineComment(a,c)},onann_del:function(a){if(a==this.ann)if(a.comments.length==0){a.deleted=true;this.hide()}},onic_edit:function(a){this.editInlineComment(a)}});V(H,{NO_PUBLIC_STICKY_NOTES_ALLOWED:true,isEditing:function(){return $("#FN-group-content-postform").find("textarea").val()!=""||$("#FN-group-post").val()!=""||this.ifChooseGroup()||this.privateEditing||$("#FN-group-content-postform").hasClass("active")},
ifChooseGroup:function(){var a=$("#FN-group-share").val();return a!=null&&a!=0&&a!=-1},groupEditor:{jEdit:null,init:function(){var a=this;a.jEdit=H.j.find("#FN-group-content-postform");a.jEdit.find("button").click(function(){a.submitGroupComment()});a.jEdit.find("textarea").keypress(function(c){c.keyCode==13&&c.ctrlKey&&a.submitGroupComment()})},submitGroupComment:function(){var a=this,c=a.jEdit.find("textarea").val();if(c){var d=$("#FN-current-group").find("span").attr("data-group");c={annotationId:H.ann.id,
mode:void 0,content:c};if(d){c.justForGroups=true;c.groups=[d]}d=M.find(c.annotationId);if(d.type==ga&&!d.saved){d._toAddInlineComment=c;d.saving=true;z.addAnnotation(d)}else if(d.type==ja&&!d.saved){d._toAddInlineComment=c;d.saving=true;z.addAnnotation(d)}else z.addInlineComment(c);$("#FN-group-content-postform").find("textarea,button").prop("disabled",true)}else{a.jEdit.find("textarea").addClass("notify");setTimeout(function(){a.jEdit.find("textarea").removeClass("notify")},600)}},remove:function(){if(this.jEdit[0].parentNode){$("#FN-group-content-postform").find("textarea,button").prop("disabled",
false);this.jEdit.find("textarea").val("");this.jEdit.removeClass("active")}},show:function(){var a=$(".diigoletFNPriSlct").empty(),c=H.ann,d=H.filterMode;if((d=="_all"||d=="_public")&&(c?true:true)&&(c?!c.onlyInGroup&&c.getComments("_private").length==0:true))H.NO_PUBLIC_STICKY_NOTES_ALLOWED||a.append('<option value="_public">Public</option>');if((d=="_all"||d=="_private")&&(c?!c.onlyInGroup&&c.getComments("_public").length==0:true))a.append('<option value="_private">Private</option>');K(k.myGroups,
function(h){if((d=="_all"||d==h.name)&&(c&&(c.user!=k.user||c.onlyInGroup)?c.inGroup(h.name):true))a.append(F.dom.buildOne("option",{value:h.name},[h.displayName]))});d=="_all"&&c&&c.isPrivate()&&a.val("_private");if(a.find("option").length==0)H.j.find(".diigoletFNComment").hide();else{H.j.find(".diigoletFNComment").show();var f=this.jEdit.find("textarea").val("");setTimeout(function(){f.focus()},500);H.j.find("._stickyTitle").html("Add Sticky Note")}}}});var P={tagListNames:"recent recommend group".split(" "),
shown:false,ele:null,init:function(){this.create()},destroy:function(){},show:function(a,c){if(!(!k.signedIn||this.shown&&this.j.is(":visible"))){this.shown=true;H.hide();this.j.show();var d=this;if(k.recommendedTagsLoaded)d.showRecommendedTags(k.recommendedTags);else{d.showTagList("recommend",null);var f=k.bookmark,h=f.getTitle();h+=k.googleSearchSentence;z.loadRecommendedTags(f.url,h,function(){I(k.keywords);if(k.keywords.length>0)k.recommendedTags=Za($.merge(k.keywords,k.recommendedTags));d.showRecommendedTags(k.recommendedTags)})}Q.getUserData("tagsUsedLastTime",
function(i){i=i?JSON.parse(i):[];d.showTagList("recent",i)});a&&c?this.syncData("saveLink",true,a,c):this.syncData("data->form",true);d.refreshPremium();$("#Diigo-Bookmark-uploadCache").find(".op-checkbox-container").removeClass("checked");$("#Diigo-Bookmark-Tag-Input").focus();d.showPromotionMessage();/https:\/\/www.hnsearch.com\/search/.test(window.location.href)&&$("#Diigo-Bookmark-Url,#Diigo-Bookmark-Title,#Diigo-Bookmark-Description,#Diigo-Bookmark-Tag").bind("focus",function(){$(window).unbind("keypress");
var i=this;$(window).bind("keypress",function(m){m.preventDefault();var n=$(i).val();$(i).focus().val(n+String.fromCharCode(m.charCode))})})}},showPromotionMessage:function(){var a=this;x.Messenger.send({name:"pickPromotionMessage"},function(c){if(a.shown&&c){var d=$("#diigolet-cross-promotion");d.empty().append($("<a>",{href:c.url,target:"_blank",html:c.content}).click(function(){d.hide();x.Messenger.send({name:"promotionMessageClicked",details:{id:c.id}})})).show()}})},_tagContainerIdForTagListName:function(a){return"#diigolet-bm-tagListContainer-"+
a},showTagList:function(a,c){var d=this,f=$(d._tagContainerIdForTagListName(a));if(a=="group"){f.show();f.find(".tagButton").remove()}else if(a=="recommend"&&f.find(".tagButton").length>0)return;if(c)if(c.length==0)f.hide();else{a=="group"&&f.find(".loading").hide();var h=k.bookmark,i=k.myTags;f.find(".tagButton").remove();K(c,function(m){var n=$(F.dom.buildOne("div",{id:"diigolet-tag-"+a+"-"+d.escapeTagForElementId(m),"class":"tagButton",tag:m},[m])).appendTo(f.show());n.toggleClass("selected",$.inArray(m,
h.tags)>=0).toggleClass("inused",$.inArray(m,i)>=0);n.click(function(){d.toggleTag(m);return false})})}},showRecommendedTags:function(a){this.showTagList("recommend",a)},escapeTagForElementId:function(a){return encodeURIComponent(a).replace(/[.%:]/g,"")},toggleTag:function(a,c){var d=$("#Diigo-Bookmark-Tag-Input"),f=x.parseTags(d.val(),true),h=$.inArray(a,f);if(c===undefined)h>=0?f.splice(h,1):f.push(a);else if(c)h==-1&&f.push(a);else h>=0&&f.splice(h,1);f=x.unparseTags(f);if(f.length)f+=" ";d.val(f);
this.placeCursorAtLast(d[0]);this.updateTagStates()},updateTagStates:function(){var a=this,c=$("#Diigo-Bookmark-Tag-Input"),d=x.parseTags(c.val(),true);$("#Diigo-Bookmark-Tag-Cloud").find(".Diigo-Bookmark-Tag-item").each(function(){var f=$(this),h=f.text();$.inArray(h,d)!=-1?f.addClass("selected"):f.removeClass("selected")});a.tagListNames.forEach(function(f){$(a._tagContainerIdForTagListName(f)).find("div.tagButton").each(function(){var h=$(this),i=h.attr("tag");$.inArray(i,d)!=-1?h.addClass("selected"):
h.removeClass("selected")})})},showGroupTags:function(){var a=this;a.showTagList("group",null);var c=null,d=$("#diigo-group").find("select").val();if(d!=-1)c=d;c?z.loadGroupTagsDictionary([c],function(){a.showTagList("group",k.groupTagsDict[c])}):a.showTagList("group",[])},selectAllTags:function(a){var c=this;$(c._tagContainerIdForTagListName(a)).find(".tagButton").each(function(){c.toggleTag($(this).addClass("selected").text(),true)})},placeCursorAtLast:function(a){var c=this,d=a.value.length;setTimeout(function(){c.placeInputCursor(a,
d)},13)},placeInputCursor:function(a,c){a.focus();if(a.createTextRange){var d=a.createTextRange();d.move("character",c);d.select()}else if(a.selectionStart>=0){a.focus();a.setSelectionRange(c,c)}},hide:function(a){if(this.shown){this.shown=false;$("#diigolet-tagForward").hide();$("#Diigo-Bookmark-Url").removeClass("fold").removeClass("unfold");a||this.syncData("form->data")}},remove:function(){this.j&&this.j.remove()},create:function(){var a=this;a.j=(new Pb(db)).css({position:$.browser.supportPositionFixed?
"fixed":"absolute"}).hide().appendTo(va.body).hide();$("#diigolet-bm-tagListContainer-recent").find("a").on("click",function(){a.selectAllTags("recent")});$("#diigolet-dlgBm-btnSave").click(function(d){a.j.data("data-ifSaveLink")==true?a.saveThisLink():x.handle(d,"bmOnSubmitAndClose","bookmark")});$("#diigolet-dlgBm-btnSaveandmore").click(function(d){x.handle(d,"bmOnSubmitAndClose","bookmark");d=encodeURIComponent($("#Diigo-Bookmark-Title").val());var f=encodeURIComponent($("#Diigo-Bookmark-Url").val()),
h=encodeURIComponent($("#Diigo-Bookmark-Tag").val());window.open("https://www.diigo.com/toolbar/saved?t="+d+"&url="+f+"&tags="+h)});var c=navigator.userAgent.toLowerCase();(c.indexOf("macintosh")!=-1||c.indexOf("mac os x")!=-1)&&$("#list-group select").css("text-indent","7px");$("#Diigo-Bookmark-Title").find("#link-icon").on("click",function(){var d=$("#Diigo-Bookmark-Url");d.hasClass("unfold")?d.addClass("fold").removeClass("unfold"):d.addClass("unfold").removeClass("fold")}).Gtooltip({position:"top"});
$("#Diigo-Bookmark-Title-Input,#Diigo-Bookmark-Url-Input").on("focus",function(){$(this).parent().find(".diigo-alert-tip").hide()}).on("input",function(){$(this).parent().find(".diigo-alert-tip").hide()});$("#Diigo-Bookmark-Options,#Diigo-Bookmark-checkShareExisting").find(".op-checkbox-container").on("click",function(){$(this).toggleClass("checked")});$("#Diigo-Bookmark-Title-Input,#Diigo-Bookmark-Description-Input,#Diigo-Bookmark-Tag-Input").on("focus",function(){$(this).parent().addClass("focus")}).on("blur",
function(){$(this).parent().removeClass("focus")});$("#diigolet-tagForward-remove").Gtooltip();$("#Diigo-Bookmark-Tag-Input").bind("input",function(){a.updateTagStates()});$("#Diigo-Bookmark-Tag-dropdown").on("click",function(){$(this).toggleClass("cloud");if($("#Diigo-Bookmark-Tag-Cloud").css("display")=="none"){$("#Diigo-Bookmark-Tag-suggestion").hide();$("#Diigo-Bookmark-Tag-Cloud").show()}else{$("#Diigo-Bookmark-Tag-suggestion").show();$("#Diigo-Bookmark-Tag-Cloud").hide()}});$("#diigolet-dlgBm-btnCancel").click(function(d){x.handle(d,
"bmCancel")});a.j.css({left:$(window).width()-a.j.outerWidth()-5,right:""});new $.Draggable(a.j,{handle:"._dragHandle",afterDrag:function(){a.adjustPosition()}});a.j.bind("keydown",function(d){if(d.keyCode==13){if(d.target.tagName.toLowerCase()!="textarea"||d.ctrlKey)x.handle(d,"bmOnSubmitAndClose","bookmark")}else d.keyCode==27&&x.handle(d,"bmCancel")});$("#diigo-list-addInput").on("focus",function(){$("#diigo-list-add .diigo-alert-tip").hide()});$("#diigo-list-addBtn").on("click",function(){if(!$(this).hasClass("processing")){var d=
$("#diigo-list-addInput").val(),f=$("#diigo-list-add .diigo-alert-tip"),h=[],i=k.myBmLists.length,m;for(m=0;m<i;m++)h.push(k.myBmLists[m].title);if(d.match(/^\s*$/))f.show().find("span").text("Input a name");else if($.inArray(d,h)!==-1)f.show().find("span").text("Name exsited !");else{$(this).addClass("processing");z.createList(d)}}});$("#diigo-list-addCancel").on("click",function(){$("#diigo-list-add .diigo-alert-tip").hide();$("#diigo-list-add").hide();$("#diigo-list").show();$("#diigo-list-addInput").val("")});
$("#diigolet-tagForward-remove").click(function(d){d.preventDefault();if(!k.isAnnotated()||confirm("Removing this as a bookmark will also remove your annotations on this page. Do you want to continue?")){z.deleteBookmark(k.bookmark);a.hide();J.hide()}})},adjustPosition:function(){var a=this.j,c=$(window),d=c.width();c=c.height();var f=parseInt(a.css("left")),h=parseInt(a.css("top"));a.outerWidth();a.outerHeight();if(d<f+100)a.css("left",f=d-100);if(c<h+100)a.css("top",h=c-100);h<-10&&a.css("top",
-10);f<-150&&a.css("left",-150)},isURL:function(a){return/^(https|http|ftp|rtsp|mms)+:\/\//.test(a)?true:false},buildTagCloud:function(a,c){document.getElementById("Diigo-Bookmark-Tag-Eidt").href="https://www.diigo.com/cloud/"+k.user;if(k.myTagsWithCount.length==0){var d=document.getElementById(a),f=document.createElement("span");f.id="no-tag";f.innerHTML="No tags";d.appendChild(f)}else if(!($("#Diigo-Bookmark-Tag-Cloud-Container").find("a").length>0)){var h=this,i=Hb();d=i.topTags;var m=i.maxCount;
f=i.a;var n=i.b,w=i.c,D=d.length;i=document.createDocumentFragment();for(var A=0;A<D;A++){var C=document.createElement("a");C.className=c;C.href="#";C.innerText=d[A].name;var r=d[A].count;if(r==m){C.style.fontSize="20px";C.style.fontWeight="bold"}f.forEach(function(o){if(r==o){C.style.fontSize="18px";C.style.fontWeight="bold"}});n.forEach(function(o){if(r==o){C.style.fontSize="16px";C.style.fontWeight="bold"}});w.forEach(function(o){if(r==o){C.style.fontSize="16px";C.style.fontWeight="regular"}});
i.appendChild(C);C.addEventListener("click",function(o){o.preventDefault();h.toggleTag(this.innerText)})}d=document.getElementById(a);d.appendChild(i)}},syncData:function(a,c,d,f){var h=k.bookmark;if(a=="data->form"){$("#diigolet-tagForward-remove").toggle(h.saved).attr("data-gtooltip","Saved "+h.datetime+". Click to remove");this.j.data("data-ifSaveLink",false);h.saved==true&&$("#diigolet-tagForward-topBar>span").text("Edit bookmark");$("#Diigo-Bookmark-Url-Input").val(h.url);if(c||h.saved){$("#Diigo-Bookmark-Title-Input").val(h.getTitle());
a=x.unparseTags(h.tags);$("#Diigo-Bookmark-Tag-Input").val(a+" ");h.mode==2?$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").addClass("checked"):$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").removeClass("checked");h.unread==true?$("#Diigo-Bookmark-Unread").find(".op-checkbox-container").addClass("checked"):$("#Diigo-Bookmark-Unread").find(".op-checkbox-container").removeClass("checked")}$("#Diigo-Bookmark-uploadCache").show();this.buildTagCloud("Diigo-Bookmark-Tag-Cloud-Container",
"Diigo-Bookmark-Tag-item");this.updateTagStates();a=$("#Diigo-Bookmark-Description-Input");c=F.dom.getSelection();if(Ta(a.val()))if(Ta(h.description))Ta(c)||a.val('"'+c+'"');else a.val(h.description);else{a.val("");h.saved&&!Ta(h.description)&&a.val(h.description)}this.updateGroups();this.updateLists()}else if(a=="form->data"){h.url=$("#Diigo-Bookmark-Url-Input").val();h.title=$("#Diigo-Bookmark-Title-Input").val();h.tags=x.parseTags($("#Diigo-Bookmark-Tag-Input").val(),true);h.mode=$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").hasClass("checked")?
2:0;h.unread=$("#Diigo-Bookmark-Unread").find(".op-checkbox-container").hasClass("checked");h.description=$("#Diigo-Bookmark-Description-Input").val();a=$("#diigo-group").find("select").val();if(a=="-1"||a=="-2"||a=="0")h.toShareToGroups=[];else{h.toShareToGroups=[a];h.toShareExistingAnnotations=$("#Diigo-Bookmark-checkShareExisting").find(".op-checkbox-container").hasClass("checked")}a=$("#diigo-list").find("select").val();h.toAddToBookmarkLists=a=="-1"||a=="-2"||a=="0"?[]:[a]}else if(a=="saveLink"){this.j.data("data-ifSaveLink",
true);if(d&&f){$("#Diigo-Bookmark-Url-Input").val(f);$("#Diigo-Bookmark-Title-Input").val(d);$("#diigolet-tagForward-topBar>span").text("Save to Diigo")}$("#Diigo-Bookmark-Description-Input").val("");$("#Diigo-Bookmark-Tag-Input").val("");x.Messenger.send({name:"initialData"},function(i){i.preloadedPrefs["prefs.bookmark.privateByDefault"]=="true"?$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").addClass("checked"):$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").removeClass("checked")});
$("#Diigo-Bookmark-uploadCache").hide();this.buildTagCloud("Diigo-Bookmark-Tag-Cloud-Container","Diigo-Bookmark-Tag-item");this.updateTagStates();this.updateGroups(true);this.updateLists(true)}},updateLists:function(a){j=$("#diigo-list").find("select").empty().unbind().removeClass("processing");j.append(F.dom.buildOne("option",{value:0},["Add to a list"]));j.append(F.dom.buildOne("option",{value:-1},[Array(20).join("-")]));$(F.dom.buildOne("option",{value:-2},["Create a List..."])).appendTo(j);j.append(F.dom.buildOne("option",
{value:-1},[Array(20).join("-")]));K(k.myBmLists,function(c){a?j.append(F.dom.buildOne("option",{value:c.id},[c.title])):j.append(F.dom.buildOne("option",{value:c.id},[c.title+(k.bookmark.inList(c.id)?" (added)":"")]))});j.append(F.dom.buildOne("option",{value:-1},[Array(20).join("-")]));$(F.dom.buildOne("option",{value:-3},["Refresh"])).appendTo(j);j.change(function(){var c=j.val();if(c==-2){$("#diigo-list").hide();$("#diigo-list-add").show();$("#diigo-list-addInput").focus();j.val(0)}else if(c==
-3){$(this).addClass("processing");z.loadMyStuff("myGroups myBookmarkLists");j.val(-1)}});j.val(0).change()},updateGroups:function(a){var c=this,d=$("#diigo-group").find("select").empty().unbind().removeClass("processing");d.append(F.dom.buildOne("option",{value:0},["Share to a group"]));d.append(F.dom.buildOne("option",{value:-1},[Array(20).join("-")]));$(F.dom.buildOne("option",{value:-2},["Create a Group..."])).appendTo(d);d.append(F.dom.buildOne("option",{value:-1},[Array(20).join("-")]));K(k.myGroups,
function(f){a?d.append(F.dom.buildOne("option",{value:f.name},[f.displayName])):d.append(F.dom.buildOne("option",{value:f.name},[f.displayName+(k.bookmark.inGroup(f.name)?" (shared)":"")]))});d.append(F.dom.buildOne("option",{value:-1},[Array(20).join("-")]));$(F.dom.buildOne("option",{value:-3},["Refresh"])).appendTo(d);d.change(function(){var f=d.val();if(f==-2){x.openURL(x.urls.getCreateGroupURL());d.val(-1)}else if(f==-3){$(this).addClass("processing");z.loadMyStuff("myGroups myBookmarkLists");
d.val(0)}else if(f!=-1)if(f!=0){c.afterGroupSelectionChange();c.showGroupTags()}});d.val(0).change()},afterGroupSelectionChange:function(){var a=$("#diigo-group").find("select").val()!="-1"&&$("#diigo-group").find("select").val()!="0";R("Diigo-Bookmark-checkShareExisting").showHide(a&&k.isAnnotated())},submitAndClose:function(){var a=true,c="",d=$("#Diigo-Bookmark-Url-Input").val();if($("#Diigo-Bookmark-Title-Input").val().match(/^\s*$/)){a=false;c="Please input bookmark title.";$("#Diigo-Bookmark-Title").find(".diigo-alert-tip").show()}if(!this.isURL(d)||
d.match(/^\s*$/))if(a==true){a=false;c="Please input a valid url.";$("#Diigo-Bookmark-Url").find(".diigo-alert-tip").show()}if(a){this.syncData("form->data");a=k.bookmark.tags;a.length>0&&Q.setUserData({tagsUsedLastTime:JSON.stringify(a.slice(0,8))});var f=function(){};$("#Diigo-Bookmark-uploadCache").find(".op-checkbox-container").hasClass("checked")&&function(h){f=function(){I("[DlgBookmark] bookmark saved. will upload cache");ua.uploadCache({groups:h})}}(k.bookmark.toShareToGroups);z.saveBookmark(null,
f,"showbar");x.ready=true;this.hide();$("#Diigo-Bookmark-checkShareExisting").find(".op-checkbox-container").removeClass("checked")}},saveThisLink:function(){var a={},c=true,d=$("#Diigo-Bookmark-Url-Input").val();if($("#Diigo-Bookmark-Title-Input").val().match(/^\s*$/)){c=false;$("#Diigo-Bookmark-Title").find(".diigo-alert-tip").show()}if(!this.isURL(d)||d.match(/^\s*$/))if(c==true){c=false;$("#Diigo-Bookmark-Url").find(".diigo-alert-tip").show()}if(c){a.url=$("#Diigo-Bookmark-Url-Input").val();a.title=
$("#Diigo-Bookmark-Title-Input").val();a.tags=x.parseTags($("#Diigo-Bookmark-Tag-Input").val(),true);a.mode=$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").hasClass("checked")?2:0;a.unread=$("#Diigo-Bookmark-Unread").find(".op-checkbox-container").hasClass("checked");a.description=$("#Diigo-Bookmark-Description-Input").val();c=$("#diigo-list").find("select").val();a.lists=c=="-1"||c=="-2"||c=="0"?[]:[c];c=$("#diigo-group").find("select").val();a.groups=c=="-1"||c=="-2"||c=="0"?[]:[c];
a.shareExistingAnnotations=false;chrome.extension.sendRequest({name:"saveThisLink",data:a});this.hide(true)}},bookmarkLoaded:function(){var a=this;if(a.shown){a.syncData("data->form");K(k.bookmark.tags,function(c){a.toggleTag(c,true)})}},refreshPremium:function(){var a=$("#Diigo-Bookmark-uploadCache"),c=a.next("label");if(Ra.hasCacheUpload()){a.removeAttr("disabled");c.attr("title","Upload a copy of the page")}else{a.attr("disabled","disabled").attr("checked",false);c.attr("title","Upload a copy of the page (Quota exceeded. Go premium to re-enable.)")}}},
Fa={j:null,floating:false,container:null,init:function(){this.create();k.addEventListener("ic_add",this);k.addEventListener("ic_del",this);k.addEventListener("pc_add",this);k.addEventListener("pc_del",this);k.addEventListener("ann_add",this);k.addEventListener("ann_del",this)},destroy:function(){},create:function(){var a=W(fb,{URL_DIIGO:"https://www.diigo.com"});this.container=$(k.launchMode.threeDForum?"#diigo-3dforum":"#diigolet-annotationSummary");a=this.j=$(a).appendTo(this.container);a.find("div.addComment").hide();
if(!k.launchMode.threeDForum){a.find("span._inlineCommentsTitle").text("Sticky Notes");a.find("a.add").eq(0).hide();a.find("div.popOut").addClass("close")}},onSignIn:function(){this.j.find("a._signIn").hide()},onSignOut:function(){},togglePanel:function(a,c){var d=$({inline:"#d3df-togglePanelInline",page:"#d3df-togglePanelPage"}[a]),f=$({inline:"#d3df-inlineCommentBox",page:"#d3df-pageCommentBox"}[a]),h=!d.is(".collapsed");c=c!==undefined?c:!h;if(c!=h){d.toggleClass("collapsed",!c);f[c?"slideDown":
"slideUp"]()}},popOut:function(a){var c=this.j.find("div.popOut"),d=c.is(".popIn");c.toggleClass("popIn",!d);c.attr("title",d?"Pop out and pin":"Pop in");k.launchMode.threeDForum||c.attr("title","close");c=this.j;if(d){c.appendTo(this.container).css({position:"static",left:"",top:"",width:""}).find("._dragHandle").css({cursor:""});c[0].draggable.destroy()}else{var f=a||c.offset();c.css({position:"absolute",left:f.left,top:f.top,width:260}).appendTo(document.body);if($.browser.supportPositionFixed)if(a)c.css({position:"fixed"});
else{a=Wb.docScroll();c.css({position:"fixed",left:f.left-a[0],top:f.top-a[1]})}new $.Draggable(c,{handle:"._dragHandle"});k.toggleSilent(false)}this.floating=!d;this.adjustSize()},showEditPageCommentBox:function(a){if(ka()){a=a!==undefined?a:true;$("#d3df-sidebar div.addComment")[a?"show":"hide"]();this.togglePanel("page",true);R("diigolet-sb-txtpc").val("");var c=R("diigolet-sb-selpc").empty();c.append('<option value="_public">Public</option>');c.append('<option value="_private">Private</option>');
K(k.myGroups,function(d){c.append(F.dom.buildOne("option",{value:d.name},[d.displayName]))});c.val("_private")}else z.signIn()},refresh:function(){this.refreshComments()},refreshComments:function(){this.refreshPageComments();this.refreshInlineComments()},refreshPageComments:function(){var a=this,c="";K(k.pageComments,function(d){c+=W('<li class="bgColor3"><a class="avatar" href="#{DIIGO_URL}/user/#{USER}" title="#{USER}" target="_blank"><img alt="#{USER}" src="http://resources.diigo.com/resources_mana/user_avatar?user_name=#{USER}&amp;size=48" /></a><span class="commentInfo color1"><a href="#{DIIGO_URL}/user/#{USER}" target="_blank" class="color1">#{USER} </a>#{DATE}\n\t\t\t</span ><p class="labelList">#{LABELS_HTML}</p><p class="commentBody color2">#{CONTENT}</p></li>\n',
{USER:d.user,CONTENT:F.content2Html(d.content),DIIGO_URL:"https://www.diigo.com",DATE:d.datetime,LABELS_HTML:a._labelsHtml(d)})});$("#d3df-pageCommentList").html(c||'<li class="bgColor3 color1"><div class="noComments">No comments yet</div></li>\n');this.j.find("._pageCommentCount").text(k.pageComments.length+"");this.adjustSize()},refreshInlineComments:function(){M.sort();var a="",c,d,f=0;K(k.annotations,function(i){if(i.type==0||i.type==2||i.type==1){d="";K(i.comments,function(m){f++;d+=W('<li class="bgColor3"><a class="avatar" href="#{DIIGO_URL}/user/#{USER}" title="#{USER}" target="_blank"><img alt="#{USER}" src="http://resources.diigo.com/resources_mana/user_avatar?user_name=#{USER}&amp;size=48" /></a><span class="commentInfo color1"><a href="#{DIIGO_URL}/user/#{USER}" target="_blank" class="color1">#{USER} </a>#{DATE}\n\t\t\t</span ><p class="commentBody"><a class="color2" href="#" onclick="diigolet.devil(\'Sidebar\').jumpToHighlight(\'#{HIGHLIGHT_ID}\');return false;">#{CONTENT}</a></p></li>\n',
{HIGHLIGHT_ID:i.id,USER:m.user,CONTENT:F.content2Html(m.content),DIIGO_URL:"https://www.diigo.com",DATE:m.datetime})});c=W('<li class="highlight"><a class="highlight headingColor2 #{FLOAT_NOTE_CLASS}" href="#" onclick="diigolet.devil(\'Sidebar\').jumpToHighlight(\'#{ID}\');return false;"><span class="jumpTo color1" style="float:right">...Jump to</span><em style="font-style:italic;line-height:24px;width:80%;" class="color2">#{CONTENT}</em></a><ul class="comments bgColor1">#{COMMENTS}\n</ul></li>\n',
{ID:i.id,FLOAT_NOTE_CLASS:i.type==2?"floatNote":"",CONTENT:F.content2Html(i.prettyTxt||Wa.html2txt_pretty(i.content)),COMMENTS:d});a+=c}});var h='<li class="bgColor3 color1"><div class="noComments">No comments yet</div></li>\n';k.launchMode.threeDForum||(h=h.replace("No comments","No sticky notes"));$("#d3df-inlineCommentBox").html(a||h);this.j.find("._inlineCommentCount").text(f+"");this.adjustSize()},adjustSize:function(){$("#d3df-inlineCommentBox,#d3df-pageCommentList").each(function(){var a=$(this);
a.height("").height(a.height()>180?180:"")})},addCommentSubmit:function(){var a=R("diigolet-sb-txtpc").val();if(a.length<=0||a.length>500)alert("Comment length should < 500 characters");else{var c=R("diigolet-sb-selpc").val(),d,f;if(c=="_private")d=2;else if(c=="_public")d=0;else f=c;a={urlId:k.bookmark.urlId,mode:d,content:a};if(f){a.justForGroups=true;a.groups=[f]}z.addPageComment(a);this.showEditPageCommentBox(false)}},jumpToHighlight:function(a){k.toggleSilent(false);(a=M.find(a))&&a.jumpHere(true,
false)},onpc_del:function(){var a=this;setTimeout(function(){a.refreshPageComments()},100)},onpc_add:function(){this.refreshPageComments()},onic_add:function(){this.refreshInlineComments()},onic_del:function(){var a=this;setTimeout(function(){a.refreshInlineComments()},100)},onann_add:function(){this.refreshInlineComments()},onann_changeMode:function(){this.refreshInlineComments()},onann_del:function(){var a=this;setTimeout(function(){a.refreshInlineComments()},100)}};V(Fa,{filterMode:"_all",_labelsHtml:function(a){var c=
a.annotationId?"ic":"pc",d=this.filterMode,f="",h=a.canDelete()?'<a href="javascript:void(0)" class="del" onclick="#{ONCLICK};"><img title="Delete" src="http://www.diigo.com/client/ietoolbar/spacer.gif" style="width:12px;height:12px;cursor:pointer" alt="" /></a>':"";if(a.isPublic()&&(d=="_all"||d=="_public")&&a.user==k.user)f+='<label class="_public"><span>Public</span>DEL</label>'.replace("DEL",W(h,{ONCLICK:W("diigolet.handle(event, 'sb_del_#{0}', '#{1}')",[c,a.id])}));if(a.isPrivate()&&(d=="_all"||
d=="_private"))f+='<label class="_private"><span>Private</span>DEL</label>'.replace("DEL",W(h,{ONCLICK:W("diigolet.handle(event, 'sb_del_#{0}', '#{1}')",[c,a.id])}));K(a.groups,function(i){if(d==i.name||d=="_all")f+=W('<label class="_#{GROUP_NAME}"><a href="#{GROUP_URL}" class="link">#{GROUP_DISPLAY_NAME}</a>#{DEL}</label>',{GROUP_NAME:i.name,GROUP_DISPLAY_NAME:i.displayName,GROUP_URL:x.urls.getGroupURL(i.name),DEL:W(h,{ONCLICK:W("diigolet.handle(event, 'sb_del_#{0}', '#{1}', '#{2}')",[c,a.id,i.name])})})});
return f},onclick_del_pc:function(a,c,d){ta.del(c,d)}});var da={j:null,direction:"normal",shown:false,init:function(){this.create()},create:function(){this.j=$(Ua).css({position:"absolute"}).hide().appendTo(va.body).hide();var a=$("#diigolet-csm-highlight"),c=$("#diigolet-csm-highlightAndComment");Q.get("prefs.lastUsedColor",function(m){$("#diigolet-csm").addClass(m)});a.click(function(m){window.getSelection().toString()!=""&&N.send({name:"initialData"},function(n){if(k.generated==false){Q.updateCache(n.preloadedPrefs);
k.reset(n);k.signedIn&&n.shoudLoadMyStuff&&z.loadMyStuff();if(n.loadBookmarkResult){I("[bookmark info already loaded]",n.loadBookmarkResult);z.cb_bm_loadBookmark_success(n.loadBookmarkResult,"prepareCtx")}else n.shouldLoadBookmarkByMyself&&k.signedIn&&z.loadBookmark()}if(n.globalData.user=="")k.notify(Ga,1E3);else{Q.get("prefs.lastUsedColor",function(w){J.shown?x.handle(m,"highlight","normal",w):x.handle(m,"highlight","small",w)});return false}})});this.j.find(".diigolet-csm-coloritem").click(function(m){var n=
$(this).data("color"),w=$(this).parent().parent().attr("id");N.send({name:"initialData"},function(D){if(k.generated==false){Q.updateCache(D.preloadedPrefs);k.reset(D);k.signedIn&&D.shoudLoadMyStuff&&z.loadMyStuff();if(D.loadBookmarkResult){I("[bookmark info already loaded]",D.loadBookmarkResult);z.cb_bm_loadBookmark_success(D.loadBookmarkResult,"prepareCtx")}else D.shouldLoadBookmarkByMyself&&k.signedIn&&z.loadBookmark()}if(D.globalData.user=="")k.notify(Ga,1E3);else{if(J.shown)if(w=="diigolet-csm-highlight-wrapper")x.handle(m,
"highlight","normal",n);else w=="diigolet-csm-highlightAndComment-wrapper"&&x.handle(m,"highlightAndComment","normal",n);else if(w=="diigolet-csm-highlight-wrapper")x.handle(m,"highlight","small",n);else w=="diigolet-csm-highlightAndComment-wrapper"&&x.handle(m,"highlightAndComment","small",n);return false}})});c.click(function(m){window.getSelection().toString()!=""&&N.send({name:"initialData"},function(n){if(k.generated==false){Q.updateCache(n.preloadedPrefs);k.reset(n);k.signedIn&&n.shoudLoadMyStuff&&
z.loadMyStuff();if(n.loadBookmarkResult){I("[bookmark info already loaded]",n.loadBookmarkResult);z.cb_bm_loadBookmark_success(n.loadBookmarkResult,"prepareCtx")}else n.shouldLoadBookmarkByMyself&&k.signedIn&&z.loadBookmark()}if(n.globalData.user=="")k.notify(Ga,1E3);else{Q.get("prefs.lastUsedColor",function(w){J.shown?x.handle(m,"highlightAndComment","normal",w):x.handle(m,"highlightAndComment","small",w);return false});return false}})});var d,f,h,i;this.j.find(".csm-btn").hover(function(){var m=
$(this).find(".csm-action"),n=m.attr("id");if(n=="diigolet-csm-highlight"){h!=null&&clearTimeout(h);d=setTimeout(function(){m.parent().find(".diigolet-csm-color").animate({height:21},200);m.parent().find(".diigolet-csm-coloritem").animate({height:7},200)},500)}else if(n=="diigolet-csm-highlightAndComment"){i!=null&&clearTimeout(i);f=setTimeout(function(){m.parent().find(".diigolet-csm-color").animate({height:21},200);m.parent().find(".diigolet-csm-coloritem").animate({height:7},200)},500)}m.addClass("editing")},
function(){var m=$(this).find(".csm-action"),n=m.attr("id");if(n=="diigolet-csm-highlight"){d!=null&&clearTimeout(d);h=setTimeout(function(){m.parent().find(".diigolet-csm-color").animate({height:0},200);m.parent().find(".diigolet-csm-coloritem").animate({height:0},200);m.removeClass("editing")},500)}else if(n=="diigolet-csm-highlightAndComment"){f!=null&&clearTimeout(f);i=setTimeout(function(){m.parent().find(".diigolet-csm-color").animate({height:0},200);m.parent().find(".diigolet-csm-coloritem").animate({height:0},
200);m.removeClass("editing")},350)}});$("#diigolet-csm .diigolet-csm-color").mousedown(function(m){m.preventDefault();m.stopPropagation()});$("#diigolet-csm-search").click(function(){var m=window.getSelection().toString();x.Messenger.send({name:"searchDiigoGoogle",details:{text:m}});return false})},changeColor:function(a){document.getElementById("diigolet-csm").className=a},show:function(){var a=document.createRange(),c,d="Diigo_sel_"+(new Date).getTime()+"_"+Math.random().toString().substr(2);c=
window.getSelection();if(c.toString().length>0){a.setStart(c.focusNode,c.focusOffset);a.setEnd(c.focusNode,c.focusOffset);a.collapse(false);var f=c.getRangeAt(0);if(f&&f.startOffset==c.focusOffset&&f.startContainer==c.focusNode)if(c.focusNode.nodeType==Node.TEXT_NODE){var h=document.createRange(),i=c.focusOffset,m=c.anchorOffset,n=c.focusNode.splitText(i);c.anchorNode==c.focusNode&&m-i>0&&n.splitText(m-i);h.selectNodeContents(n);f.setStartAfter(n);c.addRange(h)}c=document.createElement("em");c.id=
d;c.appendChild(document.createTextNode("\ufeff"));a.insertNode(c);if(c){d=Kb(c);a=d.top;d=d.left;if(this.direction=="normal"){var w=this.j;this.j.show().css({left:d+2,top:a+22}).show("fast",function(){setTimeout(function(){window.getSelection().toString().length==0&&w.hide()},0)})}else this.j.show().css({left:d,top:a-27}).show();this.shown=true;c.parentNode.removeChild(c)}}},hide:function(){this.j.hide();$("#diigolet-csm .diigolet-csm-color").animate({height:0},200);$("#diigolet-csm .diigolet-csm-coloritem").animate({height:0},
200);this.shown=false}},Z={j:null,ann:null,p:null,tempAnnId:null,showDelay:350,showTimer:null,hideDelay:350,hideTimer:null,shown:false,cancelShow:function(){clearTimeout(this.showTimer);this.showTimer=null},cancelHide:function(){clearTimeout(this.hideTimer);this.hideTimer=null},aboutToShow:function(){return this.shown||this.showTimer},aboutToHide:function(){return!this.shown||this.hideTimer},scheduleShow:function(a,c){var d=this,f=$(a.target).offset(),h=$(a.target).width(),i={pageX:a.pageX,pageY:a.pageY,
offsetTop:f.top,offsetLeft:f.left,width:h};d.cancelHide();d.cancelShow();d.showTimer=setTimeout(function(){d.show(i,c)},d.showDelay)},scheduleHide:function(){var a=this;a.cancelHide();a.cancelShow();a.hideTimer=setTimeout(function(){a.hide()},a.hideDelay)},init:function(){var a=this;a.create();setTimeout(function(){a.j.bind("mouseleave",function(){a.scheduleHide();if(a.p){a.p.scheduleHide();a.p.scheduleToggleEdit(false)}}).bind("mousemove",function(){a.cancelHide();if(a.p){a.p.cancelHide();a.p.cancelToggleEdit()}}).bind("mouseenter",
function(){a.cancelHide();if(a.p){a.p.cancelHide();a.p.cancelToggleEdit()}})},13);R("diigolet-annMenu-add").click(function(c){if(ka()){H.show_(c.pageX,c.pageY,a.ann,"add");c.preventDefault();return false}});R("diigolet-annMenu-share").on("click",function(c){Xb.show(a.ann,c.pageX,c.pageY);a.hide()});R("diigolet-annMenu-My").click(function(){x.openURL(x.urls.getUserBookmarksPageURL());return false});$("#diigolet-annMenu-color").on("click",function(c){c.preventDefault();$("#diigolet-annMenu-colorPicker").toggle();
return false});$("#diigolet-annMenu-more").on("click",function(c){c.preventDefault();$("#diigolet-annMenu-moreThings").toggle();return false});$("#diigolet-context-yellow,#diigolet-context-blue,#diigolet-context-green,#diigolet-context-pink").click(function(){var c=$(this).attr("color");if(!a.ann.extra||a.ann.extra=="undefined")a.ann.extra={color:c};else a.ann.extra.color=c;z.updateExtra(a.ann);a.ann.paint();var d="id_"+a.ann.id;if($("."+d).length>1){d=$("."+d)[0];$(d).scrollmarker()}else $("."+d).scrollmarker();
$(".ann-colorItem").removeClass("colorchecked");R("diigolet-annMenu-currentColor").removeClass("yellow blue green pink").addClass(c);$("#diigolet-context-"+c).addClass("colorchecked");return false});R("diigolet-annMenu-del").click(function(c){var d=a.ann;d.onlyInGroup||d.del();K(ma(d.groups,function(f){return f.name}),function(f){d.del(f)});a.hide();c.preventDefault();return false});R("diigolet-annMenu-copy-highlights").click(function(c){x.Messenger.send({name:"copy",details:{html:a.ann.content}});
a.hide();c.preventDefault();return false})},create:function(){this.j=$(gb).css({position:"absolute"}).hide().appendTo(va.body).hide()},show:function(a,c){if(c.id!=this.tempAnnId){this.cancelHide();this.cancelShow();da.shown&&da.hide();this.ann=c;this.buildMenu();this.j.hasClass("onlyMy")?this.j.css({left:curcorX-55,top:curcorY-35}).show():this.j.css({left:curcorX-31,top:curcorY-35}).show();this.shown=true;this.tempAnnId=c.id}},hide:function(){this.cancelHide();this.cancelShow();this.shown=false;this.j.hide();
$("#diigolet-annMenu-colorPicker").hide();$("#diigolet-annMenu-moreThings").hide();this.tempAnnId=null},buildMenu:function(){var a=this.ann;R("diigolet-annMenu-del").showHide(a.canDelete());if(a.user==k.user){$("._onlyMy").show();this.j.addClass("onlyMy")}else{$("._onlyMy").hide();this.j.removeClass("onlyMy")}$.each(k.defaultColors,function(c,d){R("diigolet-context-"+d).toggleClass("colorchecked",false)});if(a.extra&&a.extra.color&&a.extra.color.length>0){R("diigolet-annMenu-currentColor").removeClass("yellow blue green pink").addClass(a.extra.color);
R("diigolet-context-"+a.extra.color).toggleClass("colorchecked",true)}else R("diigolet-context-yellow").toggleClass("colorchecked",true);R("diigolet-annMenu-tip-before").show();R("diigolet-annMenu-tip").show();R("diigolet-annMenu-tip").html(this.tipMsg(a))},tipMsg:function(a){var c="#{MODE} #{WHAT} by #{REALNAME}",d={REALNAME:a.realName};d.WHAT=a.type==x.ANNOTATION_TYPE_FLOATNOTE?"floating sticky note":"highlight";d.MODE=a.isPublic()?"Public":a.isPrivate()?"Personal":"Group";if(a.inAnyGroups()){c+=
", shared to group #{GROUPS}";a=xb(ma(a.groups,function(f){return f.displayName}));d.GROUPS=a.length==1?a[0]:a.slice(0,a.length-1).join(", ")+" and "+a[a.length-1]}return W(c,d)}},ya={j:null,ann:null,showDelay:200,showTimer:null,hideDelay:300,hideTimer:null,editDelay:350,editTimer:null,shown:false,cancelShow:function(){clearTimeout(this.showTimer);this.showTimer=null},cancelHide:function(){clearTimeout(this.hideTimer);this.hideTimer=null},aboutToShow:function(){return this.shown||this.showTimer},
aboutToHide:function(){return!this.shown||this.hideTimer},scheduleShow:function(a,c){var d=this,f={screenX:a.screenX,screenY:a.screenY};d.cancelHide();d.cancelShow();d.showTimer=setTimeout(function(){d.show(f,c)},d.showDelay)},scheduleHide:function(){var a=this;a.cancelHide();a.cancelShow();a.hideTimer=setTimeout(function(){a.hide()},a.hideDelay)},hideCallback:function(){this.shown=false;this.ann=null;Z.aboutToShow()&&Z.scheduleHide()},showMenu:function(a,c,d){c.cancelHide();c.cancelToggleEdit();
if(c.ann)if(c.ann.comments.length==0)try{var f=Z.ann!=c.ann;Z.p=c;f||!Z.shown||d?Z.scheduleShow(a,c.ann):Z.cancelHide()}catch(h){throw h;}else{f=H.ann!=c.ann;H.isEditing()||((f||!H.shown)&&!d?H.scheduleShow(a,c.ann):H.cancelHide())}},reset:function(a){var c=this;this.removeEditMode();this.hide();this.ann=a;this.j=$("div."+T.HIGHLIGHT_ID_CLASS+a.id).bind("mouseout",function(){c.scheduleHide()}).bind("click",function(d){c.showMenu(d,c,true)}).bind("mousemove",function(d){c.showMenu(d,c,false)})},show:function(a,
c){da.shown&&da.hide();if(c.comments.length<=0)if(c.type==ja)this.j.css({top:-23});else{var d=c.getPageOffset();this.j.css({left:d.left,top:d.top})}this.j.show();this.shown=true},scheduleToggleEdit:function(a){try{var c=this;if(!(this.ann==null||this.ann.comments.length<=0))if(a){c.j=$("div."+T.HIGHLIGHT_ID_CLASS+c.ann.id);c.j.toggleClass("edit",true)}else{c.cancelToggleEdit();c.editTimer=setTimeout(function(){c.removeEditMode()},c.editDelay)}}catch(d){}},removeEditMode:function(){if(this.ann&&this.ann.comments.length>
0){this.j.toggleClass("edit",false);this.ann=null}},cancelToggleEdit:function(){clearTimeout(this.editTimer);this.editTimer=null},hide:function(){this.cancelHide();this.cancelShow();this.shown=false}};chrome.extension.onRequest.addListener(function(a,c,d){if(k.chromeExtensionID==c.id||a.name=="run")a.fromTabId&&k.chromeTabId==a.fromTabId||x.Messenger.onMessage(a,d);else if(a.name=="screenshot"||a.name=="qsavebookmark"||a.name=="readlater"||a.name=="qdeletebookmark"||a.name=="ifbookmark"||a.name==
"getCtx"||a.name=="saveImageToDiigo"||a.name=="prepareCtx"||a.name=="createList"||a.name=="contextmenuHighlight"||a.name=="SignedIn"||a.name=="bookmarkLoaded"||a.name=="share"||a.name=="refreshBookmarkInfo"||a.name=="googleSearchRecommend")x.Messenger.onMessage(a,d)});var N=x.Messenger={noop:function(){},send:function(a,c){a.tabId=k.chromeTabId;chrome.extension.sendRequest(a,c||this.noop)},onMessage:function(a,c){a.name!="dataURL"&&this.handlers[a.name](a,c)},handlers:{run:function(a){if(x.version!=
a.details.version){a=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5";alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),a]))}else{var c=a.details.type;if(x.ready&&c!="autoshow")if(J.shown)if(c=="stickynote"){x.stickyNoteByContextMenu=true;x.handlers.addStickyNote()}else{if(c!="highlight")if(c!="qsave"){J.hide();k.toggleSilent(true)}}else{J.show();k.toggleSilent(false);if(c=="stickynote"){x.stickyNoteByContextMenu=true;x.handlers.addStickyNote(true)}else c=="highlight"&&
x.handlers.highlight()}else x.chromeRun(a.details,a.details.type)}},signIn:function(a){a=a.details;try{var c=a.user;I("onSignIn",c||"username unknown","will loadMyStuff: ",false);k.bookmark.loaded||z.loadBookmark();k.reset();k.user=c;k.signedIn=true;Ka()}catch(d){}},signOut:function(){Eb()},notifyError:function(a){if(a.code==0)L.notifyAlert(chrome.i18n.getMessage("network_error"),{timeout:0});else a.code==500&&L.notifyAlert(chrome.i18n.getMessage("server_error"),{timeout:0});N.send({name:"bookmarkChanged",
details:{saved:k.bookmark.saved}})},checkVersion:function(){N.send({name:"initialData"},function(a){if(x.version!=a.version){a=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5";alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),a]))}})},saveBookmarkSuccess:function(a){var c=k.bookmark,d=a.ctx;c.title=d.title;c.tags=d.tags;c.mode=d.mode;c.unread=d.unread;c.description=d.description;c=d.tags;c.length>0&&Q.setUserData({tagsUsedLastTime:JSON.stringify(c.slice(0,8))});
z.cb_bm_saveBookmark_success(a.data,"qsave",a.ctx.tabId);d.cache&&ua.uploadCache({groups:d.toShareToGroups})},globalDataChanged:function(a){a=a.details.changes;V(k,a);a.myTags&&Cb();a.myGroups&&P.updateGroups();a.myBmLists&&P.updateLists();a.myContacts&&S.onMyContactsUpdate();a.permissions&&Ra.onPrivilegeChange()},bookmarkLoaded:function(a){k.bookmark.loaded||z.cb_bm_loadBookmark_success(a.details)},prepareCtx:function(){N.send({name:"initialData"},function(a){Q.updateCache(a.preloadedPrefs);k.reset(a);
k.signedIn&&a.shoudLoadMyStuff&&z.loadMyStuff();if(a.loadBookmarkResult){I("[bookmark info already loaded]",a.loadBookmarkResult);z.cb_bm_loadBookmark_success(a.loadBookmarkResult,"prepareCtx")}else a.shouldLoadBookmarkByMyself&&k.signedIn&&z.loadBookmark()})},myStuffLoaded:function(a){z.cb_user_loadMyStuff_success(a.details)},twitterSignIn:function(a){S.tabs.twitter.onTwitterSignIn(a.details)},twitterSignOut:function(){S.tabs.twitter.onTwitterSignOut()},prefsChanged:function(a){Q.updateCache(a.details)},
uploadDidSucceed:function(a){ua.uploadDidSucceed(a.details)},uploadDidFail:function(a){ua.uploadDidFail(a.details)},example:function(a){S.tabs.twitter.onTwitterSignIn(a.details)},screenshot:function(){wa.initSelectedCapture()},qsavebookmark:function(){k.bookmark=la.fromDocument();z.saveBookmark(null,function(){},"qsave")},savebookmark:function(a){x.Messenger.send({name:"updateBrowserActionIconToDoing"});var c=a.data;k.bookmark.description=c.description;k.bookmark.mode=c.mode;k.bookmark.toShareToGroups=
c.shareGroups;k.bookmark.toAddToBookmarkLists=c.shareLists;k.bookmark.toShareExistingAnnotations=c.shareAnnotations;k.bookmark.tags=c.tags;c.tags.length>0&&Q.setUserData({tagsUsedLastTime:JSON.stringify(c.tags.slice(0,8))});k.bookmark.title=c.title;k.bookmark.url=c.url;k.bookmark.unread=c.unread;var d=function(){};a.cache&&function(f){d=function(){I("[DlgBookmark] bookmark saved. will upload cache");ua.uploadCache({groups:f})}}(k.bookmark.toShareToGroups);z.saveBookmark(null,d,"qsave")},readlater:function(a){if(ka()){a=
a.ifUnread;if(k.bookmark)k.bookmark.unread=a?false:true;else k.bookmark=la.readlater();a=function(){};k.bookmark.unread==true?z.saveBookmark(null,a,"readlater"):z.saveBookmark(null,a)}},share:function(){La(window.location.href)?N.send({name:"initialData"},function(a){xa(a.extensionID);if(x.version!=a.version){a=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5";alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),a]))}else{L.init();ia();S.init();S.show()}}):alert(chrome.i18n.getMessage("alertUnsupportedPage"))},
contextmenuHighlight:function(){ka()&&x.handlers.highlight()},contextmenuStickynote:function(){ka()&&x.handlers.addStickyNote()},refreshBookmarkInfo:function(){N.send({name:"initialData"},function(a){k.generated=false;z.cb_bm_loadBookmark_success(a.loadBookmarkResult);k.bookmark.title=document.title;if($("#diigolet-panel-panel").length>0){J.hide();J.updateUI();P.hide();P.syncData("data->form")}if($("#diigo-orphanHighlight").length>0){$("#diigo-orphanHighlight").remove();Ib.init()}})},googleSearchRecommend:function(a){a=
a.googleSearchKeyWord;I(a);if(a!=undefined){if(/\+/.test(a)){a=a.split("+");if(a.length>5)k.googleSearchSentence=a.join(" ");else k.keywords=a}else if(/\s/.test(a)){a=a.split(" ");if(a.length>5)k.googleSearchSentence=a.join(" ");else k.keywords=a}else k.keywords.push(a);I(k.keywords)}},createList:function(a){z.createList(a.data)},refreshMyStuff:function(){z.loadMyStuff("myGroups myBookmarkLists")},loadGroupTagsDictionary:function(a){z.loadGroupTagsDictionary([a.groupName])},makeSnapshot:function(){ua.makeSnapshot()},
showWindow:function(a){if(La(window.location.href)){if(ka()){if("data"in a)var c=a.data.linkTitle==null?x.templinkTitle:a.data.linkTitle,d=a.data.url;if($("#diigolet-panel-panel").length==0){L.init();ia();N.send({name:"initialData"},function(f){if(x.version!=f.version){f=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5";alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),f]))}else if(x.version==f.version){xa(f.extensionID);Q.updateCache(f.preloadedPrefs);ua.makeSnapshot();
ia();K([J,P,H,da,Z,S],function(h){h.init()});J.show();P.show(c,d);J.hide();Ka();Va();rb.afterRun()}})}else P.show(c,d)}}else alert(chrome.i18n.getMessage("alertUnsupportedPage"))},qdeletebookmark:function(){if(!k.isAnnotated()||confirm("Removing this as a bookmark will also remove your annotations on this page. Do you want to continue?")){z.deleteBookmark(k.bookmark);P.hide();J.hide()}},saveImageToDiigo:function(a){if(La(window.location.href))if(!k.permissions.premium||k.permissions.image){if(ka()){var c=
a.data,d=document.title,f=window.location.href,h=[],i=document.title,m=a.dtype;if(a.type=="tag")wa.showSavePupop("image",c,m);else if(a.type=="attach"){z.uploadImage({dataURL:c,title:d,tags:h,mode:2,src_url:f,src_title:i,single_item:false},"image",false,f,{},m,"",true);xa(chrome.runtime.id);ia();L.init();L.notifyWait(chrome.i18n.getMessage("uploadimage_uploading"))}}}else{sa.init();sa.show("Save images")}else alert(chrome.i18n.getMessage("alertUnsupportedPage"))},ifbookmark:function(){N.send({name:"initialData"},
function(a){Q.updateCache(a.preloadedPrefs);if(k.generated!=true){k.reset(a);k.signedIn&&a.shoudLoadMyStuff&&z.loadMyStuff();if(a.loadBookmarkResult){I("[bookmark info already loaded]",a.loadBookmarkResult);z.cb_bm_loadBookmark_success(a.loadBookmarkResult)}else a.shouldLoadBookmarkByMyself&&k.signedIn&&z.loadBookmark()}chrome.extension.sendRequest({name:"isSaved",data:{saved:k.bookmark.saved,unread:k.bookmark.unread}});var c=k.bookmark,d=window.getSelection().toString();Q.getUserData("tagsUsedLastTime",
function(f){f=f?JSON.parse(f):[];chrome.extension.sendRequest({name:"sendCtx",data:{generated:k.generated,bm:c,lists:k.myBmLists,groups:k.myGroups,mytag:k.myTags,myTagsWithCount:k.myTagsWithCount,permissions:k.permissions,selection:d,lastUsedTags:f,isAnnotated:k.annotations.length>0}})})})},getCtx:function(){var a=k.bookmark,c=window.getSelection().toString();Q.getUserData("tagsUsedLastTime",function(d){d=d?JSON.parse(d):[];chrome.extension.sendRequest({name:"sendCtx",data:{generated:k.generated,
bm:a,lists:k.myBmLists,groups:k.myGroups,mytag:k.myTags,myTagsWithCount:k.myTagsWithCount,permissions:k.permissions,selection:c,lastUsedTags:d,isAnnotated:k.annotations.length>0}})})},getRecommendedTags:function(){if(k.recommendedTagsLoaded)chrome.extension.sendRequest({name:"sendRetags",data:k.recommendedTags});else{var a=k.bookmark;z.loadRecommendedTags(a.url,a.getTitle(),function(){chrome.extension.sendRequest({name:"sendRetags",data:k.recommendedTags})})}},getGroupTags:function(a){var c=a.groupName;
k.groupTagsDict[c]?chrome.extension.sendRequest({name:"sendGtags",data:k.groupTagsDict[c]}):z.loadGroupTagsDictionary([c],function(){chrome.extension.sendRequest({name:"sendGtags",data:k.groupTagsDict[c]})})},redirect:function(a){window.location.href=a.url}}},Q={cache:{},updateCache:function(a){var c=this;K(a,function(d,f){c.cache[f]=d})},getFromCache:function(a,c){var d=this.cache[a];if(c=="b")d=d=="true";else if(c=="n")d=Number(d);return d},get:function(a,c){N.send({name:"getPrefs",details:{keys:a}},
c)},set:function(a,c){N.send({name:"setPrefs",details:{data:a}},c)},getUserData:function(a,c){N.send({name:"getUserData",details:{keys:a}},c)},setUserData:function(a,c){N.send({name:"setUserData",details:{data:a}},c)}};Q.get("prefs.autoloadBookmarkStatus",function(a){if(a=="true"){k.autoLoad=true;N.send({name:"initialData"},function(c){Q.updateCache(c.preloadedPrefs);k.reset(c);k.signedIn&&c.shoudLoadMyStuff&&z.loadMyStuff();if(c.loadBookmarkResult){I("[bookmark info already loaded]",c.loadBookmarkResult);
z.cb_bm_loadBookmark_success(c.loadBookmarkResult,"prepareCtx")}else c.shouldLoadBookmarkByMyself&&k.signedIn&&z.loadBookmark()})}else N.send({name:"initialData"},function(c){k.user=c.globalData.user;k.realName=c.globalData.realName})});N.send({name:"getLastFocusedWindow"});Q.get("prefs.autoImageClipper",function(a){if(window.location.hostname!="maps.google.com")if(a=="true"){L.init();xa(chrome.runtime.id);ia();ra.init();qb=ra.diigoImageClipMode=true}});Q.get("prefs.autoShowHighlightIcon",function(a){I(window.location.hostname);
if(!(window.location.hostname=="mail.google.com"||window.location.hostname=="docs.google.com"))if(a=="true"){k.autoShowHighlightIcon=true;if(La(window.location.href))if(k.autoShowHighlightIcon==true){Gb();$(document).ready(function(){Gb()})}}});$(document).bind("keydown",function(a){Q.get(["prefs.shortcutBookmark","prefs.shortcutBookmarkCtrl","prefs.shortcutBookmarkAlt","prefs.shortcutBookmarkKey","prefs.shortcutReadlater","prefs.shortcutReadlaterCtrl","prefs.shortcutReadlaterAlt","prefs.shortcutReadlaterKey",
"prefs.shortcutAnnotate","prefs.shortcutAnnotateCtrl","prefs.shortcutAnnotateAlt","prefs.shortcutAnnotateKey"],function(c){if(c)if(c["prefs.shortcutBookmark"]=="true"&&Ma(c["prefs.shortcutBookmarkCtrl"])==a.ctrlKey&&Ma(c["prefs.shortcutBookmarkAlt"])==a.altKey&&String.fromCharCode(a.keyCode)==c["prefs.shortcutBookmarkKey"])N.send({name:"initialData"},function(d){if(x.version!=d.version){d=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5";alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),
d]))}else{L.init();ia();if(d.globalData.user=="")k.notify(Ga,1E3);else{k.generated==false&&z.cb_bm_loadBookmark_success(d.loadBookmarkResult,"prepareCtx");Q.updateCache(d.preloadedPrefs);ua.makeSnapshot();if($("#diigolet-panel-panel").length==0){K([J,P,H,da,Z,S],function(f){f.init()});J.show();P.show();J.hide()}else P.show();x.ready=true;Ka()}}});else if(c["prefs.shortcutReadlater"]=="true"&&Ma(c["prefs.shortcutReadlaterCtrl"])==a.ctrlKey&&Ma(c["prefs.shortcutReadlaterAlt"])==a.altKey&&String.fromCharCode(a.keyCode)==
c["prefs.shortcutReadlaterKey"])N.send({name:"initialData"},function(d){if(x.version!=d.version){d=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5";alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),d]))}else{L.init();ia();if(d.globalData.user=="")k.notify(Ga,1E3);else{k.generated==false&&z.cb_bm_loadBookmark_success(d.loadBookmarkResult,"prepareCtx");if(k.bookmark)k.bookmark.unread=true;else k.bookmark=la.readlater();z.saveBookmark(null,function(){},"readlater")}}});
else c["prefs.shortcutAnnotate"]=="true"&&Ma(c["prefs.shortcutAnnotateCtrl"])==a.ctrlKey&&Ma(c["prefs.shortcutAnnotateAlt"])==a.altKey&&String.fromCharCode(a.keyCode)==c["prefs.shortcutAnnotateKey"]&&N.send({name:"initialData"},function(d){if(x.version!=d.version){d=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5";alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),d]))}else{L.init();ia();if(d.globalData.user=="")k.notify(Ga,1E3);else{k.generated==false&&z.cb_bm_loadBookmark_success(d.loadBookmarkResult,
"prepareCtx");if($("#diigolet-panel-panel").length==0){K([J,P,H,da,Z,S],function(f){f.init()});J.show();Va();rb.afterRun();x.ready=true;Ka()}else{J.show();k.toggleSilent(false)}k.unpaintAllAnnotations();k.paintAllAnnotations();M.sort();J.adjustPosition()}}})})});$(document).on("mousedown","a",function(a){if(a.which==3)x.templinkTitle=$(a.target).text()});$(document).on("mousedown",function(a){if(a.which==3)x.rightClickPos={x:a.pageX,y:a.pageY}});var L={j:null,init:function(){var a=this;if(!a.inited){a.inited=
true;a.create();Pa("info alert OK wait").forEach(function(c){a["notify"+c[0].toUpperCase()+c.substr(1)]=function(d,f){return a.notify(d,c,f)}})}},create:function(){(this.j=$(kb).eq(0).appendTo(document.body).hide()).children().eq(0).siblings().remove()},destroy:function(){this.j.remove()},hide:function(){this.j.hide()},notify:function(a,c,d){d=d||{};var f=this.j;d=d.timeout==undefined?4E3:d.timeout;f.children("div:first").attr("class",c).children("p:first").html(a);f.show();f.children("div:first").children("p:first").children("a").click(function(){window.open("http://www.diigo.com/sign-in?referInfo="+
encodeURIComponent("/images/diigo-logo.png#SIGNED_IN"))});f.children("div:first").children("span:first").click(function(){f.fadeOut()});if(f[0].timerId){clearTimeout(f[0].timerId);f[0].timerId=null}if(d)f[0].timerId=setTimeout(function(){f.fadeOut("slow")},d)}},sa={j:null,k:null,shown:false,init:function(){this.create()},create:function(){this.j=$('<div id="diigo-premium-warning"><div id="diigo-premium-warning-content"><div id="diigo-premium-warning-main"><div id="diigo-premium-warning-icon"></div><div id="diigo-premium-warning-text"><p><b>Screen captures</b> ran out of free plan.</p><p>Please support us with a <a href="http://www.diigo.com/premium"target="_blank">premium plan</a>.</p></div></div><div id="diigo-premium-warning-bottom"><div id="diigo-go-premium"class="diigo-premium-warning-btn"></div><div id="diigo-premium-warning-cancel"class="diigo-premium-warning-btn"></div></div></div></div>').eq(0).appendTo(document.body.parentNode).hide();
this.k=$('<div id="diigo-premium-warning-wrapper"></div>').eq(0).appendTo(document.body.parentNode).hide()},destroy:function(){this.k.remove();this.j.remove();this.shown=false},show:function(a){var c=this;if(c.shown!=true){var d=document.body.scrollWidth;c.k.css("height",document.body.scrollHeight).css("width",d).show();$("#diigo-premium-warning-text p b").text(a);a=(window.screen.availHeight-356)/2+document.body.scrollTop;this.j.css("left",(window.screen.availWidth-356)/2+"px").css("top",a+"px");
c.j.show();c.shown=true;$("#diigo-go-premium").click(function(){window.open("https://www.diigo.com/premium")});$("#diigo-premium-warning-cancel").click(function(){c.destroy()})}}},tb={};tb.Class={create:function(a,c){function d(){this.initialize.apply(this,arguments)}if(arguments.length==1&&typeof a!="function"){c=a;a=null}d.superclass=a;d.subclasses=[];if(a){var f=function(){};f.prototype=a.prototype;d.prototype=new f;a.subclasses.push(d)}c&&tb.Class.extend(d,c);if(!d.prototype.initialize)d.prototype.initialize=
function(){};return d.prototype.constructor=d},extend:function(a,c){var d=a.superclass&&a.superclass.prototype;for(var f in c){var h=c[f];if(d&&typeof h=="function"&&F.func.argumentNames(h)[0]=="$super"){var i=h;h=F.extend(F.func.wrap(function(m){return function(){return d[m].apply(this,arguments)}}(f),i),{valueOf:function(){return i},toString:function(){return i.toString()}})}a.prototype[f]=h}return a}};var ca=tb.Class.create({initialize:function(a){var c=this;if(a.maxRecipients){c.maxRecipients=
a.maxRecipients;c.maxRecipientsTipTemp="MAX Recipients "+c.maxRecipients}c.scanType=a.scanType||"all";c.maxHeight=a.maxHeight||200;c.width=a.width||414;c.recItemsId=[];c.tipTemp="Start typing a friend's name or email address.";c.recBox=$(a.rec);c.recBox.css({font:"12px verdana",padding:"0 0 2px 2px",width:c.width});if(!c.recInput){c.recInput=$('<input class="recInput" maxlength=255/>');c.recBox.append(c.recInput);c.recInputSizer=$('<div class="recInputSizer"/>');c.recBox.append(c.recInputSizer);var d=
$("<div />");d.css({clear:"both"});c.recBox.append(d)}c.setContacts(a.contacts,true);if(!c.tip){c.tip=$("<div />");c.tip.css({width:c.recBox.width()-2+"px"});c.recBox.parent().append(c.tip);c.tip.hide()}if(!c.contactList){c.contactList=$("<div class='accList'/>");c.contactList.css({width:c.recBox.width()-2+"px"});c.contactListInner=$("<div />");c.contactListInner.css({position:"relative",overflow:"auto",padding:"2px"});c.contactList.append(c.contactListInner);c.recBox.parent().append(c.contactList);
c.contactList.hide()}c.recBox.click(function(){c.recInput.css({visibility:"visible"});c.recInput.trigger("focus")});c.recBox.reset=function(){c.recInput.trigger("blur");c.recBox.find(".recItem").each(function(){$(this).remove()});c.recItemsId.length=0};c.recInput.focus(function(){c.showTip();c.recInput.reset();c.currentItem=-1});c.recInput.reset=function(){c.recInput.val("");var f=ca.getTextSize(c.recInput.val(),c.recInputSizer);c.recInput.css({width:f+30+"px",visibility:"visible"})};c.recInput.blur(function(){c.wrapItem();
c.hideTip();c.recInput.css({visibility:"hidden"});setTimeout(function(){c.hideContacts()},300)});c.recInput.keydown(function(f){var h;if(window.event)h=window.event.keyCode;else if(f)h=f.which;switch(h){case 9:case 40:c.hoverItem(c.currentItem+1);return false;case 38:c.hoverItem(c.currentItem-1);return false;case 8:if(c.recInput.val()==""&&c.recInput.prev()){f=c.recInput.prev().attr("cIndex");$("#recItemRemove_"+f).trigger("click")}break;case 13:c.wrapItem();c.recInput.reset();c.hideContacts();c.showTip();
return false;case 32:c.wrapItem();c.recInput.reset();c.hideContacts();c.showTip();return false}f=ca.getTextSize(c.recInput.val(),c.recInputSizer);if(f>c.recBox.width()-50)f=c.recBox.width()-50;c.recInput.css({width:f+30+"px"})});c.recInput.keyup(function(f){f=f.keyCode;if(f<=105&&f>=48||f==8)c.scanContacts()})},clearAll:function(){this.recBox.reset()},setContacts:function(a,c){c||this.clearAll();a=JSON.parse(JSON.stringify(a));ca.contacts=a;ca.contactListsID=[];for(var d=0;d<ca.contacts.length;d++)ca.contacts[d].type==
"list"&&ca.contactListsID.push(d)},showNotice:function(){this.tip.attr({"class":"accNotice"});this.tip.html(this.maxRecipientsTipTemp);this.tip.css({width:this.recBox.width()-2+"px"});this.tip.show()},showTip:function(){this.tip.attr({"class":"accTip"});this.tip.html(this.tipTemp);this.tip.css({width:this.recBox.width()-2+"px"});this.tip.show()},hideTip:function(){this.tip.hide()},scanContacts:function(){this.match=[];var a=this.recInput.val().replace(/\s+/g,"&");if(a.length<=0){this.hideContacts();
return false}a=RegExp("&"+a,"i");for(var c=0;c<ca.contacts.length;c++){var d="",f=ca.contacts[c];if(!(this.scanType!="all"&&this.scanType!=f.type)){switch(f.type){case "list":d="&"+f.extra.title.replace(/\s+/,"&")+"&"+f.extra.note;break;case "friend":d="&"+f.extra.real_name.replace(/\s+/,"&")+"&"+f.id;break;case "user":d="&"+f.id.replace(/\s+/,"&")+"&"+f.extra.email;break;case "email":d="&"+f.id;break}a.test(d)&&this.match.push(c)}}this.match.length>0?this.showContacts():this.hideContacts()},showContacts:function(){this.recInput.val();
this.contactListInner.html("");this.contactListInner.css({height:"auto",width:this.recBox.width()-6+"px"});for(var a=this,c=0;c<this.match.length;c++){var d=this.match[c],f=ca.contacts[d],h=$("<div id=cI_"+c+' class="cItem"/>');switch(f.type){case "list":h.html("<b><i>list</i>"+this.h(f.extra.title)+"</b>"+f.extra.note);break;case "friend":str="<b>"+this.h(f.extra.real_name)+"</b><span class='extraDesc'>(";if(f.id)str+=this.h(f.id)+" on Diigo";if(f.extra.location)str+=", "+f.extra.location;if(f.extra.sex)str+=
" "+f.extra.sex;str+=")</span>";h.html(str);break;case "user":h.html("<b>"+this.h(f.extra.email)+"</b>");break;case "email":h.html("<b>"+this.h(f.id)+"</b>");break}h.attr("cIndex",d);h.bind("mouseover",{index:c},function(i){a.hoverItem(i.data.index)});h.bind("mouseout",{index:c},function(i){a.outItem(i.data.index)});h.click(function(){a.wrapItem()});this.contactListInner.append(h)}this.contactList.show();this.contactListInner.height()>this.maxHeight&&this.contactListInner.css({height:this.maxHeight+
"px"});this.hoverItem(0)},hideContacts:function(){this.contactList.hide();this.currentItem=-1},h:function(a){if(a.length<=0)return"";var c=this.recInput.val();return a.replace(eval("/"+c+"/i"),"<span class='keywordStrong'>"+c+"</span>")},hoverItem:function(a){this.currentItem>=0&&this.outItem(this.currentItem);this.currentItem=a>this.match.length-1?this.match.length-1:a<-1?-1:a;var c=$("#cI_"+this.currentItem);if(c[0]){c[0].className+=" hover";if(this.currentItem==0){this.contactListInner[0].scrollTop=
0;return false}if(this.currentItem==this.match.length-1){this.contactListInner[0].scrollTop=2E3;return false}a=this.contactListInner[0].scrollTop;var d=a+this.contactListInner.height(),f=c.offset().top;c=f+c.height();if(f<a)this.contactListInner[0].scrollTop-=a-f;else if(c>d)this.contactListInner[0].scrollTop+=c-d}},outItem:function(a){if(this.currentItem>=0){var c=$("#cI_"+this.currentItem);if(c[0])c[0].className=c[0].className.replace(/\s?hover/gi,"")}this.currentItem=-1;a=$("#cI_"+a);if(a[0])a[0].className=
a[0].className.replace(/\s?hover/gi,"")},wrapItem:function(a){if(typeof a=="undefined"){a=this.recInput.val();if(a.length<=0){this.currentItem=-1;return false}if(this.currentItem==-1){emailR=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;emailR.test(a)?ca.contacts.push({type:"email",id:a}):ca.contacts.push({type:"friend",id:a,extra:{real_name:a}});a=ca.contacts.length-1}else a=$("#cI_"+this.currentItem).attr("cIndex")}var c=ca.contacts[a];if(this.recItemsId.indexOf(a)!=-1){this.hideContacts();this.recBox.trigger("click");
return false}if(this.maxRecipients&&this.recItemsId.length>this.maxRecipients){this.hideContacts();this.showNotice();return false}var d="";if(c)switch(c.type){case "list":d="<i>list</i>"+c.extra.title;break;case "friend":d=c.extra.real_name;break;case "user":d=c.extra.email;break;case "email":d=c.id;break}c=$('<span class="recItem" id="recItem_'+a+'"></span>').html(d);d=$('<a class="recItemRemove" href="javascript:void(0);" id="recItemRemove_'+a+'"></a>').html("x");c.append(d);c.attr("cIndex",a);
c.insertBefore(this.recInput);var f=this;$("#recItemRemove_"+a).bind("click",{index:a},function(h){f.removeRecItem(h.data.index)});this.recBox.trigger("click");this.recItemsId.push(a)},removeRecItem:function(a){$("#recItem_"+a).remove();this.recItemsId=this.recItemsId.slice(a,1);this.recBox.trigger("click")},getRecItems:function(){if(!this.recItemsId||this.recItemsId.length==0)return null;else{for(var a=[],c=[],d=[],f=0;f<this.recItemsId.length;f++){var h=ca.contacts[this.recItemsId[f]];switch(h.type){case "friend":a.push(h.id);
break;case "list":d.push(h.id);break;case "user":c.push(h.extra.email);break;case "email":c.push(h.id);break}}return{friends:a,emails:c,lists:d}}},setDefault:function(a){this.wrapItem(a)},getRecOriItems:function(){if(!this.recItemsId||this.recItemsId.length==0)return null;else{for(var a=[],c=0;c<this.recItemsId.length;c++)a.push(ca.contacts[this.recItemsId[c]]);return a}}});ca.getTextSize=function(a,c){c.innerHTML=a.replace(/ /g,"&nbsp;");return c.offsetWidth>500?500:c.offsetWidth};var Aa={cache:{},
get2:function(a,c,d){var f=this,h;if(h=f.cache[c]){d&&d(h);return h}else z.makeAnnotatedLink(a,c,function(i){if(d)d(f.cache[c]=i.url)})},get:function(a,c){return this.get2(a,3,c)}},S={shown:false,j:null,tabs:{},init:function(){if(!($("#diigolet-dialog-share").length>0)){var a=this;a.create();$(window).resize(function(){a.shown&&a.adjustPosition()});K(a.tabs,function(c){c.init()})}},destroy:function(){},onSignIn:function(){this.updateUI()},onSignOut:function(){this.hide()},adjustPosition:function(){var a=
this.j,c=$(window),d=c.width();c=c.height();var f=parseInt(a.css("left")),h=parseInt(a.css("top")),i=a.outerWidth(),m=a.outerHeight();if(d<f+i)a.css("left",f=d-i);if(c<h+m)a.css("top",h=c-m);h<0&&a.css("top",1);f<0&&a.css("left",1)},show:function(){var a=this;a.shown||Q.get("share.lastOpenedTab",function(c){a.shown=true;a.j.show();a.adjustPosition();a.changeTab(c||"twitter")})},hide:function(){if(this.shown){this.shown=false;this.j.hide();K(this.tabs,function(a){a.shown=false})}},updateUsername:function(){},
updateUI:function(){},create:function(){var a=this,c=a.j=$(jb).eq(0).appendTo(document.body).hide();$("#diigolet-dialog-share-closeBtn").click(function(){a.hide()});c.css("left",($(window).width()-c.outerWidth())/2);$("#diigolet-share-shareToTabs li a").click(function(){a.changeTab($(this).attr("diigotab"))});new $.Draggable(c,{handle:"._dragHandle",afterDrag:function(){a.adjustPosition()}})},changeTab:function(a){if(this.tab){$("#diigolet-share-tab-"+this.tab).removeClass("current");$("#diigolet-dialog-share-"+
this.tab).hide()}$("#diigolet-share-tab-"+a).addClass("current");$("#diigolet-dialog-share-"+a).show();this.tab=a;this.tabs[a].show();Q.set({"share.lastOpenedTab":a})}};S.tabs.twitter={connectedToTwitter:false,init:function(){var a=this;a.j=$("#diigolet-dialog-share-twitter");a.jMsg=$("#diigolet-dialog-share-twitterMsg").val("").bind("input",$.proxy(a.updateCountDown,a));a.j.find("#diigolet-twitter-cancelBtn").click(function(){S.hide()});a.j.find("#diigolet-twitter-saveBtn").click(function(){a.trySend()});
$("#diigolet-dialog-share-twitter-signedIn>a").click(function(){N.send({name:"twitterChangeUser"});return false});$("#diigolet-dialog-share-twitter-notSignedIn").click(function(){N.send({name:"twitterConnect"});return false})},show:function(){var a=this;if(!a.shown){a.shown=true;a.jMsg.val("Preparing for your tweet. Please wait...");a.defaultMsg();N.send({name:"twitterCheckAuthentication"},function(c){a.updateTwitterSignInStatus(c)})}},updateTwitterSignInStatus:function(a){this.connectedToTwitter=
!!a;$("#diigolet-dialog-share-twitter-signedIn").toggle(!!a);$("#diigolet-dialog-share-twitter-notSignedIn").toggle(!a);a&&$("#diigolet-dialog-share-twitter-signedIn>span").text(a.screen_name)},updateCountDown:function(){var a=140-this.jMsg[0].value.length;$("#diigolet-share-twitterLeftChars").text(a).toggleClass("full",a<=0)},defaultMsg:function(){function a(m){c.shortenUrl(m,function(n){c.jMsg.val(c.composeMessage(f,n,h));c.updateCountDown()})}var c=this,d=k.bookmark,f=d.title,h=d.description,i=
d.url;k.pageComments.length>0||k.annotations.length>0?Aa.get(d.url,function(m){c.jMsg.val(c.composeMessage(f,m,h));c.updateCountDown()}):a(i);c.updateCountDown()},composeMessage:function(a,c){return a+" "+c},shortenUrl:function(a,c){N.send({name:"shortenUrl",details:{url:a}},c)},trySend:function(){if(!this.connectedToTwitter){(function(c){c=$(c);for(var d=0;d<3;d++)c.fadeOut(150).fadeIn(150)})("#diigolet-dialog-share-twitter-notSignedIn");return false}var a=Ia(this.jMsg.val());if(a.length>140){alert("Your message is too long!");
return false}else if(a.length==0){alert("Please input message!");return false}L.notifyInfo("Sending your tweet...");N.send({name:"twitterSend",details:{status:a}},function(c){I(c);c&&c.id?L.notifyOK("Your tweet is sent!"):L.notifyAlert("An error has occurred. Your tweet was not sent.")})},onTwitterSignIn:function(a){this.updateTwitterSignInStatus(a)},onTwitterSignOut:function(){this.updateTwitterSignInStatus(null)}};S.tabs.facebook={init:function(){},show:function(){Aa.get(k.bookmark.url,function(){var a=
k.bookmark.getTitle();N.send({name:"openWindow",details:{url:"http://www.facebook.com/sharer.php?src=bm&v=4&i=1267884404&"+Ub({u:k.bookmark.url,t:a}),name:"sharer",features:"toolbar=0,status=0,resizable=1,width=626,height=436"}})})}};S.tabs.gPlus={init:function(){},show:function(){Aa.get(k.bookmark.url,function(a){N.send({name:"openWindow",details:{url:"https://plus.google.com/share?url="+a,name:"sharer",features:"toolbar=1,status=0,resizable=1,scrollbars=1,width=700,height=453"}})})}};S.tabs.gBuzz_viaGoogleReaderDeprecated=
{init:function(){this.jframe=$("#diigolet-dialog-share-gBuzz>iframe")},show:function(){function a(){var d=window.getSelection();if(d.rangeCount>0){var f=document.createElement("div");f.appendChild(d.getRangeAt(0).cloneContents());return f.innerHTML}return""}function c(d){var f=k.bookmark.getTitle(),h={url:k.bookmark.url,title:f,srcUrl:x.urls.getUserBookmarksPageURL(),srcTitle:"Diigo",snippet:""};if(d)h.snippet+=x.AnnotationFormatter.format({mode:1});h.snippet+=a()+"<br/>";if(d)h.snippet+=W('<a style="padding-left:2em;" title="#{0}" href="#{1}">#{2}</a><br />',
[f,d,"View the annotated version on Diigo"]);var i=$('<form action="http://www.google.com/reader/link" method="POST" accept-charset="utf-8"></form>').attr({target:"diigolet-GR________link_bookmarklet_frame"}).appendTo(document.body);$.each(h,function(m,n){var w=document.createElement("input");$(w).attr({type:"hidden",name:m,value:n}).appendTo(i)});i.submit().remove()}this.jframe.attr("src",chrome.extension.getURL("share-gbuzz-loading.html"));k.pageComments.length>0||k.annotations.length>0?Aa.get(k.bookmark.url,
function(d){c(d)}):c(null)}};S.tabs.gBuzz={init:function(){this.jframe=$("#diigolet-dialog-share-gBuzz>iframe")},show:function(){function a(){var d=window.getSelection();if(d.rangeCount>0){var f=document.createElement("div");f.appendChild(d.getRangeAt(0).cloneContents());return f.innerHTML}return""}function c(d){var f=k.bookmark.getTitle(),h={url:k.bookmark.url,title:f,srcUrl:x.urls.getUserBookmarksPageURL(),srcTitle:"Diigo",snippet:""};if(d)h.snippet+=x.AnnotationFormatter.format({mode:1});h.snippet+=
a()+"<br/>";if(d)h.snippet+=W('<a style="padding-left:2em;" title="#{0}" href="#{1}">#{2}</a><br />',[f,d,"View the annotated version on Diigo"]);var i=$('<form action="http://www.google.com/reader/link" method="POST" accept-charset="utf-8"></form>').attr({target:"diigolet-GR________link_bookmarklet_frame"}).appendTo(document.body);$.each(h,function(m,n){var w=document.createElement("input");$(w).attr({type:"hidden",name:m,value:n}).appendTo(i)});i.submit().remove()}this.jframe.attr("src",chrome.extension.getURL("share-gbuzz-loading.html"));
k.pageComments.length>0||k.annotations.length>0?Aa.get(k.bookmark.url,function(d){c(d)}):c(null)}};S.tabs.email={init:function(){var a=this;a.j=$("#diigolet-dialog-share-email");a.jCheckQuotes=$("#diigolet-dialog-share-email-quotes-checker>input");a.jTxtTo=$("#diigolet-dialog-share-email-to");a.jSubject=$("#diigolet-dialog-share-email-subject");a.jTxtMsg=$("#diigolet-dialog-share-email-message");a.jQuotes=$("#diigolet-aidlog-share-email-quotes-content");a.j.find("#diigolet-email-cancelBtn").click(function(){S.hide()});
a.j.find("#diigolet-email-saveBtn").click(function(){a.trySend()});a.jCheckQuotes.attr("checked","checked").change(function(){if($(this).is(":checked")){a.preview();a.jQuotes.parent().show()}else a.jQuotes.parent().hide()})},show:function(){this.jTxtTo[0].focus();this.jSubject.val(k.bookmark.getTitle());this.jCheckQuotes.change();if(!this.pikuInited){this.initAutocompleteContacts();this.pikuInited=true}},preview:function(){var a=this,c=a.jCheckQuotes.is(":checked");a.jQuotes.html(c?a.composeMessage():
"");if(c)k.pageComments.length>0||k.annotations.length>0?Aa.get(k.bookmark.url,function(d){a.updateURL(d)}):a.updateURL(k.bookmark.url)},updateURL:function(a){I("[Share] updating annotated link",a);this.jQuotes.find("a.diigoAnnotatedLink").attr("href",a)},composeMessage:function(a){var c="";if(a)c+="<p>"+a+"</p>";if(!this.jCheckQuotes.is(":checked"))return c;a=k.pageComments.length>0||k.annotations.length>0?Aa.get(k.bookmark.url)||"DIIGO_PERMALINK":k.bookmark.url;a=W('<p><a class="diigoAnnotatedLink" href="#{1}" title="#{0}">#{0}</a></p>',
[k.bookmark.getTitle(),a]);c+='<p><strong>Quotes:</strong></p><blockquote style="border-left: 2px solid #eee; padding-left: 1em; margin-left: 1em;">'+a+x.AnnotationFormatter.format({mode:1,includePageComments:true})+"</blockquote>";return c},trySend:function(){var a=za.string.strip(this.jSubject.val());if(!a){L.notifyAlert("Please input subject");return false}a={toAllFriends:false,toUsers:[],toEmails:[],toLists:[],mode:2,subject:a,body:this.composeMessage(za.string.stripTags(this.jTxtMsg.val()))};
if(this.jCheckQuotes.is(":checked"))a.bookmarkUrl=k.bookmark.url;var c=this.piku.getRecItems();if(!c){L.notifyAlert("Please input recipients");return false}a.toUsers=c.friends;a.toEmails=c.emails;a.toLists=c.lists;k.myContacts=JSON.parse(JSON.stringify(ca.contacts));x.Messenger.send({name:"updateGlobalData",details:{myContacts:k.myContacts}});z.shareBookmark(a,function(d){if(d.code==1){L.notifyOK("Message sent");S.hide()}else L.notifyAlert("Message not sent")});return true},getMessageBody:function(){return this.jTxtMsg.val()}};
DlgShare_piku={onMyContactsUpdate:function(){this.piku&&this.piku.setContacts(k.myContacts)},initAutocompleteContacts:function(){this.piku=new ca({rec:"#forwardTo",contacts:k.myContacts,maxRecipients:20,width:"100%",maxHeight:180,scanType:"all"})}};V(S.tabs.email,DlgShare_piku);S.onMyContactsUpdate=function(){S.tabs.email.onMyContactsUpdate()};x.AnnotationFormatter={format:function(a){a=V({mode:3,includePageComments:false},a||{});var c=(a.mode&2)==2,d=(a.mode&1)==1;I("[AnnotationFormatter] format mode:",
a.mode,"includeOthers",c,"includePrivate",d);var f="";if(a.includePageComments)f+="<ul>"+k.pageComments.filter(function(h){return(c?true:h.user==k.user)&&(d?true:h.mode!=2)}).map(function(h){return'<li style="line-height:150%;margin-bottom:.6em;">'+za.string.stripTags(h.content)+"</li>"}).join("\n")+"</ul>";f+="<ul>"+k.annotations.filter(function(h){return(c?true:h.user==k.user)&&(d?true:h.mode!=2)}).map(function(h){var i="";if(h.type==ja)i=za.string.stripTags(h.content);else if(h.type==Qa)i=za.string.evalTpl('<img src="#{0}" title="#{1}" alt="#{1}">(image)',
[h.extra.imageUrl,""]);else if(h.type==ga)i='<img src="http://www.diigo.com/images/v2/float_note.gif" />(floating sticky note)';else if(h.type==3)i="(flash movie)"+h.content;else if(h.type==4)i="(video)"+h.content;return za.string.evalTpl('<li style="line-height:150%;margin-bottom:.6em;">#{0} #{1} #{2}</li>',[i,h.groups?"":"","<ul>"+h.comments.filter(function(m){return(c?true:m.user==k.user)&&(d?true:m.mode!=2)}).map(function(m){return'<li style="line-height:150%;margin-bottom:.6em;">'+za.string.stripTags(m.content)+
za.string.evalTpl(' <span style="font-size:11px;color:#aaa">comment by <a href="#{0}">#{1}</a></span>',[x.urls.getUserHomepageURL(m.user),m.realName])+"</li>"}).join("\n")+"</ul>"])}).join("\n")+"</ul>";return f}};S.tabs.annotatedLink={init:function(){this.j=$("#diigolet-dialog-share-annotatedLink");this.j.find("#diigolet-annotatedLink-cancelBtn").click(function(){S.hide()});this.j.find("#diigolet-annotatedLink-saveBtn").click(function(){var a=$("#diigolet-dialog-share-annotatedLink-value").val();
x.Messenger.send({name:"copy",details:{text:a}})});this.jInput=$("#diigolet-dialog-share-annotatedLink-value").focus(function(){var a=this;setTimeout(function(){a.select()},13)})},show:function(){var a=this;a.shown=true;a.jInput=$("#diigolet-dialog-share-annotatedLink-value").addClass("loading").val(chrome.i18n.getMessage("share_loadingAnnotatedLink"));Aa.get(k.bookmark.url,function(c){a.jInput.removeClass("loading").val(c);$("#diigolet-dialog-share-annotatedLink-optLinks a:first").attr("href",c)})}};
var wa={editMode:false,drawColor:"red",fontSize:14,actions:[],reTagShown:false,luTagShown:false,initSelectedCapture:function(){function a(q){r=document.getElementById("draw-canvas");o=r.getContext("2d");s=document.getElementById("bgcanvas");l=s.getContext("2d");if(q=="diigosc-text-btn"){$("#diigosc-colorpanel").addClass("text-mode");$("#bgcanvas").css("cursor","text")}else if($("#diigosc-colorpanel").hasClass("text-mode")){$("#diigosc-colorpanel").removeClass("text-mode");$("#bgcanvas").css("cursor",
"crosshair")}if(w.editMode==true)if(q=="diigosc-tag-btn")w.showSavePupop("screenshot");else q=="diigosc-attach-btn"?wa.attachToBookmark():w.diigoscDraw(q);else{var t=$("#diigolet_screenshot_center").width(),u=$("#diigolet_screenshot_center").height(),y=$("#diigolet_screenshot_center").offset().top,B=$("#diigolet_screenshot_center").offset().left;if($("#diigosc-savepanel").hasClass("up")){$("#diigosc-editpanel").hide();setTimeout(function(){chrome.extension.sendRequest({name:"capture",target:q,cw:t,
ch:u,ct:y,cl:B})},50)}else chrome.extension.sendRequest({name:"capture",target:q,cw:t,ch:u,ct:y,cl:B})}}function c(q){h(C,"left",q.pageX+5+"px");h(C,"top",q.pageY+5+"px")}function d(q){if(q.button==0){wrapper.removeEventListener("mousemove",c,false);h(C,"display","none");q.preventDefault();var t=q.pageX,u=q.pageY,y,B,E=document.getElementById("diigolet_screenshot_size"),G=document.getElementById("diigosc-editpanel"),fa=function(O){h(wrapper,"background-color","rgba(0,0,0,0)");B=O.pageX-t;y=O.pageY-
u;E.children[0].innerHTML=Math.abs(B)+" X "+Math.abs(y);i(t,u,B,y);m(t,u,B,y)},aa=function(O){if((O.pageX-t==0||O.pageY-u==0)&&$("#diigolet_screenshot_center").width()==0){h(wrapper,"background-color","rgba(0,0,0,0)");E.children[0].innerHTML=Math.abs(200)+" X "+Math.abs(200);i(t-100,u-100,200,200);m(t-100,u-100,200,200)}wrapper.removeEventListener("mousedown",d,false);wrapper.removeEventListener("mousemove",fa,false);wrapper.removeEventListener("mouseup",aa,false);h(document.getElementById("diigosc-editpanel"),
"display","block");h(E,"display","block");f();O=-(195-B)/2;B<190?h(G,"right",O+"px"):h(G,"right","0px");n()};wrapper.addEventListener("mousemove",fa,false);wrapper.addEventListener("mouseup",aa,false)}}function f(){var q=$("#diigolet_screenshot_center").offset().top-30,t=$("#diigolet_screenshot_center").offset().left,u=$("#diigolet_screenshot_center").width(),y=$("#diigolet_screenshot_center").height(),B=$("#diigolet_screenshot_center").offset().top-document.body.scrollTop;if(document.body.scrollTop+
window.innerHeight-$("#diigolet_screenshot_center").offset().top-y>93){y=$("#diigolet_screenshot_center").offset().top+y+6;$("#diigosc-colorpanel").hasClass("up")&&$("#diigosc-colorpanel").removeClass("up")}else{y=B>93?$("#diigolet_screenshot_center").offset().top-36:q+y;$("#diigosc-colorpanel").addClass("up");$("#diigosc-savepanel").addClass("up")}u=t+(u-248);h(document.getElementById("diigolet_screenshot_size"),"left",t+"px");h(document.getElementById("diigolet_screenshot_size"),"top",q+"px");h(document.getElementById("diigosc-editpanel"),
"left",u+"px");h(document.getElementById("diigosc-editpanel"),"top",y+"px")}function h(q,t,u){q.style.setProperty(t,u)}function i(q,t,u,y){var B=document.body.scrollHeight,E=document.body.scrollWidth,G=u>=0?q+u:q,fa=y>=0?t:t+y,aa=u>=0?E-q-u:E-q;t=y>=0?t+y:t;q=u>=0?E-q:E-q-u;u=B-t;E=E-q;B=B-fa;y=document.getElementById("diigolet_screenshot_top");var O=document.getElementById("diigolet_screenshot_right"),X=document.getElementById("diigolet_screenshot_bottom"),U=document.getElementById("diigolet_screenshot_left");
h(y,"width",G+"px");h(y,"height",fa+"px");h(O,"width",aa+"px");h(O,"height",t+"px");h(X,"width",q+"px");h(X,"height",u+"px");h(U,"width",E+"px");h(U,"height",B+"px")}function m(q,t,u,y){q=u>=0?q:q+u;t=y>=0?t:t+y;var B=document.getElementById("diigolet_screenshot_center");h(B,"width",Math.abs(u)+"px");h(B,"height",Math.abs(y)+"px");h(B,"top",t+"px");h(B,"left",q+"px")}function n(){var q=document.getElementById("diigolet_screenshot_center");dragresize=new DragResize("dragresize",{maxLeft:document.body.scrollWidth-
5,maxTop:docH-5});var t=document.getElementById("diigolet_screenshot_size");document.getElementById("diigosc-editpanel");dragresize.isElement=function(u){if(u.className&&u.className.indexOf("drsElement")>-1)return true};dragresize.isHandle=function(u){if(u.className&&u.className.indexOf("drsMoveHandle")>-1)return true};dragresize.ondragmove=function(){var u=dragresize.elmX,y=dragresize.elmY,B=dragresize.elmW,E=dragresize.elmH;t.children[0].innerHTML=Math.abs(B)+" X "+Math.abs(E);i(u,y,B,E);m(u,y,
B,E);f()};dragresize.apply(wrapper);dragresize.select(q)}if(!($("#diigosc-all").length>0))if(La(window.location.href))if(!k.permissions.premium||k.permissions.capture){if(!($("#diigosc-all").length>0)){var w=this;docH=document.body.scrollHeight;docW=document.body.scrollWidth;if(!document.getElementById("diigolet_screenshot_wrapper")){var D=document.createElement("div");document.body.parentNode.appendChild(D);D.innerHTML+='<div id="diigosc-sc" ondragstart="return false;" ondrop="return false;"><canvas id="bgcanvas"height="0"width="0"></canvas><canvas id="draw-canvas"height="0"width="0"></canvas><span id="diigosc-select-tip"style="display:none">Click and drag to select</span><div id="diigolet_screenshot_wrapper"><div id="diigolet_screenshot_top"></div><div id="diigolet_screenshot_right"></div><div id="diigolet_screenshot_bottom"></div><div id="diigolet_screenshot_left"></div><div id="diigolet_screenshot_center"class="drsElement drsMoveHandle"></div><div id="diigolet_screenshot_size"style="min-width:70px;"><span>0 X 0</span></div><div id="diigosc-editpanel"><div id="diigosc-rect"class="diigosc-editpanel-btn"title="rectangle"><div id="diigosc-rect-btn"></div></div><div id="diigosc-round"class="diigosc-editpanel-btn"title="ellipse"><div id="diigosc-round-btn"></div></div><div id="diigosc-text"class="diigosc-editpanel-btn"title="text"><div id="diigosc-text-btn"></div></div><div id="diigosc-arrow"class="diigosc-editpanel-btn"title="arrow"><div id="diigosc-arrow-btn"></div></div><div id="diigosc-sep"class="diigosc-editpanel-btn"></div><div id="diigosc-undo"class="diigosc-editpanel-btn"title="undo"><div id="diigosc-undo-btn"class="disable"></div></div><div id="diigosc-sep"class="diigosc-editpanel-btn"></div><div id="diigosc-cancel"class="diigosc-editpanel-btn"title="cancel"><div id="diigosc-cancel-btn"></div></div><div id="diigosc-save"class="diigosc-editpanel-btn"title="save"><div id="diigosc-save-btn"></div></div><div id="diigosc-colorpanel"><div id="diigosc-triangle"></div><div id="colorpanel"><div id="current-color"><div class="capture-red"></div></div><div class="color-cell"><div class="capture-black"></div></div><div class="color-cell"><div class="capture-gray"></div></div><div class="color-cell"><div class="capture-red"></div></div><div class="color-cell"><div class="capture-orange"></div></div><div class="color-cell"><div class="capture-yellow"></div></div><div class="color-cell"><div class="capture-green"></div></div><div class="color-cell"><div class="capture-white"></div></div><div class="color-cell"><div class="capture-light-gray"></div></div><div class="color-cell"><div class="capture-cyan"></div></div><div class="color-cell"><div class="capture-blue"></div></div><div class="color-cell"><div class="capture-purple"></div></div><div class="color-cell"><div class="capture-pink"></div></div></div><div id="fontSize"><div id="sep"></div><div class="font-cell current"id="small"></div><div class="font-cell"id="middle"></div><div class="font-cell"id="large"></div></div></div><div id="diigosc-savepanel"><div id="diigosc-triangle"></div><div id="diigosc-tag-btn" class="diigosc-savepanel-btn">Tag as a stand-alone item</div><div id="diigosc-attach-btn" class="diigosc-savepanel-btn">Attach it to the page URL</div></div></div>';
D.id="diigosc-all";var A=$(window).scrollTop();$("html").css("overflow","hidden");J.shown&&J.adjustPosition();$(window).bind("scroll",function(){$(window).scrollTop(A);return false})}$("body").addClass("unselectable");wrapper=document.getElementById("diigolet_screenshot_wrapper");h(wrapper,"display","none");h(wrapper,"width",document.body.scrollWidth+"px");h(wrapper,"height",document.body.scrollHeight+"px");h(wrapper,"display","block");document.body.addEventListener("keydown",function(q){q.keyCode==
27&&w.removeSelected()},false);wrapper.addEventListener("mousedown",d,false);var C=document.getElementById("diigosc-select-tip");C.style.display="block";wrapper.addEventListener("mousemove",c,false);var r,o,s,l;$(".diigosc-editpanel-btn div").bind("click",function(q){function t(){$("#diigosc-savepanel").length>0&&$("#diigosc-savepanel").hide()}q=q.target.id;if(q!="diigosc-undo-btn"){$(".diigosc-editpanel-btn").removeClass("selected");$(this).parent().addClass("selected")}switch(q){case "diigosc-rect-btn":t();
$("#diigosc-colorpanel").show().addClass("run");$("#diigosc-triangle").css("left","15px");a(q);break;case "diigosc-round-btn":t();$("#diigosc-colorpanel").show().addClass("run");$("#diigosc-triangle").css("left","44px");a(q);break;case "diigosc-text-btn":t();$("#diigosc-colorpanel").show().addClass("run");$("#diigosc-triangle").css("left","75px");a(q);break;case "diigosc-arrow-btn":t();$("#diigosc-colorpanel").show().addClass("run");$("#diigosc-triangle").css("left","105px");a(q);break;case "diigosc-undo-btn":if($("#diigosc-undo-btn").hasClass("disable"))return;
else w.undo();break;case "diigosc-cancel-btn":w.removeSelected();break;case "diigosc-save-btn":$("#diigosc-colorpanel").length>0&&$("#diigosc-colorpanel").hide();$("#diigosc-savepanel").show().addClass("play");break}});$("#diigosc-savepanel .diigosc-savepanel-btn").click(function(q){a(q.target.id)});$(".color-cell div").click(function(q){q=$(q.target).attr("class").substring(8);if(q=="light-gray")q="#C0C0C0";else if(q=="green")q="#00FF00";w.drawColor=q;$("#current-color div").css("background-color",
q)});$("#fontSize .font-cell").click(function(q){q=q.target.id;$(".text-mode #fontSize .current").removeClass("current");$(this).addClass("current");switch(q){case "small":w.fontSize=14;break;case "middle":w.fontSize=24;break;case "large":w.fontSize=36;break}})}}else{sa.init();sa.show("Screen captures")}else alert(chrome.i18n.getMessage("alertUnsupportedPage"))},removeSelected:function(){document.body.removeEventListener("keydown",this.selectedKeyDown,false);this.reInit();$("#diigosc-privatecheck").find(".op-checkbox-container").off("click");
$("#diigosc-all").empty().remove();$("#diigosc-savepopup-all").empty().remove();this.editMode=false;$("html").css("overflow","auto");$(window).unbind("scroll");$("body").removeClass("unselectable")},reInit:function(){this.editMode=false;this.drawColor="red";this.fontSize=14;this.actions=[];this.luTagShown=this.reTagShown=false},diigoscDraw:function(a){function c(w){function D(){I("newLine");$('<input class="diigosc-textinput"></input>').appendTo("#diigosc-sc").css({top:r+"px",left:o+"px",width:"20px",
color:f.drawColor,"font-size":f.fontSize+"px"}).focus().autoGrowInput({comfortZone:20,minWidth:20,maxWidth:maxW}).keydown(function(s){if($(this).width()+10>maxW&&s.keyCode>=48||parseInt($(this).css("top"))-startT+38>maxH&&s.keyCode==13)return false;var l=s.target,q=s.keyCode;I(q);if(q==13){r+=18;D()}if(q==8)if(!l.value){$(l).prev().prev().focus().end().end().next().remove().end().remove();r-=18}q==38&&$(l).prev().prev().focus();q==40&&$(l).next().next().focus();s.stopPropagation()})}var A=$("#bgcanvas").width(),
C=$("#bgcanvas").height();f.saveText();var r=startT=w.y-10,o=w.x;maxW=A-(o-offsetX);maxH=C-(r-offsetY);textFlag==1&&D();if(textFlag==2)textFlag=1}function d(w,D){function A(o,s){function l(){m.clearRect(0,0,G,fa);m.beginPath();(function(aa,O,X,U){var Y=X/2*0.5522848,pa=U/2*0.5522848,Ba=aa+X,Oa=O+U;X=aa+X/2;U=O+U/2;m.moveTo(aa,U);m.bezierCurveTo(aa,U-pa,X-Y,O,X,O);m.bezierCurveTo(X+Y,O,Ba,U-pa,Ba,U);m.bezierCurveTo(Ba,U+pa,X+Y,Oa,X,Oa);m.bezierCurveTo(X-Y,Oa,aa,U+pa,aa,U);m.closePath()})(t,t,G-2*t,
fa-2*t);m.stroke()}function q(){m.clearRect(0,0,G,fa);m.beginPath();var aa=C<u?t:G-t,O=r<y?t:fa-t,X=G-aa,U=fa-O;m.moveTo(aa,O);m.lineTo(X,U);m.stroke();(function(Y){m.beginPath();m.moveTo(Y[0][0],Y[0][1]);for(p in Y)p>0&&m.lineTo(Y[p][0],Y[p][1]);m.lineTo(Y[0][0],Y[0][1]);m.fill()})(function(Y,pa,Ba){var Oa=[];for(p in Y)Oa.push([Y[p][0]+pa,Y[p][1]+Ba]);return Oa}(function(Y,pa){var Ba=[];for(p in Y)Ba.push([Y[p][0]*Math.cos(pa)-Y[p][1]*Math.sin(pa),Y[p][0]*Math.sin(pa)+Y[p][1]*Math.cos(pa)]);return Ba}([[4,
0],[-10,-5.5],[-10,5.5]],Math.atan2(U-O,X-aa)),X,U))}var t=4,u=o,y=s,B=Math.min(u,C)-t,E=Math.min(y,r)-t,G=Math.abs(u-C)+2*t,fa=Math.abs(y-r)+2*t;$("#draw-canvas").css({left:B+"px",top:E+"px",cursor:"crosshair"}).attr({width:G,height:fa});m.strokeStyle=f.drawColor;m.fillStyle=f.drawColor;m.lineWidth=t;switch(w){case "diigosc-rect-btn":m.clearRect(0,0,G,fa);m.strokeRect(t,t,G-2*t,fa-2*t);break;case "diigosc-round-btn":l();break;case "diigosc-arrow-btn":q();break}}var C=D.x,r=D.y;$(this).mousemove(function(o){o.preventDefault();
A(o.pageX,o.pageY)}).mouseup(function(){$(this).unbind("mousemove  mouseup");$("#draw-canvas").unbind("mousedown");var o=document.getElementById("draw-canvas");f.editMode==true&&o.width*o.height!=0&&f.enableUndo();$.Draggable(o)})}var f=this;textFlag=1;var h=document.getElementById("bgcanvas"),i=document.getElementById("draw-canvas"),m=i.getContext("2d"),n=h.getContext("2d");h=document.getElementById("bgcanvas");offsetX=h.offsetLeft;offsetY=h.offsetTop;$("#draw-canvas").unbind("mousedown");$("#bgcanvas").unbind().click(function(w){a==
"diigosc-text-btn"&&c({x:w.pageX,y:w.pageY})}).mousedown(function(w){if(i.width*i.height!=0){f.saveAction({type:"draw"});n.drawImage(i,parseInt($(i).css("left"))-offsetX,parseInt($(i).css("top"))-offsetY)}else f.actions.length==0&&f.saveAction({type:"draw"});$("#draw-canvas").attr({width:0,height:0});switch(a){case "diigosc-text-btn":break;default:d(a,{x:w.pageX,y:w.pageY});break}})},saveText:function(){var a=this,c=$("#diigosc-sc").find('input[class="diigosc-textinput"]');if(c.length){var d="";c.each(function(){d+=
this.value});if(d){a.enableUndo();a.saveAction({type:"draw"});textFlag=2;c.each(function(){var f=this.value;if(f){var h=parseInt($(this).css("left")),i=parseInt($(this).css("top")),m=document.getElementById("bgcanvas").getContext("2d");m.font="bold "+a.fontSize+"px/18px Arial,Helvetica,sans-serif";m.fillStyle=$(this).css("color");m.fillText(f,h-offsetX,i+18-offsetY)}$(this).next().remove().end().remove()})}}},undo:function(){var a=document.getElementById("draw-canvas");a.getContext("2d");var c=document.getElementById("bgcanvas").getContext("2d");
if(this.actions.length!=0)if(a.width*a.height!=0){$(a).attr({width:0,height:0});this.actions.length==1&&this.disableUndo()}else{a=this.actions.pop();this.actions.length==1&&this.disableUndo();c.putImageData(a.data,0,0)}},enableUndo:function(){$("#diigosc-undo div").removeClass("disable").addClass("enable")},disableUndo:function(){$("#diigosc-undo div").removeClass("enable").addClass("disable")},saveAction:function(a){var c=document.getElementById("bgcanvas");document.getElementById("draw-canvas").getContext("2d");
var d=c.getContext("2d"),f=c.width;c=c.height;switch(a.type){case "draw":this.actions.push({type:"draw",data:d.getImageData(0,0,f,c)});break}},showSavePupop:function(a,c,d){function f(){var l=$("#diigosc-lists").empty().unbind();l.append(F.dom.buildOne("option",{value:0},["Add to a List"]));l.append(F.dom.buildOne("option",{value:-5},[Array(20).join("-")]));$(F.dom.buildOne("option",{value:-2},["Create a List..."])).appendTo(l);l.append(F.dom.buildOne("option",{value:-5},[Array(20).join("-")]));K(k.myBmLists,
function(q){l.append(F.dom.buildOne("option",{value:q.id},[q.title]))});l.append(F.dom.buildOne("option",{value:-5},[Array(20).join("-")]));$(F.dom.buildOne("option",{value:-3},["Refresh"])).appendTo(l);l.change(function(){var q=l.val();if(q==-2){$("#diigosc-lists-and-groups").find("select").hide();$("#diigosc-list-add").show().find("input").focus();l.val(0)}else if(q==-3){z.loadMyStuff("myGroups myBookmarkLists");l.val(0)}});l.val(0).change()}function h(){var l=$("#diigosc-groups").empty().unbind();
l.append(F.dom.buildOne("option",{value:0},["Share to a Group"]));l.append(F.dom.buildOne("option",{value:-5},[Array(20).join("-")]));$(F.dom.buildOne("option",{value:-2},["Create a Group..."])).appendTo(l);l.append(F.dom.buildOne("option",{value:-5},[Array(20).join("-")]));K(k.myGroups,function(q){l.append(F.dom.buildOne("option",{value:q.name},[q.displayName]))});l.append(F.dom.buildOne("option",{value:-5},[Array(20).join("-")]));$(F.dom.buildOne("option",{value:-2},["Create a Group..."])).appendTo(l);
$(F.dom.buildOne("option",{value:-3},["Refresh"])).appendTo(l);l.change(function(){var q=l.val();if(q==-2){x.openURL(x.urls.getCreateGroupURL());l.val(-1)}else if(q==-3){z.loadMyStuff("myGroups myBookmarkLists");l.val(-1)}if(q!=0&&q!=-1&&q!=-2&&q!=-3){$("#diigosc-group-tag").show();k.groupTagsDict[q]?i("group",k.groupTagsDict[q]):z.loadGroupTagsDictionary([q],function(){i("group",k.groupTagsDict[q])})}});l.val(0).change()}function i(l,q){if(l=="recommended")$("#diigosc-recommended-tag .diigo-tags-container .loading").hide();
else if(l=="group"){$("#diigosc-group-tag .diigo-tags-container .loading").hide();$("#diigosc-group-tag .diigo-tags-container").empty()}var t=q.length;t==0&&$("#diigosc-"+l+"-tag").hide();for(var u=0;u<t;u++){var y=document.createElement("div");y.className="diigo-tag";y.title=q[u];y.innerHTML=q[u];$("#diigosc-"+l+"-tag .diigo-tags-container").append(y);$(y).click(function(){var B=$(this).text();$(this).toggleClass("selected");m(B)})}}function m(l,q){var t=$("#diigosc-tag-input"),u=x.parseTags(t.val(),
true),y=$.inArray(l,u);if(q===undefined)y>=0?u.splice(y,1):u.push(l);else if(q)y==-1&&u.push(l);else y>=0&&u.splice(y,1);u=x.unparseTags(u);if(u.length)u+=" ";t.val(u);D(t[0]);n()}function n(){var l=$("#diigosc-tag-input"),q=x.parseTags(l.val(),true);$("#diigosc-tag-cloud").find(".diigosc-tag-cloud-item").each(function(){var t=$(this),u=t.text();$.inArray(u,q)!=-1?t.addClass("selected"):t.removeClass("selected")});$("#diigosc-last-used-tag .diigo-tags-container,#diigosc-recommended-tag .diigo-tags-container").find(".diigo-tag").each(function(){var t=
$(this),u=t.text();$.inArray(u,q)!=-1?t.addClass("selected"):t.removeClass("selected")})}function w(l,q){document.getElementById("diigosc-tag-edit").href="https://www.diigo.com/cloud/"+k.user;if(k.myTagsWithCount.length==0){var t=document.getElementById(l),u=document.createElement("span");u.id="no-tag";u.innerHTML="No tags";t.appendChild(u)}else{var y=Hb();t=y.topTags;var B=y.maxCount;u=y.a;var E=y.b,G=y.c,fa=t.length;y=document.createDocumentFragment();for(var aa=0;aa<fa;aa++){var O=document.createElement("a");
O.className=q;O.href="#";O.innerText=t[aa].name;var X=t[aa].count;if(X==B){O.style.fontSize="20px";O.style.fontWeight="bold"}u.forEach(function(U){if(X==U){O.style.fontSize="18px";O.style.fontWeight="bold"}});E.forEach(function(U){if(X==U){O.style.fontSize="16px";O.style.fontWeight="bold"}});G.forEach(function(U){if(X==U){O.style.fontSize="16px";O.style.fontWeight="regular"}});y.appendChild(O);O.addEventListener("click",function(U){U.preventDefault();m(this.innerText)})}t=document.getElementById(l);
t.appendChild(y)}}function D(l){var q=l.value.length;setTimeout(function(){l.focus();if(l.createTextRange){var t=l.createTextRange();t.move("character",q);t.select()}else if(l.selectionStart>=0){l.focus();l.setSelectionRange(q,q)}},13)}var A=this;chrome.extension.getURL("");if(a=="screenshot"){var C=document.getElementById("bgcanvas"),r=document.getElementById("draw-canvas");r.getContext("2d");var o=C.getContext("2d");C=$("#bgcanvas").offset();offsetX=C.left;offsetY=C.top;C=document.getElementById("bgcanvas");
r=document.getElementById("draw-canvas");A.saveText();if(r.width*r.height!=0){A.saveAction({type:"draw"});o.drawImage(r,parseInt($(r).css("left"))-offsetX,parseInt($(r).css("top"))-offsetY);$(r).attr({width:0,height:0})}}wa.updateLists=f;var s=a=="screenshot"?C.toDataURL():c;$("#diigosc-sc").hide();if($("#diigosc-savepopup-all").length>0){$("#diigosc-savepopup-all").show();$("#diigosc-savepopup").fadeIn()}else{c=document.createElement("div");c.id="diigosc-savepopup-all";c.innerHTML='<div id="diigosc-savepopup-wrapper"></div><div id="diigosc-savepopup"style="display:none;"><div id="diigosc-content"><div id="diigosc-content-top"class="_dragHandle"><div id="diigosc-icon"></div>Save to Diigo</div><div id="diigosc-content-middle"><div id="diigosc-container"><div id="diigosc-thumbnail"><img src=""><div id="diigosc-reedit"></div></div><div id="diigosc-forms"><div id="diigosc-title"><input type="text"id="diigosc-title-input"><span id="diigosc-tag-permission"></span></div><div id="diigosc-tags"><div id="diigosc-tag-input-wrapper"><div id="diigosc-tag-input-dropdown"></div><input id="diigosc-tag-input"type="text"placeholder="Input or select tags"></div><div id="diigosc-tag-cloud"><div>Select from your top 100 tags:</div><div id="diigosc-tag-cloud-container"></div><div><a id="diigosc-tag-edit"href=""target="_blank">Edit tags>></a></div></div></div><div id="diigosc-last-used-tag"><div title="Click to select all"id="diigosc-lu-tag"class="tagListHeader">Recent Use:</div><div class="diigo-tags-container"></div></div><div id="diigosc-recommended-tag"><div id="diigosc-re-tag"class="tagListHeader">Recommended:</div><div class="diigo-tags-container"><div class="loading"></div></div></div><div id="diigosc-group-tag"><div title="Click to select all"id="diigosc-gr-tag"class="tagListHeader">Group dictionary:</div><div class="diigo-tags-container"><div class="loading"></div></div></div><div id="diigosc-lists-and-groups"><div id="diigosc-list-add"><div class="diigo-alert-tip"><span>Name exsit!</span><div class="diigo-alert-tip-arrow"></div></div><input type="text"id="diigosc-list-addInput"><div id="diigosc-list-addBtn"><span class="label">Add</span><span class="spinner"></span></div><a id="diigosc-list-addCancel">Cancel</a></div><select id="diigosc-lists"style="width:146px"><option value="-1">Add to a List</option></select><select id="diigosc-groups"style="width:146px"><option value="-1">Share to a Group</option></select></div></div></div></div><div id="diigosc-content-bottom"><div id="diigosc-privatecheck"><div class="op-checkbox-container"title="Make this image private"><div class="op-checkbox"></div><div class="op-label">Private</div></div></div><a href="javascript:void(0)">cancel</a><div id="diigosc-saveBtn">Save</div></div></div></div></div>';
document.body.parentNode.appendChild(c);c=[];k.myTagsWithCount.sort(function(l,q){return l.count<q.count?1:-1});o=k.myTagsWithCount.length;for(C=0;C<o;C++)c[C]=k.myTagsWithCount[C].name;I(c);new Db("#diigosc-tag-input",{resultsClass:"diigosc ac_results2",data:c,mode:"multiple",multipleSeparator:" ,",onItemSelect:function(){P.clickedOn=true},id:"diigsc-ac"});w("diigosc-tag-cloud-container","diigosc-tag-cloud-item");$("#diigosc-savepopup-all").show();$("#diigosc-savepopup-wrapper").css("width",document.body.scrollWidth+
"px").css("height",document.body.scrollHeight+"px");$("#diigosc-savepopup").fadeIn("fast")}c=(window.screen.availWidth-514)/2;$("#diigosc-savepopup").css("left",c+"px");c=document.getElementById("diigosc-savepopup");$.Draggable(c,{handle:"._dragHandle"});$("#diigosc-savepopup").css("top",document.body.scrollTop+"px");c=document.body.scrollTop+150;$("#diigosc-savepopup").animate({top:c+"px",opacity:1},300);$("#diigosc-thumbnail img").attr("src",s);(function(){var l=document.title,q=window.location.href;
$("#diigosc-title-input").val(l);N.send({name:"initialData"},function(t){t.preloadedPrefs["prefs.bookmark.privateByDefault"]=="true"&&$("#diigosc-privatecheck").find(".op-checkbox-container").addClass("checked")});$("#diigosc-privatecheck").find(".op-checkbox-container").on("click",function(){$(this).toggleClass("checked")});$("#diigosc-lu-tag").on("click",function(){$("#diigosc-last-used-tag").find(".diigo-tag").each(function(){m($(this).addClass("selected").text(),true)})});f();h();Q.getUserData("tagsUsedLastTime",
function(t){t=t?JSON.parse(t):[];if(A.luTagShown==false){i("last-used",t);A.luTagShown=true}});if(A.reTagShown==false)if(k.recommendedTagsLoaded){i("recommended",k.recommendedTags);A.reTagShown=true}else z.loadRecommendedTags(q,l,function(){i("recommended",k.recommendedTags);A.reTagShown=true})})();a=="image"&&$("#diigosc-reedit").hide();$("#diigosc-title-input").blur(function(){$(this).val().length==0&&$(this).val("Title is needed!").css("color","red")}).focus(function(){$(this).val()=="Title is needed!"&&
$(this).val("").css("color","black")});$("#diigosc-tag-input").focus(function(){$(this).parent().addClass("active")}).blur(function(){$(this).parent().removeClass("active")}).bind("input",n);$("#diigosc-tag-input-dropdown").click(function(l){l.stopPropagation();$(this).parent().toggleClass("opened")});$("#diigosc-tag-cloud").click(function(l){l.stopPropagation()});$(document).bind("click",function(){$("#diigosc-tag-input-wrapper").removeClass("opened")});$("#diigosc-content-bottom").find("a").click(function(){A.removeSelected()});
$("#diigosc-reedit").click(function(){$("#diigosc-savepopup-all,#diigosc-savepopup").hide();$("#diigosc-sc").fadeIn();$("#diigosc-tag-input-dropdown").unbind("click");$("#diigosc-privatecheck").find(".op-checkbox-container").off("click")});$("#diigosc-lu-tag").click(function(){for(var l=$("#diigosc-last-used-tag").find(".diigo-tags-container").find(".diigo-tag"),q=l.length,t=0;t<q;t++)$("#myTags").tagit("createTag",l[t].title)});$("#diigosc-re-tag").click(function(){for(var l=$("#diigosc-recommended-tag").find(".diigo-tags-container").find(".diigo-tag"),
q=l.length,t=0;t<q;t++)$("#myTags").tagit("createTag",l[t].title)});$("#diigosc-list-addInput").on("focus",function(){$("#diigosc-list-add .diigo-alert-tip").hide()});$("#diigosc-list-addBtn").on("click",function(){if(!$(this).hasClass("processing")){var l=$("#diigosc-list-addInput").val(),q=$("#diigosc-list-add .diigo-alert-tip"),t=[],u=k.myBmLists.length,y;for(y=0;y<u;y++)t.push(k.myBmLists[y].title);if(l.match(/^\s*$/))q.show().find("span").text("Input a name");else if($.inArray(l,t)!==-1)q.show().find("span").text("Name exsited !");
else{$(this).addClass("processing");z.createList(l)}}});$("#diigosc-list-addCancel").on("click",function(){$("#diigosc-list-add .diigo-alert-tip").hide();$("#diigosc-list-add").hide();$("#diigosc-lists-and-groups").find("select").show();$("#diigosc-list-addInput").val("")});$("#diigosc-saveBtn").click(function(){var l=$("#diigosc-title-input").val();l==""&&$("#diigosc-title-input").trigger("blur");if(!(l.length==0||l=="Title is needed!")){var q=x.parseTags($("#diigosc-tag-input").val(),true);q.length>
0&&Q.setUserData({tagsUsedLastTime:JSON.stringify(q.slice(0,8))});var t=$("#diigosc-lists").val(),u=$("#diigosc-groups").val(),y=window.location.href,B=document.title,E=$("#diigosc-privatecheck").find(".op-checkbox-container").hasClass("checked")?2:0;l={dataURL:a=="screenshot"?$("#diigosc-thumbnail").find("img").attr("src"):s,title:l,tags:q,mode:E,src_url:y,src_title:B,single_item:true,list:t,groups:u};I(l);a=="screenshot"?z.uploadImage(l,"capture",false,y,{},"png","",false):z.uploadImage(l,"image",
false,y,{},d,"",false);xa(chrome.runtime.id);ia();L.init();L.notifyWait(chrome.i18n.getMessage("uploadimage_uploading"),{timeout:0});A.reInit();A.removeSelected()}})},attachToBookmark:function(){var a=document.getElementById("bgcanvas"),c=document.getElementById("draw-canvas");c.getContext("2d");var d=a.getContext("2d");a=$("#bgcanvas").offset();offsetX=a.left;offsetY=a.top;a=document.getElementById("bgcanvas");c=document.getElementById("draw-canvas");this.saveText();if(c.width*c.height!=0){this.saveAction({type:"draw"});
d.drawImage(c,parseInt($(c).css("left"))-offsetX,parseInt($(c).css("top"))-offsetY);$(c).attr({width:0,height:0})}a=a.toDataURL();d=window.location.href;a={dataURL:a,title:document.title,tags:[],mode:2,src_url:d,src_title:document.title,single_item:false};if(k.bookmark.groups.length>0){var f=[];k.bookmark.groups.forEach(function(h){f.push(h.name)});a.groups=f}z.uploadImage(a,"capture",false,d,{},"png","",true);xa(chrome.runtime.id);ia();L.init();L.notifyWait(chrome.i18n.getMessage("uploadimage_uploading"),
{timeout:0});this.reInit();this.removeSelected()}};chrome.extension.onRequest.addListener(function(a){if(a.name=="dataURL"){var c=a.cw,d=a.ch,f=a.ct,h=a.cl;$("#bgcanvas").attr("width",c);$("#bgcanvas").attr("height",d);$("#bgcanvas").css("top",f+"px");$("#bgcanvas").css("left",h+"px");wa.diigoscDraw(a.target);wa.editMode=true;var i=document.getElementById("bgcanvas").getContext("2d"),m=document.createElement("img");document.getElementById("diigolet_screenshot_center");var n=f-document.body.scrollTop,
w=h-document.body.scrollLeft;m.onload=function(){i.drawImage(m,w*window.devicePixelRatio,n*window.devicePixelRatio,c*window.devicePixelRatio,d*window.devicePixelRatio,0,0,c,d);$("#diigolet_screenshot_center").hide();$("#diigosc-editpanel").show();$("#diigolet_screenshot_wrapper>div").css("background-color","rgba(0,0,0,0.7)");if(a.target=="diigosc-tag-btn")wa.showSavePupop("screenshot");else a.target=="diigosc-attach-btn"&&wa.attachToBookmark()};m.src=a.dataURL}});jQuery.Draggable=function(a,c){function d(A){m=
false;i(document).bind("mousemove",f).bind("mouseup",h);w=A.pageX;D=A.pageY;return false}function f(A){m||n.beforeDrag(A);if(!A.undraggable){m=true;var C=parseInt(a.css("left")),r=parseInt(a.css("top")),o=A.pageX-w,s=A.pageY-D;if(n.axis=="y")o=0;else if(n.axis=="x")s=0;a.css({left:C+o,top:r+s});n.onDrag(C,r,o,s);w=A.pageX;D=A.pageY;return false}}function h(A){i(document).unbind("mousemove",f).unbind("mouseup",h);if(m){n.afterDrag(A);return false}else return true}var i=jQuery,m=false;a=this.ele=i(a);
a[0]._draggable&&a[0]._draggable.destroy();a[0]._draggable=this;var n=this.options=i.extend({handle:"",cursor:"move",axis:"",onDrag:function(){return true},beforeDrag:function(){},afterDrag:function(){}},c||{});n.handle=n.handle?i(n.handle,a):a;n.handle.css({cursor:n.cursor});var w,D;this.destroy=function(){n.handle.unbind("mousedown",d)};n.handle.bind("mousedown",d)};(function(a){a.fn.autoGrowInput=function(c){c=a.extend({maxWidth:1E3,minWidth:0,comfortZone:70},c);this.filter("input:text").each(function(){var d=
c.minWidth||a(this).width(),f="",h=a(this),i=a("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:h.css("fontSize"),fontFamily:h.css("fontFamily"),fontWeight:h.css("fontWeight"),letterSpacing:h.css("letterSpacing"),whiteSpace:"nowrap"});i.insertAfter(h);a(this).bind("keyup keydown blur update",function(){if(f!==(f=h.val())){var m=f.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");i.html(m);m=i.width();m=m+c.comfortZone>=d?m+c.comfortZone:
d;var n=h.width();(m<n&&m>=d||m>d&&m<c.maxWidth)&&h.width(m)}})});return this}})(jQuery);var ra={diigoImageClipMode:false,imageSrc:"",shown:false,init:function(){this.create()},create:function(){var a=this;if(!($("#diigo-image-clipper").length>0)){var c=document.createElement("div");c.id="diigo-image-clipper";c.innerHTML='<div id="diigo-image-menu"><div id="diigo-logo"></div><div id="diigo-save-and-tag"class="diigo-action" title="Tag as a stand-alone item"></div><!----\><div id="diigo-attach"class="diigo-action" title="Attach it to the page URL"></div></div>';
document.body.parentNode.appendChild(c);$(c).css("position","absolute");a.bindMouseOver();$("#diigo-save-and-tag").click(function(){a.saveAndTagOnClick()});$("#diigo-attach").click(function(){a.attachToBookmarkOnClick()});var d;$("#diigo-image-menu").bind("mouseenter",function(){d!=null&&clearTimeout(d);$("#diigo-image-menu").animate({width:"63px"},200)}).bind("mouseleave",function(){d=setTimeout(function(){$("#diigo-image-menu").animate({width:"18px"},200)},500)})}},bindMouseOver:function(){var a=
this,c;$(document).bind("mousemove",function(d){if(d.target.tagName=="IMG"){if(a.diigoImageClipMode){a.imageSrc=d.target.src;d=d.target;var f=$(d).offset().left,h=$(d).offset().top,i=$(d).width(),m=$(d).height();if(a.shown==false)if(i>=200||m>=200){c=h+m>document.body.scrollTop+window.innerHeight?setTimeout(function(){$("#diigo-image-clipper").css("top",h+"px").css("left",f+i-22+"px").show()},350):setTimeout(function(){$("#diigo-image-clipper").css("top",h+m-24+"px").css("left",f+i-22+"px").show()},
350);a.shown=true}}}else if(d.target.tagName=="AREA"){d=$('img[usemap="#'+d.target.parentNode.name+'"]');a.imageSrc=d[0].src;f=d.offset().left;h=d.offset().top;i=d.width();m=d.height();if(i>=200||m>=200)h+m>document.body.scrollTop+window.innerHeight?$("#diigo-image-clipper").css("top",h+"px").css("left",f+i-22+"px").show():$("#diigo-image-clipper").css("top",h+m-24+"px").css("left",f+i-22+"px").show()}else if(!(d.target.id=="diigo-save-and-tag"||d.target.id=="diigo-attach"||d.target.id=="diigo-image-menu"||
d.target.id=="diigo-logo")){c!=null&&clearTimeout(c);if(a.shown==true){$("#diigo-image-menu").css("width","18px");$("#diigo-image-clipper").hide();a.shown=false}}})},saveAndTagOnClick:function(){if(ka())if(!k.permissions.premium||k.permissions.image)chrome.extension.sendRequest({name:"saveImageToDiigo",details:{srcUrl:ra.imageSrc},Type:"tag"});else{sa.init();sa.show("Save images")}},attachToBookmarkOnClick:function(){if(ka())if(!k.permissions.premium||k.permissions.image)chrome.extension.sendRequest({name:"saveImageToDiigo",
details:{srcUrl:ra.imageSrc},Type:"attach"});else{sa.init();sa.show("Save images")}}};(function(a){var c,d;a.fn.Gtooltip=function(f){var h={fontSize:12,bgColor:"black",fColor:"white",position:"bottom",content:""};return this.each(function(){function i(){D.text(n.data("gtooltip"));var C;C=n.offset().left;var r=n.offset().top,o=n.width(),s=n.height(),l=w.width(),q=w.height(),t,u,y,B,E=navigator.userAgent.toLowerCase();E=E.indexOf("macintosh")!=-1||E.indexOf("mac os x")!=-1||E.indexOf("linux")!=-1?true:
false;switch(m.position){case "bottom":B=E?-9:-10;t=parseInt((l+2)/2);u=C-parseInt((l+14-o)/2);y=r+s+5;break;case "top":B=E?22:23;t=parseInt((l+2)/2);u=C-parseInt((l+14-o)/2);y=r-q-15;break}if(u<=0){u=C;t=(o-10)/2}else if(u>=window.innerWidth-l){u=C+o-l-12;t=C-u+(o-10)/2}C={atop:B,aleft:t,left:C,tleft:u,ttop:y};w.css("left",C.tleft).css("top",C.ttop);A.css({left:C.aleft,top:C.atop});if(m.position=="top")A.css("-webkit-transform","rotate(180deg)");else m.position=="bottom"&&A.css("-webkit-transform",
"rotate(360deg)");w.addClass("show")}var m=a.extend(h,f||{}),n=a(this),w,D,A;if(a("#gtooltip").length==0){w=a('<div id="gtooltip"></div>').appendTo(a("body"));D=a('<div id="gtooltip-content"></div>').appendTo(w);A=a('<div id="gtooltip-arrow"></div>').appendTo(w)}else{w=a("#gtooltip");D=a("#gtooltip-content");A=a("#gtooltip-arrow")}n.hover(function(){if(w.hasClass("show")){clearTimeout(d);i()}else c=setTimeout(function(){i()},350)},function(){c!=null&&clearTimeout(c);d=setTimeout(function(){w.removeClass("show")},
100)}).on("click",function(){c!=null&&clearTimeout(c);w.hasClass("show")&&w.removeClass("show")})})}})(jQuery);(function(a){function c(f){return typeof f=="object"?f:{top:f,left:f}}var d=a.scrollTo=function(f,h,i){a(window).scrollTo(f,h,i)};d.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1};d.window=function(){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(!(!this.nodeName||a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html",
"body"])!=-1))return this;var f=(this.contentWindow||this).document||this.ownerDocument||this;return a.browser.safari||f.compatMode=="BackCompat"?f.body:f.documentElement})};a.fn.scrollTo=function(f,h,i){if(typeof h=="object"){i=h;h=0}if(typeof i=="function")i={onAfter:i};if(f=="max")f=9E9;i=a.extend({},d.defaults,i);h=h||i.speed||i.duration;i.queue=i.queue&&i.axis.length>1;if(i.queue)h/=2;i.offset=c(i.offset);i.over=c(i.over);return this._scrollable().each(function(){function m(o){w.animate(C,h,
i.easing,o&&function(){o.call(this,f,i)})}var n=this,w=a(n),D=f,A,C={},r=w.is("html,body");switch(typeof D){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(D)){D=c(D);break}D=a(D,this);case "object":if(D.is||D.style)A=(D=a(D)).offset()}a.each(i.axis.split(""),function(o,s){var l=s=="x"?"Left":"Top",q=l.toLowerCase(),t="scroll"+l,u=n[t],y=d.max(n,s);if(A){C[t]=A[q]+(r?0:u-w.offset()[q]);if(i.margin){C[t]-=parseInt(D.css("margin"+l))||0;C[t]-=parseInt(D.css("border"+l+"Width"))||
0}C[t]+=i.offset[q]||0;if(i.over[q])C[t]+=D[s=="x"?"width":"height"]()*i.over[q]}else{l=D[q];C[t]=l.slice&&l.slice(-1)=="%"?parseFloat(l)/100*y:l}if(/^\d+$/.test(C[t]))C[t]=C[t]<=0?0:Math.min(C[t],y);if(!o&&i.queue){u!=C[t]&&m(i.onAfterFirst);delete C[t]}});m(i.onAfter)}).end()};d.max=function(f,h){var i=h=="x"?"Width":"Height",m="scroll"+i;if(!a(f).is("html,body"))return f[m]-a(f)[i.toLowerCase()]();i="client"+i;var n=f.ownerDocument.documentElement,w=f.ownerDocument.body;return Math.max(n[m],w[m])-
Math.min(n[i],w[i])}})(jQuery);(function(a){a.fn.scrollmarker=function(c){return this.each(function(){new a.scrollmarker(this,c)})};a.scrollmarker=function(c,d){this.options=d||{};this.marker=null;this.place=a(c);this.place.data("scrollmarker",this);this.init()};a.scrollmarker.fn=a.scrollmarker.prototype={scrollmarker:"0.0.1"};a.scrollmarker.fn.extend=a.scrollmarker.extend=a.extend;a.scrollmarker.fn.extend({init:function(){var c=this,d=this.place.attr("class").match(/id_([\w]+)/)[0];a("#"+d).length!=
0&&a("#"+d).remove();this.marker=a('<div class="diigo-scrollmarker"></div>').attr("id",d).appendTo(a("body")).click(function(){c.locate()}).addClass(this.options.markerClass||this.place.data("scrollmarker-class"));if(this.place.hasClass("blue"))this.marker.css("background-color","#0087f7");else if(this.place.hasClass("green"))this.marker.css("background-color","#00a256");else this.place.hasClass("pink")?this.marker.css("background-color","#ff3399"):this.marker.css("background-color","#ffb000");a(window).resize(function(){c.position()});
this.position()},position:function(){var c=this.place.offset().top;this.marker.height();var d=a(document).height(),f=a(window).height(),h=navigator.userAgent.toLowerCase();c=h.indexOf("macintosh")!=-1||h.indexOf("mac os x")!=-1?c/d*f:c/d*(f-34)+17;if(c<50)c=50;this.marker.css({position:"fixed",top:c,right:0})},locate:function(){a(document).scrollTo(this.place.offset().top-50,300)},remove:function(){this.marker.remove();delete this.marker;this.place.data("scrollmarker",null);delete this.place}})})(jQuery);
var sb=function(){var a={};a.init=function(c,d){if(c.attributes["data-autoTextarea"]!==true){var f=this;this.minHeight=parseFloat(getComputedStyle(c).height);if(!!this.minHeight!=false){if(d)this.maxHeight=d;c.addEventListener("input",function(){f.adjustHeight(c,d)});c.addEventListener("propertychange",function(){f.adjustHeight(c,d)});c.addEventListener("focus",function(){f.adjustHeight(c,d)});c.attributes["data-autoTextarea"]=true}}};a.adjustHeight=function(c,d){if(typeof d=="undefined")d=this.maxHeight;
var f=parseFloat(getComputedStyle(c).paddingTop)+parseFloat(getComputedStyle(c).paddingBottom);if(c._length!==c.value.length){c._length=c.value.length;c.style.height=this.minHeight+"px";if(c.scrollHeight>this.minHeight){if(d&&c.scrollHeight>d){f=d-f;c.style.overflowY="auto"}else{f=c.scrollHeight-f;c.style.overflowY="hidden"}c.style.height=f+"px"}}};return a}(),Xb=function(a){var c={};c.enabled=false;c.init=function(){var d=this;d.create();d.textarea=document.getElementById("diigolet-highlight-share-textarea");
a.init(d.textarea,500);$("#diigolet-highlight-share-close").on("click",function(){d.hide()});$("#diigolet-highlight-footer").on("click","a",function(f){if(d.enable){f=f.target.id;if(f==="diigolet-highlight-share-copybtn"){f=d.editor.val();x.Messenger.send({name:"copy",details:{text:f}});d.tip.addClass("show");setTimeout(function(){d.tip.removeClass("show")},1500)}else if(f==="diigolet-highlight-share-cancelbtn")d.hide();else if(f==="diigolet-highlight-share-twitter")N.send({name:"openWindow",details:{url:"https://twitter.com/intent/tweet?text="+
encodeURIComponent(d.editor.val())+" @diigo",name:"sharer",features:"toolbar=1,status=0,resizable=1,scrollbars=1,width=700,height=453"}});else if(f==="diigolet-highlight-share-facebook"){f=encodeURIComponent(document.title);var h=encodeURIComponent(d.ann.prettyTxt),i=encodeURIComponent(d.url);N.send({name:"openWindow",details:{url:"http://www.facebook.com/sharer.php?s=100&p[title]="+f+'&p[summary]="'+h+'"&p[url]='+i+"&p[images][0]=https://www.diigo.com/images/v6/logo.png",name:"sharer",features:"toolbar=1,status=0,resizable=1,scrollbars=1,width=700,height=453"}})}}});
$("#diigolet-highlight-share-top").find(".diigolet-question-mark").hover(function(){$(this).find(".diigolet-question-mark-tip").fadeIn()},function(){$(this).find(".diigolet-question-mark-tip").fadeOut()})};c.create=function(){this.j=$('<div id="diigolet-highlight-share" class="diigolet"><div id="diigolet-highlight-share-top" class="_dragHandle"><span>Link to this highlight</span><b class="diigolet-question-mark"><b class="diigolet-question-mark-tip">The special link below will take people straight to this highlight.\n        </b></b><!--<div id="diigolet-highlight-share-close"></div>--\></div><div id="diigolet-highlight-container"><div id="diigolet-highlight-main"><textarea name="diigolet-highlight-share" id="diigolet-highlight-share-textarea"></textarea></div><div id="diigolet-highlight-footer" class="clearfloat"><a href="javascript:void(0)" id="diigolet-highlight-share-copybtn">Copy</a><a href="javascript:void(0)" id="diigolet-highlight-share-cancelbtn">Cancel</a><a href="javascript:void(0)" id="diigolet-highlight-share-twitter" class="diigolet-highlight-social-btn" title="share to twitter"></a><a href="javascript:void(0)" id="diigolet-highlight-share-facebook" class="diigolet-highlight-social-btn" title="share to facebook"></a><span id="diigolet-highlight-share-copySuccess">Copied successfully!</span></div></div></div>\n').eq(0).appendTo(document.body);
this.editor=this.j.find("#diigolet-highlight-share-textarea");this.tip=this.j.find("#diigolet-highlight-share-copySuccess");var d=document.getElementById("diigolet-highlight-share");$.Draggable(d,{handle:"._dragHandle"})};c.show=function(d,f,h){var i=this;i.ann=d;this.j||i.init();i.j.css({top:h,left:f});i.j.addClass("show");i.disable();z.makeAnnotatedLinkWithHighlight(k.bookmark.url,3,d.id,function(m){i.build(d.prettyTxt,m.url)})};c.build=function(d,f){this.enable();this.url=f;content='"'+d+'"\n -'+
f;this.j.find("#diigolet-highlight-share-textarea").val(content);a.adjustHeight(this.textarea)};c.disable=function(){this.enabled=false;this.j.find("#diigolet-highlight-share-textarea").val("Loading......").prop("disabled",true)};c.enable=function(){this.enabled=true;this.j.find("#diigolet-highlight-share-textarea").prop("disabled",false)};c.hide=function(){this.j.removeClass("show")};return c}(sb),Ib={j:null,k:null,init:function(){var a=this;this.j=$('<div id="diigo-orphanHighlight"><div id="diigo-orphanHighlight-top" class="_dragHandle"><span>The current page no longer contains the following highlights</span><!--<b class="diigolet-question-mark"><b class="diigolet-question-mark-tip">Even if the page you did highlight before has changed, you can still see your highlights.\n        </b></b>--\><div id="diigo-orphanHighlight-close"></div></div><div id="diigo-orphanHighlight-main"><div id="diigo-orphanHighlight-notification">Added to clipboard</div><div id="diigo-orphanHighlight-box" class="diigo-customize-scrollbar"></div></div></div>\n').appendTo($("body")).hide();
this.k=$('<div id="diigo-orphanHighlight-btn" title="Orphan highlights"></div>').appendTo($("body")).on("click",function(){a.show()});for(var c=k.orphanHighlights,d=0;d<c.length;d++)a.add(c[d]);$("#diigo-orphanHighlight-close").on("click",function(){a.hide()});new $.Draggable(a.j,{handle:"._dragHandle"})},add:function(a){var c=$('<div class="diigo-orphanHighlight-item diigo-'+a.extra.color+'"><span class="diigo-orphanHighlight-item-content"></span><div class="diigo-orphanHighlight-item-copy" title="Copy this highlight">Copy</div></div>');
c.find(".diigo-orphanHighlight-item-content").html(a.content);c.appendTo($("#diigo-orphanHighlight-box"));c.find(".diigo-orphanHighlight-item-copy").on("click",function(){var d=$(this).parent().find(".diigo-orphanHighlight-item-content").text();x.Messenger.send({name:"copy",details:{text:d}});$("#diigo-orphanHighlight-notification").fadeIn().delay(1E3).fadeOut()});$("#diigo-orphanHighlight-top").find(".diigolet-question-mark").hover(function(){$(this).find(".diigolet-question-mark-tip").fadeIn()},
function(){$(this).find(".diigolet-question-mark-tip").fadeOut()})},show:function(){this.j.css({left:$(window).width()-this.j.outerWidth()-10+"px",top:"78px"});this.j.show()},hide:function(){this.j.hide()}},va=document,Jb=$(window),mb=$(va);x.$=$;diigolet.loaded=true}();
