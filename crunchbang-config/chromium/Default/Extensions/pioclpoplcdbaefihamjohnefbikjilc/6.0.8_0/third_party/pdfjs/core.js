var globalScope="undefined"===typeof window?this:window,isWorker="undefined"==typeof window,ERRORS=0,WARNINGS=1,INFOS=5,verbosity=WARNINGS;globalScope.PDFJS||(globalScope.PDFJS={});
function getPdf(h,a){var d=h;"string"===typeof h&&(d={url:h});var c=new XMLHttpRequest;c.open("GET",d.url);var b=d.headers;if(b)for(var e in b)"undefined"!==typeof b[e]&&c.setRequestHeader(e,d.headers[e]);c.mozResponseType=c.responseType="arraybuffer";b=d.url.substring(0,d.url.indexOf(":")+1);c.expected="http:"===b||"https:"===b?200:0;"progress"in d&&(c.onprogress=d.progress||void 0);var n=!1;"error"in d&&(c.onerror=function(){n||(n=!0,d.error())});c.onreadystatechange=function(b){4===c.readyState&&
(c.status===c.expected?a(c.mozResponseArrayBuffer||c.mozResponse||c.responseArrayBuffer||c.response):d.error&&!n&&(n=!0,d.error(b)))};c.send(null)}globalScope.PDFJS.getPdf=getPdf;globalScope.PDFJS.pdfBug=!1;
var Page=function(){function h(a,d,c,b){this.pageIndex=d;this.pageDict=c;this.xref=a;this.ref=b;this.displayReadyPromise=null}h.prototype={getPageProp:function(a){return this.pageDict.get(a)},inheritPageProp:function(a){for(var d=this.pageDict,c=d.get(a);void 0===c;){d=d.get("Parent");if(!d)break;c=d.get(a)}return c},get content(){return shadow(this,"content",this.getPageProp("Contents"))},get resources(){return shadow(this,"resources",this.inheritPageProp("Resources"))},get mediaBox(){var a=this.inheritPageProp("MediaBox");
isArray(a)&&4===a.length||(a=[0,0,612,792]);return shadow(this,"mediaBox",a)},get view(){var a=this.mediaBox,d=this.inheritPageProp("CropBox");return isArray(d)&&4===d.length?(d=Util.intersect(d,a))?shadow(this,"view",d):shadow(this,"view",a):shadow(this,"view",a)},get annotations(){return shadow(this,"annotations",this.inheritPageProp("Annots"))},get rotate(){var a=this.inheritPageProp("Rotate")||0;0!=a%90?a=0:360<=a?a%=360:0>a&&(a=(a%360+360)%360);return shadow(this,"rotate",a)},getContentStream:function(){var a=
this.content;if(isArray(a)){var d=this.xref,c,b=a.length,e=[];for(c=0;c<b;++c)e.push(d.fetchIfRef(a[c]));a=new StreamsSequenceStream(e)}else isStream(a)?a.reset():a||(a=new NullStream);return a},getOperatorList:function(a,d){var c=this.xref,b=this.getContentStream(),e=this.resources,c=this.pe=new PartialEvaluator(c,a,this.pageIndex,"p"+this.pageIndex+"_"),b=c.getOperatorList(b,e,d);c.optimizeQueue(b);return b},extractTextContent:function(){var a=this.xref,d=this.getContentStream(),c=a.fetchIfRef(this.resources);
return(new PartialEvaluator(a,{on:function(){},send:function(){}},this.pageIndex,"p"+this.pageIndex+"_")).getTextContent(d,c)},getLinks:function(){var a=[],d=this.getAnnotations(),c,b=d.length;for(c=0;c<b;++c)"Link"==d[c].type&&a.push(d[c]);return a},getAnnotations:function(){function a(b,e){for(var a=b;a&&!a.has(e);)a=a.get("Parent");return a?a.get(e):null}function d(b){if(!b)return!1;var e=b.indexOf(":");if(0>e)return!1;switch(b.substr(0,e)){case "http":case "https":case "ftp":case "mailto":return!0;
default:return!1}}var c=this.xref,b=this.annotations||[],e,n=b.length,q=[];for(e=0;e<n;++e){var l=b[e],f=c.fetch(l);if(isDict(f)){var g=f.get("Subtype");if(isName(g)){var h=f.get("Rect"),k={};k.type=g.name;k.rect=h;switch(g.name){case "Link":if(g=f.get("A"))switch(g.get("S").name){case "URI":f=g.get("URI");d(f)||(f="");k.url=f;break;case "GoTo":k.dest=g.get("D");break;case "GoToR":f=g.get("F");isDict(f)&&(f=f.get("F")||"");d(f)||(f="");k.url=f;k.dest=g.get("D");break;default:TODO("unrecognized link type: "+
g.get("S").name)}else f.has("Dest")&&(f=f.get("Dest"),k.dest=isName(f)?f.name:f);break;case "Widget":g=a(f,"FT");if(!isName(g))break;k.fieldType=g.name;for(var g=[],m=f;m;){var h=m.get("Parent"),t=m.getRaw("Parent");if(m=m.get("T"))g.unshift(stringToPDFString(m));else{var m=h.get("Kids"),p,r;p=0;for(r=m.length;p<r;p++){var s=m[p];if(s.num==l.num&&s.gen==l.gen)break}g.unshift("`"+p)}m=h;l=t}k.fullName=g.join(".");g=stringToPDFString(f.get("TU")||"");k.alternativeText=g;g=a(f,"DA")||"";if(g=/([\d\.]+)\sTf/.exec(g))k.fontSize=
parseFloat(g[1]);k.textAlignment=a(f,"Q");k.flags=a(f,"Ff")||0;break;case "Text":g=f.get("Contents");l=f.get("T");k.content=stringToPDFString(g||"");k.title=stringToPDFString(l||"");k.name=f.has("Name")?f.get("Name").name:"Note";break;default:TODO("unimplemented annotation type: "+g.name)}q.push(k)}}}return q}};return h}(),PDFDocument=function(){function h(b,e){isStream(b)?a.call(this,b,e):isArrayBuffer(b)?a.call(this,new Stream(b),e):error("PDFDocument: Unknown argument type")}function a(b,e){assertWellFormed(0<
b.length,"stream must have data");this.stream=b;this.setup(e);this.acroForm=this.catalog.catDict.get("AcroForm")}function d(b,e,a,c){var d=b.pos,f=b.end,g="";d+a>f&&(a=f-d);for(f=0;f<a;++f)g+=b.getChar();b.pos=d;e=c?g.lastIndexOf(e):g.indexOf(e);if(-1==e)return!1;b.pos+=e;return!0}var c={get entries(){return shadow(this,"entries",{Title:isString,Author:isString,Subject:isString,Keywords:isString,Creator:isString,Producer:isString,CreationDate:isString,ModDate:isString,Trapped:isName})}};h.prototype=
{get linearization(){var b=this.stream.length,e=!1;if(b)try{e=new Linearization(this.stream),e.length!=b&&(e=!1)}catch(a){warn("The linearization data is not available or unreadable pdf data is found"),e=!1}return shadow(this,"linearization",e)},get startXRef(){var b=this.stream,e=0;if(this.linearization)b.reset(),d(b,"endobj",1024)&&(e=b.pos+6);else{for(var a=!1,c=b.end;!a&&0<c;)c-=1015,0>c&&(c=0),b.pos=c,a=d(b,"startxref",1024,!0);if(a){b.skip(9);do e=b.getChar();while(Lexer.isSpace(e));for(a="";9>=
e-0;)a+=e,e=b.getChar();e=parseInt(a,10);isNaN(e)&&(e=0)}}return shadow(this,"startXRef",e)},get mainXRefEntriesOffset(){var b=0,a=this.linearization;a&&(b=a.mainXRefEntriesOffset);return shadow(this,"mainXRefEntriesOffset",b)},checkHeader:function(){var b=this.stream;b.reset();if(d(b,"%PDF-",1024)){b.moveStart();for(var a="",c;" "<(c=b.getChar())&&!(12<=a.length);)a+=c;this.pdfFormatVersion=a.substring(5)}},setup:function(b){this.checkHeader();this.xref=b=new XRef(this.stream,this.startXRef,this.mainXRefEntriesOffset,
b);this.catalog=new Catalog(b)},get numPages(){var b=this.linearization;return shadow(this,"numPages",b?b.numPages:this.catalog.numPages)},getDocumentInfo:function(){var b={PDFFormatVersion:this.pdfFormatVersion};if(this.xref.trailer.has("Info")){var a=this.xref.trailer.get("Info"),d=c.entries,h;for(h in d)if(a.has(h)){var l=a.get(h);d[h](l)?b[h]="string"!==typeof l?l:stringToPDFString(l):info('Bad value in document info for "'+h+'"')}}return shadow(this,"getDocumentInfo",b)},getFingerprint:function(){var b=
this.xref,a;if(b.trailer.has("ID"))a="",b.trailer.get("ID")[0].split("").forEach(function(b){a+=Number(b.charCodeAt(0)).toString(16)});else{b=this.stream.bytes.subarray(0,100);b=calculateMD5(b,0,b.length);a="";for(var c=0,d=b.length;c<d;c++)a+=Number(b[c]).toString(16)}return shadow(this,"getFingerprint",a)},getPage:function(a){return this.catalog.getPage(a)}};return h}();
